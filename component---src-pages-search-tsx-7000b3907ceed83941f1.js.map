{"version":3,"file":"component---src-pages-search-tsx-7000b3907ceed83941f1.js","mappings":"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","sources":["webpack://gatsby-starter-blog-github-theme/./src/hooks/useFilteredPosts.ts","webpack://gatsby-starter-blog-github-theme/./src/components/NoContent.tsx","webpack://gatsby-starter-blog-github-theme/./src/containers/SearchResult.tsx","webpack://gatsby-starter-blog-github-theme/./src/pages/search.tsx"],"sourcesContent":["import { useLayoutEffect, useState } from 'react';\nimport { useContext, useDispatch } from '../store/context';\n\ninterface Params {\n  series?: string;\n  searchFilter?: string;\n  searchKeyword?: string;\n  tag?: string;\n}\n\nconst useFilteredPosts = ({ series, searchFilter, searchKeyword, tag }: Params) => {\n  const dispatch = useDispatch();\n\n  const { posts } = useContext();\n\n  const [ filteredPosts, setFilteredPosts ] = useState(posts);\n\n  const getPosts = () => {\n    if (searchKeyword) {\n      return posts\n        .filter(({ node: { frontmatter: { title }, html } }) => {\n          const hasTitle = title.toLowerCase()\n            .includes(searchKeyword.toLowerCase());\n          const hasContent = html?.toLowerCase()\n            .includes(searchKeyword.toLowerCase());\n\n          if (searchFilter === 'title') return hasTitle;\n          if (searchFilter === 'content') return hasContent;\n\n          return (hasTitle || hasContent);\n        });\n    }\n\n    if (tag) {\n      dispatch({ type: 'setCurrentTag', payload: { tag: tag.toLowerCase() } });\n\n      return posts\n        .filter(({ node: { frontmatter: { tags } } }) => {\n          return tags?.some(t => t?.toLowerCase() === tag.toLowerCase());\n        });\n    }\n\n    if (series) {\n      dispatch({ type: 'setCurrentSeries', payload: { series } });\n\n      return posts\n        .filter(({ node: { frontmatter } }) => frontmatter.series === series);\n    }\n\n    return posts;\n  };\n\n  useLayoutEffect(() => {\n    const filteredPosts = getPosts();\n\n    setFilteredPosts(filteredPosts);\n  }, [ posts, tag, series, searchKeyword, searchFilter ]);\n\n  return filteredPosts;\n};\n\nexport default useFilteredPosts;\n","const NoContent = ({ prefix } : {prefix: string}) => {\n  return (\n    <p>{prefix} 없습니다.</p>\n  );\n};\n\nexport default NoContent;\n","import styled from 'styled-components';\nimport { previews } from '../styles/modules';\n\nimport useFilteredPosts from '../hooks/useFilteredPosts';\nimport useLoadMore from '../hooks/useLoadMore';\n\nimport PostPreview from '../components/PostPreview';\nimport NoContent from '../components/NoContent';\nimport LoadMore from '../components/LoadMore';\nimport ScrollToTop from '../components/ScrollToTop';\n\nimport { SearchPageProps } from '../pages/search';\n\nconst SearchResult = ({ locationState }: {locationState: SearchPageProps['location']['state']}) => {\n  const filteredPosts = useFilteredPosts({\n    tag: locationState?.tag,\n    series: locationState?.series,\n    searchFilter: locationState?.searchFilter,\n    searchKeyword: locationState?.searchKeyword,\n  });\n\n  const { offset, loadMore } = useLoadMore(filteredPosts);\n\n  return (\n    <Container>\n      {filteredPosts.length === 0\n        ? <NoContent prefix=\"검색 결과가\"/>\n        : filteredPosts\n          .slice(0, offset)\n          .map(({ node: {\n            id,\n            excerpt,\n            frontmatter: {\n              path,\n              date,\n              title,\n              tags,\n            },\n          } }) =>\n            <PostPreview\n              key={id}\n              path={path}\n              date={date}\n              title={title}\n              tags={tags ?? []}\n              excerpt={excerpt}\n            />\n          )}\n      <LoadMore load={loadMore}/>\n      <ScrollToTop />\n    </Container>\n  );\n};\n\nexport default SearchResult;\n\nconst Container = styled.ul`\n  ${previews}\n`;\n","import { PageProps } from 'gatsby';\n\nimport SearchResult from '../containers/SearchResult';\n\nimport SidebarProvider from '../components/SidebarProvider';\nimport SEO from '../components/SEO';\n\nexport type SearchPageProps = PageProps<object, object, Record<string, string>>;\n\nexport default ({ location }: SearchPageProps) => (\n  <SidebarProvider>\n    <SearchResult locationState = {location.state}/>\n  </SidebarProvider>\n);\n\nexport const Head = () => (\n  <SEO subTitle=\"검색\" />\n);\n"],"names":["series","searchFilter","searchKeyword","tag","dispatch","useDispatch","posts","useContext","useState","filteredPosts","setFilteredPosts","useLayoutEffect","filter","node","title","frontmatter","html","hasTitle","toLowerCase","includes","hasContent","type","payload","tags","some","t","prefix","_jsxs","locationState","useFilteredPosts","useLoadMore","offset","loadMore","Container","length","_jsx","NoContent","slice","map","id","excerpt","path","date","PostPreview","LoadMore","load","ScrollToTop","styled","previews","location","SidebarProvider","children","SearchResult","state","Head","SEO","subTitle"],"sourceRoot":""}