{"version":3,"file":"917-bb3088b01092e99d9b63.js","mappings":"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","sources":["webpack://gatsby-starter-blog-github-theme/./node_modules/fromentries/index.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.events/index.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/index.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/createPatternBuilder.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/generateBounds.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/generateCreateBody.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/generateCreateDragForce.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/generateCreateSpringForce.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/generateIntegrator.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/generateQuadTree.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/codeGenerators/getVariableName.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/createPhysicsSimulator.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.forcelayout/lib/spring.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.graph/index.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.merge/index.js","webpack://gatsby-starter-blog-github-theme/./node_modules/ngraph.random/index.js","webpack://gatsby-starter-blog-github-theme/./node_modules/jerrypick/dist/jerrypick.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/react-kapsule/dist/react-kapsule.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/controls/DragControls.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-dispatch/src/dispatch.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-timer/src/timer.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/lcg.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/simulation.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/constant.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/jiggle.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/link.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/add.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/half.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/x.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/binarytree.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/add.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/quad.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/x.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/y.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/quadtree.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/cover.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/data.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/extent.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/find.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/remove.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/root.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/size.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/visit.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-binarytree/src/visitAfter.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/add.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/octant.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/x.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/y.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/z.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/octree.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/cover.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/data.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/extent.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/find.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/remove.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/root.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/size.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/visit.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-quadtree/src/visitAfter.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/manyBody.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/center.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/cover.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/data.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/extent.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/find.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/remove.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/root.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/size.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/visit.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-octree/src/visitAfter.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/isObject.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_freeGlobal.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_root.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/now.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_trimmedEndIndex.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_baseTrim.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_Symbol.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_getRawTag.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_objectToString.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/_baseGetTag.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/isObjectLike.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/isSymbol.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/toNumber.js","webpack://gatsby-starter-blog-github-theme/./node_modules/lodash-es/debounce.js","webpack://gatsby-starter-blog-github-theme/./node_modules/kapsule/dist/kapsule.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/accessor-fn/dist/accessor-fn.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-array/src/min.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-array/src/max.js","webpack://gatsby-starter-blog-github-theme/./node_modules/index-array-by/dist/index-array-by.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/data-joint/dist/data-joint.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/internmap/src/index.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-scale/src/init.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-scale/src/ordinal.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-scale-chromatic/src/colors.js","webpack://gatsby-starter-blog-github-theme/./node_modules/tinycolor2/esm/tinycolor.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three-forcegraph/dist/three-forcegraph.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/d3-force-3d/src/radial.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/controls/TrackballControls.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/controls/OrbitControls.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/controls/FlyControls.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/shaders/CopyShader.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/postprocessing/Pass.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/postprocessing/ShaderPass.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/postprocessing/MaskPass.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/postprocessing/EffectComposer.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three/examples/jsm/postprocessing/RenderPass.js","webpack://gatsby-starter-blog-github-theme/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://gatsby-starter-blog-github-theme/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://gatsby-starter-blog-github-theme/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://gatsby-starter-blog-github-theme/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://gatsby-starter-blog-github-theme/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://gatsby-starter-blog-github-theme/./node_modules/polished/dist/polished.esm.js","webpack://gatsby-starter-blog-github-theme/./node_modules/@tweenjs/tween.js/dist/tween.esm.js","webpack://gatsby-starter-blog-github-theme/./node_modules/three-render-objects/dist/three-render-objects.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/3d-force-graph/dist/3d-force-graph.mjs","webpack://gatsby-starter-blog-github-theme/./node_modules/react-force-graph-3d/dist/react-force-graph-3d.mjs"],"sourcesContent":["/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nmodule.exports = function fromEntries (iterable) {\n  return [...iterable].reduce((obj, [key, val]) => {\n    obj[key] = val\n    return obj\n  }, {})\n}\n","module.exports = function eventify(subject) {\n  validateSubject(subject);\n\n  var eventsStorage = createEventsStorage(subject);\n  subject.on = eventsStorage.on;\n  subject.off = eventsStorage.off;\n  subject.fire = eventsStorage.fire;\n  return subject;\n};\n\nfunction createEventsStorage(subject) {\n  // Store all event listeners to this hash. Key is event name, value is array\n  // of callback records.\n  //\n  // A callback record consists of callback function and its optional context:\n  // { 'eventName' => [{callback: function, ctx: object}] }\n  var registeredEvents = Object.create(null);\n\n  return {\n    on: function (eventName, callback, ctx) {\n      if (typeof callback !== 'function') {\n        throw new Error('callback is expected to be a function');\n      }\n      var handlers = registeredEvents[eventName];\n      if (!handlers) {\n        handlers = registeredEvents[eventName] = [];\n      }\n      handlers.push({callback: callback, ctx: ctx});\n\n      return subject;\n    },\n\n    off: function (eventName, callback) {\n      var wantToRemoveAll = (typeof eventName === 'undefined');\n      if (wantToRemoveAll) {\n        // Killing old events storage should be enough in this case:\n        registeredEvents = Object.create(null);\n        return subject;\n      }\n\n      if (registeredEvents[eventName]) {\n        var deleteAllCallbacksForEvent = (typeof callback !== 'function');\n        if (deleteAllCallbacksForEvent) {\n          delete registeredEvents[eventName];\n        } else {\n          var callbacks = registeredEvents[eventName];\n          for (var i = 0; i < callbacks.length; ++i) {\n            if (callbacks[i].callback === callback) {\n              callbacks.splice(i, 1);\n            }\n          }\n        }\n      }\n\n      return subject;\n    },\n\n    fire: function (eventName) {\n      var callbacks = registeredEvents[eventName];\n      if (!callbacks) {\n        return subject;\n      }\n\n      var fireArguments;\n      if (arguments.length > 1) {\n        fireArguments = Array.prototype.splice.call(arguments, 1);\n      }\n      for(var i = 0; i < callbacks.length; ++i) {\n        var callbackInfo = callbacks[i];\n        callbackInfo.callback.apply(callbackInfo.ctx, fireArguments);\n      }\n\n      return subject;\n    }\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('Eventify cannot use falsy object as events subject');\n  }\n  var reservedWords = ['on', 'fire', 'off'];\n  for (var i = 0; i < reservedWords.length; ++i) {\n    if (subject.hasOwnProperty(reservedWords[i])) {\n      throw new Error(\"Subject cannot be eventified, since it already has property '\" + reservedWords[i] + \"'\");\n    }\n  }\n}\n","module.exports = createLayout;\nmodule.exports.simulator = require('./lib/createPhysicsSimulator');\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates force based layout for a given graph.\n *\n * @param {ngraph.graph} graph which needs to be laid out\n * @param {object} physicsSettings if you need custom settings\n * for physics simulator you can pass your own settings here. If it's not passed\n * a default one will be created.\n */\nfunction createLayout(graph, physicsSettings) {\n  if (!graph) {\n    throw new Error('Graph structure cannot be undefined');\n  }\n\n  var createSimulator = (physicsSettings && physicsSettings.createSimulator) || require('./lib/createPhysicsSimulator');\n  var physicsSimulator = createSimulator(physicsSettings);\n  if (Array.isArray(physicsSettings)) throw new Error('Physics settings is expected to be an object');\n\n  var nodeMass = graph.version > 19 ? defaultSetNodeMass : defaultArrayNodeMass;\n  if (physicsSettings && typeof physicsSettings.nodeMass === 'function') {\n    nodeMass = physicsSettings.nodeMass;\n  }\n\n  var nodeBodies = new Map();\n  var springs = {};\n  var bodiesCount = 0;\n\n  var springTransform = physicsSimulator.settings.springTransform || noop;\n\n  // Initialize physics with what we have in the graph:\n  initPhysics();\n  listenToEvents();\n\n  var wasStable = false;\n\n  var api = {\n    /**\n     * Performs one step of iterative layout algorithm\n     *\n     * @returns {boolean} true if the system should be considered stable; False otherwise.\n     * The system is stable if no further call to `step()` can improve the layout.\n     */\n    step: function() {\n      if (bodiesCount === 0) {\n        updateStableStatus(true);\n        return true;\n      }\n\n      var lastMove = physicsSimulator.step();\n\n      // Save the movement in case if someone wants to query it in the step\n      // callback.\n      api.lastMove = lastMove;\n\n      // Allow listeners to perform low-level actions after nodes are updated.\n      api.fire('step');\n\n      var ratio = lastMove/bodiesCount;\n      var isStableNow = ratio <= 0.01; // TODO: The number is somewhat arbitrary...\n      updateStableStatus(isStableNow);\n\n\n      return isStableNow;\n    },\n\n    /**\n     * For a given `nodeId` returns position\n     */\n    getNodePosition: function (nodeId) {\n      return getInitializedBody(nodeId).pos;\n    },\n\n    /**\n     * Sets position of a node to a given coordinates\n     * @param {string} nodeId node identifier\n     * @param {number} x position of a node\n     * @param {number} y position of a node\n     * @param {number=} z position of node (only if applicable to body)\n     */\n    setNodePosition: function (nodeId) {\n      var body = getInitializedBody(nodeId);\n      body.setPosition.apply(body, Array.prototype.slice.call(arguments, 1));\n    },\n\n    /**\n     * @returns {Object} Link position by link id\n     * @returns {Object.from} {x, y} coordinates of link start\n     * @returns {Object.to} {x, y} coordinates of link end\n     */\n    getLinkPosition: function (linkId) {\n      var spring = springs[linkId];\n      if (spring) {\n        return {\n          from: spring.from.pos,\n          to: spring.to.pos\n        };\n      }\n    },\n\n    /**\n     * @returns {Object} area required to fit in the graph. Object contains\n     * `x1`, `y1` - top left coordinates\n     * `x2`, `y2` - bottom right coordinates\n     */\n    getGraphRect: function () {\n      return physicsSimulator.getBBox();\n    },\n\n    /**\n     * Iterates over each body in the layout simulator and performs a callback(body, nodeId)\n     */\n    forEachBody: forEachBody,\n\n    /*\n     * Requests layout algorithm to pin/unpin node to its current position\n     * Pinned nodes should not be affected by layout algorithm and always\n     * remain at their position\n     */\n    pinNode: function (node, isPinned) {\n      var body = getInitializedBody(node.id);\n       body.isPinned = !!isPinned;\n    },\n\n    /**\n     * Checks whether given graph's node is currently pinned\n     */\n    isNodePinned: function (node) {\n      return getInitializedBody(node.id).isPinned;\n    },\n\n    /**\n     * Request to release all resources\n     */\n    dispose: function() {\n      graph.off('changed', onGraphChanged);\n      api.fire('disposed');\n    },\n\n    /**\n     * Gets physical body for a given node id. If node is not found undefined\n     * value is returned.\n     */\n    getBody: getBody,\n\n    /**\n     * Gets spring for a given edge.\n     *\n     * @param {string} linkId link identifer. If two arguments are passed then\n     * this argument is treated as formNodeId\n     * @param {string=} toId when defined this parameter denotes head of the link\n     * and first argument is treated as tail of the link (fromId)\n     */\n    getSpring: getSpring,\n\n    /**\n     * Returns length of cumulative force vector. The closer this to zero - the more stable the system is\n     */\n    getForceVectorLength: getForceVectorLength,\n\n    /**\n     * [Read only] Gets current physics simulator\n     */\n    simulator: physicsSimulator,\n\n    /**\n     * Gets the graph that was used for layout\n     */\n    graph: graph,\n\n    /**\n     * Gets amount of movement performed during last step operation\n     */\n    lastMove: 0\n  };\n\n  eventify(api);\n\n  return api;\n\n  function updateStableStatus(isStableNow) {\n    if (wasStable !== isStableNow) {\n      wasStable = isStableNow;\n      onStableChanged(isStableNow);\n    }\n  }\n\n  function forEachBody(cb) {\n    nodeBodies.forEach(cb);\n  }\n\n  function getForceVectorLength() {\n    var fx = 0, fy = 0;\n    forEachBody(function(body) {\n      fx += Math.abs(body.force.x);\n      fy += Math.abs(body.force.y);\n    });\n    return Math.sqrt(fx * fx + fy * fy);\n  }\n\n  function getSpring(fromId, toId) {\n    var linkId;\n    if (toId === undefined) {\n      if (typeof fromId !== 'object') {\n        // assume fromId as a linkId:\n        linkId = fromId;\n      } else {\n        // assume fromId to be a link object:\n        linkId = fromId.id;\n      }\n    } else {\n      // toId is defined, should grab link:\n      var link = graph.hasLink(fromId, toId);\n      if (!link) return;\n      linkId = link.id;\n    }\n\n    return springs[linkId];\n  }\n\n  function getBody(nodeId) {\n    return nodeBodies.get(nodeId);\n  }\n\n  function listenToEvents() {\n    graph.on('changed', onGraphChanged);\n  }\n\n  function onStableChanged(isStable) {\n    api.fire('stable', isStable);\n  }\n\n  function onGraphChanged(changes) {\n    for (var i = 0; i < changes.length; ++i) {\n      var change = changes[i];\n      if (change.changeType === 'add') {\n        if (change.node) {\n          initBody(change.node.id);\n        }\n        if (change.link) {\n          initLink(change.link);\n        }\n      } else if (change.changeType === 'remove') {\n        if (change.node) {\n          releaseNode(change.node);\n        }\n        if (change.link) {\n          releaseLink(change.link);\n        }\n      }\n    }\n    bodiesCount = graph.getNodesCount();\n  }\n\n  function initPhysics() {\n    bodiesCount = 0;\n\n    graph.forEachNode(function (node) {\n      initBody(node.id);\n      bodiesCount += 1;\n    });\n\n    graph.forEachLink(initLink);\n  }\n\n  function initBody(nodeId) {\n    var body = nodeBodies.get(nodeId);\n    if (!body) {\n      var node = graph.getNode(nodeId);\n      if (!node) {\n        throw new Error('initBody() was called with unknown node id');\n      }\n\n      var pos = node.position;\n      if (!pos) {\n        var neighbors = getNeighborBodies(node);\n        pos = physicsSimulator.getBestNewBodyPosition(neighbors);\n      }\n\n      body = physicsSimulator.addBodyAt(pos);\n      body.id = nodeId;\n\n      nodeBodies.set(nodeId, body);\n      updateBodyMass(nodeId);\n\n      if (isNodeOriginallyPinned(node)) {\n        body.isPinned = true;\n      }\n    }\n  }\n\n  function releaseNode(node) {\n    var nodeId = node.id;\n    var body = nodeBodies.get(nodeId);\n    if (body) {\n      nodeBodies.delete(nodeId);\n      physicsSimulator.removeBody(body);\n    }\n  }\n\n  function initLink(link) {\n    updateBodyMass(link.fromId);\n    updateBodyMass(link.toId);\n\n    var fromBody = nodeBodies.get(link.fromId),\n        toBody  = nodeBodies.get(link.toId),\n        spring = physicsSimulator.addSpring(fromBody, toBody, link.length);\n\n    springTransform(link, spring);\n\n    springs[link.id] = spring;\n  }\n\n  function releaseLink(link) {\n    var spring = springs[link.id];\n    if (spring) {\n      var from = graph.getNode(link.fromId),\n          to = graph.getNode(link.toId);\n\n      if (from) updateBodyMass(from.id);\n      if (to) updateBodyMass(to.id);\n\n      delete springs[link.id];\n\n      physicsSimulator.removeSpring(spring);\n    }\n  }\n\n  function getNeighborBodies(node) {\n    // TODO: Could probably be done better on memory\n    var neighbors = [];\n    if (!node.links) {\n      return neighbors;\n    }\n    var maxNeighbors = Math.min(node.links.length, 2);\n    for (var i = 0; i < maxNeighbors; ++i) {\n      var link = node.links[i];\n      var otherBody = link.fromId !== node.id ? nodeBodies.get(link.fromId) : nodeBodies.get(link.toId);\n      if (otherBody && otherBody.pos) {\n        neighbors.push(otherBody);\n      }\n    }\n\n    return neighbors;\n  }\n\n  function updateBodyMass(nodeId) {\n    var body = nodeBodies.get(nodeId);\n    body.mass = nodeMass(nodeId);\n    if (Number.isNaN(body.mass)) {\n      throw new Error('Node mass should be a number');\n    }\n  }\n\n  /**\n   * Checks whether graph node has in its settings pinned attribute,\n   * which means layout algorithm cannot move it. Node can be marked\n   * as pinned, if it has \"isPinned\" attribute, or when node.data has it.\n   *\n   * @param {Object} node a graph node to check\n   * @return {Boolean} true if node should be treated as pinned; false otherwise.\n   */\n  function isNodeOriginallyPinned(node) {\n    return (node && (node.isPinned || (node.data && node.data.isPinned)));\n  }\n\n  function getInitializedBody(nodeId) {\n    var body = nodeBodies.get(nodeId);\n    if (!body) {\n      initBody(nodeId);\n      body = nodeBodies.get(nodeId);\n    }\n    return body;\n  }\n\n  /**\n   * Calculates mass of a body, which corresponds to node with given id.\n   *\n   * @param {String|Number} nodeId identifier of a node, for which body mass needs to be calculated\n   * @returns {Number} recommended mass of the body;\n   */\n  function defaultArrayNodeMass(nodeId) {\n    // This function is for older versions of ngraph.graph.\n    var links = graph.getLinks(nodeId);\n    if (!links) return 1;\n    return 1 + links.length / 3.0;\n  }\n\n  function defaultSetNodeMass(nodeId) {\n    var links = graph.getLinks(nodeId);\n    if (!links) return 1;\n    return 1 + links.size / 3.0;\n  }\n}\n\nfunction noop() { }\n","const getVariableName = require('./getVariableName');\n\nmodule.exports = function createPatternBuilder(dimension) {\n\n  return pattern;\n  \n  function pattern(template, config) {\n    let indent = (config && config.indent) || 0;\n    let join = (config && config.join !== undefined) ? config.join : '\\n';\n    let indentString = Array(indent + 1).join(' ');\n    let buffer = [];\n    for (let i = 0; i < dimension; ++i) {\n      let variableName = getVariableName(i);\n      let prefix = (i === 0) ? '' : indentString;\n      buffer.push(prefix + template.replace(/{var}/g, variableName));\n    }\n    return buffer.join(join);\n  }\n};\n","\nmodule.exports = generateBoundsFunction;\nmodule.exports.generateFunctionBody = generateBoundsFunctionBody;\n\nconst createPatternBuilder = require('./createPatternBuilder');\n\nfunction generateBoundsFunction(dimension) {\n  let code = generateBoundsFunctionBody(dimension);\n  return new Function('bodies', 'settings', 'random', code);\n}\n\nfunction generateBoundsFunctionBody(dimension) {\n  let pattern = createPatternBuilder(dimension);\n\n  let code = `\n  var boundingBox = {\n    ${pattern('min_{var}: 0, max_{var}: 0,', {indent: 4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${pattern('base_{var} = 0', {join: ', '})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${pattern('base_{var} += neighborPos.{var};', {indent: 10})}\n        }\n\n        ${pattern('base_{var} /= neighbors.length;', {indent: 8})}\n      } else {\n        ${pattern('base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;', {indent: 8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${pattern('{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,', {indent: 8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${pattern('var max_{var} = -Infinity;', {indent: 4})}\n    ${pattern('var min_{var} = Infinity;', {indent: 4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${pattern('if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};', {indent: 6})}\n      ${pattern('if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};', {indent: 6})}\n    }\n\n    ${pattern('boundingBox.min_{var} = min_{var};', {indent: 4})}\n    ${pattern('boundingBox.max_{var} = max_{var};', {indent: 4})}\n  }\n\n  function resetBoundingBox() {\n    ${pattern('boundingBox.min_{var} = boundingBox.max_{var} = 0;', {indent: 4})}\n  }\n`;\n  return code;\n}\n","\nconst createPatternBuilder = require('./createPatternBuilder');\n\nmodule.exports = generateCreateBodyFunction;\nmodule.exports.generateCreateBodyFunctionBody = generateCreateBodyFunctionBody;\n\n// InlineTransform: getVectorCode\nmodule.exports.getVectorCode = getVectorCode;\n// InlineTransform: getBodyCode\nmodule.exports.getBodyCode = getBodyCode;\n// InlineTransformExport: module.exports = function() { return Body; }\n\nfunction generateCreateBodyFunction(dimension, debugSetters) {\n  let code = generateCreateBodyFunctionBody(dimension, debugSetters);\n  let {Body} = (new Function(code))();\n  return Body;\n}\n\nfunction generateCreateBodyFunctionBody(dimension, debugSetters) {\n  let code = `\n${getVectorCode(dimension, debugSetters)}\n${getBodyCode(dimension, debugSetters)}\nreturn {Body: Body, Vector: Vector};\n`;\n  return code;\n}\n\nfunction getBodyCode(dimension) {\n  let pattern = createPatternBuilder(dimension);\n  let variableList = pattern('{var}', {join: ', '});\n  return `\nfunction Body(${variableList}) {\n  this.isPinned = false;\n  this.pos = new Vector(${variableList});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${variableList}) {\n  ${pattern('this.pos.{var} = {var} || 0;', {indent: 2})}\n};`;\n}\n\nfunction getVectorCode(dimension, debugSetters) {\n  let pattern = createPatternBuilder(dimension);\n  let setters = '';\n  if (debugSetters) {\n    setters = `${pattern(\"\\n\\\n   var v{var};\\n\\\nObject.defineProperty(this, '{var}', {\\n\\\n  set: function(v) { \\n\\\n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\\n\\\n    v{var} = v; \\n\\\n  },\\n\\\n  get: function() { return v{var}; }\\n\\\n});\")}`;\n  }\n\n  let variableList = pattern('{var}', {join: ', '});\n  return `function Vector(${variableList}) {\n  ${setters}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${pattern('if (!Number.isFinite(v.{var})) throw new Error(\"Expected value is not a finite number at Vector constructor ({var})\");', {indent: 4})}\n      ${pattern('this.{var} = v.{var};', {indent: 4})}\n    } else {\n      ${pattern('this.{var} = typeof {var} === \"number\" ? {var} : 0;', {indent: 4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${pattern('this.{var} = ', {join: ''})}0;\n  };`;\n}","const createPatternBuilder = require('./createPatternBuilder');\n\nmodule.exports = generateCreateDragForceFunction;\nmodule.exports.generateCreateDragForceFunctionBody = generateCreateDragForceFunctionBody;\n\nfunction generateCreateDragForceFunction(dimension) {\n  let code = generateCreateDragForceFunctionBody(dimension);\n  return new Function('options', code);\n}\n\nfunction generateCreateDragForceFunctionBody(dimension) {\n  let pattern = createPatternBuilder(dimension);\n  let code = `\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${pattern('body.force.{var} -= options.dragCoefficient * body.velocity.{var};', {indent: 6})}\n    }\n  };\n`;\n  return code;\n}\n","const createPatternBuilder = require('./createPatternBuilder');\n\nmodule.exports = generateCreateSpringForceFunction;\nmodule.exports.generateCreateSpringForceFunctionBody = generateCreateSpringForceFunctionBody;\n\nfunction generateCreateSpringForceFunction(dimension) {\n  let code = generateCreateSpringForceFunctionBody(dimension);\n  return new Function('options', 'random', code);\n}\n\nfunction generateCreateSpringForceFunctionBody(dimension) {\n  let pattern = createPatternBuilder(dimension);\n  let code = `\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${pattern('var d{var} = body2.pos.{var} - body1.pos.{var};', {indent: 6})}\n      var r = Math.sqrt(${pattern('d{var} * d{var}', {join: ' + '})});\n\n      if (r === 0) {\n        ${pattern('d{var} = (random.nextDouble() - 0.5) / 50;', {indent: 8})}\n        r = Math.sqrt(${pattern('d{var} * d{var}', {join: ' + '})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${pattern('body1.force.{var} += coefficient * d{var}', {indent: 6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${pattern('body2.force.{var} -= coefficient * d{var}', {indent: 6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`;\n  return code;\n}\n","const createPatternBuilder = require('./createPatternBuilder');\n\nmodule.exports = generateIntegratorFunction;\nmodule.exports.generateIntegratorFunctionBody = generateIntegratorFunctionBody;\n\nfunction generateIntegratorFunction(dimension) {\n  let code = generateIntegratorFunctionBody(dimension);\n  return new Function('bodies', 'timeStep', 'adaptiveTimeStepWeight', code);\n}\n\nfunction generateIntegratorFunctionBody(dimension) {\n  let pattern = createPatternBuilder(dimension);\n  let code = `\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${pattern('var d{var} = 0, t{var} = 0;', {indent: 2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${pattern('body.velocity.{var} += coeff * body.force.{var};', {indent: 4})}\n    ${pattern('var v{var} = body.velocity.{var};', {indent: 4})}\n    var v = Math.sqrt(${pattern('v{var} * v{var}', {join: ' + '})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${pattern('body.velocity.{var} = v{var} / v;', {indent: 6})}\n    }\n\n    ${pattern('d{var} = timeStep * body.velocity.{var};', {indent: 4})}\n\n    ${pattern('body.pos.{var} += d{var};', {indent: 4})}\n\n    ${pattern('t{var} += Math.abs(d{var});', {indent: 4})}\n  }\n\n  return (${pattern('t{var} * t{var}', {join: ' + '})})/length;\n`;\n  return code;\n}\n","const createPatternBuilder = require('./createPatternBuilder');\nconst getVariableName = require('./getVariableName');\n\nmodule.exports = generateQuadTreeFunction;\nmodule.exports.generateQuadTreeFunctionBody = generateQuadTreeFunctionBody;\n\n// These exports are for InlineTransform tool.\n// InlineTransform: getInsertStackCode\nmodule.exports.getInsertStackCode = getInsertStackCode;\n// InlineTransform: getQuadNodeCode\nmodule.exports.getQuadNodeCode = getQuadNodeCode;\n// InlineTransform: isSamePosition\nmodule.exports.isSamePosition = isSamePosition;\n// InlineTransform: getChildBodyCode\nmodule.exports.getChildBodyCode = getChildBodyCode;\n// InlineTransform: setChildBodyCode\nmodule.exports.setChildBodyCode = setChildBodyCode;\n\nfunction generateQuadTreeFunction(dimension) {\n  let code = generateQuadTreeFunctionBody(dimension);\n  return (new Function(code))();\n}\n\nfunction generateQuadTreeFunctionBody(dimension) {\n  let pattern = createPatternBuilder(dimension);\n  let quadCount = Math.pow(2, dimension);\n\n  let code = `\n${getInsertStackCode()}\n${getQuadNodeCode(dimension)}\n${isSamePosition(dimension)}\n${getChildBodyCode(dimension)}\n${setChildBodyCode(dimension)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${assignQuads('      node.')}\n      node.body = null;\n      node.mass = ${pattern('node.mass_{var} = ', {join: ''})}0;\n      ${pattern('node.min_{var} = node.max_{var} = ', {join: ''})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${pattern('var d{var};', {indent: 4})}\n    var r; \n    ${pattern('var f{var} = 0;', {indent: 4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${pattern('d{var} = body.pos.{var} - sourceBody.pos.{var};', {indent: 8})}\n        r = Math.sqrt(${pattern('d{var} * d{var}', {join: ' + '})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${pattern('d{var} = (random.nextDouble() - 0.5) / 50;', {indent: 10})}\n          r = Math.sqrt(${pattern('d{var} * d{var}', {join: ' + '})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${pattern('f{var} += v * d{var};', {indent: 8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${pattern('d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};', {indent: 8})}\n        r = Math.sqrt(${pattern('d{var} * d{var}', {join: ' + '})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${pattern('d{var} = (random.nextDouble() - 0.5) / 50;', {indent: 10})}\n          r = Math.sqrt(${pattern('d{var} * d{var}', {join: ' + '})});\n        }\n        // If s / r < θ, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${getVariableName(0)} - node.min_${getVariableName(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${pattern('f{var} += v * d{var};', {indent: 10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${runRecursiveOnChildren()}\n        }\n      }\n    }\n\n    ${pattern('sourceBody.force.{var} += f{var};', {indent: 4})}\n  }\n\n  function insertBodies(bodies) {\n    ${pattern('var {var}min = Number.MAX_VALUE;', {indent: 4})}\n    ${pattern('var {var}max = Number.MIN_VALUE;', {indent: 4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${pattern('if (pos.{var} < {var}min) {var}min = pos.{var};', {indent: 6})}\n      ${pattern('if (pos.{var} > {var}max) {var}max = pos.{var};', {indent: 6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${pattern('if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;', {indent: 4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${pattern('root.min_{var} = {var}min;', {indent: 4})}\n    ${pattern('root.max_{var} = {var}min + maxSideLength;', {indent: 4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${pattern('var {var} = body.pos.{var};', {indent: 8})}\n        node.mass += body.mass;\n        ${pattern('node.mass_{var} += body.mass * {var};', {indent: 8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${pattern('var min_{var} = node.min_{var};', {indent: 8})}\n        ${pattern('var max_{var} = (min_{var} + node.max_{var}) / 2;', {indent: 8})}\n\n${assignInsertionQuadIndex(8)}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${pattern('child.min_{var} = min_{var};', {indent: 10})}\n          ${pattern('child.max_{var} = max_{var};', {indent: 10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${pattern('var d{var} = (node.max_{var} - node.min_{var}) * offset;', {indent: 12})}\n\n            ${pattern('oldBody.pos.{var} = node.min_{var} + d{var};', {indent: 12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`;\n  return code;\n\n\n  function assignInsertionQuadIndex(indentCount) {\n    let insertionCode = [];\n    let indent = Array(indentCount + 1).join(' ');\n    for (let i = 0; i < dimension; ++i) {\n      insertionCode.push(indent + `if (${getVariableName(i)} > max_${getVariableName(i)}) {`);\n      insertionCode.push(indent + `  quadIdx = quadIdx + ${Math.pow(2, i)};`);\n      insertionCode.push(indent + `  min_${getVariableName(i)} = max_${getVariableName(i)};`);\n      insertionCode.push(indent + `  max_${getVariableName(i)} = node.max_${getVariableName(i)};`);\n      insertionCode.push(indent + `}`);\n    }\n    return insertionCode.join('\\n');\n    // if (x > max_x) { // somewhere in the eastern part.\n    //   quadIdx = quadIdx + 1;\n    //   left = right;\n    //   right = node.right;\n    // }\n  }\n\n  function runRecursiveOnChildren() {\n    let indent = Array(11).join(' ');\n    let recursiveCode = [];\n    for (let i = 0; i < quadCount; ++i) {\n      recursiveCode.push(indent + `if (node.quad${i}) {`);\n      recursiveCode.push(indent + `  queue[pushIdx] = node.quad${i};`);\n      recursiveCode.push(indent + `  queueLength += 1;`);\n      recursiveCode.push(indent + `  pushIdx += 1;`);\n      recursiveCode.push(indent + `}`);\n    }\n    return recursiveCode.join('\\n');\n    // if (node.quad0) {\n    //   queue[pushIdx] = node.quad0;\n    //   queueLength += 1;\n    //   pushIdx += 1;\n    // }\n  }\n\n  function assignQuads(indent) {\n    // this.quad0 = null;\n    // this.quad1 = null;\n    // this.quad2 = null;\n    // this.quad3 = null;\n    let quads = [];\n    for (let i = 0; i < quadCount; ++i) {\n      quads.push(`${indent}quad${i} = null;`);\n    }\n    return quads.join('\\n');\n  }\n}\n\nfunction isSamePosition(dimension) {\n  let pattern = createPatternBuilder(dimension);\n  return `\n  function isSamePosition(point1, point2) {\n    ${pattern('var d{var} = Math.abs(point1.{var} - point2.{var});', {indent: 2})}\n  \n    return ${pattern('d{var} < 1e-8', {join: ' && '})};\n  }  \n`;\n}\n\nfunction setChildBodyCode(dimension) {\n  var quadCount = Math.pow(2, dimension);\n  return `\nfunction setChild(node, idx, child) {\n  ${setChildBody()}\n}`;\n  function setChildBody() {\n    let childBody = [];\n    for (let i = 0; i < quadCount; ++i) {\n      let prefix = (i === 0) ? '  ' : '  else ';\n      childBody.push(`${prefix}if (idx === ${i}) node.quad${i} = child;`);\n    }\n\n    return childBody.join('\\n');\n    // if (idx === 0) node.quad0 = child;\n    // else if (idx === 1) node.quad1 = child;\n    // else if (idx === 2) node.quad2 = child;\n    // else if (idx === 3) node.quad3 = child;\n  }\n}\n\nfunction getChildBodyCode(dimension) {\n  return `function getChild(node, idx) {\n${getChildBody()}\n  return null;\n}`;\n\n  function getChildBody() {\n    let childBody = [];\n    let quadCount = Math.pow(2, dimension);\n    for (let i = 0; i < quadCount; ++i) {\n      childBody.push(`  if (idx === ${i}) return node.quad${i};`);\n    }\n\n    return childBody.join('\\n');\n    // if (idx === 0) return node.quad0;\n    // if (idx === 1) return node.quad1;\n    // if (idx === 2) return node.quad2;\n    // if (idx === 3) return node.quad3;\n  }\n}\n\nfunction getQuadNodeCode(dimension) {\n  let pattern = createPatternBuilder(dimension);\n  let quadCount = Math.pow(2, dimension);\n  var quadNodeCode = `\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${assignQuads('  this.')}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${pattern('this.mass_{var} = 0;', {indent: 2})}\n\n  // bounding box coordinates\n  ${pattern('this.min_{var} = 0;', {indent: 2})}\n  ${pattern('this.max_{var} = 0;', {indent: 2})}\n}\n`;\n  return quadNodeCode;\n\n  function assignQuads(indent) {\n    // this.quad0 = null;\n    // this.quad1 = null;\n    // this.quad2 = null;\n    // this.quad3 = null;\n    let quads = [];\n    for (let i = 0; i < quadCount; ++i) {\n      quads.push(`${indent}quad${i} = null;`);\n    }\n    return quads.join('\\n');\n  }\n}\n\nfunction getInsertStackCode() {\n  return `\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n`;\n}","module.exports = function getVariableName(index) {\n  if (index === 0) return 'x';\n  if (index === 1) return 'y';\n  if (index === 2) return 'z';\n  return 'c' + (index + 1);\n};","/**\n * Manages a simulation of physical forces acting on bodies and springs.\n */\nmodule.exports = createPhysicsSimulator;\n\nvar generateCreateBodyFunction = require('./codeGenerators/generateCreateBody');\nvar generateQuadTreeFunction = require('./codeGenerators/generateQuadTree');\nvar generateBoundsFunction = require('./codeGenerators/generateBounds');\nvar generateCreateDragForceFunction = require('./codeGenerators/generateCreateDragForce');\nvar generateCreateSpringForceFunction = require('./codeGenerators/generateCreateSpringForce');\nvar generateIntegratorFunction = require('./codeGenerators/generateIntegrator');\n\nvar dimensionalCache = {};\n\nfunction createPhysicsSimulator(settings) {\n  var Spring = require('./spring');\n  var merge = require('ngraph.merge');\n  var eventify = require('ngraph.events');\n  if (settings) {\n    // Check for names from older versions of the layout\n    if (settings.springCoeff !== undefined) throw new Error('springCoeff was renamed to springCoefficient');\n    if (settings.dragCoeff !== undefined) throw new Error('dragCoeff was renamed to dragCoefficient');\n  }\n\n  settings = merge(settings, {\n      /**\n       * Ideal length for links (springs in physical model).\n       */\n      springLength: 10,\n\n      /**\n       * Hook's law coefficient. 1 - solid spring.\n       */\n      springCoefficient: 0.8, \n\n      /**\n       * Coulomb's law coefficient. It's used to repel nodes thus should be negative\n       * if you make it positive nodes start attract each other :).\n       */\n      gravity: -12,\n\n      /**\n       * Theta coefficient from Barnes Hut simulation. Ranged between (0, 1).\n       * The closer it's to 1 the more nodes algorithm will have to go through.\n       * Setting it to one makes Barnes Hut simulation no different from\n       * brute-force forces calculation (each node is considered).\n       */\n      theta: 0.8,\n\n      /**\n       * Drag force coefficient. Used to slow down system, thus should be less than 1.\n       * The closer it is to 0 the less tight system will be.\n       */\n      dragCoefficient: 0.9, // TODO: Need to rename this to something better. E.g. `dragCoefficient`\n\n      /**\n       * Default time step (dt) for forces integration\n       */\n      timeStep : 0.5,\n\n      /**\n       * Adaptive time step uses average spring length to compute actual time step:\n       * See: https://twitter.com/anvaka/status/1293067160755957760\n       */\n      adaptiveTimeStepWeight: 0,\n\n      /**\n       * This parameter defines number of dimensions of the space where simulation\n       * is performed. \n       */\n      dimensions: 2,\n\n      /**\n       * In debug mode more checks are performed, this will help you catch errors\n       * quickly, however for production build it is recommended to turn off this flag\n       * to speed up computation.\n       */\n      debug: false\n  });\n\n  var factory = dimensionalCache[settings.dimensions];\n  if (!factory) {\n    var dimensions = settings.dimensions;\n    factory = {\n      Body: generateCreateBodyFunction(dimensions, settings.debug),\n      createQuadTree: generateQuadTreeFunction(dimensions),\n      createBounds: generateBoundsFunction(dimensions),\n      createDragForce: generateCreateDragForceFunction(dimensions),\n      createSpringForce: generateCreateSpringForceFunction(dimensions),\n      integrate: generateIntegratorFunction(dimensions),\n    };\n    dimensionalCache[dimensions] = factory;\n  }\n\n  var Body = factory.Body;\n  var createQuadTree = factory.createQuadTree;\n  var createBounds = factory.createBounds;\n  var createDragForce = factory.createDragForce;\n  var createSpringForce = factory.createSpringForce;\n  var integrate = factory.integrate;\n  var createBody = pos => new Body(pos);\n\n  var random = require('ngraph.random').random(42);\n  var bodies = []; // Bodies in this simulation.\n  var springs = []; // Springs in this simulation.\n\n  var quadTree = createQuadTree(settings, random);\n  var bounds = createBounds(bodies, settings, random);\n  var springForce = createSpringForce(settings, random);\n  var dragForce = createDragForce(settings);\n\n  var totalMovement = 0; // how much movement we made on last step\n  var forces = [];\n  var forceMap = new Map();\n  var iterationNumber = 0;\n \n  addForce('nbody', nbodyForce);\n  addForce('spring', updateSpringForce);\n\n  var publicApi = {\n    /**\n     * Array of bodies, registered with current simulator\n     *\n     * Note: To add new body, use addBody() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    bodies: bodies,\n  \n    quadTree: quadTree,\n\n    /**\n     * Array of springs, registered with current simulator\n     *\n     * Note: To add new spring, use addSpring() method. This property is only\n     * exposed for testing/performance purposes.\n     */\n    springs: springs,\n\n    /**\n     * Returns settings with which current simulator was initialized\n     */\n    settings: settings,\n\n    /**\n     * Adds a new force to simulation\n     */\n    addForce: addForce,\n    \n    /**\n     * Removes a force from the simulation.\n     */\n    removeForce: removeForce,\n\n    /**\n     * Returns a map of all registered forces.\n     */\n    getForces: getForces,\n\n    /**\n     * Performs one step of force simulation.\n     *\n     * @returns {boolean} true if system is considered stable; False otherwise.\n     */\n    step: function () {\n      for (var i = 0; i < forces.length; ++i) {\n        forces[i](iterationNumber);\n      }\n      var movement = integrate(bodies, settings.timeStep, settings.adaptiveTimeStepWeight);\n      iterationNumber += 1;\n      return movement;\n    },\n\n    /**\n     * Adds body to the system\n     *\n     * @param {ngraph.physics.primitives.Body} body physical body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBody: function (body) {\n      if (!body) {\n        throw new Error('Body is required');\n      }\n      bodies.push(body);\n\n      return body;\n    },\n\n    /**\n     * Adds body to the system at given position\n     *\n     * @param {Object} pos position of a body\n     *\n     * @returns {ngraph.physics.primitives.Body} added body\n     */\n    addBodyAt: function (pos) {\n      if (!pos) {\n        throw new Error('Body position is required');\n      }\n      var body = createBody(pos);\n      bodies.push(body);\n\n      return body;\n    },\n\n    /**\n     * Removes body from the system\n     *\n     * @param {ngraph.physics.primitives.Body} body to remove\n     *\n     * @returns {Boolean} true if body found and removed. falsy otherwise;\n     */\n    removeBody: function (body) {\n      if (!body) { return; }\n\n      var idx = bodies.indexOf(body);\n      if (idx < 0) { return; }\n\n      bodies.splice(idx, 1);\n      if (bodies.length === 0) {\n        bounds.reset();\n      }\n      return true;\n    },\n\n    /**\n     * Adds a spring to this simulation.\n     *\n     * @returns {Object} - a handle for a spring. If you want to later remove\n     * spring pass it to removeSpring() method.\n     */\n    addSpring: function (body1, body2, springLength, springCoefficient) {\n      if (!body1 || !body2) {\n        throw new Error('Cannot add null spring to force simulator');\n      }\n\n      if (typeof springLength !== 'number') {\n        springLength = -1; // assume global configuration\n      }\n\n      var spring = new Spring(body1, body2, springLength, springCoefficient >= 0 ? springCoefficient : -1);\n      springs.push(spring);\n\n      // TODO: could mark simulator as dirty.\n      return spring;\n    },\n\n    /**\n     * Returns amount of movement performed on last step() call\n     */\n    getTotalMovement: function () {\n      return totalMovement;\n    },\n\n    /**\n     * Removes spring from the system\n     *\n     * @param {Object} spring to remove. Spring is an object returned by addSpring\n     *\n     * @returns {Boolean} true if spring found and removed. falsy otherwise;\n     */\n    removeSpring: function (spring) {\n      if (!spring) { return; }\n      var idx = springs.indexOf(spring);\n      if (idx > -1) {\n        springs.splice(idx, 1);\n        return true;\n      }\n    },\n\n    getBestNewBodyPosition: function (neighbors) {\n      return bounds.getBestNewPosition(neighbors);\n    },\n\n    /**\n     * Returns bounding box which covers all bodies\n     */\n    getBBox: getBoundingBox, \n    getBoundingBox: getBoundingBox, \n\n    invalidateBBox: function () {\n      console.warn('invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call');\n    },\n\n    // TODO: Move the force specific stuff to force\n    gravity: function (value) {\n      if (value !== undefined) {\n        settings.gravity = value;\n        quadTree.options({gravity: value});\n        return this;\n      } else {\n        return settings.gravity;\n      }\n    },\n\n    theta: function (value) {\n      if (value !== undefined) {\n        settings.theta = value;\n        quadTree.options({theta: value});\n        return this;\n      } else {\n        return settings.theta;\n      }\n    },\n\n    /**\n     * Returns pseudo-random number generator instance.\n     */\n    random: random\n  };\n\n  // allow settings modification via public API:\n  expose(settings, publicApi);\n\n  eventify(publicApi);\n\n  return publicApi;\n\n  function getBoundingBox() {\n    bounds.update();\n    return bounds.box;\n  }\n\n  function addForce(forceName, forceFunction) {\n    if (forceMap.has(forceName)) throw new Error('Force ' + forceName + ' is already added');\n\n    forceMap.set(forceName, forceFunction);\n    forces.push(forceFunction);\n  }\n\n  function removeForce(forceName) {\n    var forceIndex = forces.indexOf(forceMap.get(forceName));\n    if (forceIndex < 0) return;\n    forces.splice(forceIndex, 1);\n    forceMap.delete(forceName);\n  }\n\n  function getForces() {\n    // TODO: Should I trust them or clone the forces?\n    return forceMap;\n  }\n\n  function nbodyForce(/* iterationUmber */) {\n    if (bodies.length === 0) return;\n\n    quadTree.insertBodies(bodies);\n    var i = bodies.length;\n    while (i--) {\n      var body = bodies[i];\n      if (!body.isPinned) {\n        body.reset();\n        quadTree.updateBodyForce(body);\n        dragForce.update(body);\n      }\n    }\n  }\n\n  function updateSpringForce() {\n    var i = springs.length;\n    while (i--) {\n      springForce.update(springs[i]);\n    }\n  }\n\n}\n\nfunction expose(settings, target) {\n  for (var key in settings) {\n    augment(settings, target, key);\n  }\n}\n\nfunction augment(source, target, key) {\n  if (!source.hasOwnProperty(key)) return;\n  if (typeof target[key] === 'function') {\n    // this accessor is already defined. Ignore it\n    return;\n  }\n  var sourceIsNumber = Number.isFinite(source[key]);\n\n  if (sourceIsNumber) {\n    target[key] = function (value) {\n      if (value !== undefined) {\n        if (!Number.isFinite(value)) throw new Error('Value of ' + key + ' should be a valid number.');\n        source[key] = value;\n        return target;\n      }\n      return source[key];\n    };\n  } else {\n    target[key] = function (value) {\n      if (value !== undefined) {\n        source[key] = value;\n        return target;\n      }\n      return source[key];\n    };\n  }\n}\n","module.exports = Spring;\n\n/**\n * Represents a physical spring. Spring connects two bodies, has rest length\n * stiffness coefficient and optional weight\n */\nfunction Spring(fromBody, toBody, length, springCoefficient) {\n    this.from = fromBody;\n    this.to = toBody;\n    this.length = length;\n    this.coefficient = springCoefficient;\n}\n","/**\n * @fileOverview Contains definition of the core graph object.\n */\n\n// TODO: need to change storage layer:\n// 1. Be able to get all nodes O(1)\n// 2. Be able to get number of links O(1)\n\n/**\n * @example\n *  var graph = require('ngraph.graph')();\n *  graph.addNode(1);     // graph has one node.\n *  graph.addLink(2, 3);  // now graph contains three nodes and one link.\n *\n */\nmodule.exports = createGraph;\n\nvar eventify = require('ngraph.events');\n\n/**\n * Creates a new graph\n */\nfunction createGraph(options) {\n  // Graph structure is maintained as dictionary of nodes\n  // and array of links. Each node has 'links' property which\n  // hold all links related to that node. And general links\n  // array is used to speed up all links enumeration. This is inefficient\n  // in terms of memory, but simplifies coding.\n  options = options || {};\n  if ('uniqueLinkId' in options) {\n    console.warn(\n      'ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\\n' +\n      'Use `multigraph` option instead\\n',\n      '\\n',\n      'Note: there is also change in default behavior: From now on each graph\\n'+\n      'is considered to be not a multigraph by default (each edge is unique).'\n    );\n\n    options.multigraph = options.uniqueLinkId;\n  }\n\n  // Dear reader, the non-multigraphs do not guarantee that there is only\n  // one link for a given pair of node. When this option is set to false\n  // we can save some memory and CPU (18% faster for non-multigraph);\n  if (options.multigraph === undefined) options.multigraph = false;\n\n  if (typeof Map !== 'function') {\n    // TODO: Should we polyfill it ourselves? We don't use much operations there..\n    throw new Error('ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph');\n  } \n\n  var nodes = new Map(); // nodeId => Node\n  var links = new Map(); // linkId => Link\n    // Hash of multi-edges. Used to track ids of edges between same nodes\n  var multiEdges = {};\n  var suspendEvents = 0;\n\n  var createLink = options.multigraph ? createUniqueLink : createSingleLink,\n\n    // Our graph API provides means to listen to graph changes. Users can subscribe\n    // to be notified about changes in the graph by using `on` method. However\n    // in some cases they don't use it. To avoid unnecessary memory consumption\n    // we will not record graph changes until we have at least one subscriber.\n    // Code below supports this optimization.\n    //\n    // Accumulates all changes made during graph updates.\n    // Each change element contains:\n    //  changeType - one of the strings: 'add', 'remove' or 'update';\n    //  node - if change is related to node this property is set to changed graph's node;\n    //  link - if change is related to link this property is set to changed graph's link;\n    changes = [],\n    recordLinkChange = noop,\n    recordNodeChange = noop,\n    enterModification = noop,\n    exitModification = noop;\n\n  // this is our public API:\n  var graphPart = {\n    /**\n     * Sometimes duck typing could be slow. Giving clients a hint about data structure\n     * via explicit version number here:\n     */\n    version: 20.0,\n\n    /**\n     * Adds node to the graph. If node with given id already exists in the graph\n     * its data is extended with whatever comes in 'data' argument.\n     *\n     * @param nodeId the node's identifier. A string or number is preferred.\n     * @param [data] additional data for the node being added. If node already\n     *   exists its data object is augmented with the new one.\n     *\n     * @return {node} The newly added node or node with given id if it already exists.\n     */\n    addNode: addNode,\n\n    /**\n     * Adds a link to the graph. The function always create a new\n     * link between two nodes. If one of the nodes does not exists\n     * a new node is created.\n     *\n     * @param fromId link start node id;\n     * @param toId link end node id;\n     * @param [data] additional data to be set on the new link;\n     *\n     * @return {link} The newly created link\n     */\n    addLink: addLink,\n\n    /**\n     * Removes link from the graph. If link does not exist does nothing.\n     *\n     * @param link - object returned by addLink() or getLinks() methods.\n     *\n     * @returns true if link was removed; false otherwise.\n     */\n    removeLink: removeLink,\n\n    /**\n     * Removes node with given id from the graph. If node does not exist in the graph\n     * does nothing.\n     *\n     * @param nodeId node's identifier passed to addNode() function.\n     *\n     * @returns true if node was removed; false otherwise.\n     */\n    removeNode: removeNode,\n\n    /**\n     * Gets node with given identifier. If node does not exist undefined value is returned.\n     *\n     * @param nodeId requested node identifier;\n     *\n     * @return {node} in with requested identifier or undefined if no such node exists.\n     */\n    getNode: getNode,\n\n    /**\n     * Gets number of nodes in this graph.\n     *\n     * @return number of nodes in the graph.\n     */\n    getNodeCount: getNodeCount,\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getLinkCount: getLinkCount,\n\n    /**\n     * Gets total number of links in the graph.\n     */\n    getEdgeCount: getLinkCount,\n\n    /**\n     * Synonym for `getLinkCount()`\n     */\n    getLinksCount: getLinkCount,\n    \n    /**\n     * Synonym for `getNodeCount()`\n     */\n    getNodesCount: getNodeCount,\n\n    /**\n     * Gets all links (inbound and outbound) from the node with given id.\n     * If node with given id is not found null is returned.\n     *\n     * @param nodeId requested node identifier.\n     *\n     * @return Set of links from and to requested node if such node exists;\n     *   otherwise null is returned.\n     */\n    getLinks: getLinks,\n\n    /**\n     * Invokes callback on each node of the graph.\n     *\n     * @param {Function(node)} callback Function to be invoked. The function\n     *   is passed one argument: visited node.\n     */\n    forEachNode: forEachNode,\n\n    /**\n     * Invokes callback on every linked (adjacent) node to the given one.\n     *\n     * @param nodeId Identifier of the requested node.\n     * @param {Function(node, link)} callback Function to be called on all linked nodes.\n     *   The function is passed two parameters: adjacent node and link object itself.\n     * @param oriented if true graph treated as oriented.\n     */\n    forEachLinkedNode: forEachLinkedNode,\n\n    /**\n     * Enumerates all links in the graph\n     *\n     * @param {Function(link)} callback Function to be called on all links in the graph.\n     *   The function is passed one parameter: graph's link object.\n     *\n     * Link object contains at least the following fields:\n     *  fromId - node id where link starts;\n     *  toId - node id where link ends,\n     *  data - additional data passed to graph.addLink() method.\n     */\n    forEachLink: forEachLink,\n\n    /**\n     * Suspend all notifications about graph changes until\n     * endUpdate is called.\n     */\n    beginUpdate: enterModification,\n\n    /**\n     * Resumes all notifications about graph changes and fires\n     * graph 'changed' event in case there are any pending changes.\n     */\n    endUpdate: exitModification,\n\n    /**\n     * Removes all nodes and links from the graph.\n     */\n    clear: clear,\n\n    /**\n     * Detects whether there is a link between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     * NOTE: this function is synonym for getLink()\n     *\n     * @returns link if there is one. null otherwise.\n     */\n    hasLink: getLink,\n\n    /**\n     * Detects whether there is a node with given id\n     * \n     * Operation complexity is O(1)\n     * NOTE: this function is synonym for getNode()\n     *\n     * @returns node if there is one; Falsy value otherwise.\n     */\n    hasNode: getNode,\n\n    /**\n     * Gets an edge between two nodes.\n     * Operation complexity is O(n) where n - number of links of a node.\n     *\n     * @param {string} fromId link start identifier\n     * @param {string} toId link end identifier\n     *\n     * @returns link if there is one; undefined otherwise.\n     */\n    getLink: getLink\n  };\n\n  // this will add `on()` and `fire()` methods.\n  eventify(graphPart);\n\n  monitorSubscribers();\n\n  return graphPart;\n\n  function monitorSubscribers() {\n    var realOn = graphPart.on;\n\n    // replace real `on` with our temporary on, which will trigger change\n    // modification monitoring:\n    graphPart.on = on;\n\n    function on() {\n      // now it's time to start tracking stuff:\n      graphPart.beginUpdate = enterModification = enterModificationReal;\n      graphPart.endUpdate = exitModification = exitModificationReal;\n      recordLinkChange = recordLinkChangeReal;\n      recordNodeChange = recordNodeChangeReal;\n\n      // this will replace current `on` method with real pub/sub from `eventify`.\n      graphPart.on = realOn;\n      // delegate to real `on` handler:\n      return realOn.apply(graphPart, arguments);\n    }\n  }\n\n  function recordLinkChangeReal(link, changeType) {\n    changes.push({\n      link: link,\n      changeType: changeType\n    });\n  }\n\n  function recordNodeChangeReal(node, changeType) {\n    changes.push({\n      node: node,\n      changeType: changeType\n    });\n  }\n\n  function addNode(nodeId, data) {\n    if (nodeId === undefined) {\n      throw new Error('Invalid node identifier');\n    }\n\n    enterModification();\n\n    var node = getNode(nodeId);\n    if (!node) {\n      node = new Node(nodeId, data);\n      recordNodeChange(node, 'add');\n    } else {\n      node.data = data;\n      recordNodeChange(node, 'update');\n    }\n\n    nodes.set(nodeId, node);\n\n    exitModification();\n    return node;\n  }\n\n  function getNode(nodeId) {\n    return nodes.get(nodeId);\n  }\n\n  function removeNode(nodeId) {\n    var node = getNode(nodeId);\n    if (!node) {\n      return false;\n    }\n\n    enterModification();\n\n    var prevLinks = node.links;\n    if (prevLinks) {\n      prevLinks.forEach(removeLinkInstance);\n      node.links = null;\n    }\n\n    nodes.delete(nodeId);\n\n    recordNodeChange(node, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n\n  function addLink(fromId, toId, data) {\n    enterModification();\n\n    var fromNode = getNode(fromId) || addNode(fromId);\n    var toNode = getNode(toId) || addNode(toId);\n\n    var link = createLink(fromId, toId, data);\n    var isUpdate = links.has(link.id);\n\n    links.set(link.id, link);\n\n    // TODO: this is not cool. On large graphs potentially would consume more memory.\n    addLinkToNode(fromNode, link);\n    if (fromId !== toId) {\n      // make sure we are not duplicating links for self-loops\n      addLinkToNode(toNode, link);\n    }\n\n    recordLinkChange(link, isUpdate ? 'update' : 'add');\n\n    exitModification();\n\n    return link;\n  }\n\n  function createSingleLink(fromId, toId, data) {\n    var linkId = makeLinkId(fromId, toId);\n    var prevLink = links.get(linkId);\n    if (prevLink) {\n      prevLink.data = data;\n      return prevLink;\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function createUniqueLink(fromId, toId, data) {\n    // TODO: Find a better/faster way to store multigraphs\n    var linkId = makeLinkId(fromId, toId);\n    var isMultiEdge = multiEdges.hasOwnProperty(linkId);\n    if (isMultiEdge || getLink(fromId, toId)) {\n      if (!isMultiEdge) {\n        multiEdges[linkId] = 0;\n      }\n      var suffix = '@' + (++multiEdges[linkId]);\n      linkId = makeLinkId(fromId + suffix, toId + suffix);\n    }\n\n    return new Link(fromId, toId, data, linkId);\n  }\n\n  function getNodeCount() {\n    return nodes.size;\n  }\n\n  function getLinkCount() {\n    return links.size;\n  }\n\n  function getLinks(nodeId) {\n    var node = getNode(nodeId);\n    return node ? node.links : null;\n  }\n\n  function removeLink(link, otherId) {\n    if (otherId !== undefined) {\n      link = getLink(link, otherId);\n    }\n    return removeLinkInstance(link);\n  }\n\n  function removeLinkInstance(link) {\n    if (!link) {\n      return false;\n    }\n    if (!links.get(link.id)) return false;\n\n    enterModification();\n\n    links.delete(link.id);\n\n    var fromNode = getNode(link.fromId);\n    var toNode = getNode(link.toId);\n\n    if (fromNode) {\n      fromNode.links.delete(link);\n    }\n\n    if (toNode) {\n      toNode.links.delete(link);\n    }\n\n    recordLinkChange(link, 'remove');\n\n    exitModification();\n\n    return true;\n  }\n\n  function getLink(fromNodeId, toNodeId) {\n    if (fromNodeId === undefined || toNodeId === undefined) return undefined;\n    return links.get(makeLinkId(fromNodeId, toNodeId));\n  }\n\n  function clear() {\n    enterModification();\n    forEachNode(function(node) {\n      removeNode(node.id);\n    });\n    exitModification();\n  }\n\n  function forEachLink(callback) {\n    if (typeof callback === 'function') {\n      var valuesIterator = links.values();\n      var nextValue = valuesIterator.next();\n      while (!nextValue.done) {\n        if (callback(nextValue.value)) {\n          return true; // client doesn't want to proceed. Return.\n        }\n        nextValue = valuesIterator.next();\n      }\n    }\n  }\n\n  function forEachLinkedNode(nodeId, callback, oriented) {\n    var node = getNode(nodeId);\n\n    if (node && node.links && typeof callback === 'function') {\n      if (oriented) {\n        return forEachOrientedLink(node.links, nodeId, callback);\n      } else {\n        return forEachNonOrientedLink(node.links, nodeId, callback);\n      }\n    }\n  }\n\n  // eslint-disable-next-line no-shadow\n  function forEachNonOrientedLink(links, nodeId, callback) {\n    var quitFast;\n\n    var valuesIterator = links.values();\n    var nextValue = valuesIterator.next();\n    while (!nextValue.done) {\n      var link = nextValue.value;\n      var linkedNodeId = link.fromId === nodeId ? link.toId : link.fromId;\n      quitFast = callback(nodes.get(linkedNodeId), link);\n      if (quitFast) {\n        return true; // Client does not need more iterations. Break now.\n      }\n      nextValue = valuesIterator.next();\n    }\n  }\n\n  // eslint-disable-next-line no-shadow\n  function forEachOrientedLink(links, nodeId, callback) {\n    var quitFast;\n    var valuesIterator = links.values();\n    var nextValue = valuesIterator.next();\n    while (!nextValue.done) {\n      var link = nextValue.value;\n      if (link.fromId === nodeId) {\n        quitFast = callback(nodes.get(link.toId), link);\n        if (quitFast) {\n          return true; // Client does not need more iterations. Break now.\n        }\n      }\n      nextValue = valuesIterator.next();\n    }\n  }\n\n  // we will not fire anything until users of this library explicitly call `on()`\n  // method.\n  function noop() {}\n\n  // Enter, Exit modification allows bulk graph updates without firing events.\n  function enterModificationReal() {\n    suspendEvents += 1;\n  }\n\n  function exitModificationReal() {\n    suspendEvents -= 1;\n    if (suspendEvents === 0 && changes.length > 0) {\n      graphPart.fire('changed', changes);\n      changes.length = 0;\n    }\n  }\n\n  function forEachNode(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Function is expected to iterate over graph nodes. You passed ' + callback);\n    }\n\n    var valuesIterator = nodes.values();\n    var nextValue = valuesIterator.next();\n    while (!nextValue.done) {\n      if (callback(nextValue.value)) {\n        return true; // client doesn't want to proceed. Return.\n      }\n      nextValue = valuesIterator.next();\n    }\n  }\n}\n\n/**\n * Internal structure to represent node;\n */\nfunction Node(id, data) {\n  this.id = id;\n  this.links = null;\n  this.data = data;\n}\n\nfunction addLinkToNode(node, link) {\n  if (node.links) {\n    node.links.add(link);\n  } else {\n    node.links = new Set([link]);\n  }\n}\n\n/**\n * Internal structure to represent links;\n */\nfunction Link(fromId, toId, data, id) {\n  this.fromId = fromId;\n  this.toId = toId;\n  this.data = data;\n  this.id = id;\n}\n\nfunction makeLinkId(fromId, toId) {\n  return fromId.toString() + '👉 ' + toId.toString();\n}\n","module.exports = merge;\n\n/**\n * Augments `target` with properties in `options`. Does not override\n * target's properties if they are defined and matches expected type in \n * options\n *\n * @returns {Object} merged object\n */\nfunction merge(target, options) {\n  var key;\n  if (!target) { target = {}; }\n  if (options) {\n    for (key in options) {\n      if (options.hasOwnProperty(key)) {\n        var targetHasIt = target.hasOwnProperty(key),\n            optionsValueType = typeof options[key],\n            shouldReplace = !targetHasIt || (typeof target[key] !== optionsValueType);\n\n        if (shouldReplace) {\n          target[key] = options[key];\n        } else if (optionsValueType === 'object') {\n          // go deep, don't care about loops here, we are simple API!:\n          target[key] = merge(target[key], options[key]);\n        }\n      }\n    }\n  }\n\n  return target;\n}\n","module.exports = random;\n\n// TODO: Deprecate?\nmodule.exports.random = random,\nmodule.exports.randomIterator = randomIterator\n\n/**\n * Creates seeded PRNG with two methods:\n *   next() and nextDouble()\n */\nfunction random(inputSeed) {\n  var seed = typeof inputSeed === 'number' ? inputSeed : (+new Date());\n  return new Generator(seed)\n}\n\nfunction Generator(seed) {\n  this.seed = seed;\n}\n\n/**\n  * Generates random integer number in the range from 0 (inclusive) to maxValue (exclusive)\n  *\n  * @param maxValue Number REQUIRED. Omitting this number will result in NaN values from PRNG.\n  */\nGenerator.prototype.next = next;\n\n/**\n  * Generates random double number in the range from 0 (inclusive) to 1 (exclusive)\n  * This function is the same as Math.random() (except that it could be seeded)\n  */\nGenerator.prototype.nextDouble = nextDouble;\n\n/**\n * Returns a random real number from uniform distribution in [0, 1)\n */\nGenerator.prototype.uniform = nextDouble;\n\n/**\n * Returns a random real number from a Gaussian distribution\n * with 0 as a mean, and 1 as standard deviation u ~ N(0,1)\n */\nGenerator.prototype.gaussian = gaussian;\n\nfunction gaussian() {\n  // use the polar form of the Box-Muller transform\n  // based on https://introcs.cs.princeton.edu/java/23recursion/StdRandom.java\n  var r, x, y;\n  do {\n    x = this.nextDouble() * 2 - 1;\n    y = this.nextDouble() * 2 - 1;\n    r = x * x + y * y;\n  } while (r >= 1 || r === 0);\n\n  return x * Math.sqrt(-2 * Math.log(r)/r);\n}\n\n/**\n * See https://twitter.com/anvaka/status/1296182534150135808\n */\nGenerator.prototype.levy = levy;\n\nfunction levy() {\n  var beta = 3 / 2;\n  var sigma = Math.pow(\n      gamma( 1 + beta ) * Math.sin(Math.PI * beta / 2) / \n        (gamma((1 + beta) / 2) * beta * Math.pow(2, (beta - 1) / 2)),\n      1/beta\n  );\n  return this.gaussian() * sigma / Math.pow(Math.abs(this.gaussian()), 1/beta);\n}\n\n// gamma function approximation\nfunction gamma(z) {\n  return Math.sqrt(2 * Math.PI / z) * Math.pow((1 / Math.E) * (z + 1 / (12 * z - 1 / (10 * z))), z);\n}\n\nfunction nextDouble() {\n  var seed = this.seed;\n  // Robert Jenkins' 32 bit integer hash function.\n  seed = ((seed + 0x7ed55d16) + (seed << 12)) & 0xffffffff;\n  seed = ((seed ^ 0xc761c23c) ^ (seed >>> 19)) & 0xffffffff;\n  seed = ((seed + 0x165667b1) + (seed << 5)) & 0xffffffff;\n  seed = ((seed + 0xd3a2646c) ^ (seed << 9)) & 0xffffffff;\n  seed = ((seed + 0xfd7046c5) + (seed << 3)) & 0xffffffff;\n  seed = ((seed ^ 0xb55a4f09) ^ (seed >>> 16)) & 0xffffffff;\n  this.seed = seed;\n  return (seed & 0xfffffff) / 0x10000000;\n}\n\nfunction next(maxValue) {\n  return Math.floor(this.nextDouble() * maxValue);\n}\n\n/*\n * Creates iterator over array, which returns items of array in random order\n * Time complexity is guaranteed to be O(n);\n */\nfunction randomIterator(array, customRandom) {\n  var localRandom = customRandom || random();\n  if (typeof localRandom.next !== 'function') {\n    throw new Error('customRandom does not match expected API: next() function is missing');\n  }\n\n  return {\n    forEach: forEach,\n\n    /**\n     * Shuffles array randomly, in place.\n     */\n    shuffle: shuffle\n  };\n\n  function shuffle() {\n    var i, j, t;\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n    }\n\n    return array;\n  }\n\n  function forEach(callback) {\n    var i, j, t;\n    for (i = array.length - 1; i > 0; --i) {\n      j = localRandom.next(i + 1); // i inclusive\n      t = array[j];\n      array[j] = array[i];\n      array[i] = t;\n\n      callback(t);\n    }\n\n    if (array.length) {\n      callback(array[0]);\n    }\n  }\n}","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar pluck = function pluck(obj, keys) {\n  return Object.assign.apply(Object, [{}].concat(_toConsumableArray(keys.map(function (key) {\n    return _defineProperty({}, key, obj[key]);\n  }))));\n};\nvar omit = function omit(obj, keys) {\n  var keySet = new Set(keys);\n  return Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(obj).filter(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 1),\n      key = _ref3[0];\n    return !keySet.has(key);\n  }).map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      key = _ref5[0],\n      val = _ref5[1];\n    return _defineProperty({}, key, val);\n  }))));\n};\n\nexport { omit, pluck };\n","import React, { forwardRef, useRef, useState, useEffect, useMemo, useCallback, useImperativeHandle, useLayoutEffect } from 'react';\nimport { omit } from 'jerrypick';\nimport fromEntries from 'fromentries';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction index (kapsuleComponent, comboParam) {\n  var _ref = _typeof(comboParam) === 'object' ? comboParam : {\n      // support old schema for backwards compatibility\n      wrapperElementType: comboParam,\n      methodNames: (arguments.length <= 2 ? undefined : arguments[2]) || undefined,\n      initPropNames: (arguments.length <= 3 ? undefined : arguments[3]) || undefined\n    },\n    _ref$wrapperElementTy = _ref.wrapperElementType,\n    wrapperElementType = _ref$wrapperElementTy === void 0 ? 'div' : _ref$wrapperElementTy,\n    _ref$nodeMapper = _ref.nodeMapper,\n    nodeMapper = _ref$nodeMapper === void 0 ? function (node) {\n      return node;\n    } : _ref$nodeMapper,\n    _ref$methodNames = _ref.methodNames,\n    methodNames = _ref$methodNames === void 0 ? [] : _ref$methodNames,\n    _ref$initPropNames = _ref.initPropNames,\n    initPropNames = _ref$initPropNames === void 0 ? [] : _ref$initPropNames;\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    var domEl = useRef();\n    var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      prevProps = _useState2[0],\n      setPrevProps = _useState2[1];\n    useEffect(function () {\n      return setPrevProps(props);\n    }); // remember previous props\n\n    // instantiate the inner kapsule component with the defined initPropNames\n    var comp = useMemo(function () {\n      var configOptions = fromEntries(initPropNames.filter(function (p) {\n        return props.hasOwnProperty(p);\n      }).map(function (prop) {\n        return [prop, props[prop]];\n      }));\n      return kapsuleComponent(configOptions);\n    }, []);\n    useEffectOnce(function () {\n      comp(nodeMapper(domEl.current)); // mount kapsule synchronously on this element ref, optionally mapped into an object that the kapsule understands\n    }, useLayoutEffect);\n    useEffectOnce(function () {\n      // invoke destructor on unmount, if it exists\n      return comp._destructor instanceof Function ? comp._destructor : undefined;\n    });\n\n    // Call a component method\n    var _call = useCallback(function (method) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      return comp[method] instanceof Function ? comp[method].apply(comp, args) : undefined;\n    } // method not found\n    , [comp]);\n\n    // propagate component props that have changed\n    var dynamicProps = omit(props, [].concat(_toConsumableArray(methodNames), _toConsumableArray(initPropNames))); // initPropNames or methodNames should not be called\n    Object.keys(dynamicProps).filter(function (p) {\n      return prevProps[p] !== props[p];\n    }).forEach(function (p) {\n      return _call(p, props[p]);\n    });\n\n    // bind external methods to parent ref\n    useImperativeHandle(ref, function () {\n      return fromEntries(methodNames.map(function (method) {\n        return [method, function () {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          return _call.apply(void 0, [method].concat(args));\n        }];\n      }));\n    });\n    return /*#__PURE__*/React.createElement(wrapperElementType, {\n      ref: domEl\n    });\n  });\n}\n\n//\n\n// Handle R18 strict mode double mount at init\nfunction useEffectOnce(effect) {\n  var useEffectFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : useEffect;\n  var destroyFunc = useRef();\n  var effectCalled = useRef(false);\n  var renderAfterCalled = useRef(false);\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2);\n    _useState4[0];\n    var setVal = _useState4[1];\n  if (effectCalled.current) {\n    renderAfterCalled.current = true;\n  }\n  useEffectFn(function () {\n    // only execute the effect first time around\n    if (!effectCalled.current) {\n      destroyFunc.current = effect();\n      effectCalled.current = true;\n    }\n\n    // this forces one render after the effect is run\n    setVal(function (val) {\n      return val + 1;\n    });\n    return function () {\n      // if the comp didn't render since the useEffect was called,\n      // we know it's the dummy React cycle\n      if (!renderAfterCalled.current) return;\n      if (destroyFunc.current) destroyFunc.current();\n    };\n  }, []);\n}\n\nexport { index as default };\n","import {\n\tEventDispatcher,\n\tMatrix4,\n\tPlane,\n\tRaycaster,\n\tVector2,\n\tVector3\n} from 'three';\n\nconst _plane = new Plane();\nconst _raycaster = new Raycaster();\n\nconst _pointer = new Vector2();\nconst _offset = new Vector3();\nconst _intersection = new Vector3();\nconst _worldPosition = new Vector3();\nconst _inverseMatrix = new Matrix4();\n\nclass DragControls extends EventDispatcher {\n\n\tconstructor( _objects, _camera, _domElement ) {\n\n\t\tsuper();\n\n\t\t_domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\tlet _selected = null, _hovered = null;\n\n\t\tconst _intersections = [];\n\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tfunction activate() {\n\n\t\t\t_domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t_domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\t\t_domElement.addEventListener( 'pointerup', onPointerCancel );\n\t\t\t_domElement.addEventListener( 'pointerleave', onPointerCancel );\n\n\t\t}\n\n\t\tfunction deactivate() {\n\n\t\t\t_domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t_domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\t_domElement.removeEventListener( 'pointerup', onPointerCancel );\n\t\t\t_domElement.removeEventListener( 'pointerleave', onPointerCancel );\n\n\t\t\t_domElement.style.cursor = '';\n\n\t\t}\n\n\t\tfunction dispose() {\n\n\t\t\tdeactivate();\n\n\t\t}\n\n\t\tfunction getObjects() {\n\n\t\t\treturn _objects;\n\n\t\t}\n\n\t\tfunction getRaycaster() {\n\n\t\t\treturn _raycaster;\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tupdatePointer( event );\n\n\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\n\t\t\tif ( _selected ) {\n\n\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t\t_selected.position.copy( _intersection.sub( _offset ).applyMatrix4( _inverseMatrix ) );\n\n\t\t\t\t}\n\n\t\t\t\tscope.dispatchEvent( { type: 'drag', object: _selected } );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// hover support\n\n\t\t\tif ( event.pointerType === 'mouse' || event.pointerType === 'pen' ) {\n\n\t\t\t\t_intersections.length = 0;\n\n\t\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\t\t\t\t_raycaster.intersectObjects( _objects, true, _intersections );\n\n\t\t\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t\t\tconst object = _intersections[ 0 ].object;\n\n\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( object.matrixWorld ) );\n\n\t\t\t\t\tif ( _hovered !== object && _hovered !== null ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t\t\t_hovered = null;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( _hovered !== object ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveron', object: object } );\n\n\t\t\t\t\t\t_domElement.style.cursor = 'pointer';\n\t\t\t\t\t\t_hovered = object;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( _hovered !== null ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( { type: 'hoveroff', object: _hovered } );\n\n\t\t\t\t\t\t_domElement.style.cursor = 'auto';\n\t\t\t\t\t\t_hovered = null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tupdatePointer( event );\n\n\t\t\t_intersections.length = 0;\n\n\t\t\t_raycaster.setFromCamera( _pointer, _camera );\n\t\t\t_raycaster.intersectObjects( _objects, true, _intersections );\n\n\t\t\tif ( _intersections.length > 0 ) {\n\n\t\t\t\t_selected = ( scope.transformGroup === true ) ? _objects[ 0 ] : _intersections[ 0 ].object;\n\n\t\t\t\t_plane.setFromNormalAndCoplanarPoint( _camera.getWorldDirection( _plane.normal ), _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t\tif ( _raycaster.ray.intersectPlane( _plane, _intersection ) ) {\n\n\t\t\t\t\t_inverseMatrix.copy( _selected.parent.matrixWorld ).invert();\n\t\t\t\t\t_offset.copy( _intersection ).sub( _worldPosition.setFromMatrixPosition( _selected.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t\t_domElement.style.cursor = 'move';\n\n\t\t\t\tscope.dispatchEvent( { type: 'dragstart', object: _selected } );\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction onPointerCancel() {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( _selected ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'dragend', object: _selected } );\n\n\t\t\t\t_selected = null;\n\n\t\t\t}\n\n\t\t\t_domElement.style.cursor = _hovered ? 'pointer' : 'auto';\n\n\t\t}\n\n\t\tfunction updatePointer( event ) {\n\n\t\t\tconst rect = _domElement.getBoundingClientRect();\n\n\t\t\t_pointer.x = ( event.clientX - rect.left ) / rect.width * 2 - 1;\n\t\t\t_pointer.y = - ( event.clientY - rect.top ) / rect.height * 2 + 1;\n\n\t\t}\n\n\t\tactivate();\n\n\t\t// API\n\n\t\tthis.enabled = true;\n\t\tthis.transformGroup = false;\n\n\t\tthis.activate = activate;\n\t\tthis.deactivate = deactivate;\n\t\tthis.dispose = dispose;\n\t\tthis.getObjects = getObjects;\n\t\tthis.getRaycaster = getRaycaster;\n\n\t}\n\n}\n\nexport { DragControls };\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nvar MAX_DIMENSIONS = 3;\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nexport function z(d) {\n  return d.z;\n}\n\nvar initialRadius = 10,\n    initialAngleRoll = Math.PI * (3 - Math.sqrt(5)), // Golden ratio angle\n    initialAngleYaw = Math.PI * 20 / (9 + Math.sqrt(221)); // Markov irrational number\n\nexport default function(nodes, numDimensions) {\n  numDimensions = numDimensions || 2;\n\n  var nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(numDimensions))),\n      simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function (force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (nDim > 1) {\n          if (node.fy == null) node.y += node.vy *= velocityDecay;\n          else node.y = node.fy, node.vy = 0;\n        }\n        if (nDim > 2) {\n          if (node.fz == null) node.z += node.vz *= velocityDecay;\n          else node.z = node.fz, node.vz = 0;\n        }\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (node.fz != null) node.z = node.fz;\n      if (isNaN(node.x) || (nDim > 1 && isNaN(node.y)) || (nDim > 2 && isNaN(node.z))) {\n        var radius = initialRadius * (nDim > 2 ? Math.cbrt(0.5 + i) : (nDim > 1 ? Math.sqrt(0.5 + i) : i)),\n          rollAngle = i * initialAngleRoll,\n          yawAngle = i * initialAngleYaw;\n\n        if (nDim === 1) {\n          node.x = radius;\n        } else if (nDim === 2) {\n          node.x = radius * Math.cos(rollAngle);\n          node.y = radius * Math.sin(rollAngle);\n        } else { // 3 dimensions: use spherical distribution along 2 irrational number angles\n          node.x = radius * Math.sin(rollAngle) * Math.cos(yawAngle);\n          node.y = radius * Math.cos(rollAngle);\n          node.z = radius * Math.sin(rollAngle) * Math.sin(yawAngle);\n        }\n      }\n      if (isNaN(node.vx) || (nDim > 1 && isNaN(node.vy)) || (nDim > 2 && isNaN(node.vz))) {\n        node.vx = 0;\n        if (nDim > 1) { node.vy = 0; }\n        if (nDim > 2) { node.vz = 0; }\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random, nDim);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    numDimensions: function(_) {\n      return arguments.length\n          ? (nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(_))), forces.forEach(initializeForce), simulation)\n          : nDim;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function() {\n      var args = Array.prototype.slice.call(arguments);\n      var x = args.shift() || 0,\n          y = (nDim > 1 ? args.shift() : null) || 0,\n          z = (nDim > 2 ? args.shift() : null) || 0,\n          radius = args.shift() || Infinity;\n\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          dz,\n          d2,\n          node,\n          closest;\n\n      radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - (node.y || 0);\n        dz = z - (node.z ||0);\n        d2 = dx * dx + dy * dy + dz * dz;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      nDim,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x = 0, y = 0, z = 0, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        if (nDim > 1) { y = target.y + target.vy - source.y - source.vy || jiggle(random); }\n        if (nDim > 2) { z = target.z + target.vz - source.z - source.vz || jiggle(random); }\n        l = Math.sqrt(x * x + y * y + z * z);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l, z *= l;\n\n        target.vx -= x * (b = bias[i]);\n        if (nDim > 1) { target.vy -= y * b; }\n        if (nDim > 2) { target.vz -= z * b; }\n\n        source.vx += x * (b = 1 - b);\n        if (nDim > 1) { source.vy += y * b; }\n        if (nDim > 2) { source.vz += z * b; }\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, ...args) {\n    nodes = _nodes;\n    random = args.find(arg => typeof arg === 'function') || Math.random;\n    nDim = args.find(arg => [1, 2, 3].includes(arg)) || 2;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","export default function(d) {\n  const x = +this._x.call(null, d);\n  return add(this.cover(x), x, d);\n}\n\nfunction add(tree, x, d) {\n  if (isNaN(x)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      x1 = tree._x1,\n      xm,\n      xp,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (parent = node, !(node = node[i = +right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  if (x === xp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(2) : tree._root = new Array(2);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n  } while ((i = +right) === (j = +(xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  if (!Array.isArray(data)) data = Array.from(data);\n  const n = data.length;\n  const xz = new Float64Array(n);\n  let x0 = Infinity,\n      x1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (let i = 0, x; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, data[i]))) continue;\n    xz[i] = x;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0).cover(x1);\n\n  // Add the new points.\n  for (let i = 0; i < n; ++i) {\n    add(this, xz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, x1) {\n  this.node = node;\n  this.x0 = x0;\n  this.x1 = x1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\n\nexport default function binarytree(nodes, x) {\n  var tree = new Binarytree(x == null ? defaultX : x, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Binarytree(x, x0, x1) {\n  this._x = x;\n  this._x0 = x0;\n  this._x1 = x1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = binarytree.prototype = Binarytree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Binarytree(this._x, this._x0, this._x1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(2)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 2; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(2)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","export default function(x) {\n  if (isNaN(x = +x)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      x1 = this._x1;\n\n  // If the binarytree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing half boundaries don’t change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1) {\n      i = +(x < x0);\n      parent = new Array(2), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z; break;\n        case 1: x0 = x1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._x1 = x1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0]).cover(+_[1][0])\n      : isNaN(this._x0) ? undefined : [[this._x0], [this._x1]];\n}\n","import Half from \"./half.js\";\n\nexport default function(x, radius) {\n  var data,\n      x0 = this._x0,\n      x1,\n      x2,\n      x3 = this._x1,\n      halves = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) halves.push(new Half(node, x0, x3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius;\n    x3 = x + radius;\n  }\n\n  while (q = halves.pop()) {\n\n    // Stop searching if this half can’t contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (x2 = q.x1) < x0) continue;\n\n    // Bisect the current half.\n    if (node.length) {\n      var xm = (x1 + x2) / 2;\n\n      halves.push(\n        new Half(node[1], xm, x2),\n        new Half(node[0], x1, xm)\n      );\n\n      // Visit the closest half first.\n      if (i = +(x >= xm)) {\n        q = halves[halves.length - 1];\n        halves[halves.length - 1] = halves[halves.length - 1 - i];\n        halves[halves.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n      var d = Math.abs(x - +this._x.call(null, node.data));\n      if (d < radius) {\n        radius = d;\n        x0 = x - d;\n        x3 = x + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      x1 = this._x1,\n      x,\n      xm,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (!(parent = node, node = node[i = +right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 1]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1])\n      && node === (parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Half from \"./half.js\";\n\nexport default function(callback) {\n  var halves = [], q, node = this._root, child, x0, x1;\n  if (node) halves.push(new Half(node, this._x0, this._x1));\n  while (q = halves.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, x1 = q.x1) && node.length) {\n      var xm = (x0 + x1) / 2;\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n    }\n  }\n  return this;\n}\n","import Half from \"./half.js\";\n\nexport default function(callback) {\n  var halves = [], next = [], q;\n  if (this._root) halves.push(new Half(this._root, this._x0, this._x1));\n  while (q = halves.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, x1 = q.x1, xm = (x0 + x1) / 2;\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.x1);\n  }\n  return this;\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d),\n      z = +this._z.call(null, d);\n  return add(this.cover(x, y, z), x, y, z, d);\n}\n\nfunction add(tree, x, y, z, d) {\n  if (isNaN(x) || isNaN(y) || isNaN(z)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      z0 = tree._z0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      z1 = tree._z1,\n      xm,\n      ym,\n      zm,\n      xp,\n      yp,\n      zp,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (parent = node, !(node = node[i = deep << 2 | bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  zp = +tree._z.call(null, node.data);\n  if (x === xp && y === yp && z === zp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(8) : tree._root = new Array(8);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n  } while ((i = deep << 2 | bottom << 1 | right) === (j = (zp >= zm) << 2 | (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  if (!Array.isArray(data)) data = Array.from(data);\n  const n = data.length;\n  const xz = new Float64Array(n);\n  const yz = new Float64Array(n);\n  const zz = new Float64Array(n);\n  let x0 = Infinity,\n      y0 = Infinity,\n      z0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity,\n      z1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (let i = 0, d, x, y, z; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    zz[i] = z;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n    if (z < z0) z0 = z;\n    if (z > z1) z1 = z;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1 || z0 > z1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0, z0).cover(x1, y1, z1);\n\n  // Add the new points.\n  for (let i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], zz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(node, x0, y0, z0, x1, y1, z1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.z0 = z0;\n  this.x1 = x1;\n  this.y1 = y1;\n  this.z1 = z1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","export function defaultZ(d) {\n  return d[2];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._z = _, this) : this._z;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\nimport tree_z, {defaultZ} from \"./z.js\";\n\nexport default function octree(nodes, x, y, z) {\n  var tree = new Octree(x == null ? defaultX : x, y == null ? defaultY : y, z == null ? defaultZ : z, NaN, NaN, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Octree(x, y, z, x0, y0, z0, x1, y1, z1) {\n  this._x = x;\n  this._y = y;\n  this._z = z;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = octree.prototype = Octree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Octree(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(8)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 8; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(8)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\ntreeProto.z = tree_z;\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries don’t change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant can’t contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","import {binarytree} from \"d3-binarytree\";\nimport {quadtree} from \"d3-quadtree\";\nimport {octree} from \"d3-octree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y, z} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      nDim,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i,\n        n = nodes.length,\n        tree =\n            (nDim === 1 ? binarytree(nodes, x)\n            :(nDim === 2 ? quadtree(nodes, x, y)\n            :(nDim === 3 ? octree(nodes, x, y, z)\n            :null\n        ))).visitAfter(accumulate);\n\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(treeNode) {\n    var strength = 0, q, c, weight = 0, x, y, z, i;\n    var numChildren = treeNode.length;\n\n    // For internal nodes, accumulate forces from children.\n    if (numChildren) {\n      for (x = y = z = i = 0; i < numChildren; ++i) {\n        if ((q = treeNode[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * (q.x || 0), y += c * (q.y || 0), z += c * (q.z || 0);\n        }\n      }\n      strength *= Math.sqrt(4 / numChildren); // scale accumulated strength according to number of dimensions\n\n      treeNode.x = x / weight;\n      if (nDim > 1) { treeNode.y = y / weight; }\n      if (nDim > 2) { treeNode.z = z / weight; }\n    }\n\n    // For leaf nodes, accumulate forces from coincident nodes.\n    else {\n      q = treeNode;\n      q.x = q.data.x;\n      if (nDim > 1) { q.y = q.data.y; }\n      if (nDim > 2) { q.z = q.data.z; }\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    treeNode.value = strength;\n  }\n\n  function apply(treeNode, x1, arg1, arg2, arg3) {\n    if (!treeNode.value) return true;\n    var x2 = [arg1, arg2, arg3][nDim-1];\n\n    var x = treeNode.x - node.x,\n        y = (nDim > 1 ? treeNode.y - node.y : 0),\n        z = (nDim > 2 ? treeNode.z - node.z : 0),\n        w = x2 - x1,\n        l = x * x + y * y + z * z;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (nDim > 1 && y === 0) y = jiggle(random), l += y * y;\n        if (nDim > 2 && z === 0) z = jiggle(random), l += z * z;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * treeNode.value * alpha / l;\n        if (nDim > 1) { node.vy += y * treeNode.value * alpha / l; }\n        if (nDim > 2) { node.vz += z * treeNode.value * alpha / l; }\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (treeNode.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (treeNode.data !== node || treeNode.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (nDim > 1 && y === 0) y = jiggle(random), l += y * y;\n      if (nDim > 2 && z === 0) z = jiggle(random), l += z * z;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (treeNode.data !== node) {\n      w = strengths[treeNode.data.index] * alpha / l;\n      node.vx += x * w;\n      if (nDim > 1) { node.vy += y * w; }\n      if (nDim > 2) { node.vz += z * w; }\n    } while (treeNode = treeNode.next);\n  }\n\n  force.initialize = function(_nodes, ...args) {\n    nodes = _nodes;\n    random = args.find(arg => typeof arg === 'function') || Math.random;\n    nDim = args.find(arg => [1, 2, 3].includes(arg)) || 2;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n","export default function(x, y, z) {\n  var nodes, strength = 1;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n  if (z == null) z = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0,\n        sz = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x || 0, sy += node.y || 0, sz += node.z || 0;\n    }\n\n    for (sx = (sx / n - x) * strength, sy = (sy / n - y) * strength, sz = (sz / n - z) * strength, i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (sx) { node.x -= sx }\n      if (sy) { node.y -= sy; }\n      if (sz) { node.z -= sz; }\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.z = function(_) {\n    return arguments.length ? (z = +_, force) : z;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  return force;\n}\n","export default function(x, y, z) {\n  if (isNaN(x = +x) || isNaN(y = +y) || isNaN(z = +z)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1;\n\n  // If the octree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing octant boundaries don’t change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n    z1 = (z0 = Math.floor(z)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var t = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1 || z0 > z || z >= z1) {\n      i = (z < z0) << 2 | (y < y0) << 1 | (x < x0);\n      parent = new Array(8), parent[i] = node, node = parent, t *= 2;\n      switch (i) {\n        case 0: x1 = x0 + t, y1 = y0 + t, z1 = z0 + t; break;\n        case 1: x0 = x1 - t, y1 = y0 + t, z1 = z0 + t; break;\n        case 2: x1 = x0 + t, y0 = y1 - t, z1 = z0 + t; break;\n        case 3: x0 = x1 - t, y0 = y1 - t, z1 = z0 + t; break;\n        case 4: x1 = x0 + t, y1 = y0 + t, z0 = z1 - t; break;\n        case 5: x0 = x1 - t, y1 = y0 + t, z0 = z1 - t; break;\n        case 6: x1 = x0 + t, y0 = y1 - t, z0 = z1 - t; break;\n        case 7: x0 = x1 - t, y0 = y1 - t, z0 = z1 - t; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1], +_[0][2]).cover(+_[1][0], +_[1][1], +_[1][2])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]];\n}\n","import Octant from \"./octant.js\";\n\nexport default function(x, y, z, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1,\n      y1,\n      z1,\n      x2,\n      y2,\n      z2,\n      x3 = this._x1,\n      y3 = this._y1,\n      z3 = this._z1,\n      octs = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) octs.push(new Octant(node, x0, y0, z0, x3, y3, z3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius, z0 = z - radius;\n    x3 = x + radius, y3 = y + radius, z3 = z + radius;\n    radius *= radius;\n  }\n\n  while (q = octs.pop()) {\n\n    // Stop searching if this octant can’t contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (z1 = q.z0) > z3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0\n        || (z2 = q.z1) < z0) continue;\n\n    // Bisect the current octant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2,\n          zm = (z1 + z2) / 2;\n\n      octs.push(\n        new Octant(node[7], xm, ym, zm, x2, y2, z2),\n        new Octant(node[6], x1, ym, zm, xm, y2, z2),\n        new Octant(node[5], xm, y1, zm, x2, ym, z2),\n        new Octant(node[4], x1, y1, zm, xm, ym, z2),\n        new Octant(node[3], xm, ym, z1, x2, y2, zm),\n        new Octant(node[2], x1, ym, z1, xm, y2, zm),\n        new Octant(node[1], xm, y1, z1, x2, ym, zm),\n        new Octant(node[0], x1, y1, z1, xm, ym, zm)\n      );\n\n      // Visit the closest octant first.\n      if (i = (z >= zm) << 2 | (y >= ym) << 1 | (x >= xm)) {\n        q = octs[octs.length - 1];\n        octs[octs.length - 1] = octs[octs.length - 1 - i];\n        octs[octs.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          dz = z - +this._z.call(null, node.data),\n          d2 = dx * dx + dy * dy + dz * dz;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d, z0 = z - d;\n        x3 = x + d, y3 = y + d, z3 = z + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1,\n      x,\n      y,\n      z,\n      xm,\n      ym,\n      zm,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (!(parent = node, node = node[i = deep << 2 | bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 7] || parent[(i + 2) & 7] || parent[(i + 3) & 7] || parent[(i + 4) & 7] || parent[(i + 5) & 7] || parent[(i + 6) & 7] || parent[(i + 7) & 7]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3] || parent[4] || parent[5] || parent[6] || parent[7])\n      && node === (parent[7] || parent[6] || parent[5] || parent[4] || parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Octant from \"./octant.js\";\n\nexport default function(callback) {\n  var octs = [], q, node = this._root, child, x0, y0, z0, x1, y1, z1;\n  if (node) octs.push(new Octant(node, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n    }\n  }\n  return this;\n}\n","import Octant from \"./octant.js\";\n\nexport default function(callback) {\n  var octs = [], next = [], q;\n  if (this._root) octs.push(new Octant(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.z0, q.x1, q.y1, q.z1);\n  }\n  return this;\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import { debounce } from 'lodash-es';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar Prop = /*#__PURE__*/_createClass(function Prop(name, _ref) {\n  var _ref$default = _ref[\"default\"],\n    defaultVal = _ref$default === void 0 ? null : _ref$default,\n    _ref$triggerUpdate = _ref.triggerUpdate,\n    triggerUpdate = _ref$triggerUpdate === void 0 ? true : _ref$triggerUpdate,\n    _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? function (newVal, state) {} : _ref$onChange;\n  _classCallCheck(this, Prop);\n  this.name = name;\n  this.defaultVal = defaultVal;\n  this.triggerUpdate = triggerUpdate;\n  this.onChange = onChange;\n});\nfunction index (_ref2) {\n  var _ref2$stateInit = _ref2.stateInit,\n    stateInit = _ref2$stateInit === void 0 ? function () {\n      return {};\n    } : _ref2$stateInit,\n    _ref2$props = _ref2.props,\n    rawProps = _ref2$props === void 0 ? {} : _ref2$props,\n    _ref2$methods = _ref2.methods,\n    methods = _ref2$methods === void 0 ? {} : _ref2$methods,\n    _ref2$aliases = _ref2.aliases,\n    aliases = _ref2$aliases === void 0 ? {} : _ref2$aliases,\n    _ref2$init = _ref2.init,\n    initFn = _ref2$init === void 0 ? function () {} : _ref2$init,\n    _ref2$update = _ref2.update,\n    updateFn = _ref2$update === void 0 ? function () {} : _ref2$update;\n  // Parse props into Prop instances\n  var props = Object.keys(rawProps).map(function (propName) {\n    return new Prop(propName, rawProps[propName]);\n  });\n  return function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    // Holds component state\n    var state = Object.assign({}, stateInit instanceof Function ? stateInit(options) : stateInit,\n    // Support plain objects for backwards compatibility\n    {\n      initialised: false\n    });\n\n    // keeps track of which props triggered an update\n    var changedProps = {};\n\n    // Component constructor\n    function comp(nodeElement) {\n      initStatic(nodeElement, options);\n      digest();\n      return comp;\n    }\n    var initStatic = function initStatic(nodeElement, options) {\n      initFn.call(comp, nodeElement, state, options);\n      state.initialised = true;\n    };\n    var digest = debounce(function () {\n      if (!state.initialised) {\n        return;\n      }\n      updateFn.call(comp, state, changedProps);\n      changedProps = {};\n    }, 1);\n\n    // Getter/setter methods\n    props.forEach(function (prop) {\n      comp[prop.name] = getSetProp(prop);\n      function getSetProp(_ref3) {\n        var prop = _ref3.name,\n          _ref3$triggerUpdate = _ref3.triggerUpdate,\n          redigest = _ref3$triggerUpdate === void 0 ? false : _ref3$triggerUpdate,\n          _ref3$onChange = _ref3.onChange,\n          onChange = _ref3$onChange === void 0 ? function (newVal, state) {} : _ref3$onChange,\n          _ref3$defaultVal = _ref3.defaultVal,\n          defaultVal = _ref3$defaultVal === void 0 ? null : _ref3$defaultVal;\n        return function (_) {\n          var curVal = state[prop];\n          if (!arguments.length) {\n            return curVal;\n          } // Getter mode\n\n          var val = _ === undefined ? defaultVal : _; // pick default if value passed is undefined\n          state[prop] = val;\n          onChange.call(comp, val, state, curVal);\n\n          // track changed props\n          !changedProps.hasOwnProperty(prop) && (changedProps[prop] = curVal);\n          if (redigest) {\n            digest();\n          }\n          return comp;\n        };\n      }\n    });\n\n    // Other methods\n    Object.keys(methods).forEach(function (methodName) {\n      comp[methodName] = function () {\n        var _methods$methodName;\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        return (_methods$methodName = methods[methodName]).call.apply(_methods$methodName, [comp, state].concat(args));\n      };\n    });\n\n    // Link aliases\n    Object.entries(aliases).forEach(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n        alias = _ref5[0],\n        target = _ref5[1];\n      return comp[alias] = comp[target];\n    });\n\n    // Reset all component props to their default value\n    comp.resetProps = function () {\n      props.forEach(function (prop) {\n        comp[prop.name](prop.defaultVal);\n      });\n      return comp;\n    };\n\n    //\n\n    comp.resetProps(); // Apply all prop defaults\n    state._rerender = digest; // Expose digest method\n\n    return comp;\n  };\n}\n\nexport { index as default };\n","var index = (function (p) {\n  return typeof p === 'function' ? p // fn\n  : typeof p === 'string' ? function (obj) {\n    return obj[p];\n  } // property name\n  : function (obj) {\n    return p;\n  };\n}); // constant\n\nexport { index as default };\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar index = (function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var keyAccessors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var multiItem = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var flattenKeys = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var keys = (keyAccessors instanceof Array ? keyAccessors.length ? keyAccessors : [undefined] : [keyAccessors]).map(function (key) {\n    return {\n      keyAccessor: key,\n      isProp: !(key instanceof Function)\n    };\n  });\n  var indexedResult = list.reduce(function (res, item) {\n    var iterObj = res;\n    var itemVal = item;\n    keys.forEach(function (_ref, idx) {\n      var keyAccessor = _ref.keyAccessor,\n        isProp = _ref.isProp;\n      var key;\n      if (isProp) {\n        var _itemVal = itemVal,\n          propVal = _itemVal[keyAccessor],\n          rest = _objectWithoutProperties(_itemVal, [keyAccessor].map(_toPropertyKey));\n        key = propVal;\n        itemVal = rest;\n      } else {\n        key = keyAccessor(itemVal, idx);\n      }\n      if (idx + 1 < keys.length) {\n        if (!iterObj.hasOwnProperty(key)) {\n          iterObj[key] = {};\n        }\n        iterObj = iterObj[key];\n      } else {\n        // Leaf key\n        if (multiItem) {\n          if (!iterObj.hasOwnProperty(key)) {\n            iterObj[key] = [];\n          }\n          iterObj[key].push(itemVal);\n        } else {\n          iterObj[key] = itemVal;\n        }\n      }\n    });\n    return res;\n  }, {});\n  if (multiItem instanceof Function) {\n    // Reduce leaf multiple values\n    (function reduce(node) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      if (level === keys.length) {\n        Object.keys(node).forEach(function (k) {\n          return node[k] = multiItem(node[k]);\n        });\n      } else {\n        Object.values(node).forEach(function (child) {\n          return reduce(child, level + 1);\n        });\n      }\n    })(indexedResult); // IIFE\n  }\n\n  var result = indexedResult;\n  if (flattenKeys) {\n    // flatten into array\n    result = [];\n    (function flatten(node) {\n      var accKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      if (accKeys.length === keys.length) {\n        result.push({\n          keys: accKeys,\n          vals: node\n        });\n      } else {\n        Object.entries(node).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n            key = _ref3[0],\n            val = _ref3[1];\n          return flatten(val, [].concat(_toConsumableArray(accKeys), [key]));\n        });\n      }\n    })(indexedResult); //IIFE\n\n    if (keyAccessors instanceof Array && keyAccessors.length === 0 && result.length === 1) {\n      // clear keys if there's no key accessors (single result)\n      result[0].keys = [];\n    }\n  }\n  return result;\n});\n\nexport { index as default };\n","import indexBy from 'index-array-by';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar _excluded = [\"createObj\", \"updateObj\", \"exitObj\", \"objBindAttr\", \"dataBindAttr\"];\nfunction diffArrays(prev, next, idAccessor) {\n  var result = {\n    enter: [],\n    update: [],\n    exit: []\n  };\n  if (!idAccessor) {\n    // use object references for comparison\n    var prevSet = new Set(prev);\n    var nextSet = new Set(next);\n    new Set([].concat(_toConsumableArray(prevSet), _toConsumableArray(nextSet))).forEach(function (item) {\n      var type = !prevSet.has(item) ? 'enter' : !nextSet.has(item) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [item, item] : item);\n    });\n  } else {\n    // compare by id (duplicate keys are ignored)\n    var prevById = indexBy(prev, idAccessor, false);\n    var nextById = indexBy(next, idAccessor, false);\n    var byId = Object.assign({}, prevById, nextById);\n    Object.entries(byId).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        id = _ref2[0],\n        item = _ref2[1];\n      var type = !prevById.hasOwnProperty(id) ? 'enter' : !nextById.hasOwnProperty(id) ? 'exit' : 'update';\n      result[type].push(type === 'update' ? [prevById[id], nextById[id]] : item);\n    });\n  }\n  return result;\n}\nfunction dataBindDiff(data, existingObjs, _ref3) {\n  var _ref3$objBindAttr = _ref3.objBindAttr,\n    objBindAttr = _ref3$objBindAttr === void 0 ? '__obj' : _ref3$objBindAttr,\n    _ref3$dataBindAttr = _ref3.dataBindAttr,\n    dataBindAttr = _ref3$dataBindAttr === void 0 ? '__data' : _ref3$dataBindAttr,\n    idAccessor = _ref3.idAccessor,\n    _ref3$purge = _ref3.purge,\n    purge = _ref3$purge === void 0 ? false : _ref3$purge;\n  var isObjValid = function isObjValid(obj) {\n    return obj.hasOwnProperty(dataBindAttr);\n  };\n  var removeObjs = existingObjs.filter(function (obj) {\n    return !isObjValid(obj);\n  });\n  var prevD = existingObjs.filter(isObjValid).map(function (obj) {\n    return obj[dataBindAttr];\n  });\n  var nextD = data;\n  var diff = purge ? {\n    enter: nextD,\n    exit: prevD,\n    update: []\n  } // don't diff data in purge mode\n  : diffArrays(prevD, nextD, idAccessor);\n  diff.update = diff.update.map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      prevD = _ref5[0],\n      nextD = _ref5[1];\n    if (prevD !== nextD) {\n      // transfer obj to new data point (if different)\n      nextD[objBindAttr] = prevD[objBindAttr];\n      nextD[objBindAttr][dataBindAttr] = nextD;\n    }\n    return nextD;\n  });\n  diff.exit = diff.exit.concat(removeObjs.map(function (obj) {\n    return _defineProperty({}, objBindAttr, obj);\n  }));\n  return diff;\n}\nfunction viewDigest(data, existingObjs,\n// list\nappendObj,\n// item => {...} function\nremoveObj, // item => {...} function\n_ref7) {\n  var _ref7$createObj = _ref7.createObj,\n    createObj = _ref7$createObj === void 0 ? function (d) {\n      return {};\n    } : _ref7$createObj,\n    _ref7$updateObj = _ref7.updateObj,\n    updateObj = _ref7$updateObj === void 0 ? function (obj, d) {} : _ref7$updateObj,\n    _ref7$exitObj = _ref7.exitObj,\n    exitObj = _ref7$exitObj === void 0 ? function (obj) {} : _ref7$exitObj,\n    _ref7$objBindAttr = _ref7.objBindAttr,\n    objBindAttr = _ref7$objBindAttr === void 0 ? '__obj' : _ref7$objBindAttr,\n    _ref7$dataBindAttr = _ref7.dataBindAttr,\n    dataBindAttr = _ref7$dataBindAttr === void 0 ? '__data' : _ref7$dataBindAttr,\n    dataDiffOptions = _objectWithoutProperties(_ref7, _excluded);\n  var _dataBindDiff = dataBindDiff(data, existingObjs, _objectSpread2({\n      objBindAttr: objBindAttr,\n      dataBindAttr: dataBindAttr\n    }, dataDiffOptions)),\n    enter = _dataBindDiff.enter,\n    update = _dataBindDiff.update,\n    exit = _dataBindDiff.exit;\n\n  // Remove exiting points\n  exit.forEach(function (d) {\n    var obj = d[objBindAttr];\n    delete d[objBindAttr]; // unbind obj\n\n    exitObj(obj);\n    removeObj(obj);\n  });\n  var newObjs = createObjs(enter);\n  var pointsData = [].concat(_toConsumableArray(enter), _toConsumableArray(update));\n  updateObjs(pointsData);\n\n  // Add new points\n  newObjs.forEach(appendObj);\n\n  //\n\n  function createObjs(data) {\n    var newObjs = [];\n    data.forEach(function (d) {\n      var obj = createObj(d);\n      if (obj) {\n        obj[dataBindAttr] = d;\n        d[objBindAttr] = obj;\n        newObjs.push(obj);\n      }\n    });\n    return newObjs;\n  }\n  function updateObjs(data) {\n    data.forEach(function (d) {\n      var obj = d[objBindAttr];\n      if (obj) {\n        obj[dataBindAttr] = d;\n        updateObj(obj, d);\n      }\n    });\n  }\n}\n\nexport { viewDigest as default };\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {InternMap} from \"d3-array\";\nimport {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new InternMap(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    let i = index.get(d);\n    if (i === undefined) {\n      if (unknown !== implicit) return unknown;\n      index.set(d, i = domain.push(d) - 1);\n    }\n    return range[i % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new InternMap();\n    for (const value of _) {\n      if (index.has(value)) continue;\n      index.set(value, domain.push(value) - 1);\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","// This file is autogenerated. It's used to publish ESM to npm.\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nvar trimLeft = /^\\s+/;\nvar trimRight = /\\s+$/;\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n  var rgb = inputToRGB(color);\n  this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = Math.round(100 * this._a) / 100, this._format = opts.format || rgb.format;\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n  this._ok = rgb.ok;\n}\ntinycolor.prototype = {\n  isDark: function isDark() {\n    return this.getBrightness() < 128;\n  },\n  isLight: function isLight() {\n    return !this.isDark();\n  },\n  isValid: function isValid() {\n    return this._ok;\n  },\n  getOriginalInput: function getOriginalInput() {\n    return this._originalInput;\n  },\n  getFormat: function getFormat() {\n    return this._format;\n  },\n  getAlpha: function getAlpha() {\n    return this._a;\n  },\n  getBrightness: function getBrightness() {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function getLuminance() {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function setAlpha(value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function toHsv() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return {\n      h: hsv.h * 360,\n      s: hsv.s,\n      v: hsv.v,\n      a: this._a\n    };\n  },\n  toHsvString: function toHsvString() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function toHsl() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return {\n      h: hsl.h * 360,\n      s: hsl.s,\n      l: hsl.l,\n      a: this._a\n    };\n  },\n  toHslString: function toHslString() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function toHex(allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function toHexString(allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function toHex8(allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function toHex8String(allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function toRgb() {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a\n    };\n  },\n  toRgbString: function toRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \")\" : \"rgba(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \", \" + this._roundA + \")\";\n  },\n  toPercentageRgb: function toPercentageRgb() {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a\n    };\n  },\n  toPercentageRgbString: function toPercentageRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%)\" : \"rgba(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n  },\n  toName: function toName() {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n    if (this._a < 1) {\n      return false;\n    }\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function toFilter(secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n    return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n  },\n  toString: function toString(format) {\n    var formatSet = !!format;\n    format = format || this._format;\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n    return formattedString || this.toHexString();\n  },\n  clone: function clone() {\n    return tinycolor(this.toString());\n  },\n  _applyModification: function _applyModification(fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function lighten() {\n    return this._applyModification(_lighten, arguments);\n  },\n  brighten: function brighten() {\n    return this._applyModification(_brighten, arguments);\n  },\n  darken: function darken() {\n    return this._applyModification(_darken, arguments);\n  },\n  desaturate: function desaturate() {\n    return this._applyModification(_desaturate, arguments);\n  },\n  saturate: function saturate() {\n    return this._applyModification(_saturate, arguments);\n  },\n  greyscale: function greyscale() {\n    return this._applyModification(_greyscale, arguments);\n  },\n  spin: function spin() {\n    return this._applyModification(_spin, arguments);\n  },\n  _applyCombination: function _applyCombination(fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function analogous() {\n    return this._applyCombination(_analogous, arguments);\n  },\n  complement: function complement() {\n    return this._applyCombination(_complement, arguments);\n  },\n  monochromatic: function monochromatic() {\n    return this._applyCombination(_monochromatic, arguments);\n  },\n  splitcomplement: function splitcomplement() {\n    return this._applyCombination(_splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function triad() {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function tetrad() {\n    return this._applyCombination(polyad, [4]);\n  }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (_typeof(color) == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = {\n    r: 0,\n    g: 0,\n    b: 0\n  };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n  if (_typeof(color) == \"object\") {\n    if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n  a = boundAlpha(a);\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    l: l\n  };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    v: v\n  };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n\n  // Return a 3 character hex if possible\n  if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16)), pad2(convertDecimalToHex(a))];\n\n  // Return a 4 character hex if possible\n  if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [pad2(convertDecimalToHex(a)), pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random()\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction _desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\nfunction _lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\nfunction _brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\nfunction _darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction _spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction _complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({\n      h: (hsl.h + i * step) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }));\n  }\n  return result;\n}\nfunction _splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [tinycolor(color), tinycolor({\n    h: (h + 72) % 360,\n    s: hsl.s,\n    l: hsl.l\n  }), tinycolor({\n    h: (h + 216) % 360,\n    s: hsl.s,\n    l: hsl.l\n  })];\n}\nfunction _analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n  for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\nfunction _monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n  while (results--) {\n    ret.push(tinycolor({\n      h: h,\n      s: s,\n      v: v\n    }));\n    v = (v + modification) % 1;\n  }\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n  var p = amount / 100;\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a\n  };\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n  out = false;\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n  if (tinycolor.isReadable(baseColor, bestColor, {\n    level: level,\n    size: size\n  }) || !includeFallbackColors) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return n % max / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\nvar matchers = function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n  };\n}();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0,\n      format: \"name\"\n    };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if (match = matchers.rgb.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3]\n    };\n  }\n  if (match = matchers.rgba.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsl.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3]\n    };\n  }\n  if (match = matchers.hsla.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsv.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3]\n    };\n  }\n  if (match = matchers.hsva.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hex8.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex6.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  if (match = matchers.hex4.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex3.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  return false;\n}\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || {\n    level: \"AA\",\n    size: \"small\"\n  };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return {\n    level: level,\n    size: size\n  };\n}\n\nexport { tinycolor as default };\n","import { Group, Mesh, MeshLambertMaterial, Color, BufferGeometry, BufferAttribute, Matrix4, Vector3, SphereGeometry, CylinderGeometry, TubeGeometry, ConeGeometry, Line, LineBasicMaterial, QuadraticBezierCurve3, CubicBezierCurve3, Box3 } from 'three';\nimport { forceSimulation, forceLink, forceManyBody, forceCenter, forceRadial } from 'd3-force-3d';\nimport graph from 'ngraph.graph';\nimport forcelayout from 'ngraph.forcelayout';\nimport Kapsule from 'kapsule';\nimport accessorFn from 'accessor-fn';\nimport { min, max } from 'd3-array';\nimport dataJoint from 'data-joint';\nimport { scaleOrdinal } from 'd3-scale';\nimport { schemePaired } from 'd3-scale-chromatic';\nimport tinyColor from 'tinycolor2';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar materialDispose = function materialDispose(material) {\n  if (material instanceof Array) {\n    material.forEach(materialDispose);\n  } else {\n    if (material.map) {\n      material.map.dispose();\n    }\n    material.dispose();\n  }\n};\nvar deallocate = function deallocate(obj) {\n  if (obj.geometry) {\n    obj.geometry.dispose();\n  }\n  if (obj.material) {\n    materialDispose(obj.material);\n  }\n  if (obj.texture) {\n    obj.texture.dispose();\n  }\n  if (obj.children) {\n    obj.children.forEach(deallocate);\n  }\n};\nvar emptyObject = function emptyObject(obj) {\n  while (obj.children.length) {\n    var childObj = obj.children[0];\n    obj.remove(childObj);\n    deallocate(childObj);\n  }\n};\n\nvar _excluded = [\"objFilter\"];\nfunction threeDigest(data, scene) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    _ref$objFilter = _ref.objFilter,\n    objFilter = _ref$objFilter === void 0 ? function () {\n      return true;\n    } : _ref$objFilter,\n    options = _objectWithoutProperties(_ref, _excluded);\n  return dataJoint(data, scene.children.filter(objFilter), function (obj) {\n    return scene.add(obj);\n  }, function (obj) {\n    scene.remove(obj);\n    emptyObject(obj);\n  }, _objectSpread2({\n    objBindAttr: '__threeObj'\n  }, options));\n}\n\nvar colorStr2Hex = function colorStr2Hex(str) {\n  return isNaN(str) ? parseInt(tinyColor(str).toHex(), 16) : str;\n};\nvar colorAlpha = function colorAlpha(str) {\n  return isNaN(str) ? tinyColor(str).getAlpha() : 1;\n};\nvar autoColorScale = scaleOrdinal(schemePaired);\n\n// Autoset attribute colorField by colorByAccessor property\n// If an object has already a color, don't set it\n// Objects can be nodes or links\nfunction autoColorObjects(objects, colorByAccessor, colorField) {\n  if (!colorByAccessor || typeof colorField !== 'string') return;\n  objects.filter(function (obj) {\n    return !obj[colorField];\n  }).forEach(function (obj) {\n    obj[colorField] = autoColorScale(colorByAccessor(obj));\n  });\n}\n\nfunction getDagDepths (_ref, idAccessor) {\n  var nodes = _ref.nodes,\n    links = _ref.links;\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    _ref2$nodeFilter = _ref2.nodeFilter,\n    nodeFilter = _ref2$nodeFilter === void 0 ? function () {\n      return true;\n    } : _ref2$nodeFilter,\n    _ref2$onLoopError = _ref2.onLoopError,\n    onLoopError = _ref2$onLoopError === void 0 ? function (loopIds) {\n      throw \"Invalid DAG structure! Found cycle in node path: \".concat(loopIds.join(' -> '), \".\");\n    } : _ref2$onLoopError;\n  // linked graph\n  var graph = {};\n  nodes.forEach(function (node) {\n    return graph[idAccessor(node)] = {\n      data: node,\n      out: [],\n      depth: -1,\n      skip: !nodeFilter(node)\n    };\n  });\n  links.forEach(function (_ref3) {\n    var source = _ref3.source,\n      target = _ref3.target;\n    var sourceId = getNodeId(source);\n    var targetId = getNodeId(target);\n    if (!graph.hasOwnProperty(sourceId)) throw \"Missing source node with id: \".concat(sourceId);\n    if (!graph.hasOwnProperty(targetId)) throw \"Missing target node with id: \".concat(targetId);\n    var sourceNode = graph[sourceId];\n    var targetNode = graph[targetId];\n    sourceNode.out.push(targetNode);\n    function getNodeId(node) {\n      return _typeof(node) === 'object' ? idAccessor(node) : node;\n    }\n  });\n  var foundLoops = [];\n  traverse(Object.values(graph));\n  var nodeDepths = Object.assign.apply(Object, [{}].concat(_toConsumableArray(Object.entries(graph).filter(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      node = _ref5[1];\n    return !node.skip;\n  }).map(function (_ref6) {\n    var _ref7 = _slicedToArray(_ref6, 2),\n      id = _ref7[0],\n      node = _ref7[1];\n    return _defineProperty({}, id, node.depth);\n  }))));\n  return nodeDepths;\n  function traverse(nodes) {\n    var nodeStack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var currentDepth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var _loop = function _loop() {\n      var node = nodes[i];\n      if (nodeStack.indexOf(node) !== -1) {\n        var loop = [].concat(_toConsumableArray(nodeStack.slice(nodeStack.indexOf(node))), [node]).map(function (d) {\n          return idAccessor(d.data);\n        });\n        if (!foundLoops.some(function (foundLoop) {\n          return foundLoop.length === loop.length && foundLoop.every(function (id, idx) {\n            return id === loop[idx];\n          });\n        })) {\n          foundLoops.push(loop);\n          onLoopError(loop);\n        }\n        return \"continue\";\n      }\n      if (currentDepth > node.depth) {\n        // Don't unnecessarily revisit chunks of the graph\n        node.depth = currentDepth;\n        traverse(node.out, [].concat(_toConsumableArray(nodeStack), [node]), currentDepth + (node.skip ? 0 : 1));\n      }\n    };\n    for (var i = 0, l = nodes.length; i < l; i++) {\n      var _ret = _loop();\n      if (_ret === \"continue\") continue;\n    }\n  }\n}\n\nvar three$1 = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  Group: Group,\n  Mesh: Mesh,\n  MeshLambertMaterial: MeshLambertMaterial,\n  Color: Color,\n  BufferGeometry: BufferGeometry,\n  BufferAttribute: BufferAttribute,\n  Matrix4: Matrix4,\n  Vector3: Vector3,\n  SphereGeometry: SphereGeometry,\n  CylinderGeometry: CylinderGeometry,\n  TubeGeometry: TubeGeometry,\n  ConeGeometry: ConeGeometry,\n  Line: Line,\n  LineBasicMaterial: LineBasicMaterial,\n  QuadraticBezierCurve3: QuadraticBezierCurve3,\n  CubicBezierCurve3: CubicBezierCurve3,\n  Box3: Box3\n};\nvar ngraph = {\n  graph: graph,\n  forcelayout: forcelayout\n};\n\n//\n\nvar DAG_LEVEL_NODE_RATIO = 2;\n\n// support multiple method names for backwards threejs compatibility\nvar setAttributeFn = new three$1.BufferGeometry().setAttribute ? 'setAttribute' : 'addAttribute';\nvar applyMatrix4Fn = new three$1.BufferGeometry().applyMatrix4 ? 'applyMatrix4' : 'applyMatrix';\nvar ForceGraph = Kapsule({\n  props: {\n    jsonUrl: {\n      onChange: function onChange(jsonUrl, state) {\n        var _this = this;\n        if (jsonUrl && !state.fetchingJson) {\n          // Load data asynchronously\n          state.fetchingJson = true;\n          state.onLoading();\n          fetch(jsonUrl).then(function (r) {\n            return r.json();\n          }).then(function (json) {\n            state.fetchingJson = false;\n            state.onFinishLoading(json);\n            _this.graphData(json);\n          });\n        }\n      },\n      triggerUpdate: false\n    },\n    graphData: {\n      \"default\": {\n        nodes: [],\n        links: []\n      },\n      onChange: function onChange(graphData, state) {\n        state.engineRunning = false; // Pause simulation immediately\n      }\n    },\n\n    numDimensions: {\n      \"default\": 3,\n      onChange: function onChange(numDim, state) {\n        var chargeForce = state.d3ForceLayout.force('charge');\n        // Increase repulsion on 3D mode for improved spatial separation\n        if (chargeForce) {\n          chargeForce.strength(numDim > 2 ? -60 : -30);\n        }\n        if (numDim < 3) {\n          eraseDimension(state.graphData.nodes, 'z');\n        }\n        if (numDim < 2) {\n          eraseDimension(state.graphData.nodes, 'y');\n        }\n        function eraseDimension(nodes, dim) {\n          nodes.forEach(function (d) {\n            delete d[dim]; // position\n            delete d[\"v\".concat(dim)]; // velocity\n          });\n        }\n      }\n    },\n\n    dagMode: {\n      onChange: function onChange(dagMode, state) {\n        // td, bu, lr, rl, zin, zout, radialin, radialout\n        !dagMode && state.forceEngine === 'd3' && (state.graphData.nodes || []).forEach(function (n) {\n          return n.fx = n.fy = n.fz = undefined;\n        }); // unfix nodes when disabling dag mode\n      }\n    },\n\n    dagLevelDistance: {},\n    dagNodeFilter: {\n      \"default\": function _default(node) {\n        return true;\n      }\n    },\n    onDagError: {\n      triggerUpdate: false\n    },\n    nodeRelSize: {\n      \"default\": 4\n    },\n    // volume per val unit\n    nodeId: {\n      \"default\": 'id'\n    },\n    nodeVal: {\n      \"default\": 'val'\n    },\n    nodeResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the sphere's circumference\n    nodeColor: {\n      \"default\": 'color'\n    },\n    nodeAutoColorBy: {},\n    nodeOpacity: {\n      \"default\": 0.75\n    },\n    nodeVisibility: {\n      \"default\": true\n    },\n    nodeThreeObject: {},\n    nodeThreeObjectExtend: {\n      \"default\": false\n    },\n    nodePositionUpdate: {\n      triggerUpdate: false\n    },\n    // custom function to call for updating the node's position. Signature: (threeObj, { x, y, z}, node). If the function returns a truthy value, the regular node position update will not run.\n    linkSource: {\n      \"default\": 'source'\n    },\n    linkTarget: {\n      \"default\": 'target'\n    },\n    linkVisibility: {\n      \"default\": true\n    },\n    linkColor: {\n      \"default\": 'color'\n    },\n    linkAutoColorBy: {},\n    linkOpacity: {\n      \"default\": 0.2\n    },\n    linkWidth: {},\n    // Rounded to nearest decimal. For falsy values use dimensionless line with 1px regardless of distance.\n    linkResolution: {\n      \"default\": 6\n    },\n    // how many radial segments in each line tube's geometry\n    linkCurvature: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // line curvature radius (0: straight, 1: semi-circle)\n    linkCurveRotation: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // line curve rotation along the line axis (0: interection with XY plane, PI: upside down)\n    linkMaterial: {},\n    linkThreeObject: {},\n    linkThreeObjectExtend: {\n      \"default\": false\n    },\n    linkPositionUpdate: {\n      triggerUpdate: false\n    },\n    // custom function to call for updating the link's position. Signature: (threeObj, { start: { x, y, z},  end: { x, y, z }}, link). If the function returns a truthy value, the regular link position update will not run.\n    linkDirectionalArrowLength: {\n      \"default\": 0\n    },\n    linkDirectionalArrowColor: {},\n    linkDirectionalArrowRelPos: {\n      \"default\": 0.5,\n      triggerUpdate: false\n    },\n    // value between 0<>1 indicating the relative pos along the (exposed) line\n    linkDirectionalArrowResolution: {\n      \"default\": 8\n    },\n    // how many slice segments in the arrow's conic circumference\n    linkDirectionalParticles: {\n      \"default\": 0\n    },\n    // animate photons travelling in the link direction\n    linkDirectionalParticleSpeed: {\n      \"default\": 0.01,\n      triggerUpdate: false\n    },\n    // in link length ratio per frame\n    linkDirectionalParticleWidth: {\n      \"default\": 0.5\n    },\n    linkDirectionalParticleColor: {},\n    linkDirectionalParticleResolution: {\n      \"default\": 4\n    },\n    // how many slice segments in the particle sphere's circumference\n    forceEngine: {\n      \"default\": 'd3'\n    },\n    // d3 or ngraph\n    d3AlphaMin: {\n      \"default\": 0\n    },\n    d3AlphaDecay: {\n      \"default\": 0.0228,\n      triggerUpdate: false,\n      onChange: function onChange(alphaDecay, state) {\n        state.d3ForceLayout.alphaDecay(alphaDecay);\n      }\n    },\n    d3AlphaTarget: {\n      \"default\": 0,\n      triggerUpdate: false,\n      onChange: function onChange(alphaTarget, state) {\n        state.d3ForceLayout.alphaTarget(alphaTarget);\n      }\n    },\n    d3VelocityDecay: {\n      \"default\": 0.4,\n      triggerUpdate: false,\n      onChange: function onChange(velocityDecay, state) {\n        state.d3ForceLayout.velocityDecay(velocityDecay);\n      }\n    },\n    ngraphPhysics: {\n      \"default\": {\n        // defaults from https://github.com/anvaka/ngraph.physics.simulator/blob/master/index.js\n        timeStep: 20,\n        gravity: -1.2,\n        theta: 0.8,\n        springLength: 30,\n        springCoefficient: 0.0008,\n        dragCoefficient: 0.02\n      }\n    },\n    warmupTicks: {\n      \"default\": 0,\n      triggerUpdate: false\n    },\n    // how many times to tick the force engine at init before starting to render\n    cooldownTicks: {\n      \"default\": Infinity,\n      triggerUpdate: false\n    },\n    cooldownTime: {\n      \"default\": 15000,\n      triggerUpdate: false\n    },\n    // ms\n    onLoading: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onFinishLoading: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onFinishUpdate: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineTick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onEngineStop: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    refresh: function refresh(state) {\n      state._flushObjects = true;\n      state._rerender();\n      return this;\n    },\n    // Expose d3 forces for external manipulation\n    d3Force: function d3Force(state, forceName, forceFn) {\n      if (forceFn === undefined) {\n        return state.d3ForceLayout.force(forceName); // Force getter\n      }\n\n      state.d3ForceLayout.force(forceName, forceFn); // Force setter\n      return this;\n    },\n    d3ReheatSimulation: function d3ReheatSimulation(state) {\n      state.d3ForceLayout.alpha(1);\n      this.resetCountdown();\n      return this;\n    },\n    // reset cooldown state\n    resetCountdown: function resetCountdown(state) {\n      state.cntTicks = 0;\n      state.startTickTime = new Date();\n      state.engineRunning = true;\n      return this;\n    },\n    tickFrame: function tickFrame(state) {\n      var isD3Sim = state.forceEngine !== 'ngraph';\n      if (state.engineRunning) {\n        layoutTick();\n      }\n      updateArrows();\n      updatePhotons();\n      return this;\n\n      //\n\n      function layoutTick() {\n        if (++state.cntTicks > state.cooldownTicks || new Date() - state.startTickTime > state.cooldownTime || isD3Sim && state.d3AlphaMin > 0 && state.d3ForceLayout.alpha() < state.d3AlphaMin) {\n          state.engineRunning = false; // Stop ticking graph\n          state.onEngineStop();\n        } else {\n          state.layout[isD3Sim ? 'tick' : 'step'](); // Tick it\n          state.onEngineTick();\n        }\n        var nodeThreeObjectExtendAccessor = accessorFn(state.nodeThreeObjectExtend);\n\n        // Update nodes position\n        state.graphData.nodes.forEach(function (node) {\n          var obj = node.__threeObj;\n          if (!obj) return;\n          var pos = isD3Sim ? node : state.layout.getNodePosition(node[state.nodeId]);\n          var extendedObj = nodeThreeObjectExtendAccessor(node);\n          if (!state.nodePositionUpdate || !state.nodePositionUpdate(extendedObj ? obj.children[0] : obj, {\n            x: pos.x,\n            y: pos.y,\n            z: pos.z\n          }, node) // pass child custom object if extending the default\n          || extendedObj) {\n            obj.position.x = pos.x;\n            obj.position.y = pos.y || 0;\n            obj.position.z = pos.z || 0;\n          }\n        });\n\n        // Update links position\n        var linkWidthAccessor = accessorFn(state.linkWidth);\n        var linkCurvatureAccessor = accessorFn(state.linkCurvature);\n        var linkCurveRotationAccessor = accessorFn(state.linkCurveRotation);\n        var linkThreeObjectExtendAccessor = accessorFn(state.linkThreeObjectExtend);\n        state.graphData.links.forEach(function (link) {\n          var lineObj = link.__lineObj;\n          if (!lineObj) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          calcLinkCurve(link); // calculate link curve for all links, including custom replaced, so it can be used in directional functionality\n\n          var extendedObj = linkThreeObjectExtendAccessor(link);\n          if (state.linkPositionUpdate && state.linkPositionUpdate(extendedObj ? lineObj.children[1] : lineObj,\n          // pass child custom object if extending the default\n          {\n            start: {\n              x: start.x,\n              y: start.y,\n              z: start.z\n            },\n            end: {\n              x: end.x,\n              y: end.y,\n              z: end.z\n            }\n          }, link) && !extendedObj) {\n            // exit if successfully custom updated position of non-extended obj\n            return;\n          }\n          var curveResolution = 30; // # line segments\n          var curve = link.__curve;\n\n          // select default line obj if it's an extended group\n          var line = lineObj.children.length ? lineObj.children[0] : lineObj;\n          if (line.type === 'Line') {\n            // Update line geometry\n            if (!curve) {\n              // straight line\n              var linePos = line.geometry.getAttribute('position');\n              if (!linePos || !linePos.array || linePos.array.length !== 6) {\n                line.geometry[setAttributeFn]('position', linePos = new three$1.BufferAttribute(new Float32Array(2 * 3), 3));\n              }\n              linePos.array[0] = start.x;\n              linePos.array[1] = start.y || 0;\n              linePos.array[2] = start.z || 0;\n              linePos.array[3] = end.x;\n              linePos.array[4] = end.y || 0;\n              linePos.array[5] = end.z || 0;\n              linePos.needsUpdate = true;\n            } else {\n              // bezier curve line\n              line.geometry.setFromPoints(curve.getPoints(curveResolution));\n            }\n            line.geometry.computeBoundingSphere();\n          } else if (line.type === 'Mesh') {\n            // Update cylinder geometry\n\n            if (!curve) {\n              // straight tube\n              if (!line.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)) {\n                var linkWidth = Math.ceil(linkWidthAccessor(link) * 10) / 10;\n                var r = linkWidth / 2;\n                var geometry = new three$1.CylinderGeometry(r, r, 1, state.linkResolution, 1, false);\n                geometry[applyMatrix4Fn](new three$1.Matrix4().makeTranslation(0, 1 / 2, 0));\n                geometry[applyMatrix4Fn](new three$1.Matrix4().makeRotationX(Math.PI / 2));\n                line.geometry.dispose();\n                line.geometry = geometry;\n              }\n              var vStart = new three$1.Vector3(start.x, start.y || 0, start.z || 0);\n              var vEnd = new three$1.Vector3(end.x, end.y || 0, end.z || 0);\n              var distance = vStart.distanceTo(vEnd);\n              line.position.x = vStart.x;\n              line.position.y = vStart.y;\n              line.position.z = vStart.z;\n              line.scale.z = distance;\n              line.parent.localToWorld(vEnd); // lookAt requires world coords\n              line.lookAt(vEnd);\n            } else {\n              // curved tube\n              if (!line.geometry.type.match(/^Tube(Buffer)?Geometry$/)) {\n                // reset object positioning\n                line.position.set(0, 0, 0);\n                line.rotation.set(0, 0, 0);\n                line.scale.set(1, 1, 1);\n              }\n              var _linkWidth = Math.ceil(linkWidthAccessor(link) * 10) / 10;\n              var _r = _linkWidth / 2;\n              var _geometry = new three$1.TubeGeometry(curve, curveResolution, _r, state.linkResolution, false);\n              line.geometry.dispose();\n              line.geometry = _geometry;\n            }\n          }\n        });\n\n        //\n\n        function calcLinkCurve(link) {\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var curvature = linkCurvatureAccessor(link);\n          if (!curvature) {\n            link.__curve = null; // Straight line\n          } else {\n            // bezier curve line (only for line types)\n            var vStart = new three$1.Vector3(start.x, start.y || 0, start.z || 0);\n            var vEnd = new three$1.Vector3(end.x, end.y || 0, end.z || 0);\n            var l = vStart.distanceTo(vEnd); // line length\n\n            var curve;\n            var curveRotation = linkCurveRotationAccessor(link);\n            if (l > 0) {\n              var dx = end.x - start.x;\n              var dy = end.y - start.y || 0;\n              var vLine = new three$1.Vector3().subVectors(vEnd, vStart);\n              var cp = vLine.clone().multiplyScalar(curvature).cross(dx !== 0 || dy !== 0 ? new three$1.Vector3(0, 0, 1) : new three$1.Vector3(0, 1, 0)) // avoid cross-product of parallel vectors (prefer Z, fallback to Y)\n              .applyAxisAngle(vLine.normalize(), curveRotation) // rotate along line axis according to linkCurveRotation\n              .add(new three$1.Vector3().addVectors(vStart, vEnd).divideScalar(2));\n              curve = new three$1.QuadraticBezierCurve3(vStart, cp, vEnd);\n            } else {\n              // Same point, draw a loop\n              var d = curvature * 70;\n              var endAngle = -curveRotation; // Rotate clockwise (from Z angle perspective)\n              var startAngle = endAngle + Math.PI / 2;\n              curve = new three$1.CubicBezierCurve3(vStart, new three$1.Vector3(d * Math.cos(startAngle), d * Math.sin(startAngle), 0).add(vStart), new three$1.Vector3(d * Math.cos(endAngle), d * Math.sin(endAngle), 0).add(vStart), vEnd);\n            }\n            link.__curve = curve;\n          }\n        }\n      }\n      function updateArrows() {\n        // update link arrow position\n        var arrowRelPosAccessor = accessorFn(state.linkDirectionalArrowRelPos);\n        var arrowLengthAccessor = accessorFn(state.linkDirectionalArrowLength);\n        var nodeValAccessor = accessorFn(state.nodeVal);\n        state.graphData.links.forEach(function (link) {\n          var arrowObj = link.__arrowObj;\n          if (!arrowObj) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var startR = Math.cbrt(Math.max(0, nodeValAccessor(start) || 1)) * state.nodeRelSize;\n          var endR = Math.cbrt(Math.max(0, nodeValAccessor(end) || 1)) * state.nodeRelSize;\n          var arrowLength = arrowLengthAccessor(link);\n          var arrowRelPos = arrowRelPosAccessor(link);\n          var getPosAlongLine = link.__curve ? function (t) {\n            return link.__curve.getPoint(t);\n          } // interpolate along bezier curve\n          : function (t) {\n            // straight line: interpolate linearly\n            var iplt = function iplt(dim, start, end, t) {\n              return start[dim] + (end[dim] - start[dim]) * t || 0;\n            };\n            return {\n              x: iplt('x', start, end, t),\n              y: iplt('y', start, end, t),\n              z: iplt('z', start, end, t)\n            };\n          };\n          var lineLen = link.__curve ? link.__curve.getLength() : Math.sqrt(['x', 'y', 'z'].map(function (dim) {\n            return Math.pow((end[dim] || 0) - (start[dim] || 0), 2);\n          }).reduce(function (acc, v) {\n            return acc + v;\n          }, 0));\n          var posAlongLine = startR + arrowLength + (lineLen - startR - endR - arrowLength) * arrowRelPos;\n          var arrowHead = getPosAlongLine(posAlongLine / lineLen);\n          var arrowTail = getPosAlongLine((posAlongLine - arrowLength) / lineLen);\n          ['x', 'y', 'z'].forEach(function (dim) {\n            return arrowObj.position[dim] = arrowTail[dim];\n          });\n          var headVec = _construct(three$1.Vector3, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n            return arrowHead[c];\n          })));\n          arrowObj.parent.localToWorld(headVec); // lookAt requires world coords\n          arrowObj.lookAt(headVec);\n        });\n      }\n      function updatePhotons() {\n        // update link particle positions\n        var particleSpeedAccessor = accessorFn(state.linkDirectionalParticleSpeed);\n        state.graphData.links.forEach(function (link) {\n          var cyclePhotons = link.__photonsObj && link.__photonsObj.children;\n          var singleHopPhotons = link.__singleHopPhotonsObj && link.__singleHopPhotonsObj.children;\n          if ((!singleHopPhotons || !singleHopPhotons.length) && (!cyclePhotons || !cyclePhotons.length)) return;\n          var pos = isD3Sim ? link : state.layout.getLinkPosition(state.layout.graph.getLink(link.source, link.target).id);\n          var start = pos[isD3Sim ? 'source' : 'from'];\n          var end = pos[isD3Sim ? 'target' : 'to'];\n          if (!start || !end || !start.hasOwnProperty('x') || !end.hasOwnProperty('x')) return; // skip invalid link\n\n          var particleSpeed = particleSpeedAccessor(link);\n          var getPhotonPos = link.__curve ? function (t) {\n            return link.__curve.getPoint(t);\n          } // interpolate along bezier curve\n          : function (t) {\n            // straight line: interpolate linearly\n            var iplt = function iplt(dim, start, end, t) {\n              return start[dim] + (end[dim] - start[dim]) * t || 0;\n            };\n            return {\n              x: iplt('x', start, end, t),\n              y: iplt('y', start, end, t),\n              z: iplt('z', start, end, t)\n            };\n          };\n          var photons = [].concat(_toConsumableArray(cyclePhotons || []), _toConsumableArray(singleHopPhotons || []));\n          photons.forEach(function (photon, idx) {\n            var singleHop = photon.parent.__linkThreeObjType === 'singleHopPhotons';\n            if (!photon.hasOwnProperty('__progressRatio')) {\n              photon.__progressRatio = singleHop ? 0 : idx / cyclePhotons.length;\n            }\n            photon.__progressRatio += particleSpeed;\n            if (photon.__progressRatio >= 1) {\n              if (!singleHop) {\n                photon.__progressRatio = photon.__progressRatio % 1;\n              } else {\n                // remove particle\n                photon.parent.remove(photon);\n                emptyObject(photon);\n                return;\n              }\n            }\n            var photonPosRatio = photon.__progressRatio;\n            var pos = getPhotonPos(photonPosRatio);\n            ['x', 'y', 'z'].forEach(function (dim) {\n              return photon.position[dim] = pos[dim];\n            });\n          });\n        });\n      }\n    },\n    emitParticle: function emitParticle(state, link) {\n      if (link && state.graphData.links.includes(link)) {\n        if (!link.__singleHopPhotonsObj) {\n          var obj = new three$1.Group();\n          obj.__linkThreeObjType = 'singleHopPhotons';\n          link.__singleHopPhotonsObj = obj;\n          state.graphScene.add(obj);\n        }\n        var particleWidthAccessor = accessorFn(state.linkDirectionalParticleWidth);\n        var photonR = Math.ceil(particleWidthAccessor(link) * 10) / 10 / 2;\n        var numSegments = state.linkDirectionalParticleResolution;\n        var particleGeometry = new three$1.SphereGeometry(photonR, numSegments, numSegments);\n        var linkColorAccessor = accessorFn(state.linkColor);\n        var particleColorAccessor = accessorFn(state.linkDirectionalParticleColor);\n        var photonColor = particleColorAccessor(link) || linkColorAccessor(link) || '#f0f0f0';\n        var materialColor = new three$1.Color(colorStr2Hex(photonColor));\n        var opacity = state.linkOpacity * 3;\n        var particleMaterial = new three$1.MeshLambertMaterial({\n          color: materialColor,\n          transparent: true,\n          opacity: opacity\n        });\n\n        // add a single hop particle\n        link.__singleHopPhotonsObj.add(new three$1.Mesh(particleGeometry, particleMaterial));\n      }\n      return this;\n    },\n    getGraphBbox: function getGraphBbox(state) {\n      var nodeFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      if (!state.initialised) return null;\n\n      // recursively collect all nested geometries bboxes\n      var bboxes = function getBboxes(obj) {\n        var bboxes = [];\n        if (obj.geometry) {\n          obj.geometry.computeBoundingBox();\n          var box = new three$1.Box3();\n          box.copy(obj.geometry.boundingBox).applyMatrix4(obj.matrixWorld);\n          bboxes.push(box);\n        }\n        return bboxes.concat.apply(bboxes, _toConsumableArray((obj.children || []).filter(function (obj) {\n          return !obj.hasOwnProperty('__graphObjType') || obj.__graphObjType === 'node' && nodeFilter(obj.__data);\n        } // exclude filtered out nodes\n        ).map(getBboxes)));\n      }(state.graphScene);\n      if (!bboxes.length) return null;\n\n      // extract global x,y,z min/max\n      return Object.assign.apply(Object, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n        return _defineProperty({}, c, [min(bboxes, function (bb) {\n          return bb.min[c];\n        }), max(bboxes, function (bb) {\n          return bb.max[c];\n        })]);\n      })));\n    }\n  },\n  stateInit: function stateInit() {\n    return {\n      d3ForceLayout: forceSimulation().force('link', forceLink()).force('charge', forceManyBody()).force('center', forceCenter()).force('dagRadial', null).stop(),\n      engineRunning: false\n    };\n  },\n  init: function init(threeObj, state) {\n    // Main three object to manipulate\n    state.graphScene = threeObj;\n  },\n  update: function update(state, changedProps) {\n    var hasAnyPropChanged = function hasAnyPropChanged(propList) {\n      return propList.some(function (p) {\n        return changedProps.hasOwnProperty(p);\n      });\n    };\n    state.engineRunning = false; // pause simulation\n    state.onUpdate();\n    if (state.nodeAutoColorBy !== null && hasAnyPropChanged(['nodeAutoColorBy', 'graphData', 'nodeColor'])) {\n      // Auto add color to uncolored nodes\n      autoColorObjects(state.graphData.nodes, accessorFn(state.nodeAutoColorBy), state.nodeColor);\n    }\n    if (state.linkAutoColorBy !== null && hasAnyPropChanged(['linkAutoColorBy', 'graphData', 'linkColor'])) {\n      // Auto add color to uncolored links\n      autoColorObjects(state.graphData.links, accessorFn(state.linkAutoColorBy), state.linkColor);\n    }\n\n    // Digest nodes WebGL objects\n    if (state._flushObjects || hasAnyPropChanged(['graphData', 'nodeThreeObject', 'nodeThreeObjectExtend', 'nodeVal', 'nodeColor', 'nodeVisibility', 'nodeRelSize', 'nodeResolution', 'nodeOpacity'])) {\n      var customObjectAccessor = accessorFn(state.nodeThreeObject);\n      var customObjectExtendAccessor = accessorFn(state.nodeThreeObjectExtend);\n      var valAccessor = accessorFn(state.nodeVal);\n      var colorAccessor = accessorFn(state.nodeColor);\n      var visibilityAccessor = accessorFn(state.nodeVisibility);\n      var sphereGeometries = {}; // indexed by node value\n      var sphereMaterials = {}; // indexed by color\n\n      threeDigest(state.graphData.nodes.filter(visibilityAccessor), state.graphScene, {\n        purge: state._flushObjects || hasAnyPropChanged([\n        // recreate objects if any of these props have changed\n        'nodeThreeObject', 'nodeThreeObjectExtend']),\n        objFilter: function objFilter(obj) {\n          return obj.__graphObjType === 'node';\n        },\n        createObj: function createObj(node) {\n          var customObj = customObjectAccessor(node);\n          var extendObj = customObjectExtendAccessor(node);\n          if (customObj && state.nodeThreeObject === customObj) {\n            // clone object if it's a shared object among all nodes\n            customObj = customObj.clone();\n          }\n          var obj;\n          if (customObj && !extendObj) {\n            obj = customObj;\n          } else {\n            // Add default object (sphere mesh)\n            obj = new three$1.Mesh();\n            obj.__graphDefaultObj = true;\n            if (customObj && extendObj) {\n              obj.add(customObj); // extend default with custom\n            }\n          }\n\n          obj.__graphObjType = 'node'; // Add object type\n\n          return obj;\n        },\n        updateObj: function updateObj(obj, node) {\n          if (obj.__graphDefaultObj) {\n            // bypass internal updates for custom node objects\n            var val = valAccessor(node) || 1;\n            var radius = Math.cbrt(val) * state.nodeRelSize;\n            var numSegments = state.nodeResolution;\n            if (!obj.geometry.type.match(/^Sphere(Buffer)?Geometry$/) || obj.geometry.parameters.radius !== radius || obj.geometry.parameters.widthSegments !== numSegments) {\n              if (!sphereGeometries.hasOwnProperty(val)) {\n                sphereGeometries[val] = new three$1.SphereGeometry(radius, numSegments, numSegments);\n              }\n              obj.geometry.dispose();\n              obj.geometry = sphereGeometries[val];\n            }\n            var color = colorAccessor(node);\n            var materialColor = new three$1.Color(colorStr2Hex(color || '#ffffaa'));\n            var opacity = state.nodeOpacity * colorAlpha(color);\n            if (obj.material.type !== 'MeshLambertMaterial' || !obj.material.color.equals(materialColor) || obj.material.opacity !== opacity) {\n              if (!sphereMaterials.hasOwnProperty(color)) {\n                sphereMaterials[color] = new three$1.MeshLambertMaterial({\n                  color: materialColor,\n                  transparent: true,\n                  opacity: opacity\n                });\n              }\n              obj.material.dispose();\n              obj.material = sphereMaterials[color];\n            }\n          }\n        }\n      });\n    }\n\n    // Digest links WebGL objects\n    if (state._flushObjects || hasAnyPropChanged(['graphData', 'linkThreeObject', 'linkThreeObjectExtend', 'linkMaterial', 'linkColor', 'linkWidth', 'linkVisibility', 'linkResolution', 'linkOpacity', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution'])) {\n      var _customObjectAccessor = accessorFn(state.linkThreeObject);\n      var _customObjectExtendAccessor = accessorFn(state.linkThreeObjectExtend);\n      var customMaterialAccessor = accessorFn(state.linkMaterial);\n      var _visibilityAccessor = accessorFn(state.linkVisibility);\n      var _colorAccessor = accessorFn(state.linkColor);\n      var widthAccessor = accessorFn(state.linkWidth);\n      var cylinderGeometries = {}; // indexed by link width\n      var lambertLineMaterials = {}; // for cylinder objects, indexed by link color\n      var basicLineMaterials = {}; // for line objects, indexed by link color\n\n      var visibleLinks = state.graphData.links.filter(_visibilityAccessor);\n\n      // lines digest cycle\n      threeDigest(visibleLinks, state.graphScene, {\n        objBindAttr: '__lineObj',\n        purge: state._flushObjects || hasAnyPropChanged([\n        // recreate objects if any of these props have changed\n        'linkThreeObject', 'linkThreeObjectExtend', 'linkWidth']),\n        objFilter: function objFilter(obj) {\n          return obj.__graphObjType === 'link';\n        },\n        exitObj: function exitObj(obj) {\n          // remove trailing single photons\n          var singlePhotonsObj = obj.__data && obj.__data.__singleHopPhotonsObj;\n          if (singlePhotonsObj) {\n            singlePhotonsObj.parent.remove(singlePhotonsObj);\n            emptyObject(singlePhotonsObj);\n            delete obj.__data.__singleHopPhotonsObj;\n          }\n        },\n        createObj: function createObj(link) {\n          var customObj = _customObjectAccessor(link);\n          var extendObj = _customObjectExtendAccessor(link);\n          if (customObj && state.linkThreeObject === customObj) {\n            // clone object if it's a shared object among all links\n            customObj = customObj.clone();\n          }\n          var defaultObj;\n          if (!customObj || extendObj) {\n            // construct default line obj\n            var useCylinder = !!widthAccessor(link);\n            if (useCylinder) {\n              defaultObj = new three$1.Mesh();\n            } else {\n              // Use plain line (constant width)\n              var lineGeometry = new three$1.BufferGeometry();\n              lineGeometry[setAttributeFn]('position', new three$1.BufferAttribute(new Float32Array(2 * 3), 3));\n              defaultObj = new three$1.Line(lineGeometry);\n            }\n          }\n          var obj;\n          if (!customObj) {\n            obj = defaultObj;\n            obj.__graphDefaultObj = true;\n          } else {\n            if (!extendObj) {\n              // use custom object\n              obj = customObj;\n            } else {\n              // extend default with custom in a group\n              obj = new three$1.Group();\n              obj.__graphDefaultObj = true;\n              obj.add(defaultObj);\n              obj.add(customObj);\n            }\n          }\n          obj.renderOrder = 10; // Prevent visual glitches of dark lines on top of nodes by rendering them last\n\n          obj.__graphObjType = 'link'; // Add object type\n\n          return obj;\n        },\n        updateObj: function updateObj(updObj, link) {\n          if (updObj.__graphDefaultObj) {\n            // bypass internal updates for custom link objects\n            // select default object if it's an extended group\n            var obj = updObj.children.length ? updObj.children[0] : updObj;\n            var linkWidth = Math.ceil(widthAccessor(link) * 10) / 10;\n            var useCylinder = !!linkWidth;\n            if (useCylinder) {\n              var r = linkWidth / 2;\n              var numSegments = state.linkResolution;\n              if (!obj.geometry.type.match(/^Cylinder(Buffer)?Geometry$/) || obj.geometry.parameters.radiusTop !== r || obj.geometry.parameters.radialSegments !== numSegments) {\n                if (!cylinderGeometries.hasOwnProperty(linkWidth)) {\n                  var geometry = new three$1.CylinderGeometry(r, r, 1, numSegments, 1, false);\n                  geometry[applyMatrix4Fn](new three$1.Matrix4().makeTranslation(0, 1 / 2, 0));\n                  geometry[applyMatrix4Fn](new three$1.Matrix4().makeRotationX(Math.PI / 2));\n                  cylinderGeometries[linkWidth] = geometry;\n                }\n                obj.geometry.dispose();\n                obj.geometry = cylinderGeometries[linkWidth];\n              }\n            }\n            var customMaterial = customMaterialAccessor(link);\n            if (customMaterial) {\n              obj.material = customMaterial;\n            } else {\n              var color = _colorAccessor(link);\n              var materialColor = new three$1.Color(colorStr2Hex(color || '#f0f0f0'));\n              var opacity = state.linkOpacity * colorAlpha(color);\n              var materialType = useCylinder ? 'MeshLambertMaterial' : 'LineBasicMaterial';\n              if (obj.material.type !== materialType || !obj.material.color.equals(materialColor) || obj.material.opacity !== opacity) {\n                var lineMaterials = useCylinder ? lambertLineMaterials : basicLineMaterials;\n                if (!lineMaterials.hasOwnProperty(color)) {\n                  lineMaterials[color] = new three$1[materialType]({\n                    color: materialColor,\n                    transparent: opacity < 1,\n                    opacity: opacity,\n                    depthWrite: opacity >= 1 // Prevent transparency issues\n                  });\n                }\n\n                obj.material.dispose();\n                obj.material = lineMaterials[color];\n              }\n            }\n          }\n        }\n      });\n\n      // Arrows digest cycle\n      if (state.linkDirectionalArrowLength || changedProps.hasOwnProperty('linkDirectionalArrowLength')) {\n        var arrowLengthAccessor = accessorFn(state.linkDirectionalArrowLength);\n        var arrowColorAccessor = accessorFn(state.linkDirectionalArrowColor);\n        threeDigest(visibleLinks.filter(arrowLengthAccessor), state.graphScene, {\n          objBindAttr: '__arrowObj',\n          objFilter: function objFilter(obj) {\n            return obj.__linkThreeObjType === 'arrow';\n          },\n          createObj: function createObj() {\n            var obj = new three$1.Mesh(undefined, new three$1.MeshLambertMaterial({\n              transparent: true\n            }));\n            obj.__linkThreeObjType = 'arrow'; // Add object type\n\n            return obj;\n          },\n          updateObj: function updateObj(obj, link) {\n            var arrowLength = arrowLengthAccessor(link);\n            var numSegments = state.linkDirectionalArrowResolution;\n            if (!obj.geometry.type.match(/^Cone(Buffer)?Geometry$/) || obj.geometry.parameters.height !== arrowLength || obj.geometry.parameters.radialSegments !== numSegments) {\n              var coneGeometry = new three$1.ConeGeometry(arrowLength * 0.25, arrowLength, numSegments);\n              // Correct orientation\n              coneGeometry.translate(0, arrowLength / 2, 0);\n              coneGeometry.rotateX(Math.PI / 2);\n              obj.geometry.dispose();\n              obj.geometry = coneGeometry;\n            }\n            var arrowColor = arrowColorAccessor(link) || _colorAccessor(link) || '#f0f0f0';\n            obj.material.color = new three$1.Color(colorStr2Hex(arrowColor));\n            obj.material.opacity = state.linkOpacity * 3 * colorAlpha(arrowColor);\n          }\n        });\n      }\n\n      // Photon particles digest cycle\n      if (state.linkDirectionalParticles || changedProps.hasOwnProperty('linkDirectionalParticles')) {\n        var particlesAccessor = accessorFn(state.linkDirectionalParticles);\n        var particleWidthAccessor = accessorFn(state.linkDirectionalParticleWidth);\n        var particleColorAccessor = accessorFn(state.linkDirectionalParticleColor);\n        var particleMaterials = {}; // indexed by link color\n        var particleGeometries = {}; // indexed by particle width\n\n        threeDigest(visibleLinks.filter(particlesAccessor), state.graphScene, {\n          objBindAttr: '__photonsObj',\n          objFilter: function objFilter(obj) {\n            return obj.__linkThreeObjType === 'photons';\n          },\n          createObj: function createObj() {\n            var obj = new three$1.Group();\n            obj.__linkThreeObjType = 'photons'; // Add object type\n\n            return obj;\n          },\n          updateObj: function updateObj(obj, link) {\n            var numPhotons = Math.round(Math.abs(particlesAccessor(link)));\n            var curPhoton = !!obj.children.length && obj.children[0];\n            var photonR = Math.ceil(particleWidthAccessor(link) * 10) / 10 / 2;\n            var numSegments = state.linkDirectionalParticleResolution;\n            var particleGeometry;\n            if (curPhoton && curPhoton.geometry.parameters.radius === photonR && curPhoton.geometry.parameters.widthSegments === numSegments) {\n              particleGeometry = curPhoton.geometry;\n            } else {\n              if (!particleGeometries.hasOwnProperty(photonR)) {\n                particleGeometries[photonR] = new three$1.SphereGeometry(photonR, numSegments, numSegments);\n              }\n              particleGeometry = particleGeometries[photonR];\n              curPhoton && curPhoton.geometry.dispose();\n            }\n            var photonColor = particleColorAccessor(link) || _colorAccessor(link) || '#f0f0f0';\n            var materialColor = new three$1.Color(colorStr2Hex(photonColor));\n            var opacity = state.linkOpacity * 3;\n            var particleMaterial;\n            if (curPhoton && curPhoton.material.color.equals(materialColor) && curPhoton.material.opacity === opacity) {\n              particleMaterial = curPhoton.material;\n            } else {\n              if (!particleMaterials.hasOwnProperty(photonColor)) {\n                particleMaterials[photonColor] = new three$1.MeshLambertMaterial({\n                  color: materialColor,\n                  transparent: true,\n                  opacity: opacity\n                });\n              }\n              particleMaterial = particleMaterials[photonColor];\n              curPhoton && curPhoton.material.dispose();\n            }\n\n            // digest cycle for each photon\n            threeDigest(_toConsumableArray(new Array(numPhotons)).map(function (_, idx) {\n              return {\n                idx: idx\n              };\n            }), obj, {\n              idAccessor: function idAccessor(d) {\n                return d.idx;\n              },\n              createObj: function createObj() {\n                return new three$1.Mesh(particleGeometry, particleMaterial);\n              },\n              updateObj: function updateObj(obj) {\n                obj.geometry = particleGeometry;\n                obj.material = particleMaterial;\n              }\n            });\n          }\n        });\n      }\n    }\n    state._flushObjects = false; // reset objects refresh flag\n\n    // simulation engine\n    if (hasAnyPropChanged(['graphData', 'nodeId', 'linkSource', 'linkTarget', 'numDimensions', 'forceEngine', 'dagMode', 'dagNodeFilter', 'dagLevelDistance'])) {\n      state.engineRunning = false; // Pause simulation\n\n      // parse links\n      state.graphData.links.forEach(function (link) {\n        link.source = link[state.linkSource];\n        link.target = link[state.linkTarget];\n      });\n\n      // Feed data to force-directed layout\n      var isD3Sim = state.forceEngine !== 'ngraph';\n      var layout;\n      if (isD3Sim) {\n        // D3-force\n        (layout = state.d3ForceLayout).stop().alpha(1) // re-heat the simulation\n        .numDimensions(state.numDimensions).nodes(state.graphData.nodes);\n\n        // add links (if link force is still active)\n        var linkForce = state.d3ForceLayout.force('link');\n        if (linkForce) {\n          linkForce.id(function (d) {\n            return d[state.nodeId];\n          }).links(state.graphData.links);\n        }\n\n        // setup dag force constraints\n        var nodeDepths = state.dagMode && getDagDepths(state.graphData, function (node) {\n          return node[state.nodeId];\n        }, {\n          nodeFilter: state.dagNodeFilter,\n          onLoopError: state.onDagError || undefined\n        });\n        var maxDepth = Math.max.apply(Math, _toConsumableArray(Object.values(nodeDepths || [])));\n        var dagLevelDistance = state.dagLevelDistance || state.graphData.nodes.length / (maxDepth || 1) * DAG_LEVEL_NODE_RATIO * (['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? 0.7 : 1);\n\n        // Fix nodes to x,y,z for dag mode\n        if (state.dagMode) {\n          var getFFn = function getFFn(fix, invert) {\n            return function (node) {\n              return !fix ? undefined : (nodeDepths[node[state.nodeId]] - maxDepth / 2) * dagLevelDistance * (invert ? -1 : 1);\n            };\n          };\n          var fxFn = getFFn(['lr', 'rl'].indexOf(state.dagMode) !== -1, state.dagMode === 'rl');\n          var fyFn = getFFn(['td', 'bu'].indexOf(state.dagMode) !== -1, state.dagMode === 'td');\n          var fzFn = getFFn(['zin', 'zout'].indexOf(state.dagMode) !== -1, state.dagMode === 'zout');\n          state.graphData.nodes.filter(state.dagNodeFilter).forEach(function (node) {\n            node.fx = fxFn(node);\n            node.fy = fyFn(node);\n            node.fz = fzFn(node);\n          });\n        }\n\n        // Use radial force for radial dags\n        state.d3ForceLayout.force('dagRadial', ['radialin', 'radialout'].indexOf(state.dagMode) !== -1 ? forceRadial(function (node) {\n          var nodeDepth = nodeDepths[node[state.nodeId]] || -1;\n          return (state.dagMode === 'radialin' ? maxDepth - nodeDepth : nodeDepth) * dagLevelDistance;\n        }).strength(function (node) {\n          return state.dagNodeFilter(node) ? 1 : 0;\n        }) : null);\n      } else {\n        // ngraph\n        var _graph = ngraph.graph();\n        state.graphData.nodes.forEach(function (node) {\n          _graph.addNode(node[state.nodeId]);\n        });\n        state.graphData.links.forEach(function (link) {\n          _graph.addLink(link.source, link.target);\n        });\n        layout = ngraph.forcelayout(_graph, _objectSpread2({\n          dimensions: state.numDimensions\n        }, state.ngraphPhysics));\n        layout.graph = _graph; // Attach graph reference to layout\n      }\n\n      for (var i = 0; i < state.warmupTicks && !(isD3Sim && state.d3AlphaMin > 0 && state.d3ForceLayout.alpha() < state.d3AlphaMin); i++) {\n        layout[isD3Sim ? \"tick\" : \"step\"]();\n      } // Initial ticks before starting to render\n\n      state.layout = layout;\n      this.resetCountdown();\n    }\n    state.engineRunning = true; // resume simulation\n\n    state.onFinishUpdate();\n  }\n});\n\nfunction fromKapsule (kapsule) {\n  var baseClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Object;\n  var initKapsuleWithSelf = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var FromKapsule = /*#__PURE__*/function (_baseClass) {\n    _inherits(FromKapsule, _baseClass);\n    var _super = _createSuper(FromKapsule);\n    function FromKapsule() {\n      var _this;\n      _classCallCheck(this, FromKapsule);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.__kapsuleInstance = kapsule().apply(void 0, [].concat(_toConsumableArray(initKapsuleWithSelf ? [_assertThisInitialized(_this)] : []), args));\n      return _this;\n    }\n    return _createClass(FromKapsule);\n  }(baseClass); // attach kapsule props/methods to class prototype\n  Object.keys(kapsule()).forEach(function (m) {\n    return FromKapsule.prototype[m] = function () {\n      var _this$__kapsuleInstan;\n      var returnVal = (_this$__kapsuleInstan = this.__kapsuleInstance)[m].apply(_this$__kapsuleInstan, arguments);\n      return returnVal === this.__kapsuleInstance ? this // chain based on this class, not the kapsule obj\n      : returnVal;\n    };\n  });\n  return FromKapsule;\n}\n\nvar three = window.THREE ? window.THREE : {\n  Group: Group\n}; // Prefer consumption from global THREE, if exists\nvar threeForcegraph = fromKapsule(ForceGraph, three.Group, true);\n\nexport { threeForcegraph as default };\n","import constant from \"./constant.js\";\n\nexport default function(radius, x, y, z) {\n  var nodes,\n      nDim,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n  if (z == null) z = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = (node.y || 0) - y || 1e-6,\n          dz = (node.z || 0) - z || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy + dz * dz),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n      if (nDim>1) { node.vy += dy * k; }\n      if (nDim>2) { node.vz += dz * k; }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(initNodes, ...args) {\n    nodes = initNodes;\n    nDim = args.find(arg => [1, 2, 3].includes(arg)) || 2;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.z = function(_) {\n    return arguments.length ? (z = +_, force) : z;\n  };\n\n  return force;\n}\n","import {\n\tEventDispatcher,\n\tMathUtils,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from 'three';\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass TrackballControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\t\tconst STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// API\n\n\t\tthis.enabled = true;\n\n\t\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\t\tthis.rotateSpeed = 1.0;\n\t\tthis.zoomSpeed = 1.2;\n\t\tthis.panSpeed = 0.3;\n\n\t\tthis.noRotate = false;\n\t\tthis.noZoom = false;\n\t\tthis.noPan = false;\n\n\t\tthis.staticMoving = false;\n\t\tthis.dynamicDampingFactor = 0.2;\n\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\tthis.keys = [ 'KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/ ];\n\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// internals\n\n\t\tthis.target = new Vector3();\n\n\t\tconst EPS = 0.000001;\n\n\t\tconst lastPosition = new Vector3();\n\t\tlet lastZoom = 1;\n\n\t\tlet _state = STATE.NONE,\n\t\t\t_keyState = STATE.NONE,\n\n\t\t\t_touchZoomDistanceStart = 0,\n\t\t\t_touchZoomDistanceEnd = 0,\n\n\t\t\t_lastAngle = 0;\n\n\t\tconst _eye = new Vector3(),\n\n\t\t\t_movePrev = new Vector2(),\n\t\t\t_moveCurr = new Vector2(),\n\n\t\t\t_lastAxis = new Vector3(),\n\n\t\t\t_zoomStart = new Vector2(),\n\t\t\t_zoomEnd = new Vector2(),\n\n\t\t\t_panStart = new Vector2(),\n\t\t\t_panEnd = new Vector2(),\n\n\t\t\t_pointers = [],\n\t\t\t_pointerPositions = {};\n\n\t\t// for reset\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.up0 = this.object.up.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// methods\n\n\t\tthis.handleResize = function () {\n\n\t\t\tconst box = scope.domElement.getBoundingClientRect();\n\t\t\t// adjustments come from similar code in the jquery offset() function\n\t\t\tconst d = scope.domElement.ownerDocument.documentElement;\n\t\t\tscope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\tscope.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\tscope.screen.width = box.width;\n\t\t\tscope.screen.height = box.height;\n\n\t\t};\n\n\t\tconst getMouseOnScreen = ( function () {\n\n\t\t\tconst vector = new Vector2();\n\n\t\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\t\tvector.set(\n\t\t\t\t\t( pageX - scope.screen.left ) / scope.screen.width,\n\t\t\t\t\t( pageY - scope.screen.top ) / scope.screen.height\n\t\t\t\t);\n\n\t\t\t\treturn vector;\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tconst getMouseOnCircle = ( function () {\n\n\t\t\tconst vector = new Vector2();\n\n\t\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\t\tvector.set(\n\t\t\t\t\t( ( pageX - scope.screen.width * 0.5 - scope.screen.left ) / ( scope.screen.width * 0.5 ) ),\n\t\t\t\t\t( ( scope.screen.height + 2 * ( scope.screen.top - pageY ) ) / scope.screen.width ) // screen.width intentional\n\t\t\t\t);\n\n\t\t\t\treturn vector;\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tthis.rotateCamera = ( function () {\n\n\t\t\tconst axis = new Vector3(),\n\t\t\t\tquaternion = new Quaternion(),\n\t\t\t\teyeDirection = new Vector3(),\n\t\t\t\tobjectUpDirection = new Vector3(),\n\t\t\t\tobjectSidewaysDirection = new Vector3(),\n\t\t\t\tmoveDirection = new Vector3();\n\n\t\t\treturn function rotateCamera() {\n\n\t\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\t\tlet angle = moveDirection.length();\n\n\t\t\t\tif ( angle ) {\n\n\t\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\n\t\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\t\tobjectUpDirection.copy( scope.object.up ).normalize();\n\t\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\t\tangle *= scope.rotateSpeed;\n\t\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t\t_lastAngle = angle;\n\n\t\t\t\t} else if ( ! scope.staticMoving && _lastAngle ) {\n\n\t\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - scope.dynamicDampingFactor );\n\t\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\t\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t}\n\n\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t};\n\n\t\t}() );\n\n\n\t\tthis.zoomCamera = function () {\n\n\t\t\tlet factor;\n\n\t\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom = MathUtils.clamp( scope.object.zoom / factor, scope.minZoom, scope.maxZoom );\n\n\t\t\t\t\tif ( lastZoom !== scope.object.zoom ) {\n\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * scope.zoomSpeed;\n\n\t\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\tscope.object.zoom = MathUtils.clamp( scope.object.zoom / factor, scope.minZoom, scope.maxZoom );\n\n\t\t\t\t\t\tif ( lastZoom !== scope.object.zoom ) {\n\n\t\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.panCamera = ( function () {\n\n\t\t\tconst mouseChange = new Vector2(),\n\t\t\t\tobjectUp = new Vector3(),\n\t\t\t\tpan = new Vector3();\n\n\t\t\treturn function panCamera() {\n\n\t\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\t\tif ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\tconst scale_x = ( scope.object.right - scope.object.left ) / scope.object.zoom / scope.domElement.clientWidth;\n\t\t\t\t\t\tconst scale_y = ( scope.object.top - scope.object.bottom ) / scope.object.zoom / scope.domElement.clientWidth;\n\n\t\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmouseChange.multiplyScalar( _eye.length() * scope.panSpeed );\n\n\t\t\t\t\tpan.copy( _eye ).cross( scope.object.up ).setLength( mouseChange.x );\n\t\t\t\t\tpan.add( objectUp.copy( scope.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t\tscope.object.position.add( pan );\n\t\t\t\t\tscope.target.add( pan );\n\n\t\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( scope.dynamicDampingFactor ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tthis.checkDistances = function () {\n\n\t\t\tif ( ! scope.noZoom || ! scope.noPan ) {\n\n\t\t\t\tif ( _eye.lengthSq() > scope.maxDistance * scope.maxDistance ) {\n\n\t\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.maxDistance ) );\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t}\n\n\t\t\t\tif ( _eye.lengthSq() < scope.minDistance * scope.minDistance ) {\n\n\t\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.minDistance ) );\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.update = function () {\n\n\t\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\t\tif ( ! scope.noRotate ) {\n\n\t\t\t\tscope.rotateCamera();\n\n\t\t\t}\n\n\t\t\tif ( ! scope.noZoom ) {\n\n\t\t\t\tscope.zoomCamera();\n\n\t\t\t}\n\n\t\t\tif ( ! scope.noPan ) {\n\n\t\t\t\tscope.panCamera();\n\n\t\t\t}\n\n\t\t\tscope.object.position.addVectors( scope.target, _eye );\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscope.checkDistances();\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t\t}\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS || lastZoom !== scope.object.zoom ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastZoom = scope.object.zoom;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\t_state = STATE.NONE;\n\t\t\t_keyState = STATE.NONE;\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.up.copy( scope.up0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tlastPosition.copy( scope.object.position );\n\t\t\tlastZoom = scope.object.zoom;\n\n\t\t};\n\n\t\t// listeners\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( _pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchEnd( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseUp();\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tremovePointer( event );\n\n\t\t\tif ( _pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction keydown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\t\treturn;\n\n\t\t\t} else if ( event.code === scope.keys[ STATE.ROTATE ] && ! scope.noRotate ) {\n\n\t\t\t\t_keyState = STATE.ROTATE;\n\n\t\t\t} else if ( event.code === scope.keys[ STATE.ZOOM ] && ! scope.noZoom ) {\n\n\t\t\t\t_keyState = STATE.ZOOM;\n\n\t\t\t} else if ( event.code === scope.keys[ STATE.PAN ] && ! scope.noPan ) {\n\n\t\t\t\t_keyState = STATE.PAN;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction keyup() {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t_keyState = STATE.NONE;\n\n\t\t\twindow.addEventListener( 'keydown', keydown );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tif ( _state === STATE.NONE ) {\n\n\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\tcase scope.mouseButtons.LEFT:\n\t\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.mouseButtons.MIDDLE:\n\t\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.mouseButtons.RIGHT:\n\t\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tconst state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseUp() {\n\n\t\t\t_state = STATE.NONE;\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tswitch ( event.deltaMode ) {\n\n\t\t\t\tcase 2:\n\t\t\t\t\t// Zoom in pages\n\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\t// Zoom in lines\n\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\tcase 1:\n\t\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( _pointers[ 0 ].pageX, _pointers[ 0 ].pageY ) );\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // 2 or more\n\t\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\t\tconst dx = _pointers[ 0 ].pageX - _pointers[ 1 ].pageX;\n\t\t\t\t\tconst dy = _pointers[ 0 ].pageY - _pointers[ 1 ].pageY;\n\t\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\t\tconst x = ( _pointers[ 0 ].pageX + _pointers[ 1 ].pageX ) / 2;\n\t\t\t\t\tconst y = ( _pointers[ 0 ].pageY + _pointers[ 1 ].pageY ) / 2;\n\t\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\tcase 1:\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // 2 or more\n\n\t\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\t\tconst dx = event.pageX - position.x;\n\t\t\t\t\tconst dy = event.pageY - position.y;\n\t\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\t\tconst x = ( event.pageX + position.x ) / 2;\n\t\t\t\t\tconst y = ( event.pageY + position.y ) / 2;\n\t\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchEnd( event ) {\n\n\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\t_state = STATE.NONE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\n\t\t\t\t\tfor ( let i = 0; i < _pointers.length; i ++ ) {\n\n\t\t\t\t\t\tif ( _pointers[ i ].pointerId !== event.pointerId ) {\n\n\t\t\t\t\t\t\tconst position = _pointerPositions[ _pointers[ i ].pointerId ];\n\t\t\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( position.x, position.y ) );\n\t\t\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction contextmenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\t_pointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete _pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < _pointers.length; i ++ ) {\n\n\t\t\t\tif ( _pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\t_pointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = _pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\t_pointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === _pointers[ 0 ].pointerId ) ? _pointers[ 1 ] : _pointers[ 0 ];\n\n\t\t\treturn _pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', contextmenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\twindow.removeEventListener( 'keydown', keydown );\n\t\t\twindow.removeEventListener( 'keyup', keyup );\n\n\t\t};\n\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tthis.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\n\t\twindow.addEventListener( 'keydown', keydown );\n\t\twindow.addEventListener( 'keyup', keyup );\n\n\t\tthis.handleResize();\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t}\n\n}\n\nexport { TrackballControls };\n","import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3,\n\tPlane,\n\tRay,\n\tMathUtils\n} from 'three';\n\n// OrbitControls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\nconst _ray = new Ray();\nconst _plane = new Plane();\nconst TILT_LIMIT = Math.cos( 70 * MathUtils.DEG2RAD );\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\tthis.zoomToCursor = false;\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.stopListenToKeyEvents = function () {\n\n\t\t\tthis._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = null;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\t\t\tconst lastTargetPosition = new Vector3();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\t// adjust the camera position based on zoom only if we're not zooming to the cursor or if it's an ortho camera\n\t\t\t\t// we adjust zoom later in these cases\n\t\t\t\tif ( scope.zoomToCursor && performCursorZoom || scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tspherical.radius = clampDistance( spherical.radius );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.radius = clampDistance( spherical.radius * scale );\n\n\t\t\t\t}\n\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t// adjust camera position\n\t\t\t\tlet zoomChanged = false;\n\t\t\t\tif ( scope.zoomToCursor && performCursorZoom ) {\n\n\t\t\t\t\tlet newRadius = null;\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t// move the camera down the pointer ray\n\t\t\t\t\t\t// this method avoids floating point error\n\t\t\t\t\t\tconst prevRadius = offset.length();\n\t\t\t\t\t\tnewRadius = clampDistance( prevRadius * scale );\n\n\t\t\t\t\t\tconst radiusDelta = prevRadius - newRadius;\n\t\t\t\t\t\tscope.object.position.addScaledVector( dollyDirection, radiusDelta );\n\t\t\t\t\t\tscope.object.updateMatrixWorld();\n\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t// adjust the ortho camera position based on zoom changes\n\t\t\t\t\t\tconst mouseBefore = new Vector3( mouse.x, mouse.y, 0 );\n\t\t\t\t\t\tmouseBefore.unproject( scope.object );\n\n\t\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / scale ) );\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t\t\tconst mouseAfter = new Vector3( mouse.x, mouse.y, 0 );\n\t\t\t\t\t\tmouseAfter.unproject( scope.object );\n\n\t\t\t\t\t\tscope.object.position.sub( mouseAfter ).add( mouseBefore );\n\t\t\t\t\t\tscope.object.updateMatrixWorld();\n\n\t\t\t\t\t\tnewRadius = offset.length();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.' );\n\t\t\t\t\t\tscope.zoomToCursor = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// handle the placement of the target\n\t\t\t\t\tif ( newRadius !== null ) {\n\n\t\t\t\t\t\tif ( this.screenSpacePanning ) {\n\n\t\t\t\t\t\t\t// position the orbit target in front of the new camera position\n\t\t\t\t\t\t\tscope.target.set( 0, 0, - 1 )\n\t\t\t\t\t\t\t\t.transformDirection( scope.object.matrix )\n\t\t\t\t\t\t\t\t.multiplyScalar( newRadius )\n\t\t\t\t\t\t\t\t.add( scope.object.position );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// get the ray and translation plane to compute target\n\t\t\t\t\t\t\t_ray.origin.copy( scope.object.position );\n\t\t\t\t\t\t\t_ray.direction.set( 0, 0, - 1 ).transformDirection( scope.object.matrix );\n\n\t\t\t\t\t\t\t// if the camera is 20 degrees above the horizon then don't adjust the focus target to avoid\n\t\t\t\t\t\t\t// extremely large values\n\t\t\t\t\t\t\tif ( Math.abs( scope.object.up.dot( _ray.direction ) ) < TILT_LIMIT ) {\n\n\t\t\t\t\t\t\t\tobject.lookAt( scope.target );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t_plane.setFromNormalAndCoplanarPoint( scope.object.up, scope.target );\n\t\t\t\t\t\t\t\t_ray.intersectPlane( _plane, scope.target );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / scale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tperformCursorZoom = false;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ||\n\t\t\t\t\tlastTargetPosition.distanceToSquared( scope.target ) > 0 ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tlastTargetPosition.copy( scope.target );\n\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerUp );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tscope._domElementKeyEvents = null;\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tconst dollyDirection = new Vector3();\n\t\tconst mouse = new Vector2();\n\t\tlet performCursorZoom = false;\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera || scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera || scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction updateMouseParameters( event ) {\n\n\t\t\tif ( ! scope.zoomToCursor ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tperformCursorZoom = true;\n\n\t\t\tconst rect = scope.domElement.getBoundingClientRect();\n\t\t\tconst x = event.clientX - rect.left;\n\t\t\tconst y = event.clientY - rect.top;\n\t\t\tconst w = rect.width;\n\t\t\tconst h = rect.height;\n\n\t\t\tmouse.x = ( x / w ) * 2 - 1;\n\t\t\tmouse.y = - ( y / h ) * 2 + 1;\n\n\t\t\tdollyDirection.set( mouse.x, mouse.y, 1 ).unproject( object ).sub( object.position ).normalize();\n\n\t\t}\n\n\t\tfunction clampDistance( dist ) {\n\n\t\t\treturn Math.max( scope.minDistance, Math.min( scope.maxDistance, dist ) );\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tupdateMouseParameters( event );\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tupdateMouseParameters( event );\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateUp( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\trotateLeft( - 2 * Math.PI * scope.rotateSpeed / scope.domElement.clientHeight );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly() {\n\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerUp );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\nexport { OrbitControls };\n","import {\n\tEventDispatcher,\n\tQuaternion,\n\tVector3\n} from 'three';\n\nconst _changeEvent = { type: 'change' };\n\nclass FlyControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\n\t\t// API\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\tthis.movementSpeed = 1.0;\n\t\tthis.rollSpeed = 0.005;\n\n\t\tthis.dragToLook = false;\n\t\tthis.autoForward = false;\n\n\t\t// disable default target object behavior\n\n\t\t// internals\n\n\t\tconst scope = this;\n\n\t\tconst EPS = 0.000001;\n\n\t\tconst lastQuaternion = new Quaternion();\n\t\tconst lastPosition = new Vector3();\n\n\t\tthis.tmpQuaternion = new Quaternion();\n\n\t\tthis.status = 0;\n\n\t\tthis.moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, pitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\n\t\tthis.moveVector = new Vector3( 0, 0, 0 );\n\t\tthis.rotationVector = new Vector3( 0, 0, 0 );\n\n\t\tthis.keydown = function ( event ) {\n\n\t\t\tif ( event.altKey || this.enabled === false ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase 'ShiftLeft':\n\t\t\t\tcase 'ShiftRight': this.movementSpeedMultiplier = .1; break;\n\n\t\t\t\tcase 'KeyW': this.moveState.forward = 1; break;\n\t\t\t\tcase 'KeyS': this.moveState.back = 1; break;\n\n\t\t\t\tcase 'KeyA': this.moveState.left = 1; break;\n\t\t\t\tcase 'KeyD': this.moveState.right = 1; break;\n\n\t\t\t\tcase 'KeyR': this.moveState.up = 1; break;\n\t\t\t\tcase 'KeyF': this.moveState.down = 1; break;\n\n\t\t\t\tcase 'ArrowUp': this.moveState.pitchUp = 1; break;\n\t\t\t\tcase 'ArrowDown': this.moveState.pitchDown = 1; break;\n\n\t\t\t\tcase 'ArrowLeft': this.moveState.yawLeft = 1; break;\n\t\t\t\tcase 'ArrowRight': this.moveState.yawRight = 1; break;\n\n\t\t\t\tcase 'KeyQ': this.moveState.rollLeft = 1; break;\n\t\t\t\tcase 'KeyE': this.moveState.rollRight = 1; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\t\t\tthis.updateRotationVector();\n\n\t\t};\n\n\t\tthis.keyup = function ( event ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase 'ShiftLeft':\n\t\t\t\tcase 'ShiftRight': this.movementSpeedMultiplier = 1; break;\n\n\t\t\t\tcase 'KeyW': this.moveState.forward = 0; break;\n\t\t\t\tcase 'KeyS': this.moveState.back = 0; break;\n\n\t\t\t\tcase 'KeyA': this.moveState.left = 0; break;\n\t\t\t\tcase 'KeyD': this.moveState.right = 0; break;\n\n\t\t\t\tcase 'KeyR': this.moveState.up = 0; break;\n\t\t\t\tcase 'KeyF': this.moveState.down = 0; break;\n\n\t\t\t\tcase 'ArrowUp': this.moveState.pitchUp = 0; break;\n\t\t\t\tcase 'ArrowDown': this.moveState.pitchDown = 0; break;\n\n\t\t\t\tcase 'ArrowLeft': this.moveState.yawLeft = 0; break;\n\t\t\t\tcase 'ArrowRight': this.moveState.yawRight = 0; break;\n\n\t\t\t\tcase 'KeyQ': this.moveState.rollLeft = 0; break;\n\t\t\t\tcase 'KeyE': this.moveState.rollRight = 0; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\t\t\tthis.updateRotationVector();\n\n\t\t};\n\n\t\tthis.pointerdown = function ( event ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tif ( this.dragToLook ) {\n\n\t\t\t\tthis.status ++;\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\tcase 0: this.moveState.forward = 1; break;\n\t\t\t\t\tcase 2: this.moveState.back = 1; break;\n\n\t\t\t\t}\n\n\t\t\t\tthis.updateMovementVector();\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.pointermove = function ( event ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tif ( ! this.dragToLook || this.status > 0 ) {\n\n\t\t\t\tconst container = this.getContainerDimensions();\n\t\t\t\tconst halfWidth = container.size[ 0 ] / 2;\n\t\t\t\tconst halfHeight = container.size[ 1 ] / 2;\n\n\t\t\t\tthis.moveState.yawLeft = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth ) / halfWidth;\n\t\t\t\tthis.moveState.pitchDown = ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\n\n\t\t\t\tthis.updateRotationVector();\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.pointerup = function ( event ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tif ( this.dragToLook ) {\n\n\t\t\t\tthis.status --;\n\n\t\t\t\tthis.moveState.yawLeft = this.moveState.pitchDown = 0;\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\tcase 0: this.moveState.forward = 0; break;\n\t\t\t\t\tcase 2: this.moveState.back = 0; break;\n\n\t\t\t\t}\n\n\t\t\t\tthis.updateMovementVector();\n\n\t\t\t}\n\n\t\t\tthis.updateRotationVector();\n\n\t\t};\n\n\t\tthis.contextMenu = function ( event ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t};\n\n\t\tthis.update = function ( delta ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tconst moveMult = delta * scope.movementSpeed;\n\t\t\tconst rotMult = delta * scope.rollSpeed;\n\n\t\t\tscope.object.translateX( scope.moveVector.x * moveMult );\n\t\t\tscope.object.translateY( scope.moveVector.y * moveMult );\n\t\t\tscope.object.translateZ( scope.moveVector.z * moveMult );\n\n\t\t\tscope.tmpQuaternion.set( scope.rotationVector.x * rotMult, scope.rotationVector.y * rotMult, scope.rotationVector.z * rotMult, 1 ).normalize();\n\t\t\tscope.object.quaternion.multiply( scope.tmpQuaternion );\n\n\t\t\tif (\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS\n\t\t\t) {\n\n\t\t\t\tscope.dispatchEvent( _changeEvent );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.updateMovementVector = function () {\n\n\t\t\tconst forward = ( this.moveState.forward || ( this.autoForward && ! this.moveState.back ) ) ? 1 : 0;\n\n\t\t\tthis.moveVector.x = ( - this.moveState.left + this.moveState.right );\n\t\t\tthis.moveVector.y = ( - this.moveState.down + this.moveState.up );\n\t\t\tthis.moveVector.z = ( - forward + this.moveState.back );\n\n\t\t\t//console.log( 'move:', [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n\n\t\t};\n\n\t\tthis.updateRotationVector = function () {\n\n\t\t\tthis.rotationVector.x = ( - this.moveState.pitchDown + this.moveState.pitchUp );\n\t\t\tthis.rotationVector.y = ( - this.moveState.yawRight + this.moveState.yawLeft );\n\t\t\tthis.rotationVector.z = ( - this.moveState.rollRight + this.moveState.rollLeft );\n\n\t\t\t//console.log( 'rotate:', [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n\n\t\t};\n\n\t\tthis.getContainerDimensions = function () {\n\n\t\t\tif ( this.domElement != document ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tsize: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\n\t\t\t\t\toffset: [ this.domElement.offsetLeft, this.domElement.offsetTop ]\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\treturn {\n\t\t\t\t\tsize: [ window.innerWidth, window.innerHeight ],\n\t\t\t\t\toffset: [ 0, 0 ]\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\tthis.domElement.removeEventListener( 'contextmenu', _contextmenu );\n\t\t\tthis.domElement.removeEventListener( 'pointerdown', _pointerdown );\n\t\t\tthis.domElement.removeEventListener( 'pointermove', _pointermove );\n\t\t\tthis.domElement.removeEventListener( 'pointerup', _pointerup );\n\n\t\t\twindow.removeEventListener( 'keydown', _keydown );\n\t\t\twindow.removeEventListener( 'keyup', _keyup );\n\n\t\t};\n\n\t\tconst _contextmenu = this.contextMenu.bind( this );\n\t\tconst _pointermove = this.pointermove.bind( this );\n\t\tconst _pointerdown = this.pointerdown.bind( this );\n\t\tconst _pointerup = this.pointerup.bind( this );\n\t\tconst _keydown = this.keydown.bind( this );\n\t\tconst _keyup = this.keyup.bind( this );\n\n\t\tthis.domElement.addEventListener( 'contextmenu', _contextmenu );\n\t\tthis.domElement.addEventListener( 'pointerdown', _pointerdown );\n\t\tthis.domElement.addEventListener( 'pointermove', _pointermove );\n\t\tthis.domElement.addEventListener( 'pointerup', _pointerup );\n\n\t\twindow.addEventListener( 'keydown', _keydown );\n\t\twindow.addEventListener( 'keyup', _keyup );\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t}\n\n}\n\nexport { FlyControls };\n","/**\n * Full-screen textured quad shader\n */\n\nconst CopyShader = {\n\n\tname: 'CopyShader',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'opacity': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}`\n\n};\n\nexport { CopyShader };\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tOrthographicCamera,\n\tMesh\n} from 'three';\n\nclass Pass {\n\n\tconstructor() {\n\n\t\tthis.isPass = true;\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n\tdispose() {}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nconst _geometry = new BufferGeometry();\n_geometry.setAttribute( 'position', new Float32BufferAttribute( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n_geometry.setAttribute( 'uv', new Float32BufferAttribute( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Mesh( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\nexport { Pass, FullScreenQuad };\n","import {\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\n\nclass ShaderPass extends Pass {\n\n\tconstructor( shader, textureID ) {\n\n\t\tsuper();\n\n\t\tthis.textureID = ( textureID !== undefined ) ? textureID : 'tDiffuse';\n\n\t\tif ( shader instanceof ShaderMaterial ) {\n\n\t\t\tthis.uniforms = shader.uniforms;\n\n\t\t\tthis.material = shader;\n\n\t\t} else if ( shader ) {\n\n\t\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t\tthis.material = new ShaderMaterial( {\n\n\t\t\t\tname: ( shader.name !== undefined ) ? shader.name : 'unspecified',\n\t\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\t\tuniforms: this.uniforms,\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t\t} );\n\n\t\t}\n\n\t\tthis.fsQuad = new FullScreenQuad( this.material );\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tthis.material.dispose();\n\n\t\tthis.fsQuad.dispose();\n\n\t}\n\n}\n\nexport { ShaderPass };\n","import { Pass } from './Pass.js';\n\nclass MaskPass extends Pass {\n\n\tconstructor( scene, camera ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.clear = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis.inverse = false;\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst context = renderer.getContext();\n\t\tconst state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tlet writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer and make them writable for subsequent rendering/clearing\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\tstate.buffers.color.setMask( true );\n\t\tstate.buffers.depth.setMask( true );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setLocked( false );\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t}\n\n}\n\nclass ClearMaskPass extends Pass {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.needsSwap = false;\n\n\t}\n\n\trender( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setLocked( false );\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n}\n\nexport { MaskPass, ClearMaskPass };\n","import {\n\tClock,\n\tHalfFloatType,\n\tNoBlending,\n\tVector2,\n\tWebGLRenderTarget\n} from 'three';\nimport { CopyShader } from '../shaders/CopyShader.js';\nimport { ShaderPass } from './ShaderPass.js';\nimport { MaskPass } from './MaskPass.js';\nimport { ClearMaskPass } from './MaskPass.js';\n\nclass EffectComposer {\n\n\tconstructor( renderer, renderTarget ) {\n\n\t\tthis.renderer = renderer;\n\n\t\tthis._pixelRatio = renderer.getPixelRatio();\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = renderer.getSize( new Vector2() );\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = new WebGLRenderTarget( this._width * this._pixelRatio, this._height * this._pixelRatio, { type: HalfFloatType } );\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t\t} else {\n\n\t\t\tthis._width = renderTarget.width;\n\t\t\tthis._height = renderTarget.height;\n\n\t\t}\n\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t\tthis.renderToScreen = true;\n\n\t\tthis.passes = [];\n\n\t\tthis.copyPass = new ShaderPass( CopyShader );\n\t\tthis.copyPass.material.blending = NoBlending;\n\n\t\tthis.clock = new Clock();\n\n\t}\n\n\tswapBuffers() {\n\n\t\tconst tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t}\n\n\taddPass( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tinsertPass( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tremovePass( pass ) {\n\n\t\tconst index = this.passes.indexOf( pass );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.passes.splice( index, 1 );\n\n\t\t}\n\n\t}\n\n\tisLastEnabledPass( passIndex ) {\n\n\t\tfor ( let i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\trender( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tconst currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tlet maskActive = false;\n\n\t\tfor ( let i = 0, il = this.passes.length; i < il; i ++ ) {\n\n\t\t\tconst pass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tconst context = this.renderer.getContext();\n\t\t\t\t\tconst stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\treset( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = this.renderer.getSize( new Vector2() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tconst effectiveWidth = this._width * this._pixelRatio;\n\t\tconst effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t}\n\n\tsetPixelRatio( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\n\t\tthis.copyPass.dispose();\n\n\t}\n\n}\n\nexport { EffectComposer };\n","import {\n\tColor\n} from 'three';\nimport { Pass } from './Pass.js';\n\nclass RenderPass extends Pass {\n\n\tconstructor( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.overrideMaterial = overrideMaterial;\n\n\t\tthis.clearColor = clearColor;\n\t\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\t\tthis.clear = true;\n\t\tthis.clearDepth = false;\n\t\tthis.needsSwap = false;\n\t\tthis._oldClearColor = new Color();\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tlet oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\trenderer.render( this.scene, this.camera );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( this._oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n}\n\nexport { RenderPass };\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _wrapNativeSuper from '@babel/runtime/helpers/esm/wrapNativeSuper';\nimport _taggedTemplateLiteralLoose from '@babel/runtime/helpers/esm/taggedTemplateLiteralLoose';\n\nfunction last() {\n  var _ref;\n\n  return _ref = arguments.length - 1, _ref < 0 || arguments.length <= _ref ? undefined : arguments[_ref];\n}\n\nfunction negation(a) {\n  return -a;\n}\n\nfunction addition(a, b) {\n  return a + b;\n}\n\nfunction subtraction(a, b) {\n  return a - b;\n}\n\nfunction multiplication(a, b) {\n  return a * b;\n}\n\nfunction division(a, b) {\n  return a / b;\n}\n\nfunction max() {\n  return Math.max.apply(Math, arguments);\n}\n\nfunction min() {\n  return Math.min.apply(Math, arguments);\n}\n\nfunction comma() {\n  return Array.of.apply(Array, arguments);\n}\n\nvar defaultSymbols = {\n  symbols: {\n    '*': {\n      infix: {\n        symbol: '*',\n        f: multiplication,\n        notation: 'infix',\n        precedence: 4,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: '*',\n      regSymbol: '\\\\*'\n    },\n    '/': {\n      infix: {\n        symbol: '/',\n        f: division,\n        notation: 'infix',\n        precedence: 4,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: '/',\n      regSymbol: '/'\n    },\n    '+': {\n      infix: {\n        symbol: '+',\n        f: addition,\n        notation: 'infix',\n        precedence: 2,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      prefix: {\n        symbol: '+',\n        f: last,\n        notation: 'prefix',\n        precedence: 3,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '+',\n      regSymbol: '\\\\+'\n    },\n    '-': {\n      infix: {\n        symbol: '-',\n        f: subtraction,\n        notation: 'infix',\n        precedence: 2,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      prefix: {\n        symbol: '-',\n        f: negation,\n        notation: 'prefix',\n        precedence: 3,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '-',\n      regSymbol: '-'\n    },\n    ',': {\n      infix: {\n        symbol: ',',\n        f: comma,\n        notation: 'infix',\n        precedence: 1,\n        rightToLeft: 0,\n        argCount: 2\n      },\n      symbol: ',',\n      regSymbol: ','\n    },\n    '(': {\n      prefix: {\n        symbol: '(',\n        f: last,\n        notation: 'prefix',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: '(',\n      regSymbol: '\\\\('\n    },\n    ')': {\n      postfix: {\n        symbol: ')',\n        f: undefined,\n        notation: 'postfix',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: ')',\n      regSymbol: '\\\\)'\n    },\n    min: {\n      func: {\n        symbol: 'min',\n        f: min,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'min',\n      regSymbol: 'min\\\\b'\n    },\n    max: {\n      func: {\n        symbol: 'max',\n        f: max,\n        notation: 'func',\n        precedence: 0,\n        rightToLeft: 0,\n        argCount: 1\n      },\n      symbol: 'max',\n      regSymbol: 'max\\\\b'\n    }\n  }\n};\nvar defaultSymbolMap = defaultSymbols;\n\n// based on https://github.com/styled-components/styled-components/blob/fcf6f3804c57a14dd7984dfab7bc06ee2edca044/src/utils/error.js\n\n/**\n * Parse errors.md and turn it into a simple hash of code: message\n * @private\n */\nvar ERRORS = {\n  \"1\": \"Passed invalid arguments to hsl, please pass multiple numbers e.g. hsl(360, 0.75, 0.4) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75 }).\\n\\n\",\n  \"2\": \"Passed invalid arguments to hsla, please pass multiple numbers e.g. hsla(360, 0.75, 0.4, 0.7) or an object e.g. rgb({ hue: 255, saturation: 0.4, lightness: 0.75, alpha: 0.7 }).\\n\\n\",\n  \"3\": \"Passed an incorrect argument to a color function, please pass a string representation of a color.\\n\\n\",\n  \"4\": \"Couldn't generate valid rgb string from %s, it returned %s.\\n\\n\",\n  \"5\": \"Couldn't parse the color string. Please provide the color as a string in hex, rgb, rgba, hsl or hsla notation.\\n\\n\",\n  \"6\": \"Passed invalid arguments to rgb, please pass multiple numbers e.g. rgb(255, 205, 100) or an object e.g. rgb({ red: 255, green: 205, blue: 100 }).\\n\\n\",\n  \"7\": \"Passed invalid arguments to rgba, please pass multiple numbers e.g. rgb(255, 205, 100, 0.75) or an object e.g. rgb({ red: 255, green: 205, blue: 100, alpha: 0.75 }).\\n\\n\",\n  \"8\": \"Passed invalid argument to toColorString, please pass a RgbColor, RgbaColor, HslColor or HslaColor object.\\n\\n\",\n  \"9\": \"Please provide a number of steps to the modularScale helper.\\n\\n\",\n  \"10\": \"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\\n\\n\",\n  \"11\": \"Invalid value passed as base to modularScale, expected number or em string but got \\\"%s\\\"\\n\\n\",\n  \"12\": \"Expected a string ending in \\\"px\\\" or a number passed as the first argument to %s(), got \\\"%s\\\" instead.\\n\\n\",\n  \"13\": \"Expected a string ending in \\\"px\\\" or a number passed as the second argument to %s(), got \\\"%s\\\" instead.\\n\\n\",\n  \"14\": \"Passed invalid pixel value (\\\"%s\\\") to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"15\": \"Passed invalid base value (\\\"%s\\\") to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"16\": \"You must provide a template to this method.\\n\\n\",\n  \"17\": \"You passed an unsupported selector state to this method.\\n\\n\",\n  \"18\": \"minScreen and maxScreen must be provided as stringified numbers with the same units.\\n\\n\",\n  \"19\": \"fromSize and toSize must be provided as stringified numbers with the same units.\\n\\n\",\n  \"20\": \"expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\\n\\n\",\n  \"21\": \"expects the objects in the first argument array to have the properties `prop`, `fromSize`, and `toSize`.\\n\\n\",\n  \"22\": \"expects the first argument object to have the properties `prop`, `fromSize`, and `toSize`.\\n\\n\",\n  \"23\": \"fontFace expects a name of a font-family.\\n\\n\",\n  \"24\": \"fontFace expects either the path to the font file(s) or a name of a local copy.\\n\\n\",\n  \"25\": \"fontFace expects localFonts to be an array.\\n\\n\",\n  \"26\": \"fontFace expects fileFormats to be an array.\\n\\n\",\n  \"27\": \"radialGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"28\": \"Please supply a filename to retinaImage() as the first argument.\\n\\n\",\n  \"29\": \"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\\n\\n\",\n  \"30\": \"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\\n\\n\",\n  \"31\": \"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation\\n\\n\",\n  \"32\": \"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s')\\n\\n\",\n  \"33\": \"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation\\n\\n\",\n  \"34\": \"borderRadius expects a radius value as a string or number as the second argument.\\n\\n\",\n  \"35\": \"borderRadius expects one of \\\"top\\\", \\\"bottom\\\", \\\"left\\\" or \\\"right\\\" as the first argument.\\n\\n\",\n  \"36\": \"Property must be a string value.\\n\\n\",\n  \"37\": \"Syntax Error at %s.\\n\\n\",\n  \"38\": \"Formula contains a function that needs parentheses at %s.\\n\\n\",\n  \"39\": \"Formula is missing closing parenthesis at %s.\\n\\n\",\n  \"40\": \"Formula has too many closing parentheses at %s.\\n\\n\",\n  \"41\": \"All values in a formula must have the same unit or be unitless.\\n\\n\",\n  \"42\": \"Please provide a number of steps to the modularScale helper.\\n\\n\",\n  \"43\": \"Please pass a number or one of the predefined scales to the modularScale helper as the ratio.\\n\\n\",\n  \"44\": \"Invalid value passed as base to modularScale, expected number or em/rem string but got %s.\\n\\n\",\n  \"45\": \"Passed invalid argument to hslToColorString, please pass a HslColor or HslaColor object.\\n\\n\",\n  \"46\": \"Passed invalid argument to rgbToColorString, please pass a RgbColor or RgbaColor object.\\n\\n\",\n  \"47\": \"minScreen and maxScreen must be provided as stringified numbers with the same units.\\n\\n\",\n  \"48\": \"fromSize and toSize must be provided as stringified numbers with the same units.\\n\\n\",\n  \"49\": \"Expects either an array of objects or a single object with the properties prop, fromSize, and toSize.\\n\\n\",\n  \"50\": \"Expects the objects in the first argument array to have the properties prop, fromSize, and toSize.\\n\\n\",\n  \"51\": \"Expects the first argument object to have the properties prop, fromSize, and toSize.\\n\\n\",\n  \"52\": \"fontFace expects either the path to the font file(s) or a name of a local copy.\\n\\n\",\n  \"53\": \"fontFace expects localFonts to be an array.\\n\\n\",\n  \"54\": \"fontFace expects fileFormats to be an array.\\n\\n\",\n  \"55\": \"fontFace expects a name of a font-family.\\n\\n\",\n  \"56\": \"linearGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"57\": \"radialGradient requries at least 2 color-stops to properly render.\\n\\n\",\n  \"58\": \"Please supply a filename to retinaImage() as the first argument.\\n\\n\",\n  \"59\": \"Passed invalid argument to triangle, please pass correct pointingDirection e.g. 'right'.\\n\\n\",\n  \"60\": \"Passed an invalid value to `height` or `width`. Please provide a pixel based unit.\\n\\n\",\n  \"61\": \"Property must be a string value.\\n\\n\",\n  \"62\": \"borderRadius expects a radius value as a string or number as the second argument.\\n\\n\",\n  \"63\": \"borderRadius expects one of \\\"top\\\", \\\"bottom\\\", \\\"left\\\" or \\\"right\\\" as the first argument.\\n\\n\",\n  \"64\": \"The animation shorthand only takes 8 arguments. See the specification for more information: http://mdn.io/animation.\\n\\n\",\n  \"65\": \"To pass multiple animations please supply them in arrays, e.g. animation(['rotate', '2s'], ['move', '1s'])\\\\nTo pass a single animation please supply them in simple values, e.g. animation('rotate', '2s').\\n\\n\",\n  \"66\": \"The animation shorthand arrays can only have 8 elements. See the specification for more information: http://mdn.io/animation.\\n\\n\",\n  \"67\": \"You must provide a template to this method.\\n\\n\",\n  \"68\": \"You passed an unsupported selector state to this method.\\n\\n\",\n  \"69\": \"Expected a string ending in \\\"px\\\" or a number passed as the first argument to %s(), got %s instead.\\n\\n\",\n  \"70\": \"Expected a string ending in \\\"px\\\" or a number passed as the second argument to %s(), got %s instead.\\n\\n\",\n  \"71\": \"Passed invalid pixel value %s to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"72\": \"Passed invalid base value %s to %s(), please pass a value like \\\"12px\\\" or 12.\\n\\n\",\n  \"73\": \"Please provide a valid CSS variable.\\n\\n\",\n  \"74\": \"CSS variable not found and no default was provided.\\n\\n\",\n  \"75\": \"important requires a valid style object, got a %s instead.\\n\\n\",\n  \"76\": \"fromSize and toSize must be provided as stringified numbers with the same units as minScreen and maxScreen.\\n\\n\",\n  \"77\": \"remToPx expects a value in \\\"rem\\\" but you provided it in \\\"%s\\\".\\n\\n\",\n  \"78\": \"base must be set in \\\"px\\\" or \\\"%\\\" but you set it in \\\"%s\\\".\\n\"\n};\n/**\n * super basic version of sprintf\n * @private\n */\n\nfunction format() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var a = args[0];\n  var b = [];\n  var c;\n\n  for (c = 1; c < args.length; c += 1) {\n    b.push(args[c]);\n  }\n\n  b.forEach(function (d) {\n    a = a.replace(/%[a-z]/, d);\n  });\n  return a;\n}\n/**\n * Create an error file out of errors.md for development and a simple web link to the full errors\n * in production mode.\n * @private\n */\n\n\nvar PolishedError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(PolishedError, _Error);\n\n  function PolishedError(code) {\n    var _this;\n\n    if (process.env.NODE_ENV === 'production') {\n      _this = _Error.call(this, \"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#\" + code + \" for more information.\") || this;\n    } else {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      _this = _Error.call(this, format.apply(void 0, [ERRORS[code]].concat(args))) || this;\n    }\n\n    return _assertThisInitialized(_this);\n  }\n\n  return PolishedError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar unitRegExp = /((?!\\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\\D|$)|ged|darg?|nrut)/g; // Merges additional math functionality into the defaults.\n\nfunction mergeSymbolMaps(additionalSymbols) {\n  var symbolMap = {};\n  symbolMap.symbols = additionalSymbols ? _extends({}, defaultSymbolMap.symbols, additionalSymbols.symbols) : _extends({}, defaultSymbolMap.symbols);\n  return symbolMap;\n}\n\nfunction exec(operators, values) {\n  var _ref;\n\n  var op = operators.pop();\n  values.push(op.f.apply(op, (_ref = []).concat.apply(_ref, values.splice(-op.argCount))));\n  return op.precedence;\n}\n\nfunction calculate(expression, additionalSymbols) {\n  var symbolMap = mergeSymbolMaps(additionalSymbols);\n  var match;\n  var operators = [symbolMap.symbols['('].prefix];\n  var values = [];\n  var pattern = new RegExp( // Pattern for numbers\n  \"\\\\d+(?:\\\\.\\\\d+)?|\" + // ...and patterns for individual operators/function names\n  Object.keys(symbolMap.symbols).map(function (key) {\n    return symbolMap.symbols[key];\n  }) // longer symbols should be listed first\n  // $FlowFixMe\n  .sort(function (a, b) {\n    return b.symbol.length - a.symbol.length;\n  }) // $FlowFixMe\n  .map(function (val) {\n    return val.regSymbol;\n  }).join('|') + \"|(\\\\S)\", 'g');\n  pattern.lastIndex = 0; // Reset regular expression object\n\n  var afterValue = false;\n\n  do {\n    match = pattern.exec(expression);\n\n    var _ref2 = match || [')', undefined],\n        token = _ref2[0],\n        bad = _ref2[1];\n\n    var notNumber = symbolMap.symbols[token];\n    var notNewValue = notNumber && !notNumber.prefix && !notNumber.func;\n    var notAfterValue = !notNumber || !notNumber.postfix && !notNumber.infix; // Check for syntax errors:\n\n    if (bad || (afterValue ? notAfterValue : notNewValue)) {\n      throw new PolishedError(37, match ? match.index : expression.length, expression);\n    }\n\n    if (afterValue) {\n      // We either have an infix or postfix operator (they should be mutually exclusive)\n      var curr = notNumber.postfix || notNumber.infix;\n\n      do {\n        var prev = operators[operators.length - 1];\n        if ((curr.precedence - prev.precedence || prev.rightToLeft) > 0) break; // Apply previous operator, since it has precedence over current one\n      } while (exec(operators, values)); // Exit loop after executing an opening parenthesis or function\n\n\n      afterValue = curr.notation === 'postfix';\n\n      if (curr.symbol !== ')') {\n        operators.push(curr); // Postfix always has precedence over any operator that follows after it\n\n        if (afterValue) exec(operators, values);\n      }\n    } else if (notNumber) {\n      // prefix operator or function\n      operators.push(notNumber.prefix || notNumber.func);\n\n      if (notNumber.func) {\n        // Require an opening parenthesis\n        match = pattern.exec(expression);\n\n        if (!match || match[0] !== '(') {\n          throw new PolishedError(38, match ? match.index : expression.length, expression);\n        }\n      }\n    } else {\n      // number\n      values.push(+token);\n      afterValue = true;\n    }\n  } while (match && operators.length);\n\n  if (operators.length) {\n    throw new PolishedError(39, match ? match.index : expression.length, expression);\n  } else if (match) {\n    throw new PolishedError(40, match ? match.index : expression.length, expression);\n  } else {\n    return values.pop();\n  }\n}\n\nfunction reverseString(str) {\n  return str.split('').reverse().join('');\n}\n/**\n * Helper for doing math with CSS Units. Accepts a formula as a string. All values in the formula must have the same unit (or be unitless). Supports complex formulas utliziing addition, subtraction, multiplication, division, square root, powers, factorial, min, max, as well as parentheses for order of operation.\n *\n *In cases where you need to do calculations with mixed units where one unit is a [relative length unit](https://developer.mozilla.org/en-US/docs/Web/CSS/length#Relative_length_units), you will want to use [CSS Calc](https://developer.mozilla.org/en-US/docs/Web/CSS/calc).\n *\n * *warning* While we've done everything possible to ensure math safely evalutes formulas expressed as strings, you should always use extreme caution when passing `math` user provided values.\n * @example\n * // Styles as object usage\n * const styles = {\n *   fontSize: math('12rem + 8rem'),\n *   fontSize: math('(12px + 2px) * 3'),\n *   fontSize: math('3px^2 + sqrt(4)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   fontSize: ${math('12rem + 8rem')};\n *   fontSize: ${math('(12px + 2px) * 3')};\n *   fontSize: ${math('3px^2 + sqrt(4)')};\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   fontSize: '20rem',\n *   fontSize: '42px',\n *   fontSize: '11px',\n * }\n */\n\n\nfunction math(formula, additionalSymbols) {\n  var reversedFormula = reverseString(formula);\n  var formulaMatch = reversedFormula.match(unitRegExp); // Check that all units are the same\n\n  if (formulaMatch && !formulaMatch.every(function (unit) {\n    return unit === formulaMatch[0];\n  })) {\n    throw new PolishedError(41);\n  }\n\n  var cleanFormula = reverseString(reversedFormula.replace(unitRegExp, ''));\n  return \"\" + calculate(cleanFormula, additionalSymbols) + (formulaMatch ? reverseString(formulaMatch[0]) : '');\n}\n\nvar cssVariableRegex = /--[\\S]*/g;\n/**\n * Fetches the value of a passed CSS Variable in the :root scope, or otherwise returns a defaultValue if provided.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'background': cssVar('--background-color'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${cssVar('--background-color')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'background': 'red'\n * }\n */\n\nfunction cssVar(cssVariable, defaultValue) {\n  if (!cssVariable || !cssVariable.match(cssVariableRegex)) {\n    throw new PolishedError(73);\n  }\n\n  var variableValue;\n  /* eslint-disable */\n\n  /* istanbul ignore next */\n\n  if (typeof document !== 'undefined' && document.documentElement !== null) {\n    variableValue = getComputedStyle(document.documentElement).getPropertyValue(cssVariable);\n  }\n  /* eslint-enable */\n\n\n  if (variableValue) {\n    return variableValue.trim();\n  } else if (defaultValue) {\n    return defaultValue;\n  }\n\n  throw new PolishedError(74);\n}\n\n// @private\nfunction capitalizeString(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar positionMap$1 = ['Top', 'Right', 'Bottom', 'Left'];\n\nfunction generateProperty(property, position) {\n  if (!property) return position.toLowerCase();\n  var splitProperty = property.split('-');\n\n  if (splitProperty.length > 1) {\n    splitProperty.splice(1, 0, position);\n    return splitProperty.reduce(function (acc, val) {\n      return \"\" + acc + capitalizeString(val);\n    });\n  }\n\n  var joinedProperty = property.replace(/([a-z])([A-Z])/g, \"$1\" + position + \"$2\");\n  return property === joinedProperty ? \"\" + property + position : joinedProperty;\n}\n\nfunction generateStyles(property, valuesWithDefaults) {\n  var styles = {};\n\n  for (var i = 0; i < valuesWithDefaults.length; i += 1) {\n    if (valuesWithDefaults[i] || valuesWithDefaults[i] === 0) {\n      styles[generateProperty(property, positionMap$1[i])] = valuesWithDefaults[i];\n    }\n  }\n\n  return styles;\n}\n/**\n * Enables shorthand for direction-based properties. It accepts a property (hyphenated or camelCased) and up to four values that map to top, right, bottom, and left, respectively. You can optionally pass an empty string to get only the directional values as properties. You can also optionally pass a null argument for a directional value to ignore it.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...directionalProperty('padding', '12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${directionalProperty('padding', '12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'paddingTop': '12px',\n *   'paddingRight': '24px',\n *   'paddingBottom': '36px',\n *   'paddingLeft': '48px'\n * }\n */\n\n\nfunction directionalProperty(property) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  //  prettier-ignore\n  var firstValue = values[0],\n      _values$ = values[1],\n      secondValue = _values$ === void 0 ? firstValue : _values$,\n      _values$2 = values[2],\n      thirdValue = _values$2 === void 0 ? firstValue : _values$2,\n      _values$3 = values[3],\n      fourthValue = _values$3 === void 0 ? secondValue : _values$3;\n  var valuesWithDefaults = [firstValue, secondValue, thirdValue, fourthValue];\n  return generateStyles(property, valuesWithDefaults);\n}\n\n/**\n * Check if a string ends with something\n * @private\n */\nfunction endsWith(string, suffix) {\n  return string.substr(-suffix.length) === suffix;\n}\n\nvar cssRegex$1 = /^([+-]?(?:\\d+|\\d*\\.\\d+))([a-z]*|%)$/;\n/**\n * Returns a given CSS value minus its unit of measure.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   '--dimension': stripUnit('100px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   --dimension: ${stripUnit('100px')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   '--dimension': 100\n * }\n */\n\nfunction stripUnit(value) {\n  if (typeof value !== 'string') return value;\n  var matchedValue = value.match(cssRegex$1);\n  return matchedValue ? parseFloat(value) : value;\n}\n\n/**\n * Factory function that creates pixel-to-x converters\n * @private\n */\n\nvar pxtoFactory = function pxtoFactory(to) {\n  return function (pxval, base) {\n    if (base === void 0) {\n      base = '16px';\n    }\n\n    var newPxval = pxval;\n    var newBase = base;\n\n    if (typeof pxval === 'string') {\n      if (!endsWith(pxval, 'px')) {\n        throw new PolishedError(69, to, pxval);\n      }\n\n      newPxval = stripUnit(pxval);\n    }\n\n    if (typeof base === 'string') {\n      if (!endsWith(base, 'px')) {\n        throw new PolishedError(70, to, base);\n      }\n\n      newBase = stripUnit(base);\n    }\n\n    if (typeof newPxval === 'string') {\n      throw new PolishedError(71, pxval, to);\n    }\n\n    if (typeof newBase === 'string') {\n      throw new PolishedError(72, base, to);\n    }\n\n    return \"\" + newPxval / newBase + to;\n  };\n};\n\nvar pixelsto = pxtoFactory;\n\n/**\n * Convert pixel value to ems. The default base value is 16px, but can be changed by passing a\n * second argument to the function.\n * @function\n * @param {string|number} pxval\n * @param {string|number} [base='16px']\n * @example\n * // Styles as object usage\n * const styles = {\n *   'height': em('16px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   height: ${em('16px')}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'height': '1em'\n * }\n */\n\nvar em = /*#__PURE__*/pixelsto('em');\nvar em$1 = em;\n\nvar cssRegex = /^([+-]?(?:\\d+|\\d*\\.\\d+))([a-z]*|%)$/;\n/**\n * Returns a given CSS value and its unit as elements of an array.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   '--dimension': getValueAndUnit('100px')[0],\n *   '--unit': getValueAndUnit('100px')[1],\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   --dimension: ${getValueAndUnit('100px')[0]};\n *   --unit: ${getValueAndUnit('100px')[1]};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   '--dimension': 100,\n *   '--unit': 'px',\n * }\n */\n\nfunction getValueAndUnit(value) {\n  if (typeof value !== 'string') return [value, ''];\n  var matchedValue = value.match(cssRegex);\n  if (matchedValue) return [parseFloat(value), matchedValue[2]];\n  return [value, undefined];\n}\n\n/**\n * Helper for targeting rules in a style block generated by polished modules that need !important-level specificity. Can optionally specify a rule (or rules) to target specific rules.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...important(cover())\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${important(cover())}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   'position': 'absolute !important',\n *   'top': '0 !important',\n *   'right: '0 !important',\n *   'bottom': '0 !important',\n *   'left: '0 !important'\n * }\n */\n\nfunction important(styleBlock, rules) {\n  if (typeof styleBlock !== 'object' || styleBlock === null) {\n    throw new PolishedError(75, typeof styleBlock);\n  }\n\n  var newStyleBlock = {};\n  Object.keys(styleBlock).forEach(function (key) {\n    if (typeof styleBlock[key] === 'object' && styleBlock[key] !== null) {\n      newStyleBlock[key] = important(styleBlock[key], rules);\n    } else if (!rules || rules && (rules === key || rules.indexOf(key) >= 0)) {\n      newStyleBlock[key] = styleBlock[key] + \" !important\";\n    } else {\n      newStyleBlock[key] = styleBlock[key];\n    }\n  });\n  return newStyleBlock;\n}\n\nvar ratioNames = {\n  minorSecond: 1.067,\n  majorSecond: 1.125,\n  minorThird: 1.2,\n  majorThird: 1.25,\n  perfectFourth: 1.333,\n  augFourth: 1.414,\n  perfectFifth: 1.5,\n  minorSixth: 1.6,\n  goldenSection: 1.618,\n  majorSixth: 1.667,\n  minorSeventh: 1.778,\n  majorSeventh: 1.875,\n  octave: 2,\n  majorTenth: 2.5,\n  majorEleventh: 2.667,\n  majorTwelfth: 3,\n  doubleOctave: 4\n};\n\nfunction getRatio(ratioName) {\n  return ratioNames[ratioName];\n}\n/**\n * Establish consistent measurements and spacial relationships throughout your projects by incrementing an em or rem value up or down a defined scale. We provide a list of commonly used scales as pre-defined variables.\n * @example\n * // Styles as object usage\n * const styles = {\n *    // Increment two steps up the default scale\n *   'fontSize': modularScale(2)\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *    // Increment two steps up the default scale\n *   fontSize: ${modularScale(2)}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'fontSize': '1.77689em'\n * }\n */\n\n\nfunction modularScale(steps, base, ratio) {\n  if (base === void 0) {\n    base = '1em';\n  }\n\n  if (ratio === void 0) {\n    ratio = 1.333;\n  }\n\n  if (typeof steps !== 'number') {\n    throw new PolishedError(42);\n  }\n\n  if (typeof ratio === 'string' && !ratioNames[ratio]) {\n    throw new PolishedError(43);\n  }\n\n  var _ref = typeof base === 'string' ? getValueAndUnit(base) : [base, ''],\n      realBase = _ref[0],\n      unit = _ref[1];\n\n  var realRatio = typeof ratio === 'string' ? getRatio(ratio) : ratio;\n\n  if (typeof realBase === 'string') {\n    throw new PolishedError(44, base);\n  }\n\n  return \"\" + realBase * Math.pow(realRatio, steps) + (unit || '');\n}\n\n/**\n * Convert pixel value to rems. The default base value is 16px, but can be changed by passing a\n * second argument to the function.\n * @function\n * @param {string|number} pxval\n * @param {string|number} [base='16px']\n * @example\n * // Styles as object usage\n * const styles = {\n *   'height': rem('16px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   height: ${rem('16px')}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'height': '1rem'\n * }\n */\n\nvar rem = /*#__PURE__*/pixelsto('rem');\nvar rem$1 = rem;\n\nvar defaultFontSize = 16;\n\nfunction convertBase(base) {\n  var deconstructedValue = getValueAndUnit(base);\n\n  if (deconstructedValue[1] === 'px') {\n    return parseFloat(base);\n  }\n\n  if (deconstructedValue[1] === '%') {\n    return parseFloat(base) / 100 * defaultFontSize;\n  }\n\n  throw new PolishedError(78, deconstructedValue[1]);\n}\n\nfunction getBaseFromDoc() {\n  /* eslint-disable */\n\n  /* istanbul ignore next */\n  if (typeof document !== 'undefined' && document.documentElement !== null) {\n    var rootFontSize = getComputedStyle(document.documentElement).fontSize;\n    return rootFontSize ? convertBase(rootFontSize) : defaultFontSize;\n  }\n  /* eslint-enable */\n\n  /* istanbul ignore next */\n\n\n  return defaultFontSize;\n}\n/**\n * Convert rem values to px. By default, the base value is pulled from the font-size property on the root element (if it is set in % or px). It defaults to 16px if not found on the root. You can also override the base value by providing your own base in % or px.\n * @example\n * // Styles as object usage\n * const styles = {\n *   'height': remToPx('1.6rem')\n *   'height': remToPx('1.6rem', '10px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   height: ${remToPx('1.6rem')}\n *   height: ${remToPx('1.6rem', '10px')}\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   'height': '25.6px',\n *   'height': '16px',\n * }\n */\n\n\nfunction remToPx(value, base) {\n  var deconstructedValue = getValueAndUnit(value);\n\n  if (deconstructedValue[1] !== 'rem' && deconstructedValue[1] !== '') {\n    throw new PolishedError(77, deconstructedValue[1]);\n  }\n\n  var newBase = base ? convertBase(base) : getBaseFromDoc();\n  return deconstructedValue[0] * newBase + \"px\";\n}\n\nvar functionsMap$3 = {\n  back: 'cubic-bezier(0.600, -0.280, 0.735, 0.045)',\n  circ: 'cubic-bezier(0.600,  0.040, 0.980, 0.335)',\n  cubic: 'cubic-bezier(0.550,  0.055, 0.675, 0.190)',\n  expo: 'cubic-bezier(0.950,  0.050, 0.795, 0.035)',\n  quad: 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n  quart: 'cubic-bezier(0.895,  0.030, 0.685, 0.220)',\n  quint: 'cubic-bezier(0.755,  0.050, 0.855, 0.060)',\n  sine: 'cubic-bezier(0.470,  0.000, 0.745, 0.715)'\n};\n/**\n * String to represent common easing functions as demonstrated here: (github.com/jaukia/easie).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'transitionTimingFunction': easeIn('quad')\n * }\n *\n * // styled-components usage\n *  const div = styled.div`\n *   transitionTimingFunction: ${easeIn('quad')};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'transitionTimingFunction': 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n * }\n */\n\nfunction easeIn(functionName) {\n  return functionsMap$3[functionName.toLowerCase().trim()];\n}\n\nvar functionsMap$2 = {\n  back: 'cubic-bezier(0.680, -0.550, 0.265, 1.550)',\n  circ: 'cubic-bezier(0.785,  0.135, 0.150, 0.860)',\n  cubic: 'cubic-bezier(0.645,  0.045, 0.355, 1.000)',\n  expo: 'cubic-bezier(1.000,  0.000, 0.000, 1.000)',\n  quad: 'cubic-bezier(0.455,  0.030, 0.515, 0.955)',\n  quart: 'cubic-bezier(0.770,  0.000, 0.175, 1.000)',\n  quint: 'cubic-bezier(0.860,  0.000, 0.070, 1.000)',\n  sine: 'cubic-bezier(0.445,  0.050, 0.550, 0.950)'\n};\n/**\n * String to represent common easing functions as demonstrated here: (github.com/jaukia/easie).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'transitionTimingFunction': easeInOut('quad')\n * }\n *\n * // styled-components usage\n *  const div = styled.div`\n *   transitionTimingFunction: ${easeInOut('quad')};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'transitionTimingFunction': 'cubic-bezier(0.455,  0.030, 0.515, 0.955)',\n * }\n */\n\nfunction easeInOut(functionName) {\n  return functionsMap$2[functionName.toLowerCase().trim()];\n}\n\nvar functionsMap$1 = {\n  back: 'cubic-bezier(0.175,  0.885, 0.320, 1.275)',\n  cubic: 'cubic-bezier(0.215,  0.610, 0.355, 1.000)',\n  circ: 'cubic-bezier(0.075,  0.820, 0.165, 1.000)',\n  expo: 'cubic-bezier(0.190,  1.000, 0.220, 1.000)',\n  quad: 'cubic-bezier(0.250,  0.460, 0.450, 0.940)',\n  quart: 'cubic-bezier(0.165,  0.840, 0.440, 1.000)',\n  quint: 'cubic-bezier(0.230,  1.000, 0.320, 1.000)',\n  sine: 'cubic-bezier(0.390,  0.575, 0.565, 1.000)'\n};\n/**\n * String to represent common easing functions as demonstrated here: (github.com/jaukia/easie).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'transitionTimingFunction': easeOut('quad')\n * }\n *\n * // styled-components usage\n *  const div = styled.div`\n *   transitionTimingFunction: ${easeOut('quad')};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'transitionTimingFunction': 'cubic-bezier(0.250,  0.460, 0.450, 0.940)',\n * }\n */\n\nfunction easeOut(functionName) {\n  return functionsMap$1[functionName.toLowerCase().trim()];\n}\n\n/**\n * Returns a CSS calc formula for linear interpolation of a property between two values. Accepts optional minScreen (defaults to '320px') and maxScreen (defaults to '1200px').\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   fontSize: between('20px', '100px', '400px', '1000px'),\n *   fontSize: between('20px', '100px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   fontSize: ${between('20px', '100px', '400px', '1000px')};\n *   fontSize: ${between('20px', '100px')}\n * `\n *\n * // CSS as JS Output\n *\n * h1: {\n *   'fontSize': 'calc(-33.33333333333334px + 13.333333333333334vw)',\n *   'fontSize': 'calc(-9.090909090909093px + 9.090909090909092vw)'\n * }\n */\n\nfunction between(fromSize, toSize, minScreen, maxScreen) {\n  if (minScreen === void 0) {\n    minScreen = '320px';\n  }\n\n  if (maxScreen === void 0) {\n    maxScreen = '1200px';\n  }\n\n  var _getValueAndUnit = getValueAndUnit(fromSize),\n      unitlessFromSize = _getValueAndUnit[0],\n      fromSizeUnit = _getValueAndUnit[1];\n\n  var _getValueAndUnit2 = getValueAndUnit(toSize),\n      unitlessToSize = _getValueAndUnit2[0],\n      toSizeUnit = _getValueAndUnit2[1];\n\n  var _getValueAndUnit3 = getValueAndUnit(minScreen),\n      unitlessMinScreen = _getValueAndUnit3[0],\n      minScreenUnit = _getValueAndUnit3[1];\n\n  var _getValueAndUnit4 = getValueAndUnit(maxScreen),\n      unitlessMaxScreen = _getValueAndUnit4[0],\n      maxScreenUnit = _getValueAndUnit4[1];\n\n  if (typeof unitlessMinScreen !== 'number' || typeof unitlessMaxScreen !== 'number' || !minScreenUnit || !maxScreenUnit || minScreenUnit !== maxScreenUnit) {\n    throw new PolishedError(47);\n  }\n\n  if (typeof unitlessFromSize !== 'number' || typeof unitlessToSize !== 'number' || fromSizeUnit !== toSizeUnit) {\n    throw new PolishedError(48);\n  }\n\n  if (fromSizeUnit !== minScreenUnit || toSizeUnit !== maxScreenUnit) {\n    throw new PolishedError(76);\n  }\n\n  var slope = (unitlessFromSize - unitlessToSize) / (unitlessMinScreen - unitlessMaxScreen);\n  var base = unitlessToSize - slope * unitlessMaxScreen;\n  return \"calc(\" + base.toFixed(2) + (fromSizeUnit || '') + \" + \" + (100 * slope).toFixed(2) + \"vw)\";\n}\n\n/**\n * CSS to contain a float (credit to CSSMojo).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *    ...clearFix(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${clearFix()}\n * `\n *\n * // CSS as JS Output\n *\n * '&::after': {\n *   'clear': 'both',\n *   'content': '\"\"',\n *   'display': 'table'\n * }\n */\nfunction clearFix(parent) {\n  var _ref;\n\n  if (parent === void 0) {\n    parent = '&';\n  }\n\n  var pseudoSelector = parent + \"::after\";\n  return _ref = {}, _ref[pseudoSelector] = {\n    clear: 'both',\n    content: '\"\"',\n    display: 'table'\n  }, _ref;\n}\n\n/**\n * CSS to fully cover an area. Can optionally be passed an offset to act as a \"padding\".\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...cover()\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${cover()}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   'position': 'absolute',\n *   'top': '0',\n *   'right: '0',\n *   'bottom': '0',\n *   'left: '0'\n * }\n */\nfunction cover(offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  return {\n    position: 'absolute',\n    top: offset,\n    right: offset,\n    bottom: offset,\n    left: offset\n  };\n}\n\n/**\n * CSS to represent truncated text with an ellipsis. You can optionally pass a max-width and number of lines before truncating.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...ellipsis('250px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${ellipsis('250px')}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   'display': 'inline-block',\n *   'maxWidth': '250px',\n *   'overflow': 'hidden',\n *   'textOverflow': 'ellipsis',\n *   'whiteSpace': 'nowrap',\n *   'wordWrap': 'normal'\n * }\n */\nfunction ellipsis(width, lines) {\n  if (lines === void 0) {\n    lines = 1;\n  }\n\n  var styles = {\n    display: 'inline-block',\n    maxWidth: width || '100%',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    wordWrap: 'normal'\n  };\n  return lines > 1 ? _extends({}, styles, {\n    WebkitBoxOrient: 'vertical',\n    WebkitLineClamp: lines,\n    display: '-webkit-box',\n    whiteSpace: 'normal'\n  }) : styles;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/**\n * Returns a set of media queries that resizes a property (or set of properties) between a provided fromSize and toSize. Accepts optional minScreen (defaults to '320px') and maxScreen (defaults to '1200px') to constrain the interpolation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...fluidRange(\n *    {\n *        prop: 'padding',\n *        fromSize: '20px',\n *        toSize: '100px',\n *      },\n *      '400px',\n *      '1000px',\n *    )\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${fluidRange(\n *      {\n *        prop: 'padding',\n *        fromSize: '20px',\n *        toSize: '100px',\n *      },\n *      '400px',\n *      '1000px',\n *    )}\n * `\n *\n * // CSS as JS Output\n *\n * div: {\n *   \"@media (min-width: 1000px)\": Object {\n *     \"padding\": \"100px\",\n *   },\n *   \"@media (min-width: 400px)\": Object {\n *     \"padding\": \"calc(-33.33333333333334px + 13.333333333333334vw)\",\n *   },\n *   \"padding\": \"20px\",\n * }\n */\nfunction fluidRange(cssProp, minScreen, maxScreen) {\n  if (minScreen === void 0) {\n    minScreen = '320px';\n  }\n\n  if (maxScreen === void 0) {\n    maxScreen = '1200px';\n  }\n\n  if (!Array.isArray(cssProp) && typeof cssProp !== 'object' || cssProp === null) {\n    throw new PolishedError(49);\n  }\n\n  if (Array.isArray(cssProp)) {\n    var mediaQueries = {};\n    var fallbacks = {};\n\n    for (var _iterator = _createForOfIteratorHelperLoose(cssProp), _step; !(_step = _iterator()).done;) {\n      var _extends2, _extends3;\n\n      var obj = _step.value;\n\n      if (!obj.prop || !obj.fromSize || !obj.toSize) {\n        throw new PolishedError(50);\n      }\n\n      fallbacks[obj.prop] = obj.fromSize;\n      mediaQueries[\"@media (min-width: \" + minScreen + \")\"] = _extends({}, mediaQueries[\"@media (min-width: \" + minScreen + \")\"], (_extends2 = {}, _extends2[obj.prop] = between(obj.fromSize, obj.toSize, minScreen, maxScreen), _extends2));\n      mediaQueries[\"@media (min-width: \" + maxScreen + \")\"] = _extends({}, mediaQueries[\"@media (min-width: \" + maxScreen + \")\"], (_extends3 = {}, _extends3[obj.prop] = obj.toSize, _extends3));\n    }\n\n    return _extends({}, fallbacks, mediaQueries);\n  } else {\n    var _ref, _ref2, _ref3;\n\n    if (!cssProp.prop || !cssProp.fromSize || !cssProp.toSize) {\n      throw new PolishedError(51);\n    }\n\n    return _ref3 = {}, _ref3[cssProp.prop] = cssProp.fromSize, _ref3[\"@media (min-width: \" + minScreen + \")\"] = (_ref = {}, _ref[cssProp.prop] = between(cssProp.fromSize, cssProp.toSize, minScreen, maxScreen), _ref), _ref3[\"@media (min-width: \" + maxScreen + \")\"] = (_ref2 = {}, _ref2[cssProp.prop] = cssProp.toSize, _ref2), _ref3;\n  }\n}\n\nvar dataURIRegex = /^\\s*data:([a-z]+\\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\\-._~:@/?%\\s]*\\s*$/i;\nvar formatHintMap = {\n  woff: 'woff',\n  woff2: 'woff2',\n  ttf: 'truetype',\n  otf: 'opentype',\n  eot: 'embedded-opentype',\n  svg: 'svg',\n  svgz: 'svg'\n};\n\nfunction generateFormatHint(format, formatHint) {\n  if (!formatHint) return '';\n  return \" format(\\\"\" + formatHintMap[format] + \"\\\")\";\n}\n\nfunction isDataURI(fontFilePath) {\n  return !!fontFilePath.replace(/\\s+/g, ' ').match(dataURIRegex);\n}\n\nfunction generateFileReferences(fontFilePath, fileFormats, formatHint) {\n  if (isDataURI(fontFilePath)) {\n    return \"url(\\\"\" + fontFilePath + \"\\\")\" + generateFormatHint(fileFormats[0], formatHint);\n  }\n\n  var fileFontReferences = fileFormats.map(function (format) {\n    return \"url(\\\"\" + fontFilePath + \".\" + format + \"\\\")\" + generateFormatHint(format, formatHint);\n  });\n  return fileFontReferences.join(', ');\n}\n\nfunction generateLocalReferences(localFonts) {\n  var localFontReferences = localFonts.map(function (font) {\n    return \"local(\\\"\" + font + \"\\\")\";\n  });\n  return localFontReferences.join(', ');\n}\n\nfunction generateSources(fontFilePath, localFonts, fileFormats, formatHint) {\n  var fontReferences = [];\n  if (localFonts) fontReferences.push(generateLocalReferences(localFonts));\n\n  if (fontFilePath) {\n    fontReferences.push(generateFileReferences(fontFilePath, fileFormats, formatHint));\n  }\n\n  return fontReferences.join(', ');\n}\n/**\n * CSS for a @font-face declaration. Defaults to check for local copies of the font on the user's machine. You can disable this by passing `null` to localFonts.\n *\n * @example\n * // Styles as object basic usage\n * const styles = {\n *    ...fontFace({\n *      'fontFamily': 'Sans-Pro',\n *      'fontFilePath': 'path/to/file'\n *    })\n * }\n *\n * // styled-components basic usage\n * const GlobalStyle = createGlobalStyle`${\n *   fontFace({\n *     'fontFamily': 'Sans-Pro',\n *     'fontFilePath': 'path/to/file'\n *   }\n * )}`\n *\n * // CSS as JS Output\n *\n * '@font-face': {\n *   'fontFamily': 'Sans-Pro',\n *   'src': 'url(\"path/to/file.eot\"), url(\"path/to/file.woff2\"), url(\"path/to/file.woff\"), url(\"path/to/file.ttf\"), url(\"path/to/file.svg\")',\n * }\n */\n\n\nfunction fontFace(_ref) {\n  var fontFamily = _ref.fontFamily,\n      fontFilePath = _ref.fontFilePath,\n      fontStretch = _ref.fontStretch,\n      fontStyle = _ref.fontStyle,\n      fontVariant = _ref.fontVariant,\n      fontWeight = _ref.fontWeight,\n      _ref$fileFormats = _ref.fileFormats,\n      fileFormats = _ref$fileFormats === void 0 ? ['eot', 'woff2', 'woff', 'ttf', 'svg'] : _ref$fileFormats,\n      _ref$formatHint = _ref.formatHint,\n      formatHint = _ref$formatHint === void 0 ? false : _ref$formatHint,\n      _ref$localFonts = _ref.localFonts,\n      localFonts = _ref$localFonts === void 0 ? [fontFamily] : _ref$localFonts,\n      unicodeRange = _ref.unicodeRange,\n      fontDisplay = _ref.fontDisplay,\n      fontVariationSettings = _ref.fontVariationSettings,\n      fontFeatureSettings = _ref.fontFeatureSettings;\n  // Error Handling\n  if (!fontFamily) throw new PolishedError(55);\n\n  if (!fontFilePath && !localFonts) {\n    throw new PolishedError(52);\n  }\n\n  if (localFonts && !Array.isArray(localFonts)) {\n    throw new PolishedError(53);\n  }\n\n  if (!Array.isArray(fileFormats)) {\n    throw new PolishedError(54);\n  }\n\n  var fontFaceDeclaration = {\n    '@font-face': {\n      fontFamily: fontFamily,\n      src: generateSources(fontFilePath, localFonts, fileFormats, formatHint),\n      unicodeRange: unicodeRange,\n      fontStretch: fontStretch,\n      fontStyle: fontStyle,\n      fontVariant: fontVariant,\n      fontWeight: fontWeight,\n      fontDisplay: fontDisplay,\n      fontVariationSettings: fontVariationSettings,\n      fontFeatureSettings: fontFeatureSettings\n    }\n  }; // Removes undefined fields for cleaner css object.\n\n  return JSON.parse(JSON.stringify(fontFaceDeclaration));\n}\n\n/**\n * CSS to hide text to show a background image in a SEO-friendly way.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'backgroundImage': 'url(logo.png)',\n *   ...hideText(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   backgroundImage: url(logo.png);\n *   ${hideText()};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'backgroundImage': 'url(logo.png)',\n *   'textIndent': '101%',\n *   'overflow': 'hidden',\n *   'whiteSpace': 'nowrap',\n * }\n */\nfunction hideText() {\n  return {\n    textIndent: '101%',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap'\n  };\n}\n\n/**\n * CSS to hide content visually but remain accessible to screen readers.\n * from [HTML5 Boilerplate](https://github.com/h5bp/html5-boilerplate/blob/9a176f57af1cfe8ec70300da4621fb9b07e5fa31/src/css/main.css#L121)\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...hideVisually(),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${hideVisually()};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'border': '0',\n *   'clip': 'rect(0 0 0 0)',\n *   'height': '1px',\n *   'margin': '-1px',\n *   'overflow': 'hidden',\n *   'padding': '0',\n *   'position': 'absolute',\n *   'whiteSpace': 'nowrap',\n *   'width': '1px',\n * }\n */\nfunction hideVisually() {\n  return {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    whiteSpace: 'nowrap',\n    width: '1px'\n  };\n}\n\n/**\n * Generates a media query to target HiDPI devices.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *  [hiDPI(1.5)]: {\n *    width: 200px;\n *  }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${hiDPI(1.5)} {\n *     width: 200px;\n *   }\n * `\n *\n * // CSS as JS Output\n *\n * '@media only screen and (-webkit-min-device-pixel-ratio: 1.5),\n *  only screen and (min--moz-device-pixel-ratio: 1.5),\n *  only screen and (-o-min-device-pixel-ratio: 1.5/1),\n *  only screen and (min-resolution: 144dpi),\n *  only screen and (min-resolution: 1.5dppx)': {\n *   'width': '200px',\n * }\n */\nfunction hiDPI(ratio) {\n  if (ratio === void 0) {\n    ratio = 1.3;\n  }\n\n  return \"\\n    @media only screen and (-webkit-min-device-pixel-ratio: \" + ratio + \"),\\n    only screen and (min--moz-device-pixel-ratio: \" + ratio + \"),\\n    only screen and (-o-min-device-pixel-ratio: \" + ratio + \"/1),\\n    only screen and (min-resolution: \" + Math.round(ratio * 96) + \"dpi),\\n    only screen and (min-resolution: \" + ratio + \"dppx)\\n  \";\n}\n\nfunction constructGradientValue(literals) {\n  var template = '';\n\n  for (var _len = arguments.length, substitutions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    substitutions[_key - 1] = arguments[_key];\n  }\n\n  for (var i = 0; i < literals.length; i += 1) {\n    template += literals[i];\n\n    if (i === substitutions.length - 1 && substitutions[i]) {\n      var definedValues = substitutions.filter(function (substitute) {\n        return !!substitute;\n      }); // Adds leading coma if properties preceed color-stops\n\n      if (definedValues.length > 1) {\n        template = template.slice(0, -1);\n        template += \", \" + substitutions[i]; // No trailing space if color-stops is the only param provided\n      } else if (definedValues.length === 1) {\n        template += \"\" + substitutions[i];\n      }\n    } else if (substitutions[i]) {\n      template += substitutions[i] + \" \";\n    }\n  }\n\n  return template.trim();\n}\n\nvar _templateObject$1;\n\n/**\n * CSS for declaring a linear gradient, including a fallback background-color. The fallback is either the first color-stop or an explicitly passed fallback color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...linearGradient({\n        colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n        toDirection: 'to top right',\n        fallback: '#FFF',\n      })\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${linearGradient({\n        colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n        toDirection: 'to top right',\n        fallback: '#FFF',\n      })}\n *`\n *\n * // CSS as JS Output\n *\n * div: {\n *   'backgroundColor': '#FFF',\n *   'backgroundImage': 'linear-gradient(to top right, #00FFFF 0%, rgba(0, 0, 255, 0) 50%, #0000FF 95%)',\n * }\n */\nfunction linearGradient(_ref) {\n  var colorStops = _ref.colorStops,\n      fallback = _ref.fallback,\n      _ref$toDirection = _ref.toDirection,\n      toDirection = _ref$toDirection === void 0 ? '' : _ref$toDirection;\n\n  if (!colorStops || colorStops.length < 2) {\n    throw new PolishedError(56);\n  }\n\n  return {\n    backgroundColor: fallback || colorStops[0].replace(/,\\s+/g, ',').split(' ')[0].replace(/,(?=\\S)/g, ', '),\n    backgroundImage: constructGradientValue(_templateObject$1 || (_templateObject$1 = _taggedTemplateLiteralLoose([\"linear-gradient(\", \"\", \")\"])), toDirection, colorStops.join(', ').replace(/,(?=\\S)/g, ', '))\n  };\n}\n\n/**\n * CSS to normalize abnormalities across browsers (normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css)\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *    ...normalize(),\n * }\n *\n * // styled-components usage\n * const GlobalStyle = createGlobalStyle`${normalize()}`\n *\n * // CSS as JS Output\n *\n * html {\n *   lineHeight: 1.15,\n *   textSizeAdjust: 100%,\n * } ...\n */\nfunction normalize() {\n  var _ref;\n\n  return [(_ref = {\n    html: {\n      lineHeight: '1.15',\n      textSizeAdjust: '100%'\n    },\n    body: {\n      margin: '0'\n    },\n    main: {\n      display: 'block'\n    },\n    h1: {\n      fontSize: '2em',\n      margin: '0.67em 0'\n    },\n    hr: {\n      boxSizing: 'content-box',\n      height: '0',\n      overflow: 'visible'\n    },\n    pre: {\n      fontFamily: 'monospace, monospace',\n      fontSize: '1em'\n    },\n    a: {\n      backgroundColor: 'transparent'\n    },\n    'abbr[title]': {\n      borderBottom: 'none',\n      textDecoration: 'underline'\n    }\n  }, _ref[\"b,\\n    strong\"] = {\n    fontWeight: 'bolder'\n  }, _ref[\"code,\\n    kbd,\\n    samp\"] = {\n    fontFamily: 'monospace, monospace',\n    fontSize: '1em'\n  }, _ref.small = {\n    fontSize: '80%'\n  }, _ref[\"sub,\\n    sup\"] = {\n    fontSize: '75%',\n    lineHeight: '0',\n    position: 'relative',\n    verticalAlign: 'baseline'\n  }, _ref.sub = {\n    bottom: '-0.25em'\n  }, _ref.sup = {\n    top: '-0.5em'\n  }, _ref.img = {\n    borderStyle: 'none'\n  }, _ref[\"button,\\n    input,\\n    optgroup,\\n    select,\\n    textarea\"] = {\n    fontFamily: 'inherit',\n    fontSize: '100%',\n    lineHeight: '1.15',\n    margin: '0'\n  }, _ref[\"button,\\n    input\"] = {\n    overflow: 'visible'\n  }, _ref[\"button,\\n    select\"] = {\n    textTransform: 'none'\n  }, _ref[\"button,\\n    html [type=\\\"button\\\"],\\n    [type=\\\"reset\\\"],\\n    [type=\\\"submit\\\"]\"] = {\n    WebkitAppearance: 'button'\n  }, _ref[\"button::-moz-focus-inner,\\n    [type=\\\"button\\\"]::-moz-focus-inner,\\n    [type=\\\"reset\\\"]::-moz-focus-inner,\\n    [type=\\\"submit\\\"]::-moz-focus-inner\"] = {\n    borderStyle: 'none',\n    padding: '0'\n  }, _ref[\"button:-moz-focusring,\\n    [type=\\\"button\\\"]:-moz-focusring,\\n    [type=\\\"reset\\\"]:-moz-focusring,\\n    [type=\\\"submit\\\"]:-moz-focusring\"] = {\n    outline: '1px dotted ButtonText'\n  }, _ref.fieldset = {\n    padding: '0.35em 0.625em 0.75em'\n  }, _ref.legend = {\n    boxSizing: 'border-box',\n    color: 'inherit',\n    display: 'table',\n    maxWidth: '100%',\n    padding: '0',\n    whiteSpace: 'normal'\n  }, _ref.progress = {\n    verticalAlign: 'baseline'\n  }, _ref.textarea = {\n    overflow: 'auto'\n  }, _ref[\"[type=\\\"checkbox\\\"],\\n    [type=\\\"radio\\\"]\"] = {\n    boxSizing: 'border-box',\n    padding: '0'\n  }, _ref[\"[type=\\\"number\\\"]::-webkit-inner-spin-button,\\n    [type=\\\"number\\\"]::-webkit-outer-spin-button\"] = {\n    height: 'auto'\n  }, _ref['[type=\"search\"]'] = {\n    WebkitAppearance: 'textfield',\n    outlineOffset: '-2px'\n  }, _ref['[type=\"search\"]::-webkit-search-decoration'] = {\n    WebkitAppearance: 'none'\n  }, _ref['::-webkit-file-upload-button'] = {\n    WebkitAppearance: 'button',\n    font: 'inherit'\n  }, _ref.details = {\n    display: 'block'\n  }, _ref.summary = {\n    display: 'list-item'\n  }, _ref.template = {\n    display: 'none'\n  }, _ref['[hidden]'] = {\n    display: 'none'\n  }, _ref), {\n    'abbr[title]': {\n      textDecoration: 'underline dotted'\n    }\n  }];\n}\n\nvar _templateObject;\n\n/**\n * CSS for declaring a radial gradient, including a fallback background-color. The fallback is either the first color-stop or an explicitly passed fallback color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...radialGradient({\n *     colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n *     extent: 'farthest-corner at 45px 45px',\n *     position: 'center',\n *     shape: 'ellipse',\n *   })\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${radialGradient({\n *     colorStops: ['#00FFFF 0%', 'rgba(0, 0, 255, 0) 50%', '#0000FF 95%'],\n *     extent: 'farthest-corner at 45px 45px',\n *     position: 'center',\n *     shape: 'ellipse',\n *   })}\n *`\n *\n * // CSS as JS Output\n *\n * div: {\n *   'backgroundColor': '#00FFFF',\n *   'backgroundImage': 'radial-gradient(center ellipse farthest-corner at 45px 45px, #00FFFF 0%, rgba(0, 0, 255, 0) 50%, #0000FF 95%)',\n * }\n */\nfunction radialGradient(_ref) {\n  var colorStops = _ref.colorStops,\n      _ref$extent = _ref.extent,\n      extent = _ref$extent === void 0 ? '' : _ref$extent,\n      fallback = _ref.fallback,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? '' : _ref$position,\n      _ref$shape = _ref.shape,\n      shape = _ref$shape === void 0 ? '' : _ref$shape;\n\n  if (!colorStops || colorStops.length < 2) {\n    throw new PolishedError(57);\n  }\n\n  return {\n    backgroundColor: fallback || colorStops[0].split(' ')[0],\n    backgroundImage: constructGradientValue(_templateObject || (_templateObject = _taggedTemplateLiteralLoose([\"radial-gradient(\", \"\", \"\", \"\", \")\"])), position, shape, extent, colorStops.join(', '))\n  };\n}\n\n/**\n * A helper to generate a retina background image and non-retina\n * background image. The retina background image will output to a HiDPI media query. The mixin uses\n * a _2x.png filename suffix by default.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *  ...retinaImage('my-img')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${retinaImage('my-img')}\n * `\n *\n * // CSS as JS Output\n * div {\n *   backgroundImage: 'url(my-img.png)',\n *   '@media only screen and (-webkit-min-device-pixel-ratio: 1.3),\n *    only screen and (min--moz-device-pixel-ratio: 1.3),\n *    only screen and (-o-min-device-pixel-ratio: 1.3/1),\n *    only screen and (min-resolution: 144dpi),\n *    only screen and (min-resolution: 1.5dppx)': {\n *     backgroundImage: 'url(my-img_2x.png)',\n *   }\n * }\n */\nfunction retinaImage(filename, backgroundSize, extension, retinaFilename, retinaSuffix) {\n  var _ref;\n\n  if (extension === void 0) {\n    extension = 'png';\n  }\n\n  if (retinaSuffix === void 0) {\n    retinaSuffix = '_2x';\n  }\n\n  if (!filename) {\n    throw new PolishedError(58);\n  } // Replace the dot at the beginning of the passed extension if one exists\n\n\n  var ext = extension.replace(/^\\./, '');\n  var rFilename = retinaFilename ? retinaFilename + \".\" + ext : \"\" + filename + retinaSuffix + \".\" + ext;\n  return _ref = {\n    backgroundImage: \"url(\" + filename + \".\" + ext + \")\"\n  }, _ref[hiDPI()] = _extends({\n    backgroundImage: \"url(\" + rFilename + \")\"\n  }, backgroundSize ? {\n    backgroundSize: backgroundSize\n  } : {}), _ref;\n}\n\n/* eslint-disable key-spacing */\nvar functionsMap = {\n  easeInBack: 'cubic-bezier(0.600, -0.280, 0.735, 0.045)',\n  easeInCirc: 'cubic-bezier(0.600,  0.040, 0.980, 0.335)',\n  easeInCubic: 'cubic-bezier(0.550,  0.055, 0.675, 0.190)',\n  easeInExpo: 'cubic-bezier(0.950,  0.050, 0.795, 0.035)',\n  easeInQuad: 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n  easeInQuart: 'cubic-bezier(0.895,  0.030, 0.685, 0.220)',\n  easeInQuint: 'cubic-bezier(0.755,  0.050, 0.855, 0.060)',\n  easeInSine: 'cubic-bezier(0.470,  0.000, 0.745, 0.715)',\n  easeOutBack: 'cubic-bezier(0.175,  0.885, 0.320, 1.275)',\n  easeOutCubic: 'cubic-bezier(0.215,  0.610, 0.355, 1.000)',\n  easeOutCirc: 'cubic-bezier(0.075,  0.820, 0.165, 1.000)',\n  easeOutExpo: 'cubic-bezier(0.190,  1.000, 0.220, 1.000)',\n  easeOutQuad: 'cubic-bezier(0.250,  0.460, 0.450, 0.940)',\n  easeOutQuart: 'cubic-bezier(0.165,  0.840, 0.440, 1.000)',\n  easeOutQuint: 'cubic-bezier(0.230,  1.000, 0.320, 1.000)',\n  easeOutSine: 'cubic-bezier(0.390,  0.575, 0.565, 1.000)',\n  easeInOutBack: 'cubic-bezier(0.680, -0.550, 0.265, 1.550)',\n  easeInOutCirc: 'cubic-bezier(0.785,  0.135, 0.150, 0.860)',\n  easeInOutCubic: 'cubic-bezier(0.645,  0.045, 0.355, 1.000)',\n  easeInOutExpo: 'cubic-bezier(1.000,  0.000, 0.000, 1.000)',\n  easeInOutQuad: 'cubic-bezier(0.455,  0.030, 0.515, 0.955)',\n  easeInOutQuart: 'cubic-bezier(0.770,  0.000, 0.175, 1.000)',\n  easeInOutQuint: 'cubic-bezier(0.860,  0.000, 0.070, 1.000)',\n  easeInOutSine: 'cubic-bezier(0.445,  0.050, 0.550, 0.950)'\n};\n/* eslint-enable key-spacing */\n\nfunction getTimingFunction(functionName) {\n  return functionsMap[functionName];\n}\n/**\n * String to represent common easing functions as demonstrated here: (github.com/jaukia/easie).\n *\n * @deprecated - This will be deprecated in v5 in favor of `easeIn`, `easeOut`, `easeInOut`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   'transitionTimingFunction': timingFunctions('easeInQuad')\n * }\n *\n * // styled-components usage\n *  const div = styled.div`\n *   transitionTimingFunction: ${timingFunctions('easeInQuad')};\n * `\n *\n * // CSS as JS Output\n *\n * 'div': {\n *   'transitionTimingFunction': 'cubic-bezier(0.550,  0.085, 0.680, 0.530)',\n * }\n */\n\n\nfunction timingFunctions(timingFunction) {\n  return getTimingFunction(timingFunction);\n}\n\nvar getBorderWidth = function getBorderWidth(pointingDirection, height, width) {\n  var fullWidth = \"\" + width[0] + (width[1] || '');\n  var halfWidth = \"\" + width[0] / 2 + (width[1] || '');\n  var fullHeight = \"\" + height[0] + (height[1] || '');\n  var halfHeight = \"\" + height[0] / 2 + (height[1] || '');\n\n  switch (pointingDirection) {\n    case 'top':\n      return \"0 \" + halfWidth + \" \" + fullHeight + \" \" + halfWidth;\n\n    case 'topLeft':\n      return fullWidth + \" \" + fullHeight + \" 0 0\";\n\n    case 'left':\n      return halfHeight + \" \" + fullWidth + \" \" + halfHeight + \" 0\";\n\n    case 'bottomLeft':\n      return fullWidth + \" 0 0 \" + fullHeight;\n\n    case 'bottom':\n      return fullHeight + \" \" + halfWidth + \" 0 \" + halfWidth;\n\n    case 'bottomRight':\n      return \"0 0 \" + fullWidth + \" \" + fullHeight;\n\n    case 'right':\n      return halfHeight + \" 0 \" + halfHeight + \" \" + fullWidth;\n\n    case 'topRight':\n    default:\n      return \"0 \" + fullWidth + \" \" + fullHeight + \" 0\";\n  }\n};\n\nvar getBorderColor = function getBorderColor(pointingDirection, foregroundColor) {\n  switch (pointingDirection) {\n    case 'top':\n    case 'bottomRight':\n      return {\n        borderBottomColor: foregroundColor\n      };\n\n    case 'right':\n    case 'bottomLeft':\n      return {\n        borderLeftColor: foregroundColor\n      };\n\n    case 'bottom':\n    case 'topLeft':\n      return {\n        borderTopColor: foregroundColor\n      };\n\n    case 'left':\n    case 'topRight':\n      return {\n        borderRightColor: foregroundColor\n      };\n\n    default:\n      throw new PolishedError(59);\n  }\n};\n/**\n * CSS to represent triangle with any pointing direction with an optional background color.\n *\n * @example\n * // Styles as object usage\n *\n * const styles = {\n *   ...triangle({ pointingDirection: 'right', width: '100px', height: '100px', foregroundColor: 'red' })\n * }\n *\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${triangle({ pointingDirection: 'right', width: '100px', height: '100px', foregroundColor: 'red' })}\n *\n *\n * // CSS as JS Output\n *\n * div: {\n *  'borderColor': 'transparent transparent transparent red',\n *  'borderStyle': 'solid',\n *  'borderWidth': '50px 0 50px 100px',\n *  'height': '0',\n *  'width': '0',\n * }\n */\n\n\nfunction triangle(_ref) {\n  var pointingDirection = _ref.pointingDirection,\n      height = _ref.height,\n      width = _ref.width,\n      foregroundColor = _ref.foregroundColor,\n      _ref$backgroundColor = _ref.backgroundColor,\n      backgroundColor = _ref$backgroundColor === void 0 ? 'transparent' : _ref$backgroundColor;\n  var widthAndUnit = getValueAndUnit(width);\n  var heightAndUnit = getValueAndUnit(height);\n\n  if (isNaN(heightAndUnit[0]) || isNaN(widthAndUnit[0])) {\n    throw new PolishedError(60);\n  }\n\n  return _extends({\n    width: '0',\n    height: '0',\n    borderColor: backgroundColor\n  }, getBorderColor(pointingDirection, foregroundColor), {\n    borderStyle: 'solid',\n    borderWidth: getBorderWidth(pointingDirection, heightAndUnit, widthAndUnit)\n  });\n}\n\n/**\n * Provides an easy way to change the `wordWrap` property.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...wordWrap('break-word')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${wordWrap('break-word')}\n * `\n *\n * // CSS as JS Output\n *\n * const styles = {\n *   overflowWrap: 'break-word',\n *   wordWrap: 'break-word',\n *   wordBreak: 'break-all',\n * }\n */\nfunction wordWrap(wrap) {\n  if (wrap === void 0) {\n    wrap = 'break-word';\n  }\n\n  var wordBreak = wrap === 'break-word' ? 'break-all' : wrap;\n  return {\n    overflowWrap: wrap,\n    wordWrap: wrap,\n    wordBreak: wordBreak\n  };\n}\n\nfunction colorToInt(color) {\n  return Math.round(color * 255);\n}\n\nfunction convertToInt(red, green, blue) {\n  return colorToInt(red) + \",\" + colorToInt(green) + \",\" + colorToInt(blue);\n}\n\nfunction hslToRgb(hue, saturation, lightness, convert) {\n  if (convert === void 0) {\n    convert = convertToInt;\n  }\n\n  if (saturation === 0) {\n    // achromatic\n    return convert(lightness, lightness, lightness);\n  } // formulae from https://en.wikipedia.org/wiki/HSL_and_HSV\n\n\n  var huePrime = (hue % 360 + 360) % 360 / 60;\n  var chroma = (1 - Math.abs(2 * lightness - 1)) * saturation;\n  var secondComponent = chroma * (1 - Math.abs(huePrime % 2 - 1));\n  var red = 0;\n  var green = 0;\n  var blue = 0;\n\n  if (huePrime >= 0 && huePrime < 1) {\n    red = chroma;\n    green = secondComponent;\n  } else if (huePrime >= 1 && huePrime < 2) {\n    red = secondComponent;\n    green = chroma;\n  } else if (huePrime >= 2 && huePrime < 3) {\n    green = chroma;\n    blue = secondComponent;\n  } else if (huePrime >= 3 && huePrime < 4) {\n    green = secondComponent;\n    blue = chroma;\n  } else if (huePrime >= 4 && huePrime < 5) {\n    red = secondComponent;\n    blue = chroma;\n  } else if (huePrime >= 5 && huePrime < 6) {\n    red = chroma;\n    blue = secondComponent;\n  }\n\n  var lightnessModification = lightness - chroma / 2;\n  var finalRed = red + lightnessModification;\n  var finalGreen = green + lightnessModification;\n  var finalBlue = blue + lightnessModification;\n  return convert(finalRed, finalGreen, finalBlue);\n}\n\nvar namedColorMap = {\n  aliceblue: 'f0f8ff',\n  antiquewhite: 'faebd7',\n  aqua: '00ffff',\n  aquamarine: '7fffd4',\n  azure: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '000',\n  blanchedalmond: 'ffebcd',\n  blue: '0000ff',\n  blueviolet: '8a2be2',\n  brown: 'a52a2a',\n  burlywood: 'deb887',\n  cadetblue: '5f9ea0',\n  chartreuse: '7fff00',\n  chocolate: 'd2691e',\n  coral: 'ff7f50',\n  cornflowerblue: '6495ed',\n  cornsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: '00ffff',\n  darkblue: '00008b',\n  darkcyan: '008b8b',\n  darkgoldenrod: 'b8860b',\n  darkgray: 'a9a9a9',\n  darkgreen: '006400',\n  darkgrey: 'a9a9a9',\n  darkkhaki: 'bdb76b',\n  darkmagenta: '8b008b',\n  darkolivegreen: '556b2f',\n  darkorange: 'ff8c00',\n  darkorchid: '9932cc',\n  darkred: '8b0000',\n  darksalmon: 'e9967a',\n  darkseagreen: '8fbc8f',\n  darkslateblue: '483d8b',\n  darkslategray: '2f4f4f',\n  darkslategrey: '2f4f4f',\n  darkturquoise: '00ced1',\n  darkviolet: '9400d3',\n  deeppink: 'ff1493',\n  deepskyblue: '00bfff',\n  dimgray: '696969',\n  dimgrey: '696969',\n  dodgerblue: '1e90ff',\n  firebrick: 'b22222',\n  floralwhite: 'fffaf0',\n  forestgreen: '228b22',\n  fuchsia: 'ff00ff',\n  gainsboro: 'dcdcdc',\n  ghostwhite: 'f8f8ff',\n  gold: 'ffd700',\n  goldenrod: 'daa520',\n  gray: '808080',\n  green: '008000',\n  greenyellow: 'adff2f',\n  grey: '808080',\n  honeydew: 'f0fff0',\n  hotpink: 'ff69b4',\n  indianred: 'cd5c5c',\n  indigo: '4b0082',\n  ivory: 'fffff0',\n  khaki: 'f0e68c',\n  lavender: 'e6e6fa',\n  lavenderblush: 'fff0f5',\n  lawngreen: '7cfc00',\n  lemonchiffon: 'fffacd',\n  lightblue: 'add8e6',\n  lightcoral: 'f08080',\n  lightcyan: 'e0ffff',\n  lightgoldenrodyellow: 'fafad2',\n  lightgray: 'd3d3d3',\n  lightgreen: '90ee90',\n  lightgrey: 'd3d3d3',\n  lightpink: 'ffb6c1',\n  lightsalmon: 'ffa07a',\n  lightseagreen: '20b2aa',\n  lightskyblue: '87cefa',\n  lightslategray: '789',\n  lightslategrey: '789',\n  lightsteelblue: 'b0c4de',\n  lightyellow: 'ffffe0',\n  lime: '0f0',\n  limegreen: '32cd32',\n  linen: 'faf0e6',\n  magenta: 'f0f',\n  maroon: '800000',\n  mediumaquamarine: '66cdaa',\n  mediumblue: '0000cd',\n  mediumorchid: 'ba55d3',\n  mediumpurple: '9370db',\n  mediumseagreen: '3cb371',\n  mediumslateblue: '7b68ee',\n  mediumspringgreen: '00fa9a',\n  mediumturquoise: '48d1cc',\n  mediumvioletred: 'c71585',\n  midnightblue: '191970',\n  mintcream: 'f5fffa',\n  mistyrose: 'ffe4e1',\n  moccasin: 'ffe4b5',\n  navajowhite: 'ffdead',\n  navy: '000080',\n  oldlace: 'fdf5e6',\n  olive: '808000',\n  olivedrab: '6b8e23',\n  orange: 'ffa500',\n  orangered: 'ff4500',\n  orchid: 'da70d6',\n  palegoldenrod: 'eee8aa',\n  palegreen: '98fb98',\n  paleturquoise: 'afeeee',\n  palevioletred: 'db7093',\n  papayawhip: 'ffefd5',\n  peachpuff: 'ffdab9',\n  peru: 'cd853f',\n  pink: 'ffc0cb',\n  plum: 'dda0dd',\n  powderblue: 'b0e0e6',\n  purple: '800080',\n  rebeccapurple: '639',\n  red: 'f00',\n  rosybrown: 'bc8f8f',\n  royalblue: '4169e1',\n  saddlebrown: '8b4513',\n  salmon: 'fa8072',\n  sandybrown: 'f4a460',\n  seagreen: '2e8b57',\n  seashell: 'fff5ee',\n  sienna: 'a0522d',\n  silver: 'c0c0c0',\n  skyblue: '87ceeb',\n  slateblue: '6a5acd',\n  slategray: '708090',\n  slategrey: '708090',\n  snow: 'fffafa',\n  springgreen: '00ff7f',\n  steelblue: '4682b4',\n  tan: 'd2b48c',\n  teal: '008080',\n  thistle: 'd8bfd8',\n  tomato: 'ff6347',\n  turquoise: '40e0d0',\n  violet: 'ee82ee',\n  wheat: 'f5deb3',\n  white: 'fff',\n  whitesmoke: 'f5f5f5',\n  yellow: 'ff0',\n  yellowgreen: '9acd32'\n};\n/**\n * Checks if a string is a CSS named color and returns its equivalent hex value, otherwise returns the original color.\n * @private\n */\n\nfunction nameToHex(color) {\n  if (typeof color !== 'string') return color;\n  var normalizedColorName = color.toLowerCase();\n  return namedColorMap[normalizedColorName] ? \"#\" + namedColorMap[normalizedColorName] : color;\n}\n\nvar hexRegex = /^#[a-fA-F0-9]{6}$/;\nvar hexRgbaRegex = /^#[a-fA-F0-9]{8}$/;\nvar reducedHexRegex = /^#[a-fA-F0-9]{3}$/;\nvar reducedRgbaHexRegex = /^#[a-fA-F0-9]{4}$/;\nvar rgbRegex = /^rgb\\(\\s*(\\d{1,3})\\s*(?:,)?\\s*(\\d{1,3})\\s*(?:,)?\\s*(\\d{1,3})\\s*\\)$/i;\nvar rgbaRegex = /^rgb(?:a)?\\(\\s*(\\d{1,3})\\s*(?:,)?\\s*(\\d{1,3})\\s*(?:,)?\\s*(\\d{1,3})\\s*(?:,|\\/)\\s*([-+]?\\d*[.]?\\d+[%]?)\\s*\\)$/i;\nvar hslRegex = /^hsl\\(\\s*(\\d{0,3}[.]?[0-9]+(?:deg)?)\\s*(?:,)?\\s*(\\d{1,3}[.]?[0-9]?)%\\s*(?:,)?\\s*(\\d{1,3}[.]?[0-9]?)%\\s*\\)$/i;\nvar hslaRegex = /^hsl(?:a)?\\(\\s*(\\d{0,3}[.]?[0-9]+(?:deg)?)\\s*(?:,)?\\s*(\\d{1,3}[.]?[0-9]?)%\\s*(?:,)?\\s*(\\d{1,3}[.]?[0-9]?)%\\s*(?:,|\\/)\\s*([-+]?\\d*[.]?\\d+[%]?)\\s*\\)$/i;\n/**\n * Returns an RgbColor or RgbaColor object. This utility function is only useful\n * if want to extract a color component. With the color util `toColorString` you\n * can convert a RgbColor or RgbaColor object back to a string.\n *\n * @example\n * // Assigns `{ red: 255, green: 0, blue: 0 }` to color1\n * const color1 = parseToRgb('rgb(255, 0, 0)');\n * // Assigns `{ red: 92, green: 102, blue: 112, alpha: 0.75 }` to color2\n * const color2 = parseToRgb('hsla(210, 10%, 40%, 0.75)');\n */\n\nfunction parseToRgb(color) {\n  if (typeof color !== 'string') {\n    throw new PolishedError(3);\n  }\n\n  var normalizedColor = nameToHex(color);\n\n  if (normalizedColor.match(hexRegex)) {\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[2], 16),\n      green: parseInt(\"\" + normalizedColor[3] + normalizedColor[4], 16),\n      blue: parseInt(\"\" + normalizedColor[5] + normalizedColor[6], 16)\n    };\n  }\n\n  if (normalizedColor.match(hexRgbaRegex)) {\n    var alpha = parseFloat((parseInt(\"\" + normalizedColor[7] + normalizedColor[8], 16) / 255).toFixed(2));\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[2], 16),\n      green: parseInt(\"\" + normalizedColor[3] + normalizedColor[4], 16),\n      blue: parseInt(\"\" + normalizedColor[5] + normalizedColor[6], 16),\n      alpha: alpha\n    };\n  }\n\n  if (normalizedColor.match(reducedHexRegex)) {\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[1], 16),\n      green: parseInt(\"\" + normalizedColor[2] + normalizedColor[2], 16),\n      blue: parseInt(\"\" + normalizedColor[3] + normalizedColor[3], 16)\n    };\n  }\n\n  if (normalizedColor.match(reducedRgbaHexRegex)) {\n    var _alpha = parseFloat((parseInt(\"\" + normalizedColor[4] + normalizedColor[4], 16) / 255).toFixed(2));\n\n    return {\n      red: parseInt(\"\" + normalizedColor[1] + normalizedColor[1], 16),\n      green: parseInt(\"\" + normalizedColor[2] + normalizedColor[2], 16),\n      blue: parseInt(\"\" + normalizedColor[3] + normalizedColor[3], 16),\n      alpha: _alpha\n    };\n  }\n\n  var rgbMatched = rgbRegex.exec(normalizedColor);\n\n  if (rgbMatched) {\n    return {\n      red: parseInt(\"\" + rgbMatched[1], 10),\n      green: parseInt(\"\" + rgbMatched[2], 10),\n      blue: parseInt(\"\" + rgbMatched[3], 10)\n    };\n  }\n\n  var rgbaMatched = rgbaRegex.exec(normalizedColor.substring(0, 50));\n\n  if (rgbaMatched) {\n    return {\n      red: parseInt(\"\" + rgbaMatched[1], 10),\n      green: parseInt(\"\" + rgbaMatched[2], 10),\n      blue: parseInt(\"\" + rgbaMatched[3], 10),\n      alpha: parseFloat(\"\" + rgbaMatched[4]) > 1 ? parseFloat(\"\" + rgbaMatched[4]) / 100 : parseFloat(\"\" + rgbaMatched[4])\n    };\n  }\n\n  var hslMatched = hslRegex.exec(normalizedColor);\n\n  if (hslMatched) {\n    var hue = parseInt(\"\" + hslMatched[1], 10);\n    var saturation = parseInt(\"\" + hslMatched[2], 10) / 100;\n    var lightness = parseInt(\"\" + hslMatched[3], 10) / 100;\n    var rgbColorString = \"rgb(\" + hslToRgb(hue, saturation, lightness) + \")\";\n    var hslRgbMatched = rgbRegex.exec(rgbColorString);\n\n    if (!hslRgbMatched) {\n      throw new PolishedError(4, normalizedColor, rgbColorString);\n    }\n\n    return {\n      red: parseInt(\"\" + hslRgbMatched[1], 10),\n      green: parseInt(\"\" + hslRgbMatched[2], 10),\n      blue: parseInt(\"\" + hslRgbMatched[3], 10)\n    };\n  }\n\n  var hslaMatched = hslaRegex.exec(normalizedColor.substring(0, 50));\n\n  if (hslaMatched) {\n    var _hue = parseInt(\"\" + hslaMatched[1], 10);\n\n    var _saturation = parseInt(\"\" + hslaMatched[2], 10) / 100;\n\n    var _lightness = parseInt(\"\" + hslaMatched[3], 10) / 100;\n\n    var _rgbColorString = \"rgb(\" + hslToRgb(_hue, _saturation, _lightness) + \")\";\n\n    var _hslRgbMatched = rgbRegex.exec(_rgbColorString);\n\n    if (!_hslRgbMatched) {\n      throw new PolishedError(4, normalizedColor, _rgbColorString);\n    }\n\n    return {\n      red: parseInt(\"\" + _hslRgbMatched[1], 10),\n      green: parseInt(\"\" + _hslRgbMatched[2], 10),\n      blue: parseInt(\"\" + _hslRgbMatched[3], 10),\n      alpha: parseFloat(\"\" + hslaMatched[4]) > 1 ? parseFloat(\"\" + hslaMatched[4]) / 100 : parseFloat(\"\" + hslaMatched[4])\n    };\n  }\n\n  throw new PolishedError(5);\n}\n\nfunction rgbToHsl(color) {\n  // make sure rgb are contained in a set of [0, 255]\n  var red = color.red / 255;\n  var green = color.green / 255;\n  var blue = color.blue / 255;\n  var max = Math.max(red, green, blue);\n  var min = Math.min(red, green, blue);\n  var lightness = (max + min) / 2;\n\n  if (max === min) {\n    // achromatic\n    if (color.alpha !== undefined) {\n      return {\n        hue: 0,\n        saturation: 0,\n        lightness: lightness,\n        alpha: color.alpha\n      };\n    } else {\n      return {\n        hue: 0,\n        saturation: 0,\n        lightness: lightness\n      };\n    }\n  }\n\n  var hue;\n  var delta = max - min;\n  var saturation = lightness > 0.5 ? delta / (2 - max - min) : delta / (max + min);\n\n  switch (max) {\n    case red:\n      hue = (green - blue) / delta + (green < blue ? 6 : 0);\n      break;\n\n    case green:\n      hue = (blue - red) / delta + 2;\n      break;\n\n    default:\n      // blue case\n      hue = (red - green) / delta + 4;\n      break;\n  }\n\n  hue *= 60;\n\n  if (color.alpha !== undefined) {\n    return {\n      hue: hue,\n      saturation: saturation,\n      lightness: lightness,\n      alpha: color.alpha\n    };\n  }\n\n  return {\n    hue: hue,\n    saturation: saturation,\n    lightness: lightness\n  };\n}\n\n/**\n * Returns an HslColor or HslaColor object. This utility function is only useful\n * if want to extract a color component. With the color util `toColorString` you\n * can convert a HslColor or HslaColor object back to a string.\n *\n * @example\n * // Assigns `{ hue: 0, saturation: 1, lightness: 0.5 }` to color1\n * const color1 = parseToHsl('rgb(255, 0, 0)');\n * // Assigns `{ hue: 128, saturation: 1, lightness: 0.5, alpha: 0.75 }` to color2\n * const color2 = parseToHsl('hsla(128, 100%, 50%, 0.75)');\n */\nfunction parseToHsl(color) {\n  // Note: At a later stage we can optimize this function as right now a hsl\n  // color would be parsed converted to rgb values and converted back to hsl.\n  return rgbToHsl(parseToRgb(color));\n}\n\n/**\n * Reduces hex values if possible e.g. #ff8866 to #f86\n * @private\n */\nvar reduceHexValue = function reduceHexValue(value) {\n  if (value.length === 7 && value[1] === value[2] && value[3] === value[4] && value[5] === value[6]) {\n    return \"#\" + value[1] + value[3] + value[5];\n  }\n\n  return value;\n};\n\nvar reduceHexValue$1 = reduceHexValue;\n\nfunction numberToHex(value) {\n  var hex = value.toString(16);\n  return hex.length === 1 ? \"0\" + hex : hex;\n}\n\nfunction colorToHex(color) {\n  return numberToHex(Math.round(color * 255));\n}\n\nfunction convertToHex(red, green, blue) {\n  return reduceHexValue$1(\"#\" + colorToHex(red) + colorToHex(green) + colorToHex(blue));\n}\n\nfunction hslToHex(hue, saturation, lightness) {\n  return hslToRgb(hue, saturation, lightness, convertToHex);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hsl(359, 0.75, 0.4),\n *   background: hsl({ hue: 360, saturation: 0.75, lightness: 0.4 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hsl(359, 0.75, 0.4)};\n *   background: ${hsl({ hue: 360, saturation: 0.75, lightness: 0.4 })};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#b3191c\";\n *   background: \"#b3191c\";\n * }\n */\nfunction hsl(value, saturation, lightness) {\n  if (typeof value === 'number' && typeof saturation === 'number' && typeof lightness === 'number') {\n    return hslToHex(value, saturation, lightness);\n  } else if (typeof value === 'object' && saturation === undefined && lightness === undefined) {\n    return hslToHex(value.hue, value.saturation, value.lightness);\n  }\n\n  throw new PolishedError(1);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hsla(359, 0.75, 0.4, 0.7),\n *   background: hsla({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0,7 }),\n *   background: hsla(359, 0.75, 0.4, 1),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hsla(359, 0.75, 0.4, 0.7)};\n *   background: ${hsla({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0,7 })};\n *   background: ${hsla(359, 0.75, 0.4, 1)};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(179,25,28,0.7)\";\n *   background: \"rgba(179,25,28,0.7)\";\n *   background: \"#b3191c\";\n * }\n */\nfunction hsla(value, saturation, lightness, alpha) {\n  if (typeof value === 'number' && typeof saturation === 'number' && typeof lightness === 'number' && typeof alpha === 'number') {\n    return alpha >= 1 ? hslToHex(value, saturation, lightness) : \"rgba(\" + hslToRgb(value, saturation, lightness) + \",\" + alpha + \")\";\n  } else if (typeof value === 'object' && saturation === undefined && lightness === undefined && alpha === undefined) {\n    return value.alpha >= 1 ? hslToHex(value.hue, value.saturation, value.lightness) : \"rgba(\" + hslToRgb(value.hue, value.saturation, value.lightness) + \",\" + value.alpha + \")\";\n  }\n\n  throw new PolishedError(2);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible hex notation.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgb(255, 205, 100),\n *   background: rgb({ red: 255, green: 205, blue: 100 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgb(255, 205, 100)};\n *   background: ${rgb({ red: 255, green: 205, blue: 100 })};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#ffcd64\";\n *   background: \"#ffcd64\";\n * }\n */\nfunction rgb(value, green, blue) {\n  if (typeof value === 'number' && typeof green === 'number' && typeof blue === 'number') {\n    return reduceHexValue$1(\"#\" + numberToHex(value) + numberToHex(green) + numberToHex(blue));\n  } else if (typeof value === 'object' && green === undefined && blue === undefined) {\n    return reduceHexValue$1(\"#\" + numberToHex(value.red) + numberToHex(value.green) + numberToHex(value.blue));\n  }\n\n  throw new PolishedError(6);\n}\n\n/**\n * Returns a string value for the color. The returned result is the smallest possible rgba or hex notation.\n *\n * Can also be used to fade a color by passing a hex value or named CSS color along with an alpha value.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgba(255, 205, 100, 0.7),\n *   background: rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 }),\n *   background: rgba(255, 205, 100, 1),\n *   background: rgba('#ffffff', 0.4),\n *   background: rgba('black', 0.7),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgba(255, 205, 100, 0.7)};\n *   background: ${rgba({ red: 255, green: 205, blue: 100, alpha: 0.7 })};\n *   background: ${rgba(255, 205, 100, 1)};\n *   background: ${rgba('#ffffff', 0.4)};\n *   background: ${rgba('black', 0.7)};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(255,205,100,0.7)\";\n *   background: \"rgba(255,205,100,0.7)\";\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,255,255,0.4)\";\n *   background: \"rgba(0,0,0,0.7)\";\n * }\n */\nfunction rgba(firstValue, secondValue, thirdValue, fourthValue) {\n  if (typeof firstValue === 'string' && typeof secondValue === 'number') {\n    var rgbValue = parseToRgb(firstValue);\n    return \"rgba(\" + rgbValue.red + \",\" + rgbValue.green + \",\" + rgbValue.blue + \",\" + secondValue + \")\";\n  } else if (typeof firstValue === 'number' && typeof secondValue === 'number' && typeof thirdValue === 'number' && typeof fourthValue === 'number') {\n    return fourthValue >= 1 ? rgb(firstValue, secondValue, thirdValue) : \"rgba(\" + firstValue + \",\" + secondValue + \",\" + thirdValue + \",\" + fourthValue + \")\";\n  } else if (typeof firstValue === 'object' && secondValue === undefined && thirdValue === undefined && fourthValue === undefined) {\n    return firstValue.alpha >= 1 ? rgb(firstValue.red, firstValue.green, firstValue.blue) : \"rgba(\" + firstValue.red + \",\" + firstValue.green + \",\" + firstValue.blue + \",\" + firstValue.alpha + \")\";\n  }\n\n  throw new PolishedError(7);\n}\n\nvar isRgb = function isRgb(color) {\n  return typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number' && (typeof color.alpha !== 'number' || typeof color.alpha === 'undefined');\n};\n\nvar isRgba = function isRgba(color) {\n  return typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number' && typeof color.alpha === 'number';\n};\n\nvar isHsl = function isHsl(color) {\n  return typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number' && (typeof color.alpha !== 'number' || typeof color.alpha === 'undefined');\n};\n\nvar isHsla = function isHsla(color) {\n  return typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number' && typeof color.alpha === 'number';\n};\n/**\n * Converts a RgbColor, RgbaColor, HslColor or HslaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `rgb`, `rgba`, `hsl` or `hsla`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: toColorString({ red: 255, green: 205, blue: 100 }),\n *   background: toColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 }),\n *   background: toColorString({ hue: 240, saturation: 1, lightness: 0.5 }),\n *   background: toColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${toColorString({ red: 255, green: 205, blue: 100 })};\n *   background: ${toColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 })};\n *   background: ${toColorString({ hue: 240, saturation: 1, lightness: 0.5 })};\n *   background: ${toColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,205,100,0.72)\";\n *   background: \"#00f\";\n *   background: \"rgba(179,25,25,0.72)\";\n * }\n */\n\n\nfunction toColorString(color) {\n  if (typeof color !== 'object') throw new PolishedError(8);\n  if (isRgba(color)) return rgba(color);\n  if (isRgb(color)) return rgb(color);\n  if (isHsla(color)) return hsla(color);\n  if (isHsl(color)) return hsl(color);\n  throw new PolishedError(8);\n}\n\n// Type definitions taken from https://github.com/gcanti/flow-static-land/blob/master/src/Fun.js\n// eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line no-unused-vars\n// eslint-disable-next-line no-redeclare\nfunction curried(f, length, acc) {\n  return function fn() {\n    // eslint-disable-next-line prefer-rest-params\n    var combined = acc.concat(Array.prototype.slice.call(arguments));\n    return combined.length >= length ? f.apply(this, combined) : curried(f, length, combined);\n  };\n} // eslint-disable-next-line no-redeclare\n\n\nfunction curry(f) {\n  // eslint-disable-line no-redeclare\n  return curried(f, f.length, []);\n}\n\n/**\n * Changes the hue of the color. Hue is a number between 0 to 360. The first\n * argument for adjustHue is the amount of degrees the color is rotated around\n * the color wheel, always producing a positive hue value.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: adjustHue(180, '#448'),\n *   background: adjustHue('180', 'rgba(101,100,205,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${adjustHue(180, '#448')};\n *   background: ${adjustHue('180', 'rgba(101,100,205,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#888844\";\n *   background: \"rgba(136,136,68,0.7)\";\n * }\n */\n\nfunction adjustHue(degree, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    hue: hslColor.hue + parseFloat(degree)\n  }));\n} // prettier-ignore\n\n\nvar curriedAdjustHue = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(adjustHue);\nvar curriedAdjustHue$1 = curriedAdjustHue;\n\n/**\n * Returns the complement of the provided color. This is identical to adjustHue(180, <color>).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: complement('#448'),\n *   background: complement('rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${complement('#448')};\n *   background: ${complement('rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#884\";\n *   background: \"rgba(153,153,153,0.7)\";\n * }\n */\n\nfunction complement(color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    hue: (hslColor.hue + 180) % 360\n  }));\n}\n\nfunction guard(lowerBoundary, upperBoundary, value) {\n  return Math.max(lowerBoundary, Math.min(upperBoundary, value));\n}\n\n/**\n * Returns a string value for the darkened color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: darken(0.2, '#FFCD64'),\n *   background: darken('0.2', 'rgba(255,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${darken(0.2, '#FFCD64')};\n *   background: ${darken('0.2', 'rgba(255,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#ffbd31\";\n *   background: \"rgba(255,189,49,0.7)\";\n * }\n */\n\nfunction darken(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    lightness: guard(0, 1, hslColor.lightness - parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedDarken = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(darken);\nvar curriedDarken$1 = curriedDarken;\n\n/**\n * Decreases the intensity of a color. Its range is between 0 to 1. The first\n * argument of the desaturate function is the amount by how much the color\n * intensity should be decreased.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: desaturate(0.2, '#CCCD64'),\n *   background: desaturate('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${desaturate(0.2, '#CCCD64')};\n *   background: ${desaturate('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#b8b979\";\n *   background: \"rgba(184,185,121,0.7)\";\n * }\n */\n\nfunction desaturate(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    saturation: guard(0, 1, hslColor.saturation - parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedDesaturate = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(desaturate);\nvar curriedDesaturate$1 = curriedDesaturate;\n\n/**\n * Returns a number (float) representing the luminance of a color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: getLuminance('#CCCD64') >= getLuminance('#0000ff') ? '#CCCD64' : '#0000ff',\n *   background: getLuminance('rgba(58, 133, 255, 1)') >= getLuminance('rgba(255, 57, 149, 1)') ?\n *                             'rgba(58, 133, 255, 1)' :\n *                             'rgba(255, 57, 149, 1)',\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${getLuminance('#CCCD64') >= getLuminance('#0000ff') ? '#CCCD64' : '#0000ff'};\n *   background: ${getLuminance('rgba(58, 133, 255, 1)') >= getLuminance('rgba(255, 57, 149, 1)') ?\n *                             'rgba(58, 133, 255, 1)' :\n *                             'rgba(255, 57, 149, 1)'};\n *\n * // CSS in JS Output\n *\n * div {\n *   background: \"#CCCD64\";\n *   background: \"rgba(58, 133, 255, 1)\";\n * }\n */\n\nfunction getLuminance(color) {\n  if (color === 'transparent') return 0;\n  var rgbColor = parseToRgb(color);\n\n  var _Object$keys$map = Object.keys(rgbColor).map(function (key) {\n    var channel = rgbColor[key] / 255;\n    return channel <= 0.03928 ? channel / 12.92 : Math.pow((channel + 0.055) / 1.055, 2.4);\n  }),\n      r = _Object$keys$map[0],\n      g = _Object$keys$map[1],\n      b = _Object$keys$map[2];\n\n  return parseFloat((0.2126 * r + 0.7152 * g + 0.0722 * b).toFixed(3));\n}\n\n/**\n * Returns the contrast ratio between two colors based on\n * [W3's recommended equation for calculating contrast](http://www.w3.org/TR/WCAG20/#contrast-ratiodef).\n *\n * @example\n * const contrastRatio = getContrast('#444', '#fff');\n */\n\nfunction getContrast(color1, color2) {\n  var luminance1 = getLuminance(color1);\n  var luminance2 = getLuminance(color2);\n  return parseFloat((luminance1 > luminance2 ? (luminance1 + 0.05) / (luminance2 + 0.05) : (luminance2 + 0.05) / (luminance1 + 0.05)).toFixed(2));\n}\n\n/**\n * Converts the color to a grayscale, by reducing its saturation to 0.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: grayscale('#CCCD64'),\n *   background: grayscale('rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${grayscale('#CCCD64')};\n *   background: ${grayscale('rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#999\";\n *   background: \"rgba(153,153,153,0.7)\";\n * }\n */\n\nfunction grayscale(color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    saturation: 0\n  }));\n}\n\n/**\n * Converts a HslColor or HslaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `hsl` or `hsla`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: hslToColorString({ hue: 240, saturation: 1, lightness: 0.5 }),\n *   background: hslToColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${hslToColorString({ hue: 240, saturation: 1, lightness: 0.5 })};\n *   background: ${hslToColorString({ hue: 360, saturation: 0.75, lightness: 0.4, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#00f\";\n *   background: \"rgba(179,25,25,0.72)\";\n * }\n */\nfunction hslToColorString(color) {\n  if (typeof color === 'object' && typeof color.hue === 'number' && typeof color.saturation === 'number' && typeof color.lightness === 'number') {\n    if (color.alpha && typeof color.alpha === 'number') {\n      return hsla({\n        hue: color.hue,\n        saturation: color.saturation,\n        lightness: color.lightness,\n        alpha: color.alpha\n      });\n    }\n\n    return hsl({\n      hue: color.hue,\n      saturation: color.saturation,\n      lightness: color.lightness\n    });\n  }\n\n  throw new PolishedError(45);\n}\n\n/**\n * Inverts the red, green and blue values of a color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: invert('#CCCD64'),\n *   background: invert('rgba(101,100,205,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${invert('#CCCD64')};\n *   background: ${invert('rgba(101,100,205,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#33329b\";\n *   background: \"rgba(154,155,50,0.7)\";\n * }\n */\n\nfunction invert(color) {\n  if (color === 'transparent') return color; // parse color string to rgb\n\n  var value = parseToRgb(color);\n  return toColorString(_extends({}, value, {\n    red: 255 - value.red,\n    green: 255 - value.green,\n    blue: 255 - value.blue\n  }));\n}\n\n/**\n * Returns a string value for the lightened color.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: lighten(0.2, '#CCCD64'),\n *   background: lighten('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${lighten(0.2, '#FFCD64')};\n *   background: ${lighten('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#e5e6b1\";\n *   background: \"rgba(229,230,177,0.7)\";\n * }\n */\n\nfunction lighten(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    lightness: guard(0, 1, hslColor.lightness + parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedLighten = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(lighten);\nvar curriedLighten$1 = curriedLighten;\n\n/**\n * Determines which contrast guidelines have been met for two colors.\n * Based on the [contrast calculations recommended by W3](https://www.w3.org/WAI/WCAG21/Understanding/contrast-enhanced.html).\n *\n * @example\n * const scores = meetsContrastGuidelines('#444', '#fff');\n */\nfunction meetsContrastGuidelines(color1, color2) {\n  var contrastRatio = getContrast(color1, color2);\n  return {\n    AA: contrastRatio >= 4.5,\n    AALarge: contrastRatio >= 3,\n    AAA: contrastRatio >= 7,\n    AAALarge: contrastRatio >= 4.5\n  };\n}\n\n/**\n * Mixes the two provided colors together by calculating the average of each of the RGB components weighted to the first color by the provided weight.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: mix(0.5, '#f00', '#00f')\n *   background: mix(0.25, '#f00', '#00f')\n *   background: mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${mix(0.5, '#f00', '#00f')};\n *   background: ${mix(0.25, '#f00', '#00f')};\n *   background: ${mix('0.5', 'rgba(255, 0, 0, 0.5)', '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#7f007f\";\n *   background: \"#3f00bf\";\n *   background: \"rgba(63, 0, 191, 0.75)\";\n * }\n */\n\nfunction mix(weight, color, otherColor) {\n  if (color === 'transparent') return otherColor;\n  if (otherColor === 'transparent') return color;\n  if (weight === 0) return otherColor;\n  var parsedColor1 = parseToRgb(color);\n\n  var color1 = _extends({}, parsedColor1, {\n    alpha: typeof parsedColor1.alpha === 'number' ? parsedColor1.alpha : 1\n  });\n\n  var parsedColor2 = parseToRgb(otherColor);\n\n  var color2 = _extends({}, parsedColor2, {\n    alpha: typeof parsedColor2.alpha === 'number' ? parsedColor2.alpha : 1\n  }); // The formula is copied from the original Sass implementation:\n  // http://sass-lang.com/documentation/Sass/Script/Functions.html#mix-instance_method\n\n\n  var alphaDelta = color1.alpha - color2.alpha;\n  var x = parseFloat(weight) * 2 - 1;\n  var y = x * alphaDelta === -1 ? x : x + alphaDelta;\n  var z = 1 + x * alphaDelta;\n  var weight1 = (y / z + 1) / 2.0;\n  var weight2 = 1 - weight1;\n  var mixedColor = {\n    red: Math.floor(color1.red * weight1 + color2.red * weight2),\n    green: Math.floor(color1.green * weight1 + color2.green * weight2),\n    blue: Math.floor(color1.blue * weight1 + color2.blue * weight2),\n    alpha: color1.alpha * parseFloat(weight) + color2.alpha * (1 - parseFloat(weight))\n  };\n  return rgba(mixedColor);\n} // prettier-ignore\n\n\nvar curriedMix = /*#__PURE__*/curry\n/* ::<number | string, string, string, string> */\n(mix);\nvar mix$1 = curriedMix;\n\n/**\n * Increases the opacity of a color. Its range for the amount is between 0 to 1.\n *\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: opacify(0.1, 'rgba(255, 255, 255, 0.9)');\n *   background: opacify(0.2, 'hsla(0, 0%, 100%, 0.5)'),\n *   background: opacify('0.5', 'rgba(255, 0, 0, 0.2)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${opacify(0.1, 'rgba(255, 255, 255, 0.9)')};\n *   background: ${opacify(0.2, 'hsla(0, 0%, 100%, 0.5)')},\n *   background: ${opacify('0.5', 'rgba(255, 0, 0, 0.2)')},\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#fff\";\n *   background: \"rgba(255,255,255,0.7)\";\n *   background: \"rgba(255,0,0,0.7)\";\n * }\n */\n\nfunction opacify(amount, color) {\n  if (color === 'transparent') return color;\n  var parsedColor = parseToRgb(color);\n  var alpha = typeof parsedColor.alpha === 'number' ? parsedColor.alpha : 1;\n\n  var colorWithAlpha = _extends({}, parsedColor, {\n    alpha: guard(0, 1, (alpha * 100 + parseFloat(amount) * 100) / 100)\n  });\n\n  return rgba(colorWithAlpha);\n} // prettier-ignore\n\n\nvar curriedOpacify = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(opacify);\nvar curriedOpacify$1 = curriedOpacify;\n\nvar defaultReturnIfLightColor = '#000';\nvar defaultReturnIfDarkColor = '#fff';\n/**\n * Returns black or white (or optional passed colors) for best\n * contrast depending on the luminosity of the given color.\n * When passing custom return colors, strict mode ensures that the\n * return color always meets or exceeds WCAG level AA or greater. If this test\n * fails, the default return color (black or white) is returned in place of the\n * custom return color. You can optionally turn off strict mode.\n *\n * Follows [W3C specs for readability](https://www.w3.org/TR/WCAG20-TECHS/G18.html).\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   color: readableColor('#000'),\n *   color: readableColor('black', '#001', '#ff8'),\n *   color: readableColor('white', '#001', '#ff8'),\n *   color: readableColor('red', '#333', '#ddd', true)\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   color: ${readableColor('#000')};\n *   color: ${readableColor('black', '#001', '#ff8')};\n *   color: ${readableColor('white', '#001', '#ff8')};\n *   color: ${readableColor('red', '#333', '#ddd', true)};\n * `\n *\n * // CSS in JS Output\n * element {\n *   color: \"#fff\";\n *   color: \"#ff8\";\n *   color: \"#001\";\n *   color: \"#000\";\n * }\n */\n\nfunction readableColor(color, returnIfLightColor, returnIfDarkColor, strict) {\n  if (returnIfLightColor === void 0) {\n    returnIfLightColor = defaultReturnIfLightColor;\n  }\n\n  if (returnIfDarkColor === void 0) {\n    returnIfDarkColor = defaultReturnIfDarkColor;\n  }\n\n  if (strict === void 0) {\n    strict = true;\n  }\n\n  var isColorLight = getLuminance(color) > 0.179;\n  var preferredReturnColor = isColorLight ? returnIfLightColor : returnIfDarkColor;\n\n  if (!strict || getContrast(color, preferredReturnColor) >= 4.5) {\n    return preferredReturnColor;\n  }\n\n  return isColorLight ? defaultReturnIfLightColor : defaultReturnIfDarkColor;\n}\n\n/**\n * Converts a RgbColor or RgbaColor object to a color string.\n * This util is useful in case you only know on runtime which color object is\n * used. Otherwise we recommend to rely on `rgb` or `rgba`.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: rgbToColorString({ red: 255, green: 205, blue: 100 }),\n *   background: rgbToColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 }),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${rgbToColorString({ red: 255, green: 205, blue: 100 })};\n *   background: ${rgbToColorString({ red: 255, green: 205, blue: 100, alpha: 0.72 })};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#ffcd64\";\n *   background: \"rgba(255,205,100,0.72)\";\n * }\n */\nfunction rgbToColorString(color) {\n  if (typeof color === 'object' && typeof color.red === 'number' && typeof color.green === 'number' && typeof color.blue === 'number') {\n    if (typeof color.alpha === 'number') {\n      return rgba({\n        red: color.red,\n        green: color.green,\n        blue: color.blue,\n        alpha: color.alpha\n      });\n    }\n\n    return rgb({\n      red: color.red,\n      green: color.green,\n      blue: color.blue\n    });\n  }\n\n  throw new PolishedError(46);\n}\n\n/**\n * Increases the intensity of a color. Its range is between 0 to 1. The first\n * argument of the saturate function is the amount by how much the color\n * intensity should be increased.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: saturate(0.2, '#CCCD64'),\n *   background: saturate('0.2', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${saturate(0.2, '#FFCD64')};\n *   background: ${saturate('0.2', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#e0e250\";\n *   background: \"rgba(224,226,80,0.7)\";\n * }\n */\n\nfunction saturate(amount, color) {\n  if (color === 'transparent') return color;\n  var hslColor = parseToHsl(color);\n  return toColorString(_extends({}, hslColor, {\n    saturation: guard(0, 1, hslColor.saturation + parseFloat(amount))\n  }));\n} // prettier-ignore\n\n\nvar curriedSaturate = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(saturate);\nvar curriedSaturate$1 = curriedSaturate;\n\n/**\n * Sets the hue of a color to the provided value. The hue range can be\n * from 0 and 359.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setHue(42, '#CCCD64'),\n *   background: setHue('244', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setHue(42, '#CCCD64')};\n *   background: ${setHue('244', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#cdae64\";\n *   background: \"rgba(107,100,205,0.7)\";\n * }\n */\n\nfunction setHue(hue, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    hue: parseFloat(hue)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetHue = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setHue);\nvar curriedSetHue$1 = curriedSetHue;\n\n/**\n * Sets the lightness of a color to the provided value. The lightness range can be\n * from 0 and 1.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setLightness(0.2, '#CCCD64'),\n *   background: setLightness('0.75', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setLightness(0.2, '#CCCD64')};\n *   background: ${setLightness('0.75', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#4d4d19\";\n *   background: \"rgba(223,224,159,0.7)\";\n * }\n */\n\nfunction setLightness(lightness, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    lightness: parseFloat(lightness)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetLightness = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setLightness);\nvar curriedSetLightness$1 = curriedSetLightness;\n\n/**\n * Sets the saturation of a color to the provided value. The saturation range can be\n * from 0 and 1.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: setSaturation(0.2, '#CCCD64'),\n *   background: setSaturation('0.75', 'rgba(204,205,100,0.7)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${setSaturation(0.2, '#CCCD64')};\n *   background: ${setSaturation('0.75', 'rgba(204,205,100,0.7)')};\n * `\n *\n * // CSS in JS Output\n * element {\n *   background: \"#adad84\";\n *   background: \"rgba(228,229,76,0.7)\";\n * }\n */\n\nfunction setSaturation(saturation, color) {\n  if (color === 'transparent') return color;\n  return toColorString(_extends({}, parseToHsl(color), {\n    saturation: parseFloat(saturation)\n  }));\n} // prettier-ignore\n\n\nvar curriedSetSaturation = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(setSaturation);\nvar curriedSetSaturation$1 = curriedSetSaturation;\n\n/**\n * Shades a color by mixing it with black. `shade` can produce\n * hue shifts, where as `darken` manipulates the luminance channel and therefore\n * doesn't produce hue shifts.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: shade(0.25, '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${shade(0.25, '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#00003f\";\n * }\n */\n\nfunction shade(percentage, color) {\n  if (color === 'transparent') return color;\n  return mix$1(parseFloat(percentage), 'rgb(0, 0, 0)', color);\n} // prettier-ignore\n\n\nvar curriedShade = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(shade);\nvar curriedShade$1 = curriedShade;\n\n/**\n * Tints a color by mixing it with white. `tint` can produce\n * hue shifts, where as `lighten` manipulates the luminance channel and therefore\n * doesn't produce hue shifts.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: tint(0.25, '#00f')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${tint(0.25, '#00f')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"#bfbfff\";\n * }\n */\n\nfunction tint(percentage, color) {\n  if (color === 'transparent') return color;\n  return mix$1(parseFloat(percentage), 'rgb(255, 255, 255)', color);\n} // prettier-ignore\n\n\nvar curriedTint = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(tint);\nvar curriedTint$1 = curriedTint;\n\n/**\n * Decreases the opacity of a color. Its range for the amount is between 0 to 1.\n *\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   background: transparentize(0.1, '#fff'),\n *   background: transparentize(0.2, 'hsl(0, 0%, 100%)'),\n *   background: transparentize('0.5', 'rgba(255, 0, 0, 0.8)'),\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   background: ${transparentize(0.1, '#fff')};\n *   background: ${transparentize(0.2, 'hsl(0, 0%, 100%)')};\n *   background: ${transparentize('0.5', 'rgba(255, 0, 0, 0.8)')};\n * `\n *\n * // CSS in JS Output\n *\n * element {\n *   background: \"rgba(255,255,255,0.9)\";\n *   background: \"rgba(255,255,255,0.8)\";\n *   background: \"rgba(255,0,0,0.3)\";\n * }\n */\n\nfunction transparentize(amount, color) {\n  if (color === 'transparent') return color;\n  var parsedColor = parseToRgb(color);\n  var alpha = typeof parsedColor.alpha === 'number' ? parsedColor.alpha : 1;\n\n  var colorWithAlpha = _extends({}, parsedColor, {\n    alpha: guard(0, 1, +(alpha * 100 - parseFloat(amount) * 100).toFixed(2) / 100)\n  });\n\n  return rgba(colorWithAlpha);\n} // prettier-ignore\n\n\nvar curriedTransparentize = /*#__PURE__*/curry\n/* ::<number | string, string, string> */\n(transparentize);\nvar curriedTransparentize$1 = curriedTransparentize;\n\n/**\n * Shorthand for easily setting the animation property. Allows either multiple arrays with animations\n * or a single animation spread over the arguments.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...animation(['rotate', '1s', 'ease-in-out'], ['colorchange', '2s'])\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${animation(['rotate', '1s', 'ease-in-out'], ['colorchange', '2s'])}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'animation': 'rotate 1s ease-in-out, colorchange 2s'\n * }\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...animation('rotate', '1s', 'ease-in-out')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${animation('rotate', '1s', 'ease-in-out')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'animation': 'rotate 1s ease-in-out'\n * }\n */\nfunction animation() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  // Allow single or multiple animations passed\n  var multiMode = Array.isArray(args[0]);\n\n  if (!multiMode && args.length > 8) {\n    throw new PolishedError(64);\n  }\n\n  var code = args.map(function (arg) {\n    if (multiMode && !Array.isArray(arg) || !multiMode && Array.isArray(arg)) {\n      throw new PolishedError(65);\n    }\n\n    if (Array.isArray(arg) && arg.length > 8) {\n      throw new PolishedError(66);\n    }\n\n    return Array.isArray(arg) ? arg.join(' ') : arg;\n  }).join(', ');\n  return {\n    animation: code\n  };\n}\n\n/**\n * Shorthand that accepts any number of backgroundImage values as parameters for creating a single background statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...backgroundImages('url(\"/image/background.jpg\")', 'linear-gradient(red, green)')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${backgroundImages('url(\"/image/background.jpg\")', 'linear-gradient(red, green)')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'backgroundImage': 'url(\"/image/background.jpg\"), linear-gradient(red, green)'\n * }\n */\nfunction backgroundImages() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  return {\n    backgroundImage: properties.join(', ')\n  };\n}\n\n/**\n * Shorthand that accepts any number of background values as parameters for creating a single background statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...backgrounds('url(\"/image/background.jpg\")', 'linear-gradient(red, green)', 'center no-repeat')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${backgrounds('url(\"/image/background.jpg\")', 'linear-gradient(red, green)', 'center no-repeat')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'background': 'url(\"/image/background.jpg\"), linear-gradient(red, green), center no-repeat'\n * }\n */\nfunction backgrounds() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  return {\n    background: properties.join(', ')\n  };\n}\n\nvar sideMap = ['top', 'right', 'bottom', 'left'];\n/**\n * Shorthand for the border property that splits out individual properties for use with tools like Fela and Styletron. A side keyword can optionally be passed to target only one side's border properties.\n *\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...border('1px', 'solid', 'red')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${border('1px', 'solid', 'red')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderColor': 'red',\n *   'borderStyle': 'solid',\n *   'borderWidth': `1px`,\n * }\n *\n * // Styles as object usage\n * const styles = {\n *   ...border('top', '1px', 'solid', 'red')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${border('top', '1px', 'solid', 'red')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopColor': 'red',\n *   'borderTopStyle': 'solid',\n *   'borderTopWidth': `1px`,\n * }\n */\n\nfunction border(sideKeyword) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  if (typeof sideKeyword === 'string' && sideMap.indexOf(sideKeyword) >= 0) {\n    var _ref;\n\n    return _ref = {}, _ref[\"border\" + capitalizeString(sideKeyword) + \"Width\"] = values[0], _ref[\"border\" + capitalizeString(sideKeyword) + \"Style\"] = values[1], _ref[\"border\" + capitalizeString(sideKeyword) + \"Color\"] = values[2], _ref;\n  } else {\n    values.unshift(sideKeyword);\n    return {\n      borderWidth: values[0],\n      borderStyle: values[1],\n      borderColor: values[2]\n    };\n  }\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderColor('red', 'green', 'blue', 'yellow')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderColor('red', 'green', 'blue', 'yellow')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopColor': 'red',\n *   'borderRightColor': 'green',\n *   'borderBottomColor': 'blue',\n *   'borderLeftColor': 'yellow'\n * }\n */\nfunction borderColor() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderColor'].concat(values));\n}\n\n/**\n * Shorthand that accepts a value for side and a value for radius and applies the radius value to both corners of the side.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderRadius('top', '5px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderRadius('top', '5px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopRightRadius': '5px',\n *   'borderTopLeftRadius': '5px',\n * }\n */\nfunction borderRadius(side, radius) {\n  var uppercaseSide = capitalizeString(side);\n\n  if (!radius && radius !== 0) {\n    throw new PolishedError(62);\n  }\n\n  if (uppercaseSide === 'Top' || uppercaseSide === 'Bottom') {\n    var _ref;\n\n    return _ref = {}, _ref[\"border\" + uppercaseSide + \"RightRadius\"] = radius, _ref[\"border\" + uppercaseSide + \"LeftRadius\"] = radius, _ref;\n  }\n\n  if (uppercaseSide === 'Left' || uppercaseSide === 'Right') {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[\"borderTop\" + uppercaseSide + \"Radius\"] = radius, _ref2[\"borderBottom\" + uppercaseSide + \"Radius\"] = radius, _ref2;\n  }\n\n  throw new PolishedError(63);\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderStyle('solid', 'dashed', 'dotted', 'double')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderStyle('solid', 'dashed', 'dotted', 'double')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopStyle': 'solid',\n *   'borderRightStyle': 'dashed',\n *   'borderBottomStyle': 'dotted',\n *   'borderLeftStyle': 'double'\n * }\n */\nfunction borderStyle() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderStyle'].concat(values));\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...borderWidth('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${borderWidth('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'borderTopWidth': '12px',\n *   'borderRightWidth': '24px',\n *   'borderBottomWidth': '36px',\n *   'borderLeftWidth': '48px'\n * }\n */\nfunction borderWidth() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['borderWidth'].concat(values));\n}\n\nfunction generateSelectors(template, state) {\n  var stateSuffix = state ? \":\" + state : '';\n  return template(stateSuffix);\n}\n/**\n * Function helper that adds an array of states to a template of selectors. Used in textInputs and buttons.\n * @private\n */\n\n\nfunction statefulSelectors(states, template, stateMap) {\n  if (!template) throw new PolishedError(67);\n  if (states.length === 0) return generateSelectors(template, null);\n  var selectors = [];\n\n  for (var i = 0; i < states.length; i += 1) {\n    if (stateMap && stateMap.indexOf(states[i]) < 0) {\n      throw new PolishedError(68);\n    }\n\n    selectors.push(generateSelectors(template, states[i]));\n  }\n\n  selectors = selectors.join(',');\n  return selectors;\n}\n\nvar stateMap$1 = [undefined, null, 'active', 'focus', 'hover'];\n\nfunction template$1(state) {\n  return \"button\" + state + \",\\n  input[type=\\\"button\\\"]\" + state + \",\\n  input[type=\\\"reset\\\"]\" + state + \",\\n  input[type=\\\"submit\\\"]\" + state;\n}\n/**\n * Populates selectors that target all buttons. You can pass optional states to append to the selectors.\n * @example\n * // Styles as object usage\n * const styles = {\n *   [buttons('active')]: {\n *     'border': 'none'\n *   }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   > ${buttons('active')} {\n *     border: none;\n *   }\n * `\n *\n * // CSS in JS Output\n *\n *  'button:active,\n *  'input[type=\"button\"]:active,\n *  'input[type=\\\"reset\\\"]:active,\n *  'input[type=\\\"submit\\\"]:active: {\n *   'border': 'none'\n * }\n */\n\n\nfunction buttons() {\n  for (var _len = arguments.length, states = new Array(_len), _key = 0; _key < _len; _key++) {\n    states[_key] = arguments[_key];\n  }\n\n  return statefulSelectors(states, template$1, stateMap$1);\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...margin('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${margin('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'marginTop': '12px',\n *   'marginRight': '24px',\n *   'marginBottom': '36px',\n *   'marginLeft': '48px'\n * }\n */\nfunction margin() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['margin'].concat(values));\n}\n\n/**\n * Shorthand that accepts up to four values, including null to skip a value, and maps them to their respective directions.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...padding('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${padding('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'paddingTop': '12px',\n *   'paddingRight': '24px',\n *   'paddingBottom': '36px',\n *   'paddingLeft': '48px'\n * }\n */\nfunction padding() {\n  for (var _len = arguments.length, values = new Array(_len), _key = 0; _key < _len; _key++) {\n    values[_key] = arguments[_key];\n  }\n\n  return directionalProperty.apply(void 0, ['padding'].concat(values));\n}\n\nvar positionMap = ['absolute', 'fixed', 'relative', 'static', 'sticky'];\n/**\n * Shorthand accepts up to five values, including null to skip a value, and maps them to their respective directions. The first value can optionally be a position keyword.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...position('12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${position('12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'top': '12px',\n *   'right': '24px',\n *   'bottom': '36px',\n *   'left': '48px'\n * }\n *\n * // Styles as object usage\n * const styles = {\n *   ...position('absolute', '12px', '24px', '36px', '48px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${position('absolute', '12px', '24px', '36px', '48px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'position': 'absolute',\n *   'top': '12px',\n *   'right': '24px',\n *   'bottom': '36px',\n *   'left': '48px'\n * }\n */\n\nfunction position(firstValue) {\n  for (var _len = arguments.length, values = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    values[_key - 1] = arguments[_key];\n  }\n\n  if (positionMap.indexOf(firstValue) >= 0 && firstValue) {\n    return _extends({}, directionalProperty.apply(void 0, [''].concat(values)), {\n      position: firstValue\n    });\n  } else {\n    return directionalProperty.apply(void 0, ['', firstValue].concat(values));\n  }\n}\n\n/**\n * Shorthand to set the height and width properties in a single statement.\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...size('300px', '250px')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${size('300px', '250px')}\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'height': '300px',\n *   'width': '250px',\n * }\n */\nfunction size(height, width) {\n  if (width === void 0) {\n    width = height;\n  }\n\n  return {\n    height: height,\n    width: width\n  };\n}\n\nvar stateMap = [undefined, null, 'active', 'focus', 'hover'];\n\nfunction template(state) {\n  return \"input[type=\\\"color\\\"]\" + state + \",\\n    input[type=\\\"date\\\"]\" + state + \",\\n    input[type=\\\"datetime\\\"]\" + state + \",\\n    input[type=\\\"datetime-local\\\"]\" + state + \",\\n    input[type=\\\"email\\\"]\" + state + \",\\n    input[type=\\\"month\\\"]\" + state + \",\\n    input[type=\\\"number\\\"]\" + state + \",\\n    input[type=\\\"password\\\"]\" + state + \",\\n    input[type=\\\"search\\\"]\" + state + \",\\n    input[type=\\\"tel\\\"]\" + state + \",\\n    input[type=\\\"text\\\"]\" + state + \",\\n    input[type=\\\"time\\\"]\" + state + \",\\n    input[type=\\\"url\\\"]\" + state + \",\\n    input[type=\\\"week\\\"]\" + state + \",\\n    input:not([type])\" + state + \",\\n    textarea\" + state;\n}\n/**\n * Populates selectors that target all text inputs. You can pass optional states to append to the selectors.\n * @example\n * // Styles as object usage\n * const styles = {\n *   [textInputs('active')]: {\n *     'border': 'none'\n *   }\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   > ${textInputs('active')} {\n *     border: none;\n *   }\n * `\n *\n * // CSS in JS Output\n *\n *  'input[type=\"color\"]:active,\n *  input[type=\"date\"]:active,\n *  input[type=\"datetime\"]:active,\n *  input[type=\"datetime-local\"]:active,\n *  input[type=\"email\"]:active,\n *  input[type=\"month\"]:active,\n *  input[type=\"number\"]:active,\n *  input[type=\"password\"]:active,\n *  input[type=\"search\"]:active,\n *  input[type=\"tel\"]:active,\n *  input[type=\"text\"]:active,\n *  input[type=\"time\"]:active,\n *  input[type=\"url\"]:active,\n *  input[type=\"week\"]:active,\n *  input:not([type]):active,\n *  textarea:active': {\n *   'border': 'none'\n * }\n */\n\n\nfunction textInputs() {\n  for (var _len = arguments.length, states = new Array(_len), _key = 0; _key < _len; _key++) {\n    states[_key] = arguments[_key];\n  }\n\n  return statefulSelectors(states, template, stateMap);\n}\n\n/**\n * Accepts any number of transition values as parameters for creating a single transition statement. You may also pass an array of properties as the first parameter that you would like to apply the same transition values to (second parameter).\n * @example\n * // Styles as object usage\n * const styles = {\n *   ...transitions('opacity 1.0s ease-in 0s', 'width 2.0s ease-in 2s'),\n *   ...transitions(['color', 'background-color'], '2.0s ease-in 2s')\n * }\n *\n * // styled-components usage\n * const div = styled.div`\n *   ${transitions('opacity 1.0s ease-in 0s', 'width 2.0s ease-in 2s')};\n *   ${transitions(['color', 'background-color'], '2.0s ease-in 2s'),};\n * `\n *\n * // CSS as JS Output\n *\n * div {\n *   'transition': 'opacity 1.0s ease-in 0s, width 2.0s ease-in 2s'\n *   'transition': 'color 2.0s ease-in 2s, background-color 2.0s ease-in 2s',\n * }\n */\n\nfunction transitions() {\n  for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n    properties[_key] = arguments[_key];\n  }\n\n  if (Array.isArray(properties[0]) && properties.length === 2) {\n    var value = properties[1];\n\n    if (typeof value !== 'string') {\n      throw new PolishedError(61);\n    }\n\n    var transitionsString = properties[0].map(function (property) {\n      return property + \" \" + value;\n    }).join(', ');\n    return {\n      transition: transitionsString\n    };\n  } else {\n    return {\n      transition: properties.join(', ')\n    };\n  }\n}\n\nexport { curriedAdjustHue$1 as adjustHue, animation, backgroundImages, backgrounds, between, border, borderColor, borderRadius, borderStyle, borderWidth, buttons, clearFix, complement, cover, cssVar, curriedDarken$1 as darken, curriedDesaturate$1 as desaturate, directionalProperty, easeIn, easeInOut, easeOut, ellipsis, em$1 as em, fluidRange, fontFace, getContrast, getLuminance, getValueAndUnit, grayscale, hiDPI, hideText, hideVisually, hsl, hslToColorString, hsla, important, invert, curriedLighten$1 as lighten, linearGradient, margin, math, meetsContrastGuidelines, mix$1 as mix, modularScale, normalize, curriedOpacify$1 as opacify, padding, parseToHsl, parseToRgb, position, radialGradient, readableColor, rem$1 as rem, remToPx, retinaImage, rgb, rgbToColorString, rgba, curriedSaturate$1 as saturate, curriedSetHue$1 as setHue, curriedSetLightness$1 as setLightness, curriedSetSaturation$1 as setSaturation, curriedShade$1 as shade, size, stripUnit, textInputs, timingFunctions, curriedTint$1 as tint, toColorString, transitions, curriedTransparentize$1 as transparentize, triangle, wordWrap };\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = Object.freeze({\n    Linear: Object.freeze({\n        None: function (amount) {\n            return amount;\n        },\n        In: function (amount) {\n            return this.None(amount);\n        },\n        Out: function (amount) {\n            return this.None(amount);\n        },\n        InOut: function (amount) {\n            return this.None(amount);\n        },\n    }),\n    Quadratic: Object.freeze({\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    }),\n    Cubic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    }),\n    Quartic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    }),\n    Quintic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    }),\n    Sinusoidal: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sin(((1.0 - amount) * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.sin(Math.PI * (0.5 - amount)));\n        },\n    }),\n    Exponential: Object.freeze({\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    }),\n    Circular: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    }),\n    Elastic: Object.freeze({\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    }),\n    Back: Object.freeze({\n        In: function (amount) {\n            var s = 1.70158;\n            return amount === 1 ? 1 : amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return amount === 0 ? 0 : --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    }),\n    Bounce: Object.freeze({\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    }),\n    generatePow: function (power) {\n        if (power === void 0) { power = 4; }\n        power = power < Number.EPSILON ? Number.EPSILON : power;\n        power = power > 10000 ? 10000 : power;\n        return {\n            In: function (amount) {\n                return Math.pow(amount, power);\n            },\n            Out: function (amount) {\n                return 1 - Math.pow((1 - amount), power);\n            },\n            InOut: function (amount) {\n                if (amount < 0.5) {\n                    return Math.pow((amount * 2), power) / 2;\n                }\n                return (1 - Math.pow((2 - amount * 2), power)) / 2 + 0.5;\n            },\n        };\n    },\n});\n\nvar now = function () { return performance.now(); };\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._isDynamic = false;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        // eslint-disable-next-line\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._propertiesAreSetUp = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.to = function (target, duration) {\n        if (duration === void 0) { duration = 1000; }\n        if (this._isPlaying)\n            throw new Error('Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.');\n        this._valuesEnd = target;\n        this._propertiesAreSetUp = false;\n        this._duration = duration;\n        return this;\n    };\n    Tween.prototype.duration = function (duration) {\n        if (duration === void 0) { duration = 1000; }\n        this._duration = duration;\n        return this;\n    };\n    Tween.prototype.dynamic = function (dynamic) {\n        if (dynamic === void 0) { dynamic = false; }\n        this._isDynamic = dynamic;\n        return this;\n    };\n    Tween.prototype.start = function (time, overrideStartingValues) {\n        if (time === void 0) { time = now(); }\n        if (overrideStartingValues === void 0) { overrideStartingValues = false; }\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time;\n        this._startTime += this._delayTime;\n        if (!this._propertiesAreSetUp || overrideStartingValues) {\n            this._propertiesAreSetUp = true;\n            // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n            if (!this._isDynamic) {\n                var tmp = {};\n                for (var prop in this._valuesEnd)\n                    tmp[prop] = this._valuesEnd[prop];\n                this._valuesEnd = tmp;\n            }\n            this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat, overrideStartingValues);\n        }\n        return this;\n    };\n    Tween.prototype.startFromCurrentValues = function (time) {\n        return this.start(time, true);\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat, overrideStartingValues) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // Handle an array of relative values.\n                // Creates a local copy of the Array with the start value at the front\n                var temp = [startValue];\n                for (var i = 0, l = endValues.length; i < l; i += 1) {\n                    var value = this._handleRelativeValue(startValue, endValues[i]);\n                    if (isNaN(value)) {\n                        isInterpolationList = false;\n                        console.warn('Found invalid interpolation list. Skipping.');\n                        break;\n                    }\n                    temp.push(value);\n                }\n                if (isInterpolationList) {\n                    // if (_valuesStart[property] === undefined) { // handle end values only the first time. NOT NEEDED? setupProperties is now guarded by _propertiesAreSetUp.\n                    _valuesEnd[property] = temp;\n                    // }\n                }\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                var nestedObject = startValue;\n                for (var prop in nestedObject) {\n                    _valuesStart[property][prop] = nestedObject[prop];\n                }\n                // TODO? repeat nested values? And yoyo? And array values?\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {};\n                var endValues = _valuesEnd[property];\n                // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n                if (!this._isDynamic) {\n                    var tmp = {};\n                    for (var prop in endValues)\n                        tmp[prop] = endValues[prop];\n                    _valuesEnd[property] = endValues = tmp;\n                }\n                this._setupProperties(nestedObject, _valuesStart[property], endValues, _valuesStartRepeat[property], overrideStartingValues);\n            }\n            else {\n                // Save the starting value, but only once unless override is requested.\n                if (typeof _valuesStart[property] === 'undefined' || overrideStartingValues) {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        if (group === void 0) { group = mainGroup; }\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        if (amount === void 0) { amount = 0; }\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        if (times === void 0) { times = 0; }\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        if (yoyo === void 0) { yoyo = false; }\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        if (easingFunction === void 0) { easingFunction = Easing.Linear.None; }\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        if (interpolationFunction === void 0) { interpolationFunction = Interpolation.Linear; }\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    // eslint-disable-next-line\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onEveryStart = function (callback) {\n        this._onEveryStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        if (time === void 0) { time = now(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var elapsed;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time, true);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        if (this._onEveryStartCallbackFired === false) {\n            if (this._onEveryStartCallback) {\n                this._onEveryStartCallback(this._object);\n            }\n            this._onEveryStartCallbackFired = true;\n        }\n        elapsed = (time - this._startTime) / this._duration;\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (elapsed === 1) {\n            if (this._repeat > 0) {\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                if (this._repeatDelayTime !== undefined) {\n                    this._startTime = time + this._repeatDelayTime;\n                }\n                else {\n                    this._startTime = time + this._delayTime;\n                }\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                this._onEveryStartCallbackFired = false;\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration, false);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        return parseFloat(end);\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '21.0.0';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, exports as default, getAll, nextId, now, remove, removeAll, update };\n","import { WebGLRenderer, Scene, PerspectiveCamera, Raycaster, SRGBColorSpace, TextureLoader, Vector2, Vector3, Box3, Color, Mesh, SphereGeometry, MeshBasicMaterial, BackSide, EventDispatcher, MOUSE, Quaternion, Spherical, Clock } from 'three';\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport { FlyControls } from 'three/examples/jsm/controls/FlyControls.js';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { parseToRgb, opacify } from 'polished';\nimport * as TWEEN from '@tweenjs/tween.js';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".scene-nav-info {\\n  bottom: 5px;\\n  width: 100%;\\n  text-align: center;\\n  color: slategrey;\\n  opacity: 0.7;\\n  font-size: 10px;\\n}\\n\\n.scene-tooltip {\\n  top: 0;\\n  color: lavender;\\n  font-size: 15px;\\n}\\n\\n.scene-nav-info, .scene-tooltip {\\n  position: absolute;\\n  font-family: sans-serif;\\n  pointer-events: none;\\n  user-select: none;\\n}\\n\\n.scene-container canvas:focus {\\n  outline: none;\\n}\";\nstyleInject(css_248z);\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  WebGLRenderer: WebGLRenderer,\n  Scene: Scene,\n  PerspectiveCamera: PerspectiveCamera,\n  Raycaster: Raycaster,\n  SRGBColorSpace: SRGBColorSpace,\n  TextureLoader: TextureLoader,\n  Vector2: Vector2,\n  Vector3: Vector3,\n  Box3: Box3,\n  Color: Color,\n  Mesh: Mesh,\n  SphereGeometry: SphereGeometry,\n  MeshBasicMaterial: MeshBasicMaterial,\n  BackSide: BackSide,\n  EventDispatcher: EventDispatcher,\n  MOUSE: MOUSE,\n  Quaternion: Quaternion,\n  Spherical: Spherical,\n  Clock: Clock\n};\nvar threeRenderObjects = Kapsule({\n  props: {\n    width: {\n      \"default\": window.innerWidth,\n      onChange: function onChange(width, state, prevWidth) {\n        isNaN(width) && (state.width = prevWidth);\n      }\n    },\n    height: {\n      \"default\": window.innerHeight,\n      onChange: function onChange(height, state, prevHeight) {\n        isNaN(height) && (state.height = prevHeight);\n      }\n    },\n    backgroundColor: {\n      \"default\": '#000011'\n    },\n    backgroundImageUrl: {},\n    onBackgroundImageLoaded: {},\n    showNavInfo: {\n      \"default\": true\n    },\n    skyRadius: {\n      \"default\": 50000\n    },\n    objects: {\n      \"default\": []\n    },\n    enablePointerInteraction: {\n      \"default\": true,\n      onChange: function onChange(_, state) {\n        // Reset hover state\n        state.hoverObj = null;\n        if (state.toolTipElem) state.toolTipElem.innerHTML = '';\n      },\n      triggerUpdate: false\n    },\n    lineHoverPrecision: {\n      \"default\": 1,\n      triggerUpdate: false\n    },\n    hoverOrderComparator: {\n      \"default\": function _default() {\n        return -1;\n      },\n      triggerUpdate: false\n    },\n    // keep existing order by default\n    hoverFilter: {\n      \"default\": function _default() {\n        return true;\n      },\n      triggerUpdate: false\n    },\n    // exclude objects from interaction\n    tooltipContent: {\n      triggerUpdate: false\n    },\n    hoverDuringDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    clickAfterDrag: {\n      \"default\": false,\n      triggerUpdate: false\n    },\n    onHover: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onClick: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onRightClick: {\n      triggerUpdate: false\n    }\n  },\n  methods: {\n    tick: function tick(state) {\n      if (state.initialised) {\n        state.controls.update && state.controls.update(state.clock.getDelta()); // timedelta is required for fly controls\n\n        state.postProcessingComposer ? state.postProcessingComposer.render() // if using postprocessing, switch the output to it\n        : state.renderer.render(state.scene, state.camera);\n        state.extraRenderers.forEach(function (r) {\n          return r.render(state.scene, state.camera);\n        });\n        if (state.enablePointerInteraction) {\n          // Update tooltip and trigger onHover events\n          var topObject = null;\n          if (state.hoverDuringDrag || !state.isPointerDragging) {\n            var intersects = this.intersectingObjects(state.pointerPos.x, state.pointerPos.y).filter(function (d) {\n              return state.hoverFilter(d.object);\n            }).sort(function (a, b) {\n              return state.hoverOrderComparator(a.object, b.object);\n            });\n            var topIntersect = intersects.length ? intersects[0] : null;\n            topObject = topIntersect ? topIntersect.object : null;\n            state.intersectionPoint = topIntersect ? topIntersect.point : null;\n          }\n          if (topObject !== state.hoverObj) {\n            state.onHover(topObject, state.hoverObj);\n            state.toolTipElem.innerHTML = topObject ? accessorFn(state.tooltipContent)(topObject) || '' : '';\n            state.hoverObj = topObject;\n          }\n        }\n        TWEEN.update(); // update camera animation tweens\n      }\n\n      return this;\n    },\n    getPointerPos: function getPointerPos(state) {\n      var _state$pointerPos = state.pointerPos,\n        x = _state$pointerPos.x,\n        y = _state$pointerPos.y;\n      return {\n        x: x,\n        y: y\n      };\n    },\n    cameraPosition: function cameraPosition(state, position, lookAt, transitionDuration) {\n      var camera = state.camera;\n\n      // Setter\n      if (position && state.initialised) {\n        var finalPos = position;\n        var finalLookAt = lookAt || {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n        if (!transitionDuration) {\n          // no animation\n          setCameraPos(finalPos);\n          setLookAt(finalLookAt);\n        } else {\n          var camPos = Object.assign({}, camera.position);\n          var camLookAt = getLookAt();\n          new TWEEN.Tween(camPos).to(finalPos, transitionDuration).easing(TWEEN.Easing.Quadratic.Out).onUpdate(setCameraPos).start();\n\n          // Face direction in 1/3rd of time\n          new TWEEN.Tween(camLookAt).to(finalLookAt, transitionDuration / 3).easing(TWEEN.Easing.Quadratic.Out).onUpdate(setLookAt).start();\n        }\n        return this;\n      }\n\n      // Getter\n      return Object.assign({}, camera.position, {\n        lookAt: getLookAt()\n      });\n\n      //\n\n      function setCameraPos(pos) {\n        var x = pos.x,\n          y = pos.y,\n          z = pos.z;\n        if (x !== undefined) camera.position.x = x;\n        if (y !== undefined) camera.position.y = y;\n        if (z !== undefined) camera.position.z = z;\n      }\n      function setLookAt(lookAt) {\n        var lookAtVect = new three.Vector3(lookAt.x, lookAt.y, lookAt.z);\n        if (state.controls.target) {\n          state.controls.target = lookAtVect;\n        } else {\n          // Fly controls doesn't have target attribute\n          camera.lookAt(lookAtVect); // note: lookAt may be overridden by other controls in some cases\n        }\n      }\n\n      function getLookAt() {\n        return Object.assign(new three.Vector3(0, 0, -1000).applyQuaternion(camera.quaternion).add(camera.position));\n      }\n    },\n    zoomToFit: function zoomToFit(state) {\n      var transitionDuration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var padding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      for (var _len = arguments.length, bboxArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        bboxArgs[_key - 3] = arguments[_key];\n      }\n      return this.fitToBbox(this.getBbox.apply(this, bboxArgs), transitionDuration, padding);\n    },\n    fitToBbox: function fitToBbox(state, bbox) {\n      var transitionDuration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var padding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;\n      // based on https://discourse.threejs.org/t/camera-zoom-to-fit-object/936/24\n      var camera = state.camera;\n      if (bbox) {\n        var center = new three.Vector3(0, 0, 0); // reset camera aim to center\n        var maxBoxSide = Math.max.apply(Math, _toConsumableArray(Object.entries(bbox).map(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n            coordType = _ref2[0],\n            coords = _ref2[1];\n          return Math.max.apply(Math, _toConsumableArray(coords.map(function (c) {\n            return Math.abs(center[coordType] - c);\n          })));\n        }))) * 2;\n\n        // find distance that fits whole bbox within padded fov\n        var paddedFov = (1 - padding * 2 / state.height) * camera.fov;\n        var fitHeightDistance = maxBoxSide / Math.atan(paddedFov * Math.PI / 180);\n        var fitWidthDistance = fitHeightDistance / camera.aspect;\n        var distance = Math.max(fitHeightDistance, fitWidthDistance);\n        if (distance > 0) {\n          var newCameraPosition = center.clone().sub(camera.position).normalize().multiplyScalar(-distance);\n          this.cameraPosition(newCameraPosition, center, transitionDuration);\n        }\n      }\n      return this;\n    },\n    getBbox: function getBbox(state) {\n      var objFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var box = new three.Box3(new three.Vector3(0, 0, 0), new three.Vector3(0, 0, 0));\n      var objs = state.objects.filter(objFilter);\n      if (!objs.length) return null;\n      objs.forEach(function (obj) {\n        return box.expandByObject(obj);\n      });\n\n      // extract global x,y,z min/max\n      return Object.assign.apply(Object, _toConsumableArray(['x', 'y', 'z'].map(function (c) {\n        return _defineProperty({}, c, [box.min[c], box.max[c]]);\n      })));\n    },\n    getScreenCoords: function getScreenCoords(state, x, y, z) {\n      var vec = new three.Vector3(x, y, z);\n      vec.project(this.camera()); // project to the camera plane\n      return {\n        // align relative pos to canvas dimensions\n        x: (vec.x + 1) * state.width / 2,\n        y: -(vec.y - 1) * state.height / 2\n      };\n    },\n    getSceneCoords: function getSceneCoords(state, screenX, screenY) {\n      var distance = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var relCoords = new three.Vector2(screenX / state.width * 2 - 1, -(screenY / state.height) * 2 + 1);\n      var raycaster = new three.Raycaster();\n      raycaster.setFromCamera(relCoords, state.camera);\n      return Object.assign({}, raycaster.ray.at(distance, new three.Vector3()));\n    },\n    intersectingObjects: function intersectingObjects(state, x, y) {\n      var relCoords = new three.Vector2(x / state.width * 2 - 1, -(y / state.height) * 2 + 1);\n      var raycaster = new three.Raycaster();\n      raycaster.params.Line.threshold = state.lineHoverPrecision; // set linePrecision\n      raycaster.setFromCamera(relCoords, state.camera);\n      return raycaster.intersectObjects(state.objects, true);\n    },\n    renderer: function renderer(state) {\n      return state.renderer;\n    },\n    scene: function scene(state) {\n      return state.scene;\n    },\n    camera: function camera(state) {\n      return state.camera;\n    },\n    postProcessingComposer: function postProcessingComposer(state) {\n      return state.postProcessingComposer;\n    },\n    controls: function controls(state) {\n      return state.controls;\n    },\n    tbControls: function tbControls(state) {\n      return state.controls;\n    } // to be deprecated\n  },\n\n  stateInit: function stateInit() {\n    return {\n      scene: new three.Scene(),\n      camera: new three.PerspectiveCamera(),\n      clock: new three.Clock()\n    };\n  },\n  init: function init(domNode, state) {\n    var _ref4 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref4$controlType = _ref4.controlType,\n      controlType = _ref4$controlType === void 0 ? 'trackball' : _ref4$controlType,\n      _ref4$rendererConfig = _ref4.rendererConfig,\n      rendererConfig = _ref4$rendererConfig === void 0 ? {} : _ref4$rendererConfig,\n      _ref4$extraRenderers = _ref4.extraRenderers,\n      extraRenderers = _ref4$extraRenderers === void 0 ? [] : _ref4$extraRenderers,\n      _ref4$waitForLoadComp = _ref4.waitForLoadComplete,\n      waitForLoadComplete = _ref4$waitForLoadComp === void 0 ? true : _ref4$waitForLoadComp;\n    // Wipe DOM\n    domNode.innerHTML = '';\n\n    // Add relative container\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.className = 'scene-container';\n    state.container.style.position = 'relative';\n\n    // Add nav info section\n    state.container.appendChild(state.navInfo = document.createElement('div'));\n    state.navInfo.className = 'scene-nav-info';\n    state.navInfo.textContent = {\n      orbit: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      trackball: 'Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan',\n      fly: 'WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw'\n    }[controlType] || '';\n    state.navInfo.style.display = state.showNavInfo ? null : 'none';\n\n    // Setup tooltip\n    state.toolTipElem = document.createElement('div');\n    state.toolTipElem.classList.add('scene-tooltip');\n    state.container.appendChild(state.toolTipElem);\n\n    // Capture pointer coords on move or touchstart\n    state.pointerPos = new three.Vector2();\n    state.pointerPos.x = -2; // Initialize off canvas\n    state.pointerPos.y = -2;\n    ['pointermove', 'pointerdown'].forEach(function (evType) {\n      return state.container.addEventListener(evType, function (ev) {\n        // track click state\n        evType === 'pointerdown' && (state.isPointerPressed = true);\n\n        // detect point drag\n        !state.isPointerDragging && ev.type === 'pointermove' && (ev.pressure > 0 || state.isPointerPressed) // ev.pressure always 0 on Safari, so we used the isPointerPressed tracker\n        && (ev.pointerType !== 'touch' || ev.movementX === undefined || [ev.movementX, ev.movementY].some(function (m) {\n          return Math.abs(m) > 1;\n        })) // relax drag trigger sensitivity on touch events\n        && (state.isPointerDragging = true);\n        if (state.enablePointerInteraction) {\n          // update the pointer pos\n          var offset = getOffset(state.container);\n          state.pointerPos.x = ev.pageX - offset.left;\n          state.pointerPos.y = ev.pageY - offset.top;\n\n          // Move tooltip\n          state.toolTipElem.style.top = \"\".concat(state.pointerPos.y, \"px\");\n          state.toolTipElem.style.left = \"\".concat(state.pointerPos.x, \"px\");\n          // adjust horizontal position to not exceed canvas boundaries\n          state.toolTipElem.style.transform = \"translate(-\".concat(state.pointerPos.x / state.width * 100, \"%, \").concat(\n          // flip to above if near bottom\n          state.height - state.pointerPos.y < 100 ? 'calc(-100% - 8px)' : '21px', \")\");\n        }\n        function getOffset(el) {\n          var rect = el.getBoundingClientRect(),\n            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\n            scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n          return {\n            top: rect.top + scrollTop,\n            left: rect.left + scrollLeft\n          };\n        }\n      }, {\n        passive: true\n      });\n    });\n\n    // Handle click events on objs\n    state.container.addEventListener('pointerup', function (ev) {\n      state.isPointerPressed = false;\n      if (state.isPointerDragging) {\n        state.isPointerDragging = false;\n        if (!state.clickAfterDrag) return; // don't trigger onClick after pointer drag (camera motion via controls)\n      }\n\n      requestAnimationFrame(function () {\n        // trigger click events asynchronously, to allow hoverObj to be set (on frame)\n        if (ev.button === 0) {\n          // left-click\n          state.onClick(state.hoverObj || null, ev, state.intersectionPoint); // trigger background clicks with null\n        }\n\n        if (ev.button === 2 && state.onRightClick) {\n          // right-click\n          state.onRightClick(state.hoverObj || null, ev, state.intersectionPoint);\n        }\n      });\n    }, {\n      passive: true,\n      capture: true\n    }); // use capture phase to prevent propagation blocking from controls (specifically for fly)\n\n    state.container.addEventListener('contextmenu', function (ev) {\n      if (state.onRightClick) ev.preventDefault(); // prevent default contextmenu behavior and allow pointerup to fire instead\n    });\n\n    // Setup renderer, camera and controls\n    state.renderer = new three.WebGLRenderer(Object.assign({\n      antialias: true,\n      alpha: true\n    }, rendererConfig));\n    state.renderer.setPixelRatio(Math.min(2, window.devicePixelRatio)); // clamp device pixel ratio\n    state.container.appendChild(state.renderer.domElement);\n\n    // Setup extra renderers\n    state.extraRenderers = extraRenderers;\n    state.extraRenderers.forEach(function (r) {\n      // overlay them on top of main renderer\n      r.domElement.style.position = 'absolute';\n      r.domElement.style.top = '0px';\n      r.domElement.style.pointerEvents = 'none';\n      state.container.appendChild(r.domElement);\n    });\n\n    // configure post-processing composer\n    state.postProcessingComposer = new EffectComposer(state.renderer);\n    state.postProcessingComposer.addPass(new RenderPass(state.scene, state.camera)); // render scene as first pass\n\n    // configure controls\n    state.controls = new {\n      trackball: TrackballControls,\n      orbit: OrbitControls,\n      fly: FlyControls\n    }[controlType](state.camera, state.renderer.domElement);\n    if (controlType === 'fly') {\n      state.controls.movementSpeed = 300;\n      state.controls.rollSpeed = Math.PI / 6;\n      state.controls.dragToLook = true;\n    }\n    if (controlType === 'trackball' || controlType === 'orbit') {\n      state.controls.minDistance = 0.1;\n      state.controls.maxDistance = state.skyRadius;\n      state.controls.addEventListener('start', function () {\n        state.controlsEngaged = true;\n      });\n      state.controls.addEventListener('change', function () {\n        if (state.controlsEngaged) {\n          state.controlsDragging = true;\n        }\n      });\n      state.controls.addEventListener('end', function () {\n        state.controlsEngaged = false;\n        state.controlsDragging = false;\n      });\n    }\n    [state.renderer, state.postProcessingComposer].concat(_toConsumableArray(state.extraRenderers)).forEach(function (r) {\n      return r.setSize(state.width, state.height);\n    });\n    state.camera.aspect = state.width / state.height;\n    state.camera.updateProjectionMatrix();\n    state.camera.position.z = 1000;\n\n    // add sky\n    state.scene.add(state.skysphere = new three.Mesh());\n    state.skysphere.visible = false;\n    state.loadComplete = state.scene.visible = !waitForLoadComplete;\n    window.scene = state.scene;\n  },\n  update: function update(state, changedProps) {\n    // resize canvas\n    if (state.width && state.height && (changedProps.hasOwnProperty('width') || changedProps.hasOwnProperty('height'))) {\n      state.container.style.width = \"\".concat(state.width, \"px\");\n      state.container.style.height = \"\".concat(state.height, \"px\");\n      [state.renderer, state.postProcessingComposer].concat(_toConsumableArray(state.extraRenderers)).forEach(function (r) {\n        return r.setSize(state.width, state.height);\n      });\n      state.camera.aspect = state.width / state.height;\n      state.camera.updateProjectionMatrix();\n    }\n    if (changedProps.hasOwnProperty('skyRadius') && state.skyRadius) {\n      state.controls.hasOwnProperty('maxDistance') && changedProps.skyRadius && (state.controls.maxDistance = Math.min(state.controls.maxDistance, state.skyRadius));\n      state.camera.far = state.skyRadius * 2.5;\n      state.camera.updateProjectionMatrix();\n      state.skysphere.geometry = new three.SphereGeometry(state.skyRadius);\n    }\n    if (changedProps.hasOwnProperty('backgroundColor')) {\n      var alpha = parseToRgb(state.backgroundColor).alpha;\n      if (alpha === undefined) alpha = 1;\n      state.renderer.setClearColor(new three.Color(opacify(1, state.backgroundColor)), alpha);\n    }\n    if (changedProps.hasOwnProperty('backgroundImageUrl')) {\n      if (!state.backgroundImageUrl) {\n        state.skysphere.visible = false;\n        state.skysphere.material.map = null;\n        !state.loadComplete && finishLoad();\n      } else {\n        new three.TextureLoader().load(state.backgroundImageUrl, function (texture) {\n          texture.colorSpace = three.SRGBColorSpace;\n          state.skysphere.material = new three.MeshBasicMaterial({\n            map: texture,\n            side: three.BackSide\n          });\n          state.skysphere.visible = true;\n\n          // triggered when background image finishes loading (asynchronously to allow 1 frame to load texture)\n          state.onBackgroundImageLoaded && setTimeout(state.onBackgroundImageLoaded);\n          !state.loadComplete && finishLoad();\n        });\n      }\n    }\n    changedProps.hasOwnProperty('showNavInfo') && (state.navInfo.style.display = state.showNavInfo ? null : 'none');\n    if (changedProps.hasOwnProperty('objects')) {\n      (changedProps.objects || []).forEach(function (obj) {\n        return state.scene.remove(obj);\n      }); // Clear the place\n      state.objects.forEach(function (obj) {\n        return state.scene.add(obj);\n      }); // Add to scene\n    }\n\n    //\n\n    function finishLoad() {\n      state.loadComplete = state.scene.visible = true;\n    }\n  }\n});\n\nexport { threeRenderObjects as default };\n","import { AmbientLight, DirectionalLight, Vector3 } from 'three';\nimport { DragControls } from 'three/examples/jsm/controls/DragControls.js';\nimport ThreeForceGraph from 'three-forcegraph';\nimport ThreeRenderObjects from 'three-render-objects';\nimport accessorFn from 'accessor-fn';\nimport Kapsule from 'kapsule';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".graph-info-msg {\\n  top: 50%;\\n  width: 100%;\\n  text-align: center;\\n  color: lavender;\\n  opacity: 0.7;\\n  font-size: 22px;\\n  position: absolute;\\n  font-family: Sans-serif;\\n}\\n\\n.scene-container .clickable {\\n  cursor: pointer;\\n}\\n\\n.scene-container .grabbable {\\n  cursor: move;\\n  cursor: grab;\\n  cursor: -moz-grab;\\n  cursor: -webkit-grab;\\n}\\n\\n.scene-container .grabbable:active {\\n  cursor: grabbing;\\n  cursor: -moz-grabbing;\\n  cursor: -webkit-grabbing;\\n}\";\nstyleInject(css_248z);\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction linkKapsule (kapsulePropName, kapsuleType) {\n  var dummyK = new kapsuleType(); // To extract defaults\n  dummyK._destructor && dummyK._destructor();\n  return {\n    linkProp: function linkProp(prop) {\n      // link property config\n      return {\n        \"default\": dummyK[prop](),\n        onChange: function onChange(v, state) {\n          state[kapsulePropName][prop](v);\n        },\n        triggerUpdate: false\n      };\n    },\n    linkMethod: function linkMethod(method) {\n      // link method pass-through\n      return function (state) {\n        var kapsuleInstance = state[kapsulePropName];\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        var returnVal = kapsuleInstance[method].apply(kapsuleInstance, args);\n        return returnVal === kapsuleInstance ? this // chain based on the parent object, not the inner kapsule\n        : returnVal;\n      };\n    }\n  };\n}\n\nvar three = window.THREE ? window.THREE // Prefer consumption from global THREE, if exists\n: {\n  AmbientLight: AmbientLight,\n  DirectionalLight: DirectionalLight,\n  Vector3: Vector3\n};\n\n//\n\nvar CAMERA_DISTANCE2NODES_FACTOR = 170;\n\n//\n\n// Expose config from forceGraph\nvar bindFG = linkKapsule('forceGraph', ThreeForceGraph);\nvar linkedFGProps = Object.assign.apply(Object, _toConsumableArray(['jsonUrl', 'graphData', 'numDimensions', 'dagMode', 'dagLevelDistance', 'dagNodeFilter', 'onDagError', 'nodeRelSize', 'nodeId', 'nodeVal', 'nodeResolution', 'nodeColor', 'nodeAutoColorBy', 'nodeOpacity', 'nodeVisibility', 'nodeThreeObject', 'nodeThreeObjectExtend', 'linkSource', 'linkTarget', 'linkVisibility', 'linkColor', 'linkAutoColorBy', 'linkOpacity', 'linkWidth', 'linkResolution', 'linkCurvature', 'linkCurveRotation', 'linkMaterial', 'linkThreeObject', 'linkThreeObjectExtend', 'linkPositionUpdate', 'linkDirectionalArrowLength', 'linkDirectionalArrowColor', 'linkDirectionalArrowRelPos', 'linkDirectionalArrowResolution', 'linkDirectionalParticles', 'linkDirectionalParticleSpeed', 'linkDirectionalParticleWidth', 'linkDirectionalParticleColor', 'linkDirectionalParticleResolution', 'forceEngine', 'd3AlphaDecay', 'd3VelocityDecay', 'd3AlphaMin', 'ngraphPhysics', 'warmupTicks', 'cooldownTicks', 'cooldownTime', 'onEngineTick', 'onEngineStop'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkProp(p));\n})));\nvar linkedFGMethods = Object.assign.apply(Object, _toConsumableArray(['refresh', 'getGraphBbox', 'd3Force', 'd3ReheatSimulation', 'emitParticle'].map(function (p) {\n  return _defineProperty({}, p, bindFG.linkMethod(p));\n})));\n\n// Expose config from renderObjs\nvar bindRenderObjs = linkKapsule('renderObjs', ThreeRenderObjects);\nvar linkedRenderObjsProps = Object.assign.apply(Object, _toConsumableArray(['width', 'height', 'backgroundColor', 'showNavInfo', 'enablePointerInteraction'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkProp(p));\n})));\nvar linkedRenderObjsMethods = Object.assign.apply(Object, _toConsumableArray(['cameraPosition', 'postProcessingComposer'].map(function (p) {\n  return _defineProperty({}, p, bindRenderObjs.linkMethod(p));\n})).concat([{\n  graph2ScreenCoords: bindRenderObjs.linkMethod('getScreenCoords'),\n  screen2GraphCoords: bindRenderObjs.linkMethod('getSceneCoords')\n}]));\n\n//\n\nvar _3dForceGraph = Kapsule({\n  props: _objectSpread2(_objectSpread2({\n    nodeLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkLabel: {\n      \"default\": 'name',\n      triggerUpdate: false\n    },\n    linkHoverPrecision: {\n      \"default\": 1,\n      onChange: function onChange(p, state) {\n        return state.renderObjs.lineHoverPrecision(p);\n      },\n      triggerUpdate: false\n    },\n    enableNavigationControls: {\n      \"default\": true,\n      onChange: function onChange(enable, state) {\n        var controls = state.renderObjs.controls();\n        if (controls) {\n          controls.enabled = enable;\n          // trigger mouseup on re-enable to prevent sticky controls\n          enable && controls.domElement && controls.domElement.dispatchEvent(new PointerEvent('pointerup'));\n        }\n      },\n      triggerUpdate: false\n    },\n    enableNodeDrag: {\n      \"default\": true,\n      triggerUpdate: false\n    },\n    onNodeDrag: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeDragEnd: {\n      \"default\": function _default() {},\n      triggerUpdate: false\n    },\n    onNodeClick: {\n      triggerUpdate: false\n    },\n    onNodeRightClick: {\n      triggerUpdate: false\n    },\n    onNodeHover: {\n      triggerUpdate: false\n    },\n    onLinkClick: {\n      triggerUpdate: false\n    },\n    onLinkRightClick: {\n      triggerUpdate: false\n    },\n    onLinkHover: {\n      triggerUpdate: false\n    },\n    onBackgroundClick: {\n      triggerUpdate: false\n    },\n    onBackgroundRightClick: {\n      triggerUpdate: false\n    }\n  }, linkedFGProps), linkedRenderObjsProps),\n  methods: _objectSpread2(_objectSpread2({\n    zoomToFit: function zoomToFit(state, transitionDuration, padding) {\n      var _state$forceGraph;\n      for (var _len = arguments.length, bboxArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        bboxArgs[_key - 3] = arguments[_key];\n      }\n      state.renderObjs.fitToBbox((_state$forceGraph = state.forceGraph).getGraphBbox.apply(_state$forceGraph, bboxArgs), transitionDuration, padding);\n      return this;\n    },\n    pauseAnimation: function pauseAnimation(state) {\n      if (state.animationFrameRequestId !== null) {\n        cancelAnimationFrame(state.animationFrameRequestId);\n        state.animationFrameRequestId = null;\n      }\n      return this;\n    },\n    resumeAnimation: function resumeAnimation(state) {\n      if (state.animationFrameRequestId === null) {\n        this._animationCycle();\n      }\n      return this;\n    },\n    _animationCycle: function _animationCycle(state) {\n      if (state.enablePointerInteraction) {\n        // reset canvas cursor (override dragControls cursor)\n        this.renderer().domElement.style.cursor = null;\n      }\n\n      // Frame cycle\n      state.forceGraph.tickFrame();\n      state.renderObjs.tick();\n      state.animationFrameRequestId = requestAnimationFrame(this._animationCycle);\n    },\n    scene: function scene(state) {\n      return state.renderObjs.scene();\n    },\n    // Expose scene\n    camera: function camera(state) {\n      return state.renderObjs.camera();\n    },\n    // Expose camera\n    renderer: function renderer(state) {\n      return state.renderObjs.renderer();\n    },\n    // Expose renderer\n    controls: function controls(state) {\n      return state.renderObjs.controls();\n    },\n    // Expose controls\n    tbControls: function tbControls(state) {\n      return state.renderObjs.tbControls();\n    },\n    // To be deprecated\n    _destructor: function _destructor() {\n      this.pauseAnimation();\n      this.graphData({\n        nodes: [],\n        links: []\n      });\n    }\n  }, linkedFGMethods), linkedRenderObjsMethods),\n  stateInit: function stateInit(_ref5) {\n    var controlType = _ref5.controlType,\n      rendererConfig = _ref5.rendererConfig,\n      extraRenderers = _ref5.extraRenderers;\n    return {\n      forceGraph: new ThreeForceGraph(),\n      renderObjs: ThreeRenderObjects({\n        controlType: controlType,\n        rendererConfig: rendererConfig,\n        extraRenderers: extraRenderers\n      })\n    };\n  },\n  init: function init(domNode, state) {\n    // Wipe DOM\n    domNode.innerHTML = '';\n\n    // Add relative container\n    domNode.appendChild(state.container = document.createElement('div'));\n    state.container.style.position = 'relative';\n\n    // Add renderObjs\n    var roDomNode = document.createElement('div');\n    state.container.appendChild(roDomNode);\n    state.renderObjs(roDomNode);\n    var camera = state.renderObjs.camera();\n    var renderer = state.renderObjs.renderer();\n    var controls = state.renderObjs.controls();\n    controls.enabled = !!state.enableNavigationControls;\n    state.lastSetCameraZ = camera.position.z;\n\n    // Add info space\n    var infoElem;\n    state.container.appendChild(infoElem = document.createElement('div'));\n    infoElem.className = 'graph-info-msg';\n    infoElem.textContent = '';\n\n    // config forcegraph\n    state.forceGraph.onLoading(function () {\n      infoElem.textContent = 'Loading...';\n    }).onFinishLoading(function () {\n      infoElem.textContent = '';\n    }).onUpdate(function () {\n      // sync graph data structures\n      state.graphData = state.forceGraph.graphData();\n\n      // re-aim camera, if still in default position (not user modified)\n      if (camera.position.x === 0 && camera.position.y === 0 && camera.position.z === state.lastSetCameraZ && state.graphData.nodes.length) {\n        camera.lookAt(state.forceGraph.position);\n        state.lastSetCameraZ = camera.position.z = Math.cbrt(state.graphData.nodes.length) * CAMERA_DISTANCE2NODES_FACTOR;\n      }\n    }).onFinishUpdate(function () {\n      // Setup node drag interaction\n      if (state._dragControls) {\n        var curNodeDrag = state.graphData.nodes.find(function (node) {\n          return node.__initialFixedPos && !node.__disposeControlsAfterDrag;\n        }); // detect if there's a node being dragged using the existing drag controls\n        if (curNodeDrag) {\n          curNodeDrag.__disposeControlsAfterDrag = true; // postpone previous controls disposal until drag ends\n        } else {\n          state._dragControls.dispose(); // cancel previous drag controls\n        }\n\n        state._dragControls = undefined;\n      }\n      if (state.enableNodeDrag && state.enablePointerInteraction && state.forceEngine === 'd3') {\n        // Can't access node positions programmatically in ngraph\n        var dragControls = state._dragControls = new DragControls(state.graphData.nodes.map(function (node) {\n          return node.__threeObj;\n        }).filter(function (obj) {\n          return obj;\n        }), camera, renderer.domElement);\n        dragControls.addEventListener('dragstart', function (event) {\n          controls.enabled = false; // Disable controls while dragging\n\n          // track drag object movement\n          event.object.__initialPos = event.object.position.clone();\n          event.object.__prevPos = event.object.position.clone();\n          var node = getGraphObj(event.object).__data;\n          !node.__initialFixedPos && (node.__initialFixedPos = {\n            fx: node.fx,\n            fy: node.fy,\n            fz: node.fz\n          });\n          !node.__initialPos && (node.__initialPos = {\n            x: node.x,\n            y: node.y,\n            z: node.z\n          });\n\n          // lock node\n          ['x', 'y', 'z'].forEach(function (c) {\n            return node[\"f\".concat(c)] = node[c];\n          });\n\n          // drag cursor\n          renderer.domElement.classList.add('grabbable');\n        });\n        dragControls.addEventListener('drag', function (event) {\n          var nodeObj = getGraphObj(event.object);\n          if (!event.object.hasOwnProperty('__graphObjType')) {\n            // If dragging a child of the node, update the node object instead\n            var initPos = event.object.__initialPos;\n            var prevPos = event.object.__prevPos;\n            var _newPos = event.object.position;\n            nodeObj.position.add(_newPos.clone().sub(prevPos)); // translate node object by the motion delta\n            prevPos.copy(_newPos);\n            _newPos.copy(initPos); // reset child back to its initial position\n          }\n\n          var node = nodeObj.__data;\n          var newPos = nodeObj.position;\n          var translate = {\n            x: newPos.x - node.x,\n            y: newPos.y - node.y,\n            z: newPos.z - node.z\n          };\n          // Move fx/fy/fz (and x/y/z) of nodes based on object new position\n          ['x', 'y', 'z'].forEach(function (c) {\n            return node[\"f\".concat(c)] = node[c] = newPos[c];\n          });\n          state.forceGraph.d3AlphaTarget(0.3) // keep engine running at low intensity throughout drag\n          .resetCountdown(); // prevent freeze while dragging\n\n          node.__dragged = true;\n          state.onNodeDrag(node, translate);\n        });\n        dragControls.addEventListener('dragend', function (event) {\n          delete event.object.__initialPos; // remove tracking attributes\n          delete event.object.__prevPos;\n          var node = getGraphObj(event.object).__data;\n\n          // dispose previous controls if needed\n          if (node.__disposeControlsAfterDrag) {\n            dragControls.dispose();\n            delete node.__disposeControlsAfterDrag;\n          }\n          var initFixedPos = node.__initialFixedPos;\n          var initPos = node.__initialPos;\n          var translate = {\n            x: initPos.x - node.x,\n            y: initPos.y - node.y,\n            z: initPos.z - node.z\n          };\n          if (initFixedPos) {\n            ['x', 'y', 'z'].forEach(function (c) {\n              var fc = \"f\".concat(c);\n              if (initFixedPos[fc] === undefined) {\n                delete node[fc];\n              }\n            });\n            delete node.__initialFixedPos;\n            delete node.__initialPos;\n            if (node.__dragged) {\n              delete node.__dragged;\n              state.onNodeDragEnd(node, translate);\n            }\n          }\n          state.forceGraph.d3AlphaTarget(0) // release engine low intensity\n          .resetCountdown(); // let the engine readjust after releasing fixed nodes\n\n          if (state.enableNavigationControls) {\n            controls.enabled = true; // Re-enable controls\n            controls.domElement && controls.domElement.ownerDocument && controls.domElement.ownerDocument.dispatchEvent(\n            // simulate mouseup to ensure the controls don't take over after dragend\n            new PointerEvent('pointerup', {\n              pointerType: 'touch'\n            }));\n          }\n\n          // clear cursor\n          renderer.domElement.classList.remove('grabbable');\n        });\n      }\n    });\n\n    // config renderObjs\n    state.renderObjs.renderer().useLegacyLights = false; // force behavior for three < 155\n    state.renderObjs.objects([\n    // Populate scene\n    new three.AmbientLight(0xcccccc, Math.PI), new three.DirectionalLight(0xffffff, 0.6 * Math.PI), state.forceGraph]).hoverOrderComparator(function (a, b) {\n      // Prioritize graph objects\n      var aObj = getGraphObj(a);\n      if (!aObj) return 1;\n      var bObj = getGraphObj(b);\n      if (!bObj) return -1;\n\n      // Prioritize nodes over links\n      var isNode = function isNode(o) {\n        return o.__graphObjType === 'node';\n      };\n      return isNode(bObj) - isNode(aObj);\n    }).tooltipContent(function (obj) {\n      var graphObj = getGraphObj(obj);\n      return graphObj ? accessorFn(state[\"\".concat(graphObj.__graphObjType, \"Label\")])(graphObj.__data) || '' : '';\n    }).hoverDuringDrag(false).onHover(function (obj) {\n      // Update tooltip and trigger onHover events\n      var hoverObj = getGraphObj(obj);\n      if (hoverObj !== state.hoverObj) {\n        var prevObjType = state.hoverObj ? state.hoverObj.__graphObjType : null;\n        var prevObjData = state.hoverObj ? state.hoverObj.__data : null;\n        var objType = hoverObj ? hoverObj.__graphObjType : null;\n        var objData = hoverObj ? hoverObj.__data : null;\n        if (prevObjType && prevObjType !== objType) {\n          // Hover out\n          var fn = state[\"on\".concat(prevObjType === 'node' ? 'Node' : 'Link', \"Hover\")];\n          fn && fn(null, prevObjData);\n        }\n        if (objType) {\n          // Hover in\n          var _fn = state[\"on\".concat(objType === 'node' ? 'Node' : 'Link', \"Hover\")];\n          _fn && _fn(objData, prevObjType === objType ? prevObjData : null);\n        }\n\n        // set pointer if hovered object is clickable\n        renderer.domElement.classList[hoverObj && state[\"on\".concat(objType === 'node' ? 'Node' : 'Link', \"Click\")] || !hoverObj && state.onBackgroundClick ? 'add' : 'remove']('clickable');\n        state.hoverObj = hoverObj;\n      }\n    }).clickAfterDrag(false).onClick(function (obj, ev) {\n      var graphObj = getGraphObj(obj);\n      if (graphObj) {\n        var fn = state[\"on\".concat(graphObj.__graphObjType === 'node' ? 'Node' : 'Link', \"Click\")];\n        fn && fn(graphObj.__data, ev);\n      } else {\n        state.onBackgroundClick && state.onBackgroundClick(ev);\n      }\n    }).onRightClick(function (obj, ev) {\n      // Handle right-click events\n      var graphObj = getGraphObj(obj);\n      if (graphObj) {\n        var fn = state[\"on\".concat(graphObj.__graphObjType === 'node' ? 'Node' : 'Link', \"RightClick\")];\n        fn && fn(graphObj.__data, ev);\n      } else {\n        state.onBackgroundRightClick && state.onBackgroundRightClick(ev);\n      }\n    });\n\n    //\n\n    // Kick-off renderer\n    this._animationCycle();\n  }\n});\n\n//\n\nfunction getGraphObj(object) {\n  var obj = object;\n  // recurse up object chain until finding the graph object\n  while (obj && !obj.hasOwnProperty('__graphObjType')) {\n    obj = obj.parent;\n  }\n  return obj;\n}\n\nexport { _3dForceGraph as default };\n","import fromKapsule from 'react-kapsule';\nimport ForceGraph3DKapsule from '3d-force-graph';\nimport PropTypes from 'prop-types';\n\nconst commonPropTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  graphData: PropTypes.shape({\n    nodes: PropTypes.arrayOf(PropTypes.object).isRequired,\n    links: PropTypes.arrayOf(PropTypes.object).isRequired\n  }),\n  backgroundColor: PropTypes.string,\n  nodeRelSize: PropTypes.number,\n  nodeId: PropTypes.string,\n  nodeLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  nodeVal: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  nodeVisibility: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  nodeColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  nodeAutoColorBy: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  onNodeHover: PropTypes.func,\n  onNodeClick: PropTypes.func,\n  linkSource: PropTypes.string,\n  linkTarget: PropTypes.string,\n  linkLabel: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkVisibility: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  linkColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkAutoColorBy: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkCurvature: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalArrowLength: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalArrowColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkDirectionalArrowRelPos: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticles: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticleSpeed: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticleWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkDirectionalParticleColor: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  onLinkHover: PropTypes.func,\n  onLinkClick: PropTypes.func,\n  dagMode: PropTypes.oneOf(['td', 'bu', 'lr', 'rl', 'zin', 'zout', 'radialin', 'radialout']),\n  dagLevelDistance: PropTypes.number,\n  dagNodeFilter: PropTypes.func,\n  onDagError: PropTypes.func,\n  d3AlphaMin: PropTypes.number,\n  d3AlphaDecay: PropTypes.number,\n  d3VelocityDecay: PropTypes.number,\n  warmupTicks: PropTypes.number,\n  cooldownTicks: PropTypes.number,\n  cooldownTime: PropTypes.number,\n  onEngineTick: PropTypes.func,\n  onEngineStop: PropTypes.func,\n  getGraphBbox: PropTypes.func\n};\nconst pointerBasedPropTypes = {\n  zoomToFit: PropTypes.func,\n  onNodeRightClick: PropTypes.func,\n  onNodeDrag: PropTypes.func,\n  onNodeDragEnd: PropTypes.func,\n  onLinkRightClick: PropTypes.func,\n  linkHoverPrecision: PropTypes.number,\n  onBackgroundClick: PropTypes.func,\n  onBackgroundRightClick: PropTypes.func,\n  enablePointerInteraction: PropTypes.bool,\n  enableNodeDrag: PropTypes.bool\n};\nconst threeBasedPropTypes = {\n  showNavInfo: PropTypes.bool,\n  nodeOpacity: PropTypes.number,\n  nodeResolution: PropTypes.number,\n  nodeThreeObject: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  nodeThreeObjectExtend: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  linkOpacity: PropTypes.number,\n  linkResolution: PropTypes.number,\n  linkCurveRotation: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.func]),\n  linkMaterial: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  linkThreeObject: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func]),\n  linkThreeObjectExtend: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.func]),\n  linkPositionUpdate: PropTypes.func,\n  linkDirectionalArrowResolution: PropTypes.number,\n  linkDirectionalParticleResolution: PropTypes.number,\n  forceEngine: PropTypes.oneOf(['d3', 'ngraph']),\n  ngraphPhysics: PropTypes.object,\n  numDimensions: PropTypes.oneOf([1, 2, 3])\n};\nObject.assign({}, commonPropTypes, pointerBasedPropTypes, {\n  linkLineDash: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.number), PropTypes.string, PropTypes.func]),\n  nodeCanvasObjectMode: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  nodeCanvasObject: PropTypes.func,\n  nodePointerAreaPaint: PropTypes.func,\n  linkCanvasObjectMode: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkCanvasObject: PropTypes.func,\n  linkPointerAreaPaint: PropTypes.func,\n  autoPauseRedraw: PropTypes.bool,\n  minZoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n  enableZoomInteraction: PropTypes.bool,\n  enablePanInteraction: PropTypes.bool,\n  onZoom: PropTypes.func,\n  onZoomEnd: PropTypes.func,\n  onRenderFramePre: PropTypes.func,\n  onRenderFramePost: PropTypes.func\n});\nconst ForceGraph3DPropTypes = Object.assign({}, commonPropTypes, pointerBasedPropTypes, threeBasedPropTypes, {\n  enableNavigationControls: PropTypes.bool,\n  controlType: PropTypes.oneOf(['trackball', 'orbit', 'fly']),\n  rendererConfig: PropTypes.object,\n  extraRenderers: PropTypes.arrayOf(PropTypes.shape({\n    render: PropTypes.func.isRequired\n  }))\n});\nObject.assign({}, commonPropTypes, threeBasedPropTypes, {\n  nodeDesc: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  linkDesc: PropTypes.oneOfType([PropTypes.string, PropTypes.func])\n});\nObject.assign({}, commonPropTypes, threeBasedPropTypes, {\n  markerAttrs: PropTypes.object,\n  yOffset: PropTypes.number,\n  glScale: PropTypes.number\n});\n\nconst ForceGraph3D = fromKapsule(ForceGraph3DKapsule, {\n  methodNames: [\n  // bind methods\n  'emitParticle', 'd3Force', 'd3ReheatSimulation', 'stopAnimation', 'pauseAnimation', 'resumeAnimation', 'cameraPosition', 'zoomToFit', 'getGraphBbox', 'screen2GraphCoords', 'graph2ScreenCoords', 'postProcessingComposer', 'scene', 'camera', 'renderer', 'controls', 'refresh'],\n  initPropNames: ['controlType', 'rendererConfig', 'extraRenderers']\n});\nForceGraph3D.displayName = 'ForceGraph3D';\nForceGraph3D.propTypes = ForceGraph3DPropTypes;\n\nexport { ForceGraph3D as default };\n"],"names":["module","exports","iterable","reduce","obj","key","val","subject","Error","reservedWords","i","length","hasOwnProperty","validateSubject","eventsStorage","registeredEvents","Object","create","on","eventName","callback","ctx","handlers","push","off","callbacks","splice","fire","fireArguments","arguments","Array","prototype","call","callbackInfo","apply","createEventsStorage","graph","physicsSettings","physicsSimulator","createSimulator","isArray","nodeMass","version","nodeId","links","getLinks","size","nodeBodies","Map","springs","bodiesCount","springTransform","settings","noop","forEachNode","node","initBody","id","forEachLink","initLink","onGraphChanged","wasStable","api","step","updateStableStatus","lastMove","isStableNow","getNodePosition","getInitializedBody","pos","setNodePosition","body","setPosition","slice","getLinkPosition","linkId","spring","from","to","getGraphRect","getBBox","forEachBody","pinNode","isPinned","isNodePinned","dispose","getBody","get","getSpring","fromId","toId","undefined","link","hasLink","getForceVectorLength","fx","fy","Math","abs","force","x","y","sqrt","simulator","eventify","isStable","cb","forEach","changes","change","changeType","releaseNode","releaseLink","getNodesCount","getNode","position","neighbors","maxNeighbors","min","otherBody","getNeighborBodies","getBestNewBodyPosition","addBodyAt","set","updateBodyMass","data","isNodeOriginallyPinned","delete","removeBody","fromBody","toBody","addSpring","removeSpring","mass","Number","isNaN","getVariableName","dimension","template","config","indent","join","indentString","buffer","variableName","prefix","replace","code","generateBoundsFunctionBody","Function","generateFunctionBody","createPatternBuilder","pattern","generateCreateBodyFunctionBody","debugSetters","getVectorCode","getBodyCode","variableList","setters","Body","generateCreateDragForceFunctionBody","generateCreateSpringForceFunctionBody","generateIntegratorFunctionBody","generateQuadTreeFunctionBody","quadCount","pow","getInsertStackCode","getQuadNodeCode","isSamePosition","getChildBodyCode","setChildBodyCode","quads","assignQuads","recursiveCode","runRecursiveOnChildren","indentCount","insertionCode","assignInsertionQuadIndex","childBody","setChildBody","getChildBody","index","Spring","merge","springCoeff","dragCoeff","springLength","springCoefficient","gravity","theta","dragCoefficient","timeStep","adaptiveTimeStepWeight","dimensions","debug","factory","dimensionalCache","generateCreateBodyFunction","createQuadTree","generateQuadTreeFunction","createBounds","generateBoundsFunction","createDragForce","generateCreateDragForceFunction","createSpringForce","generateCreateSpringForceFunction","integrate","generateIntegratorFunction","random","bodies","quadTree","bounds","springForce","dragForce","forces","forceMap","iterationNumber","addForce","insertBodies","reset","updateBodyForce","update","publicApi","removeForce","forceName","forceIndex","indexOf","getForces","movement","addBody","createBody","idx","body1","body2","getTotalMovement","getBestNewPosition","getBoundingBox","invalidateBBox","console","warn","value","options","this","target","augment","expose","box","forceFunction","has","source","sourceIsNumber","isFinite","coefficient","multigraph","uniqueLinkId","nodes","multiEdges","suspendEvents","createLink","makeLinkId","isMultiEdge","getLink","suffix","Link","prevLink","recordLinkChange","recordNodeChange","enterModification","exitModification","graphPart","addNode","addLink","fromNode","toNode","isUpdate","addLinkToNode","removeLink","otherId","removeLinkInstance","removeNode","getNodeCount","getLinkCount","getEdgeCount","getLinksCount","forEachLinkedNode","oriented","valuesIterator","values","nextValue","next","done","forEachOrientedLink","linkedNodeId","forEachNonOrientedLink","beginUpdate","endUpdate","clear","hasNode","realOn","enterModificationReal","exitModificationReal","recordLinkChangeReal","recordNodeChangeReal","monitorSubscribers","Node","prevLinks","fromNodeId","toNodeId","add","Set","toString","targetHasIt","optionsValueType","inputSeed","Generator","Date","seed","gamma","z","PI","E","nextDouble","randomIterator","array","customRandom","localRandom","j","t","shuffle","maxValue","floor","uniform","gaussian","r","log","levy","beta","sigma","sin","_defineProperty","arg","input","hint","prim","Symbol","toPrimitive","res","TypeError","String","_toPrimitive","_toPropertyKey","defineProperty","enumerable","configurable","writable","_slicedToArray","arr","_arrayWithHoles","_i","iterator","_s","_e","_x","_r","_arr","_n","_d","err","return","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","o","minLen","n","constructor","name","test","len","arr2","_typeof","useEffectOnce","effect","useEffectFn","useEffect","destroyFunc","useRef","effectCalled","renderAfterCalled","_useState4","useState","setVal","current","_plane","_raycaster","_pointer","_offset","_intersection","_worldPosition","_inverseMatrix","DragControls","_objects","_camera","_domElement","super","style","touchAction","_selected","_hovered","_intersections","scope","activate","addEventListener","onPointerMove","onPointerDown","onPointerCancel","deactivate","removeEventListener","cursor","event","enabled","updatePointer","setFromCamera","ray","intersectPlane","copy","sub","applyMatrix4","dispatchEvent","type","object","pointerType","intersectObjects","setFromNormalAndCoplanarPoint","getWorldDirection","normal","setFromMatrixPosition","matrixWorld","transformGroup","parent","invert","rect","getBoundingClientRect","clientX","left","width","clientY","top","height","getObjects","getRaycaster","dispatch","_","Dispatch","c","concat","typename","types","T","trim","split","map","that","args","taskHead","taskTail","timeout","interval","pokeDelay","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","window","requestAnimationFrame","bind","f","setTimeout","clearNow","Timer","_call","_time","_next","timer","delay","time","restart","wake","e","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","stop","a","m","d","initialAngleRoll","initialAngleYaw","numDimensions","simulation","nDim","max","round","alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","stepper","s","lcg","tick","iterations","k","vx","vy","fz","vz","initializeNodes","radius","cbrt","rollAngle","yawAngle","cos","initializeForce","initialize","randomSource","find","dx","dy","dz","d2","closest","shift","nodeById","strengths","distances","count","bias","strength","distance","constant","l","b","jiggle","initializeStrength","initializeDistance","_nodes","includes","tree","xm","xp","right","_root","leaf","x0","_x0","x1","_x1","defaultX","binarytree","Binarytree","NaN","addAll","leaf_copy","treeProto","ym","yp","bottom","y0","_y0","y1","_y1","_y","defaultY","quadtree","Quadtree","child","pop","cover","xz","Float64Array","visit","extent","x2","q","x3","halves","remove","retainer","previous","removeAll","root","visitAfter","zm","zp","deep","z0","_z0","z1","_z1","_z","defaultZ","octree","Octree","yz","y2","y3","distanceMin2","distanceMax2","theta2","accumulate","treeNode","weight","numChildren","arg1","arg2","arg3","w","distanceMin","distanceMax","sx","sy","sz","zz","z2","z3","octs","global","freeSelf","self","reWhitespace","string","charAt","reTrimStart","objectProto","nativeObjectToString","symToStringTag","toStringTag","isOwn","tag","unmasked","result","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","isBinary","nativeMax","nativeMin","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","flush","_defineProperties","props","descriptor","_createClass","Constructor","protoProps","staticProps","Prop","_ref","_ref$default","defaultVal","_ref$triggerUpdate","triggerUpdate","_ref$onChange","onChange","newVal","state","instance","_classCallCheck","_ref2","_ref2$stateInit","stateInit","_ref2$props","rawProps","_ref2$methods","methods","_ref2$aliases","aliases","_ref2$init","init","initFn","_ref2$update","updateFn","keys","propName","assign","initialised","changedProps","comp","nodeElement","initStatic","digest","prop","_ref3","_ref3$triggerUpdate","redigest","_ref3$onChange","_ref3$defaultVal","curVal","getSetProp","methodName","_methods$methodName","_len","_key","entries","_ref4","_ref5","alias","resetProps","_rerender","p","valueof","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","list","keyAccessors","multiItem","flattenKeys","keyAccessor","isProp","indexedResult","item","iterObj","itemVal","_itemVal","propVal","rest","level","flatten","accKeys","vals","ownKeys","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","_excluded","dataBindDiff","existingObjs","_ref3$objBindAttr","objBindAttr","_ref3$dataBindAttr","dataBindAttr","idAccessor","_ref3$purge","purge","isObjValid","removeObjs","prevD","diff","enter","exit","prev","prevById","nextById","byId","prevSet","nextSet","diffArrays","nextD","viewDigest","appendObj","removeObj","_ref7","_ref7$createObj","createObj","_ref7$updateObj","updateObj","_ref7$exitObj","exitObj","_ref7$objBindAttr","_ref7$dataBindAttr","dataDiffOptions","_dataBindDiff","getOwnPropertyDescriptors","defineProperties","_objectSpread2","newObjs","createObjs","updateObjs","InternMap","keyof","_intern","intern_get","intern_set","intern_delete","initRange","domain","range","implicit","specifier","colors","trimLeft","trimRight","tinycolor","color","opts","rgb","g","v","ok","format","toLowerCase","match","named","names","matchers","exec","rgba","hsl","h","hsla","hsv","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","substr","convertToPercentage","mod","hsvToRgb","hue2rgb","hslToRgb","boundAlpha","inputToRGB","_originalInput","_g","_b","_a","_roundA","_format","_gradientType","gradientType","_ok","rgbToHsl","rgbToHsv","rgbToHex","allow3Char","hex","pad2","rgbaToArgbHex","convertDecimalToHex","_desaturate","amount","toHsl","clamp01","_saturate","_greyscale","desaturate","_lighten","_brighten","toRgb","_darken","_spin","hue","_complement","polyad","number","_splitcomplement","_analogous","results","slices","part","ret","_monochromatic","toHsv","modification","isDark","getBrightness","isLight","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","setAlpha","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","clone","_applyModification","fn","lighten","brighten","darken","saturate","greyscale","spin","_applyCombination","analogous","complement","monochromatic","splitcomplement","triad","tetrad","fromRatio","newColor","equals","color1","color2","mix","rgb1","rgb2","readability","c1","c2","isReadable","wcag2","wcag2Parms","out","parms","toUpperCase","validateWCAG2Parms","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","flipped","flip","parseFloat","isOnePointZero","processPercent","isPercentage","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","_construct","Parent","Class","_assertThisInitialized","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","_possibleConstructorReturn","materialDispose","material","deallocate","geometry","texture","children","emptyObject","childObj","threeDigest","scene","_ref$objFilter","objFilter","colorStr2Hex","str","colorAlpha","autoColorScale","ordinal","unknown","scale","autoColorObjects","objects","colorByAccessor","colorField","three$1","THREE","Group","Mesh","MeshLambertMaterial","Color","BufferGeometry","BufferAttribute","Matrix4","Vector3","SphereGeometry","CylinderGeometry","TubeGeometry","ConeGeometry","Line","LineBasicMaterial","QuadraticBezierCurve3","CubicBezierCurve3","Box3","ngraph","forcelayout","setAttributeFn","setAttribute","applyMatrix4Fn","ForceGraph","jsonUrl","_this","fetchingJson","onLoading","fetch","then","json","onFinishLoading","graphData","engineRunning","numDim","chargeForce","d3ForceLayout","eraseDimension","dim","dagMode","forceEngine","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","nodePositionUpdate","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","d3AlphaMin","d3AlphaDecay","d3AlphaTarget","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onUpdate","onFinishUpdate","onEngineTick","onEngineStop","refresh","_flushObjects","d3Force","forceFn","d3ReheatSimulation","resetCountdown","cntTicks","startTickTime","tickFrame","arrowRelPosAccessor","arrowLengthAccessor","nodeValAccessor","particleSpeedAccessor","isD3Sim","layout","nodeThreeObjectExtendAccessor","__threeObj","extendedObj","linkWidthAccessor","linkCurvatureAccessor","linkCurveRotationAccessor","linkThreeObjectExtendAccessor","calcLinkCurve","start","end","curvature","curve","vStart","vEnd","distanceTo","curveRotation","vLine","subVectors","cp","multiplyScalar","cross","applyAxisAngle","normalize","addVectors","divideScalar","endAngle","startAngle","__curve","lineObj","__lineObj","curveResolution","line","setFromPoints","getPoints","linePos","getAttribute","Float32Array","needsUpdate","computeBoundingSphere","rotation","ceil","_geometry","makeTranslation","makeRotationX","localToWorld","lookAt","layoutTick","arrowObj","__arrowObj","startR","endR","arrowLength","arrowRelPos","getPosAlongLine","getPoint","iplt","lineLen","getLength","acc","posAlongLine","arrowHead","arrowTail","headVec","cyclePhotons","__photonsObj","singleHopPhotons","__singleHopPhotonsObj","particleSpeed","getPhotonPos","photon","singleHop","__linkThreeObjType","__progressRatio","photonPosRatio","emitParticle","graphScene","particleWidthAccessor","photonR","numSegments","particleGeometry","linkColorAccessor","photonColor","particleColorAccessor","materialColor","opacity","particleMaterial","transparent","getGraphBbox","nodeFilter","bboxes","getBboxes","computeBoundingBox","boundingBox","__graphObjType","__data","bb","threeObj","hasAnyPropChanged","propList","some","customObjectAccessor","customObjectExtendAccessor","valAccessor","colorAccessor","visibilityAccessor","sphereGeometries","sphereMaterials","customObj","extendObj","__graphDefaultObj","parameters","widthSegments","_customObjectAccessor","_customObjectExtendAccessor","customMaterialAccessor","_visibilityAccessor","_colorAccessor","widthAccessor","cylinderGeometries","lambertLineMaterials","basicLineMaterials","visibleLinks","singlePhotonsObj","defaultObj","lineGeometry","renderOrder","updObj","useCylinder","radiusTop","radialSegments","customMaterial","materialType","lineMaterials","depthWrite","arrowColorAccessor","coneGeometry","translate","rotateX","arrowColor","particlesAccessor","particleMaterials","particleGeometries","numPhotons","curPhoton","linkForce","nodeDepths","_ref2$nodeFilter","_ref2$onLoopError","onLoopError","loopIds","depth","skip","sourceId","getNodeId","targetId","sourceNode","targetNode","foundLoops","traverse","nodeStack","currentDepth","_loop","loop","foundLoop","every","_ref6","getDagDepths","maxDepth","getFFn","fix","fxFn","fyFn","fzFn","radiuses","initNodes","nodeDepth","_graph","threeForcegraph","kapsule","initKapsuleWithSelf","FromKapsule","_baseClass","subClass","superClass","_inherits","_super","__kapsuleInstance","_this$__kapsuleInstan","returnVal","fromKapsule","_changeEvent","_startEvent","_endEvent","TrackballControls","domElement","STATE","screen","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","minZoom","maxZoom","mouseButtons","LEFT","ROTATE","MIDDLE","DOLLY","RIGHT","PAN","EPS","lastPosition","lastZoom","_state","_keyState","_touchZoomDistanceStart","_touchZoomDistanceEnd","_lastAngle","_eye","_movePrev","_moveCurr","_lastAxis","_zoomStart","_zoomEnd","_panStart","_panEnd","_pointers","_pointerPositions","target0","position0","up0","up","zoom0","zoom","handleResize","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","getMouseOnCircle","setPointerCapture","pointerId","onPointerUp","addPointer","trackPointer","onTouchStart","button","onMouseDown","pointer","getSecondPointerPosition","onTouchMove","onMouseMove","onTouchEnd","removePointer","releasePointerCapture","keydown","keyup","onMouseWheel","preventDefault","deltaMode","deltaY","contextmenu","rotateCamera","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","angle","crossVectors","setLength","setFromAxisAngle","applyQuaternion","zoomCamera","factor","isPerspectiveCamera","isOrthographicCamera","clamp","updateProjectionMatrix","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","clientWidth","scale_y","checkDistances","distanceToSquared","passive","_ray","TILT_LIMIT","DEG2RAD","OrbitControls","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","enableRotate","enablePan","screenSpacePanning","keyPanSpeed","zoomToCursor","autoRotate","autoRotateSpeed","UP","BOTTOM","touches","ONE","TWO","DOLLY_PAN","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","getDistance","listenToKeyEvents","onKeyDown","stopListenToKeyEvents","saveState","NONE","offset","quat","setFromUnitVectors","quatInverse","lastQuaternion","lastTargetPosition","twoPI","setFromVector3","rotateLeft","sphericalDelta","makeSafe","addScaledVector","panOffset","performCursorZoom","clampDistance","setFromSpherical","zoomChanged","newRadius","prevRadius","radiusDelta","dollyDirection","updateMatrixWorld","mouseBefore","mouse","unproject","mouseAfter","transformDirection","matrix","origin","direction","dot","onContextMenu","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","deltaX","element","targetDistance","fov","clientHeight","dollyOut","dollyScale","dollyIn","updateMouseParameters","dist","handleMouseDownRotate","handleMouseDownPan","handleTouchStartRotate","handleTouchStartPan","handleTouchStartDolly","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","DOLLY_ROTATE","mouseAction","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","FlyControls","movementSpeed","rollSpeed","dragToLook","autoForward","tmpQuaternion","status","moveState","down","forward","back","pitchUp","pitchDown","yawLeft","yawRight","rollLeft","rollRight","moveVector","rotationVector","altKey","movementSpeedMultiplier","updateMovementVector","updateRotationVector","pointerdown","pointermove","container","getContainerDimensions","halfWidth","halfHeight","pointerup","contextMenu","delta","moveMult","rotMult","translateX","translateY","translateZ","multiply","document","offsetWidth","offsetHeight","offsetLeft","offsetTop","innerWidth","innerHeight","_contextmenu","_pointerdown","_pointermove","_pointerup","_keydown","_keyup","CopyShader","uniforms","vertexShader","fragmentShader","Pass","isPass","needsSwap","renderToScreen","setSize","render","error","FullScreenQuad","_mesh","renderer","ShaderPass","shader","textureID","defines","fsQuad","writeBuffer","readBuffer","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","MaskPass","camera","inverse","context","getContext","writeValue","clearValue","buffers","setMask","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","ClearMaskPass","EffectComposer","renderTarget","_pixelRatio","getPixelRatio","getSize","_width","_height","renderTarget1","renderTarget2","passes","copyPass","blending","swapBuffers","tmp","addPass","pass","insertPass","removePass","isLastEnabledPass","passIndex","deltaTime","getDelta","currentRenderTarget","getRenderTarget","maskActive","il","NOTEQUAL","effectiveWidth","effectiveHeight","setPixelRatio","pixelRatio","RenderPass","overrideMaterial","clearColor","clearAlpha","clearDepth","_oldClearColor","oldAutoClear","autoClear","oldClearAlpha","oldOverrideMaterial","getClearColor","getClearAlpha","setClearColor","_wrapNativeSuper","_cache","Wrapper","PolishedError","_Error","colorToInt","convertToInt","saturation","lightness","convert","huePrime","chroma","secondComponent","lightnessModification","namedColorMap","hexRegex","hexRgbaRegex","reducedHexRegex","reducedRgbaHexRegex","rgbRegex","rgbaRegex","hslRegex","hslaRegex","parseToRgb","normalizedColor","normalizedColorName","nameToHex","toFixed","_alpha","rgbMatched","rgbaMatched","substring","hslMatched","rgbColorString","hslRgbMatched","hslaMatched","_rgbColorString","_hslRgbMatched","reduceHexValue$1","numberToHex","firstValue","secondValue","thirdValue","fourthValue","rgbValue","curried","combined","curry","guard","lowerBoundary","upperBoundary","opacify","parsedColor","curriedOpacify$1","Easing","freeze","Linear","None","In","Out","InOut","Quadratic","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce","generatePow","power","EPSILON","_tweens","_tweensAddedDuringUpdate","getAll","tweenId","tween","getId","preserve","tweenIds","autoStart","Interpolation","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","Sequence","nextId","_nextId","mainGroup","Tween","_object","_group","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_isDynamic","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_onEveryStartCallbackFired","_id","_isChainStopped","_propertiesAreSetUp","_goToEnd","isPlaying","isPaused","duration","dynamic","overrideStartingValues","property","_swapEndStartRepeatValues","_setupProperties","startFromCurrentValues","startValue","startValueIsArray","propType","isInterpolationList","endValues","temp","_handleRelativeValue","reverse","nestedObject","stopChainedTweens","_onStopCallback","pause","resume","numChainedTweens","group","repeat","times","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","tweens","onStart","_onStartCallback","onEveryStart","_onEveryStartCallback","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","endTime","_updateProperties","startIsArray","endIsArray","endValue","TWEEN","css","ref","insertAt","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","styleInject","WebGLRenderer","Scene","PerspectiveCamera","Raycaster","SRGBColorSpace","TextureLoader","Vector2","MeshBasicMaterial","BackSide","EventDispatcher","MOUSE","Quaternion","Spherical","Clock","threeRenderObjects","prevWidth","prevHeight","backgroundColor","backgroundImageUrl","onBackgroundImageLoaded","showNavInfo","skyRadius","enablePointerInteraction","hoverObj","toolTipElem","innerHTML","lineHoverPrecision","hoverOrderComparator","hoverFilter","tooltipContent","hoverDuringDrag","clickAfterDrag","onHover","onClick","onRightClick","controls","postProcessingComposer","extraRenderers","topObject","isPointerDragging","intersects","intersectingObjects","pointerPos","sort","topIntersect","intersectionPoint","point","getPointerPos","_state$pointerPos","cameraPosition","transitionDuration","finalPos","finalLookAt","camPos","camLookAt","getLookAt","setCameraPos","setLookAt","lookAtVect","zoomToFit","padding","bboxArgs","fitToBbox","getBbox","bbox","center","maxBoxSide","coordType","coords","paddedFov","fitHeightDistance","atan","fitWidthDistance","aspect","newCameraPosition","objs","expandByObject","getScreenCoords","vec","project","getSceneCoords","screenX","screenY","relCoords","raycaster","at","params","threshold","tbControls","domNode","_ref4$controlType","controlType","_ref4$rendererConfig","rendererConfig","_ref4$extraRenderers","_ref4$waitForLoadComp","waitForLoadComplete","className","navInfo","textContent","orbit","trackball","fly","display","classList","evType","ev","isPointerPressed","pressure","movementX","movementY","el","scrollLeft","scrollTop","transform","capture","antialias","devicePixelRatio","pointerEvents","controlsEngaged","controlsDragging","skysphere","visible","loadComplete","far","finishLoad","load","colorSpace","side","linkKapsule","kapsulePropName","kapsuleType","dummyK","_destructor","linkProp","linkMethod","method","kapsuleInstance","AmbientLight","DirectionalLight","bindFG","linkedFGProps","linkedFGMethods","bindRenderObjs","linkedRenderObjsProps","linkedRenderObjsMethods","graph2ScreenCoords","screen2GraphCoords","_3dForceGraph","nodeLabel","linkLabel","linkHoverPrecision","renderObjs","enableNavigationControls","enable","PointerEvent","enableNodeDrag","onNodeDrag","onNodeDragEnd","onNodeClick","onNodeRightClick","onNodeHover","onLinkClick","onLinkRightClick","onLinkHover","onBackgroundClick","onBackgroundRightClick","_state$forceGraph","forceGraph","pauseAnimation","animationFrameRequestId","cancelAnimationFrame","resumeAnimation","_animationCycle","roDomNode","infoElem","lastSetCameraZ","_dragControls","curNodeDrag","__initialFixedPos","__disposeControlsAfterDrag","dragControls","__initialPos","__prevPos","getGraphObj","nodeObj","initPos","prevPos","_newPos","newPos","__dragged","initFixedPos","useLegacyLights","aObj","bObj","isNode","graphObj","prevObjType","prevObjData","objType","objData","_fn","commonPropTypes","isRequired","pointerBasedPropTypes","threeBasedPropTypes","linkLineDash","nodeCanvasObjectMode","nodeCanvasObject","nodePointerAreaPaint","linkCanvasObjectMode","linkCanvasObject","linkPointerAreaPaint","autoPauseRedraw","enableZoomInteraction","enablePanInteraction","onZoom","onZoomEnd","onRenderFramePre","onRenderFramePost","ForceGraph3DPropTypes","nodeDesc","linkDesc","markerAttrs","yOffset","glScale","ForceGraph3D","kapsuleComponent","comboParam","wrapperElementType","methodNames","initPropNames","_ref$wrapperElementTy","_ref$nodeMapper","nodeMapper","_ref$methodNames","_ref$initPropNames","forwardRef","domEl","_useState2","prevProps","setPrevProps","useMemo","configOptions","useLayoutEffect","keySet","useCallback","dynamicProps","useImperativeHandle","_len2","_key2","displayName","propTypes"],"sourceRoot":""}