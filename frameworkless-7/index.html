<!DOCTYPE html><html lang="ko-KR"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="theme-color" content="#161b22"/><meta data-react-helmet="true" name="naver-site-verification" content="45d911481aa02bda5a391b5f2474bc61356de3f8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="twitter:creator" content="@@rheech22"/><meta data-react-helmet="true" name="twitter:image" content=""/><meta data-react-helmet="true" name="twitter:url" content="https://rheech22.github.io/7장_상태 관리"/><meta data-react-helmet="true" name="twitter:description" content="상태 관리 애플리케이션의 다양한 요소를 연결하는 효과적인 데이터 관리 방법을 상태 관리라고 한다. Redux나 MobX와 같은 상태 관리 전용 라이브러리도 있다. 그만큼이나 애플리케이션에서 중요한 축을 담당하고 있다. 상태 관리에 적합한 아키텍쳐를 …"/><meta data-react-helmet="true" name="twitter:title" content="7장_상태 관리"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="og:type" content="website"/><meta data-react-helmet="true" name="og:description" content="상태 관리 애플리케이션의 다양한 요소를 연결하는 효과적인 데이터 관리 방법을 상태 관리라고 한다. Redux나 MobX와 같은 상태 관리 전용 라이브러리도 있다. 그만큼이나 애플리케이션에서 중요한 축을 담당하고 있다. 상태 관리에 적합한 아키텍쳐를 …"/><meta data-react-helmet="true" name="og:title" content="7장_상태 관리"/><meta data-react-helmet="true" name="image" content=""/><meta data-react-helmet="true" name="description" content="상태 관리 애플리케이션의 다양한 요소를 연결하는 효과적인 데이터 관리 방법을 상태 관리라고 한다. Redux나 MobX와 같은 상태 관리 전용 라이브러리도 있다. 그만큼이나 애플리케이션에서 중요한 축을 담당하고 있다. 상태 관리에 적합한 아키텍쳐를 …"/><meta name="generator" content="Gatsby 4.19.2"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><title data-react-helmet="true">7장_상태 관리 | conerstone</title><script data-react-helmet="true" type="application/ld+json">
            {
              "@context": "https://schema.org",
              "@type": "Article",
              "url": "https://rheech22.github.io//frameworkless-7",
              "headline": "7장_상태 관리",
              "datePublisehd": "2023-03-12",
              "dateModified": "2023-03-12",
              "image": "[]"
            }
          </script><style data-styled="" data-styled-version="5.3.5">@font-face{font-family:BlinkMacSystemFont;src:local('※');font-weight:400;font-style:normal;unicode-range:U+0041-005A,U+0061-007A,U+0030-0039;}/*!sc*/
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,menu,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}/*!sc*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;}/*!sc*/
*[hidden]{display:none;}/*!sc*/
body{line-height:1;}/*!sc*/
menu,ol,ul{list-style:none;}/*!sc*/
blockquote,q{quotes:none;}/*!sc*/
blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}/*!sc*/
table{border-collapse:collapse;border-spacing:0;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
html,body{-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;margin:0;}/*!sc*/
body{font-family:'Spoqa Han Sans',BlinkMacSystemFont,Arial,sans-serif;width:100%;background-color:#0D1118;color:#C9D1D9;min-height:100vh;line-height:1.5;-webkit-transition:all .5s;transition:all .5s;}/*!sc*/
body #gatsby-focus-wrapper{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
body main{font-size:16px;width:100%;}/*!sc*/
body a{color:unset;}/*!sc*/
data-styled.g2[id="sc-global-cpWZiG1"]{content:"sc-global-cpWZiG1,"}/*!sc*/
.XfgtL:focus{outline:none;}/*!sc*/
data-styled.g4[id="Textbox__Input-sc-vlag4q-0"]{content:"XfgtL,"}/*!sc*/
.bwJJaN{border:1px solid #30363d;border-radius:6px;width:272px;height:30px;font-weight:400;position:relative;-webkit-transition:all 0.5s;transition:all 0.5s;}/*!sc*/
@media (min-width:768px){.bwJJaN:focus-within{width:544px;}.bwJJaN:focus-within > ul{display:block;}}/*!sc*/
.bwJJaN > input{border:none;border-radius:6px;padding:0 12px;width:100%;height:100%;background-color:#0D1118;color:#f0f6fc;font-size:14px;-webkit-transition:all .5s;transition:all .5s;}/*!sc*/
.bwJJaN > input:focus{color:#C9D1D9;background-color:#161b22;}/*!sc*/
@media (min-width:768px){.bwJJaN > input:focus{border-bottom-left-radius:6px;border-bottom-right-radius:6px;}}/*!sc*/
.bwJJaN > input:focus::-webkit-input-placeholder{color:#757D86;}/*!sc*/
.bwJJaN > input:focus::-moz-placeholder{color:#757D86;}/*!sc*/
.bwJJaN > input:focus:-ms-input-placeholder{color:#757D86;}/*!sc*/
.bwJJaN > input:focus::placeholder{color:#757D86;}/*!sc*/
.bwJJaN > input::-webkit-input-placeholder{color:#C9D1D9;}/*!sc*/
.bwJJaN > input::-moz-placeholder{color:#C9D1D9;}/*!sc*/
.bwJJaN > input:-ms-input-placeholder{color:#C9D1D9;}/*!sc*/
.bwJJaN > input::placeholder{color:#C9D1D9;}/*!sc*/
data-styled.g5[id="SearchBar__Container-sc-6n5xnu-0"]{content:"bwJJaN,"}/*!sc*/
.grkkQT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:normal;-webkit-justify-content:normal;-ms-flex-pack:normal;justify-content:normal;padding:8px 16px;min-width:360px;width:100%;height:62px;background-color:#161b22;}/*!sc*/
@media (min-width:1280px){.grkkQT{padding:16px 32px;}}/*!sc*/
.grkkQT > a{margin-right:16px;color:#f0f6fc;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.grkkQT > a > h1{font-size:24px;font-weight:600;white-space:nowrap;}/*!sc*/
data-styled.g7[id="Header__Container-sc-z8t49p-0"]{content:"grkkQT,"}/*!sc*/
.fVRdgT{position:relative;z-index:0;margin-left:8px;border:none;border-radius:50%;background:none;min-width:38px;min-height:38px;overflow:hidden;cursor:pointer;-webkit-transition:box-shadow 2s;transition:box-shadow 2s;}/*!sc*/
@media (hover:hover){.fVRdgT:hover{box-shadow:rgb(109,110,129) 1.5px 1.5px 3px 0px inset,rgba(109,110,129,0.5) -1.5px -1.5px 3px 1px inset;background-image:linear-gradient( to right bottom,#000000,#211e1f,#3b353b,#55505a,#6d6c7b,#6d6e81,#6b7187,#69748d,#535c78,#3e4563,#2b304e,#181b3a );}}/*!sc*/
@media (min-width:425px){.fVRdgT{margin-left:auto;}}/*!sc*/
data-styled.g8[id="Header__Button-sc-z8t49p-1"]{content:"fVRdgT,"}/*!sc*/
.iwVTNQ{position:absolute;top:19px;right:-32px;border:1px dotted transparent;border-radius:50%;width:100px;height:100px;-webkit-transition:border-color 2s;transition:border-color 2s;}/*!sc*/
@media (hover:hover){.iwVTNQ:hover{border-color:#C9D1D9;}}/*!sc*/
.iwVTNQ > div{position:absolute;top:40px;right:40px;border-radius:50%;border:none;padding:0;width:20px;height:20px;background:none;outline:none;}/*!sc*/
.iwVTNQ > div:first-of-type{-webkit-animation:ZmWYm 1.5s cubic-bezier(0.645,0.045,0.355,1.000) forwards;animation:ZmWYm 1.5s cubic-bezier(0.645,0.045,0.355,1.000) forwards;}/*!sc*/
.iwVTNQ > div:last-of-type{-webkit-animation:dGgAwC 1.5s cubic-bezier(0.645,0.045,0.355,1.000) forwards;animation:dGgAwC 1.5s cubic-bezier(0.645,0.045,0.355,1.000) forwards;}/*!sc*/
.iwVTNQ > div svg{width:20px;height:20px;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}/*!sc*/
.iwVTNQ > div svg path{fill:#C9D1D9;}/*!sc*/
data-styled.g9[id="Header__CircleLayout-sc-z8t49p-2"]{content:"iwVTNQ,"}/*!sc*/
.hmzBgr{border-top:1px solid #21262d;-webkit-transition:border-color .5s;transition:border-color .5s;margin-top:auto;width:100%;font-size:12px;text-align:center;}/*!sc*/
.hmzBgr> section{padding:48px 8px;}/*!sc*/
.hmzBgr > span{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#8b949e;}/*!sc*/
data-styled.g10[id="Footer__Container-sc-13p6nst-0"]{content:"hmzBgr,"}/*!sc*/
.bvyIvq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:normal;-webkit-box-align:normal;-ms-flex-align:normal;align-items:normal;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:72px auto 0 auto;padding-top:48px;width:100%;height:auto;}/*!sc*/
data-styled.g11[id="styles__Section-sc-4114r5-0"]{content:"bvyIvq,"}/*!sc*/
.cJxWrQ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:normal;-webkit-box-align:normal;-ms-flex-align:normal;align-items:normal;-webkit-box-pack:normal;-webkit-justify-content:normal;-ms-flex-pack:normal;justify-content:normal;padding:20px 30px;width:100%;}/*!sc*/
@media (min-width:768px){.cJxWrQ{-webkit-transform:translateX(3%);-ms-transform:translateX(3%);transform:translateX(3%);max-width:826px;}}/*!sc*/
@media (min-width:1630px){.cJxWrQ{max-width:1060px;}}/*!sc*/
@media (min-width:1440px){.cJxWrQ{position:relative;left:50%;-webkit-transform:translateX(-47%);-ms-transform:translateX(-47%);transform:translateX(-47%);}}/*!sc*/
data-styled.g12[id="styles__Article-sc-4114r5-1"]{content:"cJxWrQ,"}/*!sc*/
.dtKHrW{margin-bottom:26px;}/*!sc*/
data-styled.g13[id="styles__Header-sc-4114r5-2"]{content:"dtKHrW,"}/*!sc*/
.jnyrbr > section:nth-child(1){font-size:16px;}/*!sc*/
@media (min-width:768px){.jnyrbr > section:nth-child(1){font-size:18px;}}/*!sc*/
.jnyrbr > section:nth-child(1) h1,.jnyrbr > section:nth-child(1) h2,.jnyrbr > section:nth-child(1) h3,.jnyrbr > section:nth-child(1) h4,.jnyrbr > section:nth-child(1) h5,.jnyrbr > section:nth-child(1) h6{font-weight:600;}/*!sc*/
.jnyrbr > section:nth-child(1) h1 .header-anchor,.jnyrbr > section:nth-child(1) h2 .header-anchor,.jnyrbr > section:nth-child(1) h3 .header-anchor,.jnyrbr > section:nth-child(1) h4 .header-anchor,.jnyrbr > section:nth-child(1) h5 .header-anchor,.jnyrbr > section:nth-child(1) h6 .header-anchor{fill:#C9D1D9;}/*!sc*/
.jnyrbr > section:nth-child(1) h1:not(:first-of-type),.jnyrbr > section:nth-child(1) h2:not(:first-of-type),.jnyrbr > section:nth-child(1) h3:not(:first-of-type),.jnyrbr > section:nth-child(1) h4:not(:first-of-type),.jnyrbr > section:nth-child(1) h5:not(:first-of-type),.jnyrbr > section:nth-child(1) h6:not(:first-of-type){margin-top:1.2em;}/*!sc*/
.jnyrbr > section:nth-child(1) h1{margin-block-start:1em;margin-block-end:1em;font-size:36px;}/*!sc*/
.jnyrbr > section:nth-child(1) h2{margin-block-start:0.83em;margin-block-end:0.83em;font-size:28.8px;}/*!sc*/
.jnyrbr > section:nth-child(1) h3{margin-block-start:1em;margin-block-end:1em;font-size:21.6px;}/*!sc*/
.jnyrbr > section:nth-child(1) h4{margin-block-start:1.22em;margin-block-end:1.22em;font-size:19.8px;}/*!sc*/
.jnyrbr > section:nth-child(1) em{font-style:oblique;}/*!sc*/
.jnyrbr > section:nth-child(1) a{text-underline-position:under;}/*!sc*/
.jnyrbr > section:nth-child(1) a:hover{color:#44AC99;}/*!sc*/
.jnyrbr > section:nth-child(1) p{display:block;margin-block-start:1em;margin-block-end:1em;word-break:break-word;line-height:32px;}/*!sc*/
.jnyrbr > section:nth-child(1) ol,.jnyrbr > section:nth-child(1) ul{padding-left:40px;}/*!sc*/
.jnyrbr > section:nth-child(1) ul{list-style-type:disc;}/*!sc*/
.jnyrbr > section:nth-child(1) ol{list-style-type:decimal;}/*!sc*/
.jnyrbr > section:nth-child(1) li{display:list-item;text-align:-webkit-match-parent;line-height:32px;}/*!sc*/
.jnyrbr > section:nth-child(1) li p{margin:0;}/*!sc*/
.jnyrbr > section:nth-child(1) table{display:block;border-color:gray;border-spacing:0;border-collapse:collapse;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;overflow:auto;font-size:16px;}/*!sc*/
.jnyrbr > section:nth-child(1) table thead{display:table-header-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.jnyrbr > section:nth-child(1) table tbody{display:table-row-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.jnyrbr > section:nth-child(1) table tr{display:table-row;vertical-align:inherit;border:inherit;background-color:#0d1117;border-top-width:1px;border-top-style:solid;border-top-color:#21262d;-webkit-transition:all .5s;transition:all .5s;}/*!sc*/
.jnyrbr > section:nth-child(1) table tr:nth-of-type(2n){background-color:#161b22;}/*!sc*/
.jnyrbr > section:nth-child(1) table th,.jnyrbr > section:nth-child(1) table td{display:table-cell;vertical-align:inherit;padding:6px 13px;border-width:1px;border-style:solid;border-color:#30363d;-webkit-transition:all .5s;transition:all .5s;}/*!sc*/
.jnyrbr > section:nth-child(1) blockquote{padding:12px 20px 12px 28px;margin:20px 0px;border-left:8px solid #44AC99;box-shadow:rgba(255,255,255,0.03) 0px 3px 12px;font-family:Georgia,serif;font-style:italic;text-align:justify;line-height:1.2;-webkit-transition:all .5s;transition:all .5s;}/*!sc*/
.jnyrbr > section:nth-child(1) blockquote p{margin:0;}/*!sc*/
.jnyrbr > section:nth-child(1) code{margin:0;padding:0.2em 0.4em;background-color:rgba(135,131,120,0.15);color:#EB5757;border-radius:6px;font-size:85%;font-family:SFMono-Regular,Menlo,Consolas,Liberation Mono,monospace;}/*!sc*/
.jnyrbr > section:nth-child(1) strong{font-weight:bold;}/*!sc*/
.jnyrbr > section:nth-child(1) deckgo-highlight-code{max-width:90vw;font-size:14px;--deckgo-highlight-code-carbon-toolbar-display:none;margin-bottom:32px;}/*!sc*/
.jnyrbr > section:nth-child(1) img{max-width:90vw;}/*!sc*/
@media (min-width:768px){.jnyrbr > section:nth-child(1) img{max-width:694px;}}/*!sc*/
data-styled.g14[id="styles__Main-sc-4114r5-3"]{content:"jnyrbr,"}/*!sc*/
.gjAYNi{margin-bottom:4px;font-size:36px;font-weight:600;}/*!sc*/
@media (min-width:425px){.gjAYNi{font-size:42px;}}/*!sc*/
data-styled.g15[id="styles__Title-sc-4114r5-4"]{content:"gjAYNi,"}/*!sc*/
.kLCYqG{color:#8b949e;font-size:14px;}/*!sc*/
data-styled.g16[id="styles__SubTitle-sc-4114r5-5"]{content:"kLCYqG,"}/*!sc*/
.ioKSNB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:normal;-webkit-justify-content:normal;-ms-flex-pack:normal;justify-content:normal;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:14px;}/*!sc*/
data-styled.g17[id="styles__Tags-sc-4114r5-6"]{content:"ioKSNB,"}/*!sc*/
.jpfzUv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:8em;}/*!sc*/
@media (min-width:425px){.jpfzUv{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}/*!sc*/
.jpfzUv > div{width:100%;}/*!sc*/
.jpfzUv > div > a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:normal;-webkit-justify-content:normal;-ms-flex-pack:normal;justify-content:normal;padding:8px;border-radius:8px;-webkit-text-decoration:none;text-decoration:none;width:100%;}/*!sc*/
@media (min-width:425px){.jpfzUv > div > a{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;min-width:192px;}}/*!sc*/
@media (hover:hover){.jpfzUv > div > a:hover{background-color:rgba(56,139,253,0.15);}.jpfzUv > div > a:hover span{-webkit-text-decoration:underline;text-decoration:underline;}}/*!sc*/
.jpfzUv > div > a > svg path{fill:#8b949e;}/*!sc*/
.jpfzUv > div > a > div > h3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:normal;-webkit-justify-content:normal;-ms-flex-pack:normal;justify-content:normal;font-size:12px;height:30px;}/*!sc*/
.jpfzUv > div > a > div > span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:normal;-webkit-justify-content:normal;-ms-flex-pack:normal;justify-content:normal;color:#58a6ff;height:30px;}/*!sc*/
.jpfzUv > div:first-of-type > a{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;margin-right:auto;padding-left:4px;}/*!sc*/
.jpfzUv > div:first-of-type > a > div{margin-left:20px;}/*!sc*/
.jpfzUv > div:first-of-type > a > div span,.jpfzUv > div:first-of-type > a > div h3{-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;}/*!sc*/
.jpfzUv > div:first-of-type > a > svg{-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);}/*!sc*/
.jpfzUv > div:last-of-type > a{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-left:auto;padding-right:4px;}/*!sc*/
.jpfzUv > div:last-of-type > a > div{margin-right:20px;}/*!sc*/
.jpfzUv > div:last-of-type > a > div span,.jpfzUv > div:last-of-type > a > div h3{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}/*!sc*/
.jpfzUv > div:last-of-type > a > svg{-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);}/*!sc*/
data-styled.g18[id="styles__Nav-sc-4114r5-7"]{content:"jpfzUv,"}/*!sc*/
.kZxRxZ{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-right:1.5px;margin-bottom:3px;border:1px solid rgba(0,0,0,0);border-radius:2em;padding:0 10px;min-height:-webkit-fit-content;min-height:-moz-fit-content;min-height:fit-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:296px;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:rgba(56,139,253,0.15);color:#58a6ff;font-size:12px;font-weight:500;line-height:22px;cursor:pointer;-webkit-transition:all .5s;transition:all .5s;}/*!sc*/
@media (hover:hover){.kZxRxZ:hover{overflow-x:visible;text-overflow:unset;background-color:#1f6feb;color:#ffffff;}}/*!sc*/
data-styled.g23[id="Tag__Container-sc-1ml3ond-0"]{content:"kZxRxZ,"}/*!sc*/
.gdYmwG{display:none;position:-webkit-sticky;position:sticky;top:10px;right:0px;margin-left:auto;margin-top:38px;min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;color:#C9D1D9;overflow-y:scroll;}/*!sc*/
@media (min-width:1440px){.gdYmwG{display:block;}}/*!sc*/
.gdYmwG::-webkit-scrollbar{display:none;}/*!sc*/
.gdYmwG h2{margin-bottom:12px;padding:8px 10px;font-size:14px;font-weight:500;-webkit-letter-spacing:.025em;-moz-letter-spacing:.025em;-ms-letter-spacing:.025em;letter-spacing:.025em;-webkit-transition:all .5s;transition:all .5s;}/*!sc*/
.gdYmwG ul{padding-left:20px;}/*!sc*/
.gdYmwG li + li{margin-top:8px;}/*!sc*/
data-styled.g24[id="TOC__Container-sc-1ylks3q-0"]{content:"gdYmwG,"}/*!sc*/
.dxAYTv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:16px;padding-right:10px;max-width:265px;width:100%;background-color:none;color:#8b949e;font-size:12px;-webkit-transition:all 50ms ease-in-out;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.dxAYTv:hover:hover{background-color:rgba(177,186,196,0.12);}}/*!sc*/
.dxAYTv a{padding:6px 0;width:100%;-webkit-text-decoration:unset;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
.hEmMwG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:24px;padding-right:10px;max-width:265px;width:100%;background-color:none;color:#8b949e;font-size:11px;-webkit-transition:all 50ms ease-in-out;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.hEmMwG:hover:hover{background-color:rgba(177,186,196,0.12);}}/*!sc*/
.hEmMwG a{padding:5px 0;width:100%;-webkit-text-decoration:unset;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
data-styled.g25[id="TOC__List-sc-1ylks3q-1"]{content:"dxAYTv,hEmMwG,"}/*!sc*/
@-webkit-keyframes ZmWYm{from{-webkit-transform:rotate(90deg) translate(50px) translateZ(10px);-ms-transform:rotate(90deg) translate(50px) translateZ(10px);transform:rotate(90deg) translate(50px) translateZ(10px);}to{-webkit-transform:rotate(270deg) translate(50px) translateZ(10px);-ms-transform:rotate(270deg) translate(50px) translateZ(10px);transform:rotate(270deg) translate(50px) translateZ(10px);}}/*!sc*/
@keyframes ZmWYm{from{-webkit-transform:rotate(90deg) translate(50px) translateZ(10px);-ms-transform:rotate(90deg) translate(50px) translateZ(10px);transform:rotate(90deg) translate(50px) translateZ(10px);}to{-webkit-transform:rotate(270deg) translate(50px) translateZ(10px);-ms-transform:rotate(270deg) translate(50px) translateZ(10px);transform:rotate(270deg) translate(50px) translateZ(10px);}}/*!sc*/
data-styled.g26[id="sc-keyframes-ZmWYm"]{content:"ZmWYm,"}/*!sc*/
@-webkit-keyframes dGgAwC{from{-webkit-transform:rotate(90deg) translate(-50px) translateZ(10px);-ms-transform:rotate(90deg) translate(-50px) translateZ(10px);transform:rotate(90deg) translate(-50px) translateZ(10px);}to{-webkit-transform:rotate(270deg) translate(-50px) translateZ(10px);-ms-transform:rotate(270deg) translate(-50px) translateZ(10px);transform:rotate(270deg) translate(-50px) translateZ(10px);}}/*!sc*/
@keyframes dGgAwC{from{-webkit-transform:rotate(90deg) translate(-50px) translateZ(10px);-ms-transform:rotate(90deg) translate(-50px) translateZ(10px);transform:rotate(90deg) translate(-50px) translateZ(10px);}to{-webkit-transform:rotate(270deg) translate(-50px) translateZ(10px);-ms-transform:rotate(270deg) translate(-50px) translateZ(10px);transform:rotate(270deg) translate(-50px) translateZ(10px);}}/*!sc*/
data-styled.g27[id="sc-keyframes-dGgAwC"]{content:"dGgAwC,"}/*!sc*/
</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .header-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-anchor svg,
    h2 .header-anchor svg,
    h3 .header-anchor svg,
    h4 .header-anchor svg,
    h5 .header-anchor svg,
    h6 .header-anchor svg {
      visibility: hidden;
    }
    h1:hover .header-anchor svg,
    h2:hover .header-anchor svg,
    h3:hover .header-anchor svg,
    h4:hover .header-anchor svg,
    h5:hover .header-anchor svg,
    h6:hover .header-anchor svg,
    h1 .header-anchor:focus svg,
    h2 .header-anchor:focus svg,
    h3 .header-anchor:focus svg,
    h4 .header-anchor:focus svg,
    h5 .header-anchor:focus svg,
    h6 .header-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - -200)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=6d5c0719d6ce39c07b53ce38158aed46" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/favicons/android-chrome-192x192.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="apple-touch-icon" sizes="512x512" href="/favicons/android-chrome-512x512.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="preload" href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" as="font"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__Container-sc-z8t49p-0 grkkQT"><a tabindex="-1" href="/"><h1>conerstone</h1></a><form class="SearchBar__Container-sc-6n5xnu-0 bwJJaN"><input type="text" value="" placeholder="Search" maxLength="40" class="Textbox__Input-sc-vlag4q-0 XfgtL"/><button type="submit" hidden="" aria-label="Submit Search"></button></form><button tabindex="-1" aria-label="switch display mode" class="Header__Button-sc-z8t49p-1 fVRdgT"><div class="Header__CircleLayout-sc-z8t49p-2 iwVTNQ"><div><svg width="30px" height="30px" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M26.25 14.936C26.25 21.107 21.097 26.25 14.656 26.25C9.761 26.25 5.509 23.55 3.835 19.436C3.706 19.05 3.706 18.664 3.963 18.407C4.221 18.15 4.608 18.021 4.994 18.15C5.638 18.279 6.282 18.407 6.798 18.407C11.951 18.407 16.073 14.421 16.073 9.407C16.073 7.864 15.815 6.579 15.042 5.036C14.913 4.779 14.913 4.393 15.171 4.136C15.429 3.879 15.686 3.75 16.073 3.75C21.87 4.393 26.25 9.279 26.25 14.936Z" fill="#030D45"></path></svg></div><div><svg width="30px" height="30px" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15 9.375c-3.1 0 -5.625 2.525 -5.625 5.625s2.525 5.625 5.625 5.625 5.625 -2.525 5.625 -5.625 -2.525 -5.625 -5.625 -5.625zm14.438 4.717l-5.549 -2.771 1.963 -5.883c0.264 -0.797 -0.492 -1.553 -1.283 -1.283l-5.883 1.963 -2.777 -5.555c-0.375 -0.75 -1.441 -0.75 -1.816 0l-2.771 5.549L5.432 4.148c-0.797 -0.264 -1.553 0.492 -1.283 1.283l1.963 5.883 -5.549 2.777c-0.75 0.375 -0.75 1.441 0 1.816l5.549 2.771 -1.963 5.889c-0.264 0.797 0.492 1.553 1.283 1.283l5.883 -1.963 2.771 5.549c0.375 0.75 1.441 0.75 1.816 0l2.771 -5.549 5.883 1.963c0.797 0.264 1.553 -0.492 1.283 -1.283l-1.963 -5.883 5.549 -2.771c0.762 -0.381 0.762 -1.447 0.012 -1.822zm-9.135 6.211c-2.924 2.924 -7.682 2.924 -10.605 0 -2.924 -2.924 -2.924 -7.682 0 -10.605 2.924 -2.924 7.682 -2.924 10.605 0 2.924 2.924 2.924 7.682 0 10.605z"></path></svg></div></div></button></header><main><section class="styles__Section-sc-4114r5-0 bvyIvq"><article class="styles__Article-sc-4114r5-1 cJxWrQ"><header class="styles__Header-sc-4114r5-2 dtKHrW"><h1 class="styles__Title-sc-4114r5-4 gjAYNi">7장_상태 관리</h1><div class="styles__SubTitle-sc-4114r5-5 kLCYqG"><time dateTime="updated at"> 12 Mar 2023</time><span> — <!-- -->13<!-- --> min read</span></div><ul class="styles__Tags-sc-4114r5-6 ioKSNB"><li class="Tag__Container-sc-1ml3ond-0 kZxRxZ">javascript</li></ul></header><main class="styles__Main-sc-4114r5-3 jnyrbr"><section><h2 id="상태-관리" style="position:relative;"><a href="#%EC%83%81%ED%83%9C-%EA%B4%80%EB%A6%AC" aria-label="상태 관리 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>상태 관리</h2>
<p>애플리케이션의 다양한 요소를 연결하는 효과적인 데이터 관리 방법을 상태 관리라고 한다. <a href="https://redux.js.org/">Redux</a>나 <a href="https://mobx.js.org/react-integration.html">MobX</a>와 같은 상태 관리 전용 라이브러리도 있다. 그만큼이나 애플리케이션에서 중요한 축을 담당하고 있다. 상태 관리에 적합한 아키텍쳐를 선택한다면 애플리케이션을 건강하게 유지할 수 있다.</p>
<br/>
<h2 id="사전-준비" style="position:relative;"><a href="#%EC%82%AC%EC%A0%84-%EC%A4%80%EB%B9%84" aria-label="사전 준비 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>사전 준비</h2>
<p>3장에서 구현했던 투두리스트 앱을 사용한다. 새로운 구현에 앞서 변경된 코드를 먼저 살펴본다.</p>
<p>뷰</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;todos&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;template id=&quot;todo-item&quot;&gt;
      &lt;li&gt;
        &lt;div class=&quot;view&quot;&gt;
          &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
          &lt;label&gt;&lt;/label&gt;
          &lt;button class=&quot;destroy&quot;&gt;삭제&lt;/button&gt;
        &lt;/div&gt;
      &lt;/li&gt; 
    &lt;/template&gt;
    &lt;template id=&quot;todo-app&quot;&gt;
      &lt;section class=&quot;todoapp&quot;&gt;
        &lt;header&gt;
          &lt;h1&gt;todos&lt;/h1&gt;
          &lt;input class=&quot;new-todo&quot; placeholder=&quot;할 일 적기&quot; autofocus&gt;
        &lt;/header&gt;
        &lt;section class=&quot;main&quot;&gt;
          &lt;button class=&quot;completed-all&quot; &gt;전체 완료&lt;/button&gt;
          &lt;ul data-component=&quot;todos&quot;&gt;&lt;/ul&gt;
        &lt;/section&gt;
        &lt;footer class=&quot;footer&quot;&gt;
          &lt;span data-component=&quot;counter&quot;&gt;&lt;/span&gt;
          &lt;button class=&quot;clear-completed&quot;&gt;완료 삭제&lt;/button&gt;
        &lt;/footer&gt;
      &lt;/section&gt;
    &lt;/template&gt;
    &lt;div id=&quot;root&quot;&gt;
      &lt;div data-component=&quot;app&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code>
        </deckgo-highlight-code>
<p>컨트롤러</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">// index.js

import { fetchTodos } from &quot;./apis.js&quot;;

import App from &#39;./components/App.js&#39;;
import Todos from &#39;./components/Todos.js&#39;;
import Counter from &#39;./components/Counter.js&#39;;

import { addComponent, renderRoot } from &#39;./registry.js&#39;;
import renderDiff from &#39;./renderDiff.js&#39;;

const state = {
  todos: fetchTodos(),
}

addComponent(&#39;app&#39;, App);
addComponent(&#39;todos&#39;, Todos);
addComponent(&#39;counter&#39;, Counter);

const events = {
  deleteItem: (index) =&gt; {
    state.todos.splice(index, 1);
    render();
  },
  addItem: (text) =&gt; {
    state.todos.push({
      text,
      completed: false
    })
    render();
  },
  completedAll: () =&gt; {
    state.todos = state.todos.map(todo =&gt; ({
      ...todo,
      completed: true
    }))
    render();
  },
  clearCompleted: () =&gt; {
    state.todos = state.todos.filter(todo =&gt; !todo.completed);
    render();
  }
}

const render = () =&gt; {
  window.requestAnimationFrame(() =&gt; {
    const app = document.querySelector(&#39;#root&#39;);

    const newApp = renderRoot(app, state, events);

    renderDiff(document.body, app, newApp);
  })
}

render();</code>
        </deckgo-highlight-code>
<p>App 컴포넌트</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">let template;

const getTemplate = () =&gt; {
  if (!template) {
    template = document.getElementById(&#39;todo-app&#39;);
  }

  return template.content.firstElementChild.cloneNode(true);
}

const addEventListeners = (target, events) =&gt; {
  target.querySelector(&#39;.new-todo&#39;).addEventListener(&#39;keypress&#39;, (e) =&gt; {
    if (e.key === &#39;Enter&#39;) {
      events.addItem(e.target.value);

      e.target.value = &#39;&#39;
    }
  })

  target.querySelector(&#39;.completed-all&#39;).addEventListener(&#39;click&#39;, () =&gt; {
    events.completedAll();
  })

  target.querySelector(&#39;.clear-completed&#39;).addEventListener(&#39;click&#39;, () =&gt; {
    events.clearCompleted();
  })
}

export default (targetElement, _, events) =&gt; {
  const newApp = targetElement.cloneNode(true);

  newApp.innerHTML = &#39;&#39;;

  newApp.appendChild(getTemplate());

  addEventListeners(newApp, events);

  return newApp;
}</code>
        </deckgo-highlight-code>
<p>사전 준비를 위해 변경한 내용은 아래와 같다. 나머지 코드는 동일하다.</p>
<ul>
<li>단순화를 위해 필터의 구성을 제거했다.</li>
<li><code>init()</code>함수의 이름을 <code>render()</code>로 변경했다.</li>
<li>전체 완료, 완료 삭제 이벤트를 추가했다.</li>
</ul>
<p>시작하기에 앞선 프로젝트의 구조는 이렇다.</p>
<deckgo-highlight-code language="bash" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">root
├── apis.js
├── components
│   ├── App.js
│   ├── Counter.js
│   └── Todos.js
├── index.html
├── index.js
├── registry.js
└── renderDiff.js</code>
        </deckgo-highlight-code>
<br/>
<h2 id="모델-뷰-컨트롤러" style="position:relative;"><a href="#%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC" aria-label="모델 뷰 컨트롤러 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>모델-뷰-컨트롤러</h2>
<blockquote>
<p>상태를 컨트롤러에서 유지하는 것은 상태 관리의 좋은 방법은 아니다.</p>
</blockquote>
<p>애플리케이션의 상태는 모델이 관리한다. 상태 변경 함수 외에도 다음 구성이 있다.</p>
<ul>
<li><code>getState()</code>는 상태 복사본을 불변 객체로서 반환한다.</li>
<li>객체의 깊은 복사를 위해 JSON 메서드를 활용한다. 이 방법은 속도가 느릴 수 있다.  (저자는 <a href="https://www.geeksforgeeks.org/lodash-_-clonedeep-method/">lodash</a>에서 제공하는 <code>cloneDeep()</code>를 추천하고 있다.)</li>
<li>모델은 초기 상태를 받는다. 만약 없다면 기본 값을 사용한다.</li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">// model/model.js

const INITIAL_STATE = {
  todos: [],
}

export default (initalState = INITIAL_STATE) =&gt; {
  const state = cloneDeep(initalState)

  const getState = () =&gt; {
    return Object.freeze(cloneDeep(state))
  }

  const addItem = text =&gt; {
    if (!text) return;

    state.todos.push({
      text,
      completed: false
    })
  }

  const deleteItem = index =&gt; {
    if (index &lt; 0) return

    if (!state.todos[index]) return

    state.todos.splice(index, 1)
  }

  const completeAll = () =&gt; {
    state.todos = state.todos.map(todo =&gt; ({
      ...todo,
      completed: true,
    }))
  }

  const clearCompleted = () =&gt; {
    state.todos = state.todos.filter(t =&gt; !t.completed)
  }

  return {
    addItem,
    deleteItem,
    completeAll,
    clearCompleted,
    getState
  }
}</code>
        </deckgo-highlight-code>
<p>컨트롤러는 모델을 사용할 뿐이다. 모델이 불변 객체를 제공하기 때문에 데이터를 조작하기 위해서는 모델이 제공하는 공개 메서드를 사용해야 한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  highlight-lines="15,34 40 46">
          <code slot="code">import { fetchTodos } from &quot;./apis.js&quot;;

import App from &#39;./components/App.js&#39;;
import Todos from &#39;./components/Todos.js&#39;;
import Counter from &#39;./components/Counter.js&#39;;

import { addComponent, renderRoot } from &#39;./registry.js&#39;;
import renderDiff from &#39;./renderDiff.js&#39;;
import modelFactory from &quot;./model/model.js&quot;;

addComponent(&#39;app&#39;, App);
addComponent(&#39;todos&#39;, Todos);
addComponent(&#39;counter&#39;, Counter);

const model = modelFactory({ todos: fetchTodos() });

const events = {
  addItem: (text) =&gt; {
    model.addItem(text);
    render(model.getState());
  },
  deleteItem: (index) =&gt; {
    model.deleteItem(index);
    render(model.getState());
  },
  completeAll: () =&gt; {
    model.completeAll();
    render(model.getState());
  },
  clearCompleted: () =&gt; {
    model.clearCompleted();
    render(model.getState());
  }
}

const render = (state) =&gt; {
  window.requestAnimationFrame(() =&gt; {
    const app = document.querySelector(&#39;#root&#39;);

    const newApp = renderRoot(app, state, events);

    renderDiff(document.body, app, newApp);
  })
}

render(model.getState());</code>
        </deckgo-highlight-code>
<p>이는 고전적인 MVC 애플리케이션의 구현이다. 이 패턴은 아래와 같은 모양이다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4d624dc6cd8ae6253c2da3c33f922395/7f15f/mvc.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 108.04597701149426%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAABnklEQVQ4y5WVVw/CMAyE+/9/GTwxhIR4QOy9KXsZfZZcpU0KbaQoaUjO8d05RFKgfT6fZLR59tvGSAo2F+h+v8vpdAoGjIqC2aH5fC7dblfH8XgscRyXv6FtPhwOslqtFKTVasnlcpHBYJAKGpXlcDab6c0Wi4UMh0M5Ho/lAbOgAPb7fWk2m7r2fr+TfVFZQV6vlwLSlsulL0rWEiEruHP4gzeU7nQ6cj6ffVHcg1lls0FIbzqd6jcC5d7wer0qwfTn8/mTgmq1Kr1eT9brtWcrveF2u1VfEZmobGROOgSiY5HH46H8kSqACIPansrmLUAB3+120m639TDEW8cy7IHDer2eAFpGqZRvt5tMJhMFh/C8hrkBBYhuJZik7ObPZuMF8vOEIWCtVsuvZfeWcPfPRqSYLTmvlm2BcnI5CT1X3D5kmdQN7YfNZvMzbasWBApVkgfIZsRhDDUCoji2AdStFO9xcE1OShxESeaj0UgajUaicKVS0XVAU7YJKWXp4k3rOGC/36tN8KeBIWTuAxt6FMo+bdG/P6Qi3eXwC6/vuhC+sw+ZAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="mvc"
        title="mvc"
        src="/static/4d624dc6cd8ae6253c2da3c33f922395/31198/mvc.png"
        srcset="/static/4d624dc6cd8ae6253c2da3c33f922395/fe9c7/mvc.png 174w,
/static/4d624dc6cd8ae6253c2da3c33f922395/39e45/mvc.png 347w,
/static/4d624dc6cd8ae6253c2da3c33f922395/31198/mvc.png 694w,
/static/4d624dc6cd8ae6253c2da3c33f922395/ee9b6/mvc.png 1041w,
/static/4d624dc6cd8ae6253c2da3c33f922395/c1bea/mvc.png 1388w,
/static/4d624dc6cd8ae6253c2da3c33f922395/7f15f/mvc.png 1530w"
        sizes="(max-width: 694px) 100vw, 694px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<br/>
<h2 id="옵저버블-모델" style="position:relative;"><a href="#%EC%98%B5%EC%A0%80%EB%B2%84%EB%B8%94-%EB%AA%A8%EB%8D%B8" aria-label="옵저버블 모델 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>옵저버블 모델</h2>
<p>MVC 기반으로 작성한 코드가 최적의 솔루션이라 할 수는 없는데 그 이유는</p>
<ul>
<li>상태 변경 후 렌더링을 수동으로 호출해야 한다.</li>
<li>동작이 상태를 변경하지 않을 때에도 <code>render()</code>를 호출한다.</li>
</ul>
<p>저자는 이러한 문제 해결을 위해 옵저버 패턴을 소개한다. 옵저버블 모델은 게터 대신 <code>addChangeListener()</code>라는 메서드를 제공한다.</p>
<ul>
<li>모델은 리스너를 등록, 삭제할 수 있는 수단을 제공한다. - <code>addChangeListener()</code></li>
<li>리스너를 실행하여 상태 변경을 통지한다. - <code>invokeListeners()</code></li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  highlight-lines="12,26 36 36 55 61">
          <code slot="code">// model/model.js

const INITIAL_STATE = {
  todos: [],
}

export default (initalState = INITIAL_STATE) =&gt; {
  const state = cloneDeep(initalState)

  let listeners = []

  const addChangeListener = (listener) =&gt; {
    listeners.push(listener);

    listener(freeze(state));

    return () =&gt; {
      listeners = listeners.filter(l =&gt; l !== listener);
    }
  }

  const invokeListeners = () =&gt; {
    const data = freeze(state);

    listeners.forEach(l =&gt; l(data));
  }

  const addItem = text =&gt; {
    if (!text) return;

    state.todos.push({
      text,
      completed: false
    })

    invokeListeners();
  }

  const deleteItem = index =&gt; {
    if (index &lt; 0) return

    if (!state.todos[index]) return

    state.todos.splice(index, 1)

    invokeListeners();
  }

  const completeAll = () =&gt; {
    state.todos = state.todos.map(todo =&gt; ({
      ...todo,
      completed: true,
    }))

    invokeListeners();
  }

  const clearCompleted = () =&gt; {
    state.todos = state.todos.filter(t =&gt; !t.completed)

    invokeListeners();
  }

  return {
    addItem,
    deleteItem,
    completeAll,
    clearCompleted,
    addChangeListener
  }
}</code>
        </deckgo-highlight-code>
<p>이벤트 등록은 더 이상 컨트롤러의 관심사가 아니다. 모델에서 제공하는 메서드를 이벤트 핸들러에서 사용한다. 컨트롤러는 <code>render()</code>를 직접 실행하지 않고 리스너로 등록할 뿐이다. 코드가 훨씬 간결해졌다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">// ... 생략

const model = modelFactory({ todos: fetchTodos() });

const {
  addChangeListener,
  ...events
} = model;

const render = (state) =&gt; {
  window.requestAnimationFrame(() =&gt; {
    const app = document.querySelector(&#39;#root&#39;);

    const newApp = renderRoot(app, state, events);

    renderDiff(document.body, app, newApp);
  })
}

// 리스너 전달
addChangeListener(render);</code>
        </deckgo-highlight-code>
<blockquote>
<p>옵저버블 모델은 모델의 공개 인터페이스를 수정하지 않고 컨트롤러에 새로운 기능을 추가하는 데 유용하다.</p>
</blockquote>
<p>무엇을 어떻게 할지는 컨트롤러가 정한다. 모델은 등록된 리스너를 실행할 뿐이다. 만약 상태 변경을 알리는 간단한 로거를 추가하고 싶다면 리스너를 추가하기만 하면 된다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">addChangeListener(state =&gt; {
  console.log(`현재 시각 (${new Date()})`, state)
})</code>
        </deckgo-highlight-code>
<br/>
<h2 id="반응형-프로그래밍" style="position:relative;"><a href="#%EB%B0%98%EC%9D%91%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D" aria-label="반응형 프로그래밍 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>반응형 프로그래밍</h2>
<blockquote>
<p>간단히 말하면 반응형 패러다임의 구현은 애플리케이션이 모델 변경, HTTP 요청, 사용자 동작, 탐색 등과 같은 이벤트를 방출할 수 있는 옵저버블로 동작하도록 구현하는 것을 의미한다.</p>
</blockquote>
<p>반응형 프로그래밍은 내게 아직 낯선 주제이다. 저자는 반응형 프로그래밍을 소개하는 안드레 스탈츠의 <a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754">글</a>을 추천한다. 위에서 만든 옵저버블 모델은 반응형 상태 관리의 예라고 할 수 있다. 하지만 여러 모델 객체를 갖고 있다면 옵저버블을 만들 수 있는 더 쉬운 방법이 필요하다. 이런 경우에 사용해 볼 수 있는 옵저버블 팩토리를 만들어 본다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">// model/observable.js

export default (model, stateGetter) =&gt; {
  let listeners = []

  const addChangeListener = cb =&gt; {
    listeners.push(cb)
    cb(freeze(stateGetter()))

    return () =&gt; {
      listeners = listeners.filter(listener =&gt; listener !== cb)
    }
  }

  const invokeListeners = () =&gt; {
    const data = freeze(stateGetter())
    listeners.forEach(listener =&gt; listener(data))
  }

  const wrapAction = originalAction =&gt; {
    return (...args) =&gt; {
      const value = originalAction(...args)
      invokeListeners()
      return value
    }
  }

  const baseProxy = {
	
    addChangeListener
  }

  return Object
    .keys(model)
    .filter(key =&gt; typeof model[key] === &#39;function&#39;)
    .reduce((proxy, key) =&gt; {
      const action = model[key]

      return {
        ...proxy,
        [key]: wrapAction(action)
      }
    }, baseProxy)
}</code>
        </deckgo-highlight-code>
<p>옵저버블 팩토리는 모델의 상태 변경 함수를 래핑하여 상태가 변경될 때마다 변경 사실을 알리도록 한다.<br>
이제 모델은 옵저버블 객체 생성을 위한 로직을 다루지 않는다. 대신 옵저버블 팩토리로 래핑된 자신을 반환한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  highlight-lines="47">
          <code slot="code">// model/model.js

import observableFactory from &quot;./observable.js&quot;

const INITIAL_STATE = {
  todos: [],
}

export default (initalState = INITIAL_STATE) =&gt; {
  const state = cloneDeep(initalState)

  const addItem = text =&gt; {
    if (!text) return;

    state.todos.push({
      text,
      completed: false
    })
  }

  const deleteItem = index =&gt; {
    if (index &lt; 0) return

    if (!state.todos[index]) return

    state.todos.splice(index, 1);
  }

  const completeAll = () =&gt; {
    state.todos = state.todos.map(todo =&gt; ({
      ...todo,
      completed: true,
    }))
  }

  const clearCompleted = () =&gt; {
    state.todos = state.todos.filter(t =&gt; !t.completed)
  }

  const model = {
    addItem,
    deleteItem,
    completeAll,
    clearCompleted,
  }

  return observableFactory(model, () =&gt; state);
}</code>
        </deckgo-highlight-code>
<h2 id="네이티브-프록시" style="position:relative;"><a href="#%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C-%ED%94%84%EB%A1%9D%EC%8B%9C" aria-label="네이티브 프록시 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>네이티브 프록시</h2>
<p>자바스크립트의 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy API</a>를 사용하면 객체에 대한 프록시를 만들 수 있다. 프록시란 ‘대리’의 의미로 여기서 프록시 객체는 어떤 객체의 대리인 역할을 수행한다. 객체가 갖는 기본적인 작업을 가로채서 그 방법을 다시 정의한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">const user = {
  id: &#39;1&#39;,
  name: &#39;aiden&#39;,
}

const handler = {
  get(target, prop) {
    return target[prop] + &#39; by Proxy&#39;;
  }
}

const userProxy = new Proxy(user, handler);

console.log(userProxy.id); // 1 by Proxy
console.log(userProxy.name); // aiden by Proxy</code>
        </deckgo-highlight-code>
<p>프록시를 활용한 옵저버블 팩토리를 좀 더 간단하게 만들 수 있다. 프록시 생성자는 대상 객체와 핸들러 객체를 받는다. 여기서 대상 객체는 상태가 되고 핸들러 객체는 상태가 변경할 때마다 변경 사실을 알리는 세터를 포함한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">export default (initialState) =&gt; {
  let listeners = [];

  const proxy = new Proxy(cloneDeep(initialState), {
    set: (target, prop, value) =&gt; {
      target[prop] = value
      listeners.forEach(listener =&gt; listener(freeze(proxy)))
      return true
    }
  })

  proxy.addChangeListener = cb =&gt; {
    listeners.push(cb)
    cb(freeze(proxy))
    return () =&gt; {
      listeners = listeners.filter(listener =&gt; listener !== cb)
    }
  }

  return proxy
}</code>
        </deckgo-highlight-code>
<p>이제 팩토리는 모델 전체를 래핑하는 대신 상태의 프록시를 반환한다. 모델은 상태를 직접 변경할 수 없고 프록시를 통해 변경해야 한다. 그렇기 때문에 상태를 직접 수정하는 메서드를 사용할 수 없음에 유의해야 한다. 변경을 위해서는 새로운 속성으로 교체해야 한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  highlight-lines="8 13,16">
          <code slot="code">import observableFactory from &quot;./observable.js&quot;

const INITIAL_STATE = {
  todos: [],
}

export default (initalState = INITIAL_STATE) =&gt; {
  const state = observableFactory(initalState);

  const addItem = text =&gt; {
    if (!text) return;

    state.todos = [
      ...state.todos,
      { text, completed: false }
    ]
  }

  const deleteItem = index =&gt; {
    if (index &lt; 0) return

    if (!state.todos[index]) return

    state.todos = state.todos.filter((todo, i) =&gt; {
      return i !== index
    });
  }

  const completeAll = () =&gt; {
    state.todos = state.todos.map(todo =&gt; ({
      ...todo,
      completed: true,
    }))
  }

  const clearCompleted = () =&gt; {
    state.todos = state.todos.filter(t =&gt; !t.completed)
  }

  return {
    addChangeListener: state.addChangeListener,
    addItem,
    deleteItem,
    completeAll,
    clearCompleted,
  }
}</code>
        </deckgo-highlight-code>
<br/>
<h2 id="이벤트-버스" style="position:relative;"><a href="#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%B2%84%EC%8A%A4" aria-label="이벤트 버스 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>이벤트 버스</h2>
<blockquote>
<p>이벤트 버스는 이벤트 주도 아키텍쳐(Event-Driven Architecture)를 구현하는 하나의 방법이다.</p>
</blockquote>
<p>이벤트 버스 패턴을 사용해 상태를 관리하는 방법이다. 리덕스를 사용해 봤다면 이 패턴과 아주 유사하다는 사실을 알 수 있다. 이벤트는 발생한 상황을 식별하는 이름과 이벤트 처리를 위한 정보를 담는 payload를 포함한다. (마치 리덕스의 액션과 같다).</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">const event = { type: &#39;ADD_ITEM&#39;, payload: item }</code>
        </deckgo-highlight-code>
<p>이벤트 버스는 이벤트를 받아 처리한다. 기본 개념은 단일 객체가 모든 이벤트를 처리한다는 것이다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/6f1d008c688bb71e55ec23f733dfc8e6/06868/eventbus.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 81.60919540229885%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABiElEQVQ4y5WU247CMAxE+f8PLEVCiFblTqHcoYUaHWsHJVn2YS1ZJYkz9owdBvZjfd/bf4z4tm0tvT8IF8/n03a7nS2XS6vr2rquc99sNr63Wq3ser3a6/Wy9Xpt8/ncZrOZ7wknAmyaxgGPx6Pt93s7HA4eDCCXt9utnz8eDwcqisKm06nHfQUk8+l0sqqqvELW2P1+98skUuztdrOyLCOwCFCOQQeqSoJJgrAAqkSmSMNvzYAetEJDAoHLkEKAEWUC0QoaOPTQ6nw+uwSXy8WTsMca6pzBhC+SKJkDcoEgDvgNOBfRh+5SCZRZywVKAfwm/gPIQUpHNhwOvZNULQ1TYx6pPqpQI0I2VcEYkVk0VVlYJXclS9QU6IoqzhBnWebawQAAvqyRINRXDfw1h6FBgUFOu03VJP/2FKOnl84iw01D0nlcLBbRUwvvfADDQzVpPB67M3+aNaobjUbeIKgq/k9AfdEIp7toRhepEF0nk4nlee776SuJANN/HTUp1Av62g8bEdobQJbdWPjbpysAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="eventbus"
        title="eventbus"
        src="/static/6f1d008c688bb71e55ec23f733dfc8e6/31198/eventbus.png"
        srcset="/static/6f1d008c688bb71e55ec23f733dfc8e6/fe9c7/eventbus.png 174w,
/static/6f1d008c688bb71e55ec23f733dfc8e6/39e45/eventbus.png 347w,
/static/6f1d008c688bb71e55ec23f733dfc8e6/31198/eventbus.png 694w,
/static/6f1d008c688bb71e55ec23f733dfc8e6/ee9b6/eventbus.png 1041w,
/static/6f1d008c688bb71e55ec23f733dfc8e6/c1bea/eventbus.png 1388w,
/static/6f1d008c688bb71e55ec23f733dfc8e6/06868/eventbus.png 1974w"
        sizes="(max-width: 694px) 100vw, 694px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>이벤트 버스는 옵저버블 팩토리와 달리 모델을 래핑하지 않고 모델을 받아 사용한다. <code>dispatch()</code>는 이벤트에 따라 상태를 갱신하고 상태의 변경을 알린다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">// model/eventBus.js

export default (model) =&gt; {
  let listeners = []
  let state = model()

  const subscribe = listener =&gt; {
    listeners.push(listener)

    return () =&gt; {
      listeners = listeners.filter(l =&gt; l !== listener)
    }
  }

  const invokeSubscribers = () =&gt; {
    const data = freeze(state)
    listeners.forEach(listener =&gt; l(data))
  }

  const dispatch = event =&gt; {
    const newState = model(state, event)

    if (!newState) {
      throw new Error(&#39;model should always return a value&#39;)
    }

    if (newState === state) {
      return
    }

    state = newState

    invokeSubscribers()
  }

  return {
    subscribe,
    dispatch,
    getState: () =&gt; freeze(state)
  }
}</code>
        </deckgo-highlight-code>
<p>모델은 이벤트에 따라 매핑된 메서드를 갖는다. 각 메서드는 직접 상태를 조작한다. 모델을 사용하는 곳에서는 이전 상태와 함께 이벤트 객체를 전달해야 한다. 유효한 이벤트라면 모델은 새로운 상태를 반환한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  highlight-lines="54,75">
          <code slot="code">// model/model.js

const INITIAL_STATE = {
  todos: [],
}

const addItem = (state, event) =&gt; {
  const { text } = event.payload;

  if (!text) return;

  return {
    ...state,
    todos: [
      ...state.todos,
      { text, completed: false }
    ]
  }
}

const deleteItem = (state, event) =&gt; {
  const { index } = event.payload;

  if (index &lt; 0) return state;

  if (!state.todos[index]) {
    return state;
  }

  return {
    ...state,
    todos: state.todos.filter((_, i) =&gt; i !== index)
  }
}

const completeAll = (state, event) =&gt; {

  return {
    ...state,
    todos: state.todos.map(todo =&gt; ({
      ...todo,
      completed: true,
    }))
  }
}

const clearCompleted = (state, event) =&gt; {
  return {
    ...state,
    todos: state.todos.filter(t =&gt; !t.completed)
  }
}

const methods = {
  ADD_ITEM: addItem,
  DELETE_ITEM: deleteItem,
  COMPLETE_ALL: completeAll,
  CLEAR_COMPLETED: clearCompleted
}

export default (initalState = INITIAL_STATE) =&gt; {
  return (prevState, event) =&gt; {
    if (!prevState) {
      return cloneDeep(initalState)
    }

    const currentModifier = methods[event.type]

    if (!currentModifier) {
      return prevState
    }

    return currentModifier(prevState, event)
  }
}</code>
        </deckgo-highlight-code>
<p>컨트롤러는 이벤트 버스를 사용한다. <code>render()</code>를 리스너로 등록하고 처음에만 <code>render()</code>를 직접 실행한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  highlight-lines="9,10 16 22 24">
          <code slot="code">// index.js

// import 구문 생략

addComponent(&#39;app&#39;, App);
addComponent(&#39;todos&#39;, Todos);
addComponent(&#39;counter&#39;, Counter);

const model = modelFactory({ todos: fetchTodos() });
const eventBus = eventBusFactory(model);

const render = (state) =&gt; {
  window.requestAnimationFrame(() =&gt; {
    const app = document.querySelector(&#39;#root&#39;);

    const newApp = renderRoot(app, state, eventBus.dispatch);

    renderDiff(document.body, app, newApp);
  })
}

eventBus.subscribe(render);

render(eventBus.getState());</code>
        </deckgo-highlight-code>
<p>이벤트 생성자는 이벤트 객체를 생성한다. 상태 변경에 필요한 정보가 있다면 이벤트 타입과 함께 payload에 정보를 실어야 한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  >
          <code slot="code">// model/eventCreator.js

const EVENT_TYPES = Object.freeze({
  ADD_ITEM: &#39;ADD_ITEM&#39;,
  DELETE_ITEM: &#39;DELETE_ITEM&#39;,
  COMPLETE_ALL: &#39;COMPLETE_ALL&#39;,
  CLEAR_COMPLETED: &#39;CLEAR_COMPLETED&#39;
})

export default {
  addItem: (text) =&gt; ({
    type: EVENT_TYPES.ADD_ITEM,
    payload: text
  }),
  deleteItem: (index) =&gt; ({
    type: EVENT_TYPES.DELETE_ITEM,
    payload: index
  }),
  completeAll: () =&gt; ({
    type: EVENT_TYPES.COMPLETE_ALL
  }),
  clearCompleted: () =&gt; ({
    type: EVENT_TYPES.CLEAR_COMPLETED
  }),
}</code>
        </deckgo-highlight-code>
<p>예를 들어, App 컴포넌트는 <code>dispatch()</code>를 통해 이벤트 발생을 알린다. 이 때 <code>dispatch()</code>의 인자로 전달하는 이벤트 객체는 이벤트 생성자로 만든다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark" line-numbers="true"  highlight-lines="1 16,17 23,24 28,29">
          <code slot="code">import eventCreator from &quot;../model/eventCreator.js&quot;;

let template;

const getTemplate = () =&gt; {
  if (!template) {
    template = document.getElementById(&#39;todo-app&#39;);
  }

  return template.content.firstElementChild.cloneNode(true);
}

const addEventListeners = (target, dispatch) =&gt; {
  target.querySelector(&#39;.new-todo&#39;).addEventListener(&#39;keypress&#39;, (e) =&gt; {
    if (e.key === &#39;Enter&#39;) {
      const event = eventCreator.addItem({ text: e.target.value });
      dispatch(event);
      e.target.value = &#39;&#39;
    }
  })

  target.querySelector(&#39;.completed-all&#39;).addEventListener(&#39;click&#39;, () =&gt; {
    const event = eventCreator.completeAll();
    dispatch(event);
  })

  target.querySelector(&#39;.clear-completed&#39;).addEventListener(&#39;click&#39;, () =&gt; {
    const event = eventCreator.clearCompleted();
    dispatch(event);
  })
}

export default (targetElement, _, dispatch) =&gt; {
  const newApp = targetElement.cloneNode(true);

  newApp.innerHTML = &#39;&#39;;

  newApp.appendChild(getTemplate());

  addEventListeners(newApp, dispatch);

  return newApp;
}</code>
        </deckgo-highlight-code>
<br/>
<h2 id="상태-관리-전략-비교" style="position:relative;"><a href="#%EC%83%81%ED%83%9C-%EA%B4%80%EB%A6%AC-%EC%A0%84%EB%9E%B5-%EB%B9%84%EA%B5%90" aria-label="상태 관리 전략 비교 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>상태 관리 전략 비교</h2>
<p>지금까지 다뤘던 상태 관리 전략을 간단하게 비교한다. 어떤 전략이 항상 좋다고 할 수는 없다.</p>
<h3 id="mvc" style="position:relative;"><a href="#mvc" aria-label="mvc permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MVC</h3>
<p>MVC 패턴은 구현이 쉽고 관심사 분리에도 좋다. 그러나 모델, 뷰, 컨트롤러 중 어디에도 넣기 어려운 회색 영역이 존재하기 쉽다. 그래서 엄격하게 구현하는 것에 어려움이 따른다. 확장성도 좋다고 할 수 없다.</p>
<h3 id="반응형-프로그래밍-1" style="position:relative;"><a href="#%EB%B0%98%EC%9D%91%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-1" aria-label="반응형 프로그래밍 1 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>반응형 프로그래밍</h3>
<p>추상화를 통해 코드의 일관성을 유지할 수 있다. 하지만 모든 객체를 옵저버블한 객체로서 다루는 것은 쉽지 않다. 게다가 애플리케이션이 커지면서 추상화가 감당하기 어려운 내용이 생긴다면 확장성에 문제가 발생할 수 있다.</p>
<h3 id="이벤트-버스-1" style="position:relative;"><a href="#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%B2%84%EC%8A%A4-1" aria-label="이벤트 버스 1 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>이벤트 버스</h3>
<p>옵저버블 패턴에 비해 상대적으로 구현이 단순하고 한 곳에서 모든 이벤트를 처리하기에 확장성도 좋다. 하지만 이벤트 발생에 따라 화면에 변경된 데이터가 반영되기까지 여러 단계를 거쳐야 하는 다변성을 갖는다. 이런 이유때문에 내부적으로 다른 상태 관리 전략을 채택하는 곳이 있다면 결국 코드의 일관성을 지키기 어렵다.</p>
<br/>
<h2 id="출처" style="position:relative;"><a href="#%EC%B6%9C%EC%B2%98" aria-label="출처 permalink" class="header-anchor before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>출처</h2>
<p><em>프란세스코 스트라츨로, <a href="https://search.shopping.naver.com/book/search?bookTabType=ALL&#x26;pageIndex=1&#x26;pageSize=40&#x26;query=%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%20%EC%97%86%EB%8A%94%20%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C%20%EA%B0%9C%EB%B0%9C&#x26;sort=REL">『프레임워크 없는 프론트엔드 개발』</a>, 에이콘 출판(2021.01.21.)</em></p></section></main><nav class="styles__Nav-sc-4114r5-7 jpfzUv"><div><a href="/frameworkless-6"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="duration-100 ease-in transition -rotate-90 text-gray-30 dark:text-gray-50 inline group-focus:text-link dark:group-focus:text-link-dark" style="min-width:20px;min-height:20px"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg><div><h3>PREVIOUS</h3><span>6장_라우터</span></div></a></div><div><a href="/datepicker-with-regex"><div><h3>NEXT</h3><span>정규 표현식으로 날짜 자동 포맷팅하기</span></div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class="duration-100 ease-in transition -rotate-90 text-gray-30 dark:text-gray-50 inline group-focus:text-link dark:group-focus:text-link-dark" style="min-width:20px;min-height:20px"><g fill="none" fill-rule="evenodd" transform="translate(-446 -398)"><path fill="currentColor" fill-rule="nonzero" d="M95.8838835,240.366117 C95.3957281,239.877961 94.6042719,239.877961 94.1161165,240.366117 C93.6279612,240.854272 93.6279612,241.645728 94.1161165,242.133883 L98.6161165,246.633883 C99.1042719,247.122039 99.8957281,247.122039 100.383883,246.633883 L104.883883,242.133883 C105.372039,241.645728 105.372039,240.854272 104.883883,240.366117 C104.395728,239.877961 103.604272,239.877961 103.116117,240.366117 L99.5,243.982233 L95.8838835,240.366117 Z" transform="translate(356.5 164.5)"></path><polygon points="446 418 466 418 466 398 446 398"></polygon></g></svg></a></div></nav></article><aside class="TOC__Container-sc-1ylks3q-0 gdYmwG"><h2>ON THIS PAGE</h2><ul><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#상태-관리">상태 관리</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#사전-준비">사전 준비</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#모델-뷰-컨트롤러">모델-뷰-컨트롤러</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#옵저버블-모델">옵저버블 모델</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#반응형-프로그래밍">반응형 프로그래밍</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#네이티브-프록시">네이티브 프록시</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#이벤트-버스">이벤트 버스</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#상태-관리-전략-비교">상태 관리 전략 비교</a></li><li class="TOC__List-sc-1ylks3q-1 hEmMwG"><a href="/frameworkless-7/#mvc">MVC</a></li><li class="TOC__List-sc-1ylks3q-1 hEmMwG"><a href="/frameworkless-7/#반응형-프로그래밍-1">반응형 프로그래밍</a></li><li class="TOC__List-sc-1ylks3q-1 hEmMwG"><a href="/frameworkless-7/#이벤트-버스-1">이벤트 버스</a></li><li class="TOC__List-sc-1ylks3q-1 dxAYTv"><a href="/frameworkless-7/#출처">출처</a></li></ul></aside></section></main><footer class="Footer__Container-sc-13p6nst-0 hmzBgr"><section><span>© rheech22 2022</span></section></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0DM3BCWTDS"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0DM3BCWTDS', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/frameworkless-7";window.___webpackCompilationHash="96796d8af97ec5b32627";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-dadc8b59b893048b70af.js"],"app":["/app-32a26e8a7aa6bb010d25.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-8fd8d54da84af1dc8b55.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-f6c6115b80c49c279975.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-d98e242543c9ad465a2c.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-63b570cb48302c1cad27.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-b18c67477ad71dc18a6a.js"]};/*]]>*/</script><script src="/polyfill-dadc8b59b893048b70af.js" nomodule=""></script><script src="/app-32a26e8a7aa6bb010d25.js" async=""></script><script src="/framework-77ed06daf83b64477fde.js" async=""></script><script src="/webpack-runtime-185dc6e97b51c855e8c7.js" async=""></script></body></html>