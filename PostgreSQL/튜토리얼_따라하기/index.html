<!DOCTYPE html><html lang="ko-KR"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.1"/><meta name="theme-color" content="#161b22"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" data-gatsby-head="true"/><meta name="description" content="DB 생성 mydb라는 이름으로 데이터베이스 생성 DB 접속 다음과 같이 나오면 성공 마지막 줄에 # 기호가 있다면 superuser라는 의미다. 아닌 경우에는 # 대신 &gt; 기호를 출력한다. 튜토리얼을 따라 아래 명령어를 입력했다. psql에는 \로…" data-gatsby-head="true"/><meta name="image" data-gatsby-head="true"/><meta name="og:title" content="conerstone" data-gatsby-head="true"/><meta name="og:description" content="DB 생성 mydb라는 이름으로 데이터베이스 생성 DB 접속 다음과 같이 나오면 성공 마지막 줄에 # 기호가 있다면 superuser라는 의미다. 아닌 경우에는 # 대신 &gt; 기호를 출력한다. 튜토리얼을 따라 아래 명령어를 입력했다. psql에는 \로…" data-gatsby-head="true"/><meta name="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="튜토리얼 따라하기 | conerstone" data-gatsby-head="true"/><meta name="twitter:url" content="https://rheech22.github.io/PostgreSQL/튜토리얼_따라하기" data-gatsby-head="true"/><meta name="twitter:description" content="DB 생성 mydb라는 이름으로 데이터베이스 생성 DB 접속 다음과 같이 나오면 성공 마지막 줄에 # 기호가 있다면 superuser라는 의미다. 아닌 경우에는 # 대신 &gt; 기호를 출력한다. 튜토리얼을 따라 아래 명령어를 입력했다. psql에는 \로…" data-gatsby-head="true"/><meta name="twitter:image" content="https://rheech22.github.ioundefined" data-gatsby-head="true"/><meta name="twitter:creator" content="@@rheech22" data-gatsby-head="true"/><meta name="naver-site-verification" content="45d911481aa02bda5a391b5f2474bc61356de3f8" data-gatsby-head="true"/><meta http-equiv="Permissions-Policy" content="interest-cohort=(), user-id=()" data-gatsby-head="true"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0DM3BCWTDS"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0DM3BCWTDS', {"send_page_view":false});
      }
      </script><style data-styled="" data-styled-version="6.1.14">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,menu,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}/*!sc*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;}/*!sc*/
*[hidden]{display:none;}/*!sc*/
body{line-height:1;}/*!sc*/
menu,ol,ul{list-style:none;}/*!sc*/
blockquote,q{quotes:none;}/*!sc*/
blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}/*!sc*/
table{border-collapse:collapse;border-spacing:0;}/*!sc*/
@font-face{font-family:BlinkMacSystemFont;src:local('※');font-weight:400;font-style:normal;unicode-range:U+0041-005A,U+0061-007A,U+0030-0039;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
html,body{scroll-behavior:smooth;margin:0;}/*!sc*/
body{font-family:'Spoqa Han Sans',BlinkMacSystemFont,Arial,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;width:100%;background-color:#000000;color:#C9D1D9;min-height:100vh;line-height:1.5;transition:all .5s;}/*!sc*/
body #gatsby-focus-wrapper{max-width:1440px;padding:0 15px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column;}/*!sc*/
body main{font-size:16px;width:100%;}/*!sc*/
body a{color:unset;}/*!sc*/
data-styled.g2[id="sc-global-hGiQiZ1"]{content:"sc-global-hGiQiZ1,"}/*!sc*/
.iETjur{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;border-top:1px solid #222222;transition:border-color 0.5s;margin-top:auto;width:100%;font-size:12px;text-align:center;font-weight:400;color:#bac4ce;}/*!sc*/
.iETjur>section{padding:48px 8px;}/*!sc*/
data-styled.g3[id="Footer__Container-sc-13p6nst-0"]{content:"iETjur,"}/*!sc*/
.emEIsO:focus{outline:none;}/*!sc*/
data-styled.g5[id="Textbox__Input-sc-vlag4q-0"]{content:"emEIsO,"}/*!sc*/
.dqUuBy{border-radius:8px;width:140px;height:48px;font-weight:400;position:relative;transition:all 0.5s;}/*!sc*/
@media (min-width: 768px){.dqUuBy:focus-within{width:544px;}.dqUuBy:focus-within>ul{display:block;}}/*!sc*/
.dqUuBy>input{border:none;border-radius:8px;padding:0 12px;width:100%;height:100%;background-color:#222222;color:#fff;font-size:14px;transition:background-color 0.5s;}/*!sc*/
.dqUuBy>input::placeholder{color:#a7a7a7;}/*!sc*/
.dqUuBy>input:focus{color:#fff;background-color:#383838;}/*!sc*/
@media (min-width: 768px){.dqUuBy>input:focus{border-bottom-left-radius:6px;border-bottom-right-radius:6px;}}/*!sc*/
.dqUuBy>input:focus::placeholder{color:#757D86;}/*!sc*/
data-styled.g6[id="SearchBar__Container-sc-6n5xnu-0"]{content:"dqUuBy,"}/*!sc*/
.TCGeX{display:flex;flex-direction:row;align-items:center;justify-content:normal;position:sticky;top:0;width:100%;min-height:71px;opacity:0.9;background-color:hsla(0, 0%, 0%, 0.5);backdrop-filter:blur(20px);z-index:1;transition:all 0.5s;}/*!sc*/
data-styled.g8[id="Header__Container-sc-z8t49p-0"]{content:"TCGeX,"}/*!sc*/
.bXyKfJ{display:flex;flex-direction:row;align-items:center;justify-content:center;min-width:38px;height:38px;transition:all 2s;}/*!sc*/
@media (min-width: 768px){.bXyKfJ{display:none;}}/*!sc*/
.bXyKfJ svg{width:20px;height:20px;transform:translateY(1px);}/*!sc*/
.bXyKfJ svg g>path{stroke:#f0f6fc;}/*!sc*/
data-styled.g9[id="Header__HomeButton-sc-z8t49p-1"]{content:"bXyKfJ,"}/*!sc*/
.jXItFY{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;display:none;color:#f0f6fc;text-decoration:none;transition:color 2s;}/*!sc*/
@media (min-width: 768px){.jXItFY{display:block;}}/*!sc*/
.jXItFY>h1{font-size:24px;font-weight:600;white-space:nowrap;}/*!sc*/
data-styled.g10[id="Header__Title-sc-z8t49p-2"]{content:"jXItFY,"}/*!sc*/
.iiXbKi{position:relative;z-index:0;margin-right:8px;border:none;border-radius:50%;background:none;min-width:38px;min-height:38px;overflow:hidden;cursor:pointer;transition:box-shadow 2s;}/*!sc*/
@media (min-width: 768px){.iiXbKi{margin-left:8px;}}/*!sc*/
@media (hover:hover){.iiXbKi:hover{box-shadow:rgb(109,110,129) 1.5px 1.5px 3px 0px inset,rgba(109,110,129,0.5) -1.5px -1.5px 3px 1px inset;background-image:linear-gradient( to right bottom,#000000,#211e1f,#3b353b,#55505a,#6d6c7b,#6d6e81,#6b7187,#69748d,#535c78,#3e4563,#2b304e,#181b3a );}}/*!sc*/
data-styled.g11[id="Header__Button-sc-z8t49p-3"]{content:"iiXbKi,"}/*!sc*/
.cKuHdH{position:absolute;top:19px;right:-32px;border:1px dotted transparent;border-radius:50%;width:100px;height:100px;transition:border-color 2s;}/*!sc*/
@media (hover:hover){.cKuHdH:hover{border-color:#C9D1D9;}.cKuHdH:hover svg path{fill:ivory;}}/*!sc*/
.cKuHdH>div{position:absolute;top:40px;right:40px;border-radius:50%;border:none;padding:0;width:20px;height:20px;background:none;outline:none;}/*!sc*/
.cKuHdH>div:first-of-type{animation:ZmWYm 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.cKuHdH>div:last-of-type{animation:dGgAwC 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.cKuHdH>div svg{width:20px;height:20px;transform:rotate(90deg);}/*!sc*/
.cKuHdH>div svg path{fill:#fff;}/*!sc*/
data-styled.g12[id="Header__CircleLayout-sc-z8t49p-4"]{content:"cKuHdH,"}/*!sc*/
.ccoDNl{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-left:auto;font-weight:500;}/*!sc*/
.ccoDNl>a{text-decoration:none;}/*!sc*/
.ccoDNl>a:hover{color:#F8EA18;}/*!sc*/
data-styled.g13[id="Header__Index-sc-z8t49p-5"]{content:"ccoDNl,"}/*!sc*/
.kBuzcZ{position:sticky;top:163px;right:0px;display:none;min-width:fit-content;height:fit-content;overflow-y:scroll;color:#C9D1D9;}/*!sc*/
.kBuzcZ::-webkit-scrollbar{display:none;}/*!sc*/
.kBuzcZ h2{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-bottom:12px;padding:8px 10px;font-size:14px;font-weight:500;letter-spacing:0.025em;transition:all 0.5s;}/*!sc*/
.kBuzcZ ul{padding-left:20px;}/*!sc*/
.kBuzcZ li+li{margin-top:8px;}/*!sc*/
data-styled.g15[id="TOC__Container-sc-1ylks3q-0"]{content:"kBuzcZ,"}/*!sc*/
.iIZXdw{display:flex;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:8px;padding-right:10px;max-width:215px;min-width:130px;width:100%;background-color:none;color:#8b949e;font-size:13px;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.iIZXdw:hover:hover{background-color:#222222;}}/*!sc*/
.iIZXdw a{padding:7px 0;width:100%;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
data-styled.g16[id="TOC__List-sc-1ylks3q-1"]{content:"iIZXdw,"}/*!sc*/
.bCIftt{display:grid;grid-template-columns:auto;grid-template-rows:auto auto;grid-template-areas:'post' 'post' 'comments';}/*!sc*/
@media (min-width: 1080px){.bCIftt{grid-template-columns:10fr 10fr 1fr;grid-template-rows:auto auto;grid-template-areas:'post post toc' 'post post toc' 'comments comments .';}}/*!sc*/
.bCIftt>section{grid-area:post;}/*!sc*/
@media (min-width: 768px){.bCIftt>section{max-width:826px;}}/*!sc*/
.bCIftt>aside{grid-area:toc;}/*!sc*/
@media (min-width: 1280px){.bCIftt>aside{display:flex;flex-direction:column;align-items:flex-start;justify-content:normal;}}/*!sc*/
.bCIftt>div{grid-area:comments;margin:0 auto;}/*!sc*/
@media (min-width: 768px){.bCIftt>div{max-width:826px;}}/*!sc*/
data-styled.g17[id="styles__Container-sc-4114r5-0"]{content:"bCIftt,"}/*!sc*/
.gUrOWl{display:flex;flex-direction:row;align-items:normal;justify-content:center;margin:72px auto 72px auto;height:auto;width:100%;}/*!sc*/
data-styled.g18[id="styles__Section-sc-4114r5-1"]{content:"gUrOWl,"}/*!sc*/
.cxztvr{padding:20px 0;width:100%;display:flex;flex-direction:column;align-items:normal;justify-content:normal;}/*!sc*/
data-styled.g19[id="styles__Article-sc-4114r5-2"]{content:"cxztvr,"}/*!sc*/
.gMHmtF{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;font-weight:500;padding:10px 0;}/*!sc*/
.gMHmtF>div>a{text-underline-position:under;}/*!sc*/
.gMHmtF>div>a:hover{color:#F8EA18;}/*!sc*/
.gMHmtF>div>svg{margin:0 4px;transform:rotate(90deg);}/*!sc*/
data-styled.g20[id="styles__Nav-sc-4114r5-3"]{content:"gMHmtF,"}/*!sc*/
.jVmYKt{margin-bottom:26px;}/*!sc*/
data-styled.g21[id="styles__Header-sc-4114r5-4"]{content:"jVmYKt,"}/*!sc*/
.ptiBa>section:nth-child(1){font-size:16px;}/*!sc*/
@media (min-width: 768px){.ptiBa>section:nth-child(1){font-size:18px;}}/*!sc*/
.ptiBa>section:nth-child(1) h1,.ptiBa>section:nth-child(1) h2,.ptiBa>section:nth-child(1) h3,.ptiBa>section:nth-child(1) h4,.ptiBa>section:nth-child(1) h5,.ptiBa>section:nth-child(1) h6{font-weight:600;}/*!sc*/
.ptiBa>section:nth-child(1) h1 .header-anchor,.ptiBa>section:nth-child(1) h2 .header-anchor,.ptiBa>section:nth-child(1) h3 .header-anchor,.ptiBa>section:nth-child(1) h4 .header-anchor,.ptiBa>section:nth-child(1) h5 .header-anchor,.ptiBa>section:nth-child(1) h6 .header-anchor{fill:#F8EA18;}/*!sc*/
.ptiBa>section:nth-child(1) h1:not(:first-of-type),.ptiBa>section:nth-child(1) h2:not(:first-of-type),.ptiBa>section:nth-child(1) h3:not(:first-of-type),.ptiBa>section:nth-child(1) h4:not(:first-of-type),.ptiBa>section:nth-child(1) h5:not(:first-of-type),.ptiBa>section:nth-child(1) h6:not(:first-of-type){margin-top:1.2em;}/*!sc*/
.ptiBa>section:nth-child(1) h1,.ptiBa>section:nth-child(1) h2{padding-bottom:0.2em;border-bottom:1px solid #222222;transition:border-color 0.5s;}/*!sc*/
.ptiBa>section:nth-child(1) h1{margin-block-start:1em;margin-block-end:1em;font-size:36px;}/*!sc*/
.ptiBa>section:nth-child(1) h2{margin-block-start:0.83em;margin-block-end:0.83em;font-size:28.8px;}/*!sc*/
.ptiBa>section:nth-child(1) h3{margin-block-start:1em;margin-block-end:1em;font-size:21.6px;}/*!sc*/
.ptiBa>section:nth-child(1) h4{margin-block-start:1.22em;margin-block-end:1.22em;font-size:19.8px;}/*!sc*/
.ptiBa>section:nth-child(1) em{font-style:oblique;}/*!sc*/
.ptiBa>section:nth-child(1) a{text-underline-position:under;}/*!sc*/
.ptiBa>section:nth-child(1) a:hover{color:#F8EA18;}/*!sc*/
.ptiBa>section:nth-child(1) p{display:block;margin-block-start:1em;margin-block-end:1em;word-break:break-word;line-height:32px;}/*!sc*/
.ptiBa>section:nth-child(1) ol,.ptiBa>section:nth-child(1) ul{padding-left:40px;}/*!sc*/
.ptiBa>section:nth-child(1) ul{list-style-type:disc;}/*!sc*/
.ptiBa>section:nth-child(1) ol{list-style-type:decimal;}/*!sc*/
.ptiBa>section:nth-child(1) li{display:list-item;text-align:-webkit-match-parent;line-height:32px;}/*!sc*/
.ptiBa>section:nth-child(1) li p{margin:0;}/*!sc*/
.ptiBa>section:nth-child(1) table{display:block;border-color:gray;border-spacing:0;border-collapse:collapse;max-width:100%;overflow:auto;font-size:16px;transition:all 0.5s;}/*!sc*/
.ptiBa>section:nth-child(1) table thead{display:table-header-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.ptiBa>section:nth-child(1) table tbody{display:table-row-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.ptiBa>section:nth-child(1) table tr{display:table-row;vertical-align:inherit;border:inherit;background-color:#0d1117;border-top-width:1px;border-top-style:solid;border-top-color:#222222;}/*!sc*/
.ptiBa>section:nth-child(1) table tr:nth-of-type(2n){background-color:#25282E;}/*!sc*/
.ptiBa>section:nth-child(1) table th,.ptiBa>section:nth-child(1) table td{display:table-cell;vertical-align:inherit;padding:6px 13px;border-width:1px;border-style:solid;border-color:#30363d;}/*!sc*/
.ptiBa>section:nth-child(1) blockquote{padding:12px 20px 12px 28px;margin:30px 0px;border-left:4px solid #C9D1D9;font-family:Georgia,serif;font-style:italic;text-align:justify;font-size:20px;line-height:1.2;transition:all 0.5s;}/*!sc*/
.ptiBa>section:nth-child(1) blockquote p{margin:0;}/*!sc*/
.ptiBa>section:nth-child(1) code{margin:0;padding:0.2em 0.4em;background-color:rgba(135,131,120,0.15);color:#BF616A;border-radius:6px;font-size:85%;font-family:SFMono-Regular,Menlo,Consolas,Liberation Mono,monospace;}/*!sc*/
.ptiBa>section:nth-child(1) strong{font-weight:bold;}/*!sc*/
.ptiBa>section:nth-child(1) deckgo-highlight-code{--deckgo-highlight-code-carbon-toolbar-display:none;--deckgo-highlight-code-white-space:pre-wrap;max-width:90vw;font-size:3vw;margin-bottom:32px;}/*!sc*/
@media (min-width: 425px){.ptiBa>section:nth-child(1) deckgo-highlight-code{font-size:14px;}}/*!sc*/
.ptiBa>section:nth-child(1) img{max-width:90vw;}/*!sc*/
@media (min-width: 768px){.ptiBa>section:nth-child(1) img{max-width:694px;}}/*!sc*/
data-styled.g22[id="styles__Main-sc-4114r5-5"]{content:"ptiBa,"}/*!sc*/
.btgxxR{margin-bottom:4px;font-size:36px;font-weight:600;}/*!sc*/
@media (min-width: 425px){.btgxxR{font-size:42px;}}/*!sc*/
data-styled.g23[id="styles__Title-sc-4114r5-6"]{content:"btgxxR,"}/*!sc*/
.jflpBx{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;color:#8b949e;font-size:14px;}/*!sc*/
.jflpBx>div{display:flex;flex-direction:column;align-items:flex-end;justify-content:normal;}/*!sc*/
.jflpBx>div a{text-underline-position:under;}/*!sc*/
.jflpBx>div a:hover{color:#F8EA18;}/*!sc*/
data-styled.g24[id="styles__SubTitle-sc-4114r5-7"]{content:"jflpBx,"}/*!sc*/
@keyframes ZmWYm{from{transform:rotate(90deg) translate(50px) translateZ(10px);}to{transform:rotate(270deg) translate(50px) translateZ(10px);}}/*!sc*/
data-styled.g26[id="sc-keyframes-ZmWYm"]{content:"ZmWYm,"}/*!sc*/
@keyframes dGgAwC{from{transform:rotate(90deg) translate(-50px) translateZ(10px);}to{transform:rotate(270deg) translate(-50px) translateZ(10px);}}/*!sc*/
data-styled.g27[id="sc-keyframes-dGgAwC"]{content:"dGgAwC,"}/*!sc*/
</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .header-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-anchor svg,
    h2 .header-anchor svg,
    h3 .header-anchor svg,
    h4 .header-anchor svg,
    h5 .header-anchor svg,
    h6 .header-anchor svg {
      visibility: hidden;
    }
    h1:hover .header-anchor svg,
    h2:hover .header-anchor svg,
    h3:hover .header-anchor svg,
    h4:hover .header-anchor svg,
    h5:hover .header-anchor svg,
    h6:hover .header-anchor svg,
    h1 .header-anchor:focus svg,
    h2 .header-anchor:focus svg,
    h3 .header-anchor:focus svg,
    h4 .header-anchor:focus svg,
    h5 .header-anchor:focus svg,
    h6 .header-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - -200)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=6d5c0719d6ce39c07b53ce38158aed46" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/favicons/android-chrome-192x192.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="apple-touch-icon" sizes="512x512" href="/favicons/android-chrome-512x512.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-gatsby-head="true">튜토리얼 따라하기 | conerstone</title><link as="style" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sora:wght@100;200;300;400;500&amp;display=swap" data-gatsby-head="true"/><link as="style" rel="stylesheet" href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" data-gatsby-head="true"/><script type="application/ld+json" data-gatsby-head="true">
            {
              "@context": "https://schema.org",
              "@type": "HowTo",
              "url": "https://rheech22.github.io/PostgreSQL/튜토리얼_따라하기",
              "headline": "conerstone",
              "datePublished": "2024-01-13 17:29:25 +0900",
              "dateModified": "2024-01-21 13:04:32 +0900",
              "image": "[]"
            }
          </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__Container-sc-z8t49p-0 TCGeX"><a tabindex="-1" class="Header__HomeButton-sc-z8t49p-1 bXyKfJ" href="/"><svg viewBox="0 0 21 21" fill="currentColor" height="1em" width="1em"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M1.5 10.5l9-9 9 9"></path><path d="M3.5 8.5v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path></g></svg></a><a tabindex="-1" class="Header__Title-sc-z8t49p-2 jXItFY" href="/"><h1>conerstone</h1></a><button tabindex="-1" aria-label="switch display mode" class="Header__Button-sc-z8t49p-3 iiXbKi"><div class="Header__CircleLayout-sc-z8t49p-4 cKuHdH"><div><svg width="30px" height="30px" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M26.25 14.936C26.25 21.107 21.097 26.25 14.656 26.25C9.761 26.25 5.509 23.55 3.835 19.436C3.706 19.05 3.706 18.664 3.963 18.407C4.221 18.15 4.608 18.021 4.994 18.15C5.638 18.279 6.282 18.407 6.798 18.407C11.951 18.407 16.073 14.421 16.073 9.407C16.073 7.864 15.815 6.579 15.042 5.036C14.913 4.779 14.913 4.393 15.171 4.136C15.429 3.879 15.686 3.75 16.073 3.75C21.87 4.393 26.25 9.279 26.25 14.936Z" fill="#030D45"></path></svg></div><div><svg width="30px" height="30px" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15 9.375c-3.1 0 -5.625 2.525 -5.625 5.625s2.525 5.625 5.625 5.625 5.625 -2.525 5.625 -5.625 -2.525 -5.625 -5.625 -5.625zm14.438 4.717l-5.549 -2.771 1.963 -5.883c0.264 -0.797 -0.492 -1.553 -1.283 -1.283l-5.883 1.963 -2.777 -5.555c-0.375 -0.75 -1.441 -0.75 -1.816 0l-2.771 5.549L5.432 4.148c-0.797 -0.264 -1.553 0.492 -1.283 1.283l1.963 5.883 -5.549 2.777c-0.75 0.375 -0.75 1.441 0 1.816l5.549 2.771 -1.963 5.889c-0.264 0.797 0.492 1.553 1.283 1.283l5.883 -1.963 2.771 5.549c0.375 0.75 1.441 0.75 1.816 0l2.771 -5.549 5.883 1.963c0.797 0.264 1.553 -0.492 1.283 -1.283l-1.963 -5.883 5.549 -2.771c0.762 -0.381 0.762 -1.447 0.012 -1.822zm-9.135 6.211c-2.924 2.924 -7.682 2.924 -10.605 0 -2.924 -2.924 -2.924 -7.682 0 -10.605 2.924 -2.924 7.682 -2.924 10.605 0 2.924 2.924 2.924 7.682 0 10.605z"></path></svg></div></div></button><form class="SearchBar__Container-sc-6n5xnu-0 dqUuBy"><input type="text" placeholder="Search" maxLength="40" class="Textbox__Input-sc-vlag4q-0 emEIsO" value=""/><button type="submit" hidden="" aria-label="Submit Search"></button></form><div class="Header__Index-sc-z8t49p-5 ccoDNl"><a tabindex="-1" href="/wiki-index/"><h2>Index.</h2></a></div></header><main><div class="styles__Container-sc-4114r5-0 bCIftt"><section class="styles__Section-sc-4114r5-1 gUrOWl"><article class="styles__Article-sc-4114r5-2 cxztvr"><nav class="styles__Nav-sc-4114r5-3 gMHmtF"><div><a href="/PostgreSQL/">PostgreSQL</a></div></nav><header class="styles__Header-sc-4114r5-4 jVmYKt"><h1 class="styles__Title-sc-4114r5-6 btgxxR">튜토리얼 따라하기</h1><div class="styles__SubTitle-sc-4114r5-7 jflpBx"><div><span>11<!-- --> min read</span><time dateTime="created at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/PostgreSQL/튜토리얼_따라하기/index.md" target="_blank" rel="noreferrer">CREATED: <!-- -->13/01/2024</a></time><time dateTime="updated at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/PostgreSQL/튜토리얼_따라하기/index.md" target="_blank" rel="noreferrer">UPDATED: <!-- -->21/01/2024</a></time><a href="https://github.com/rheech22/rheech22.github.io/blame/develop/src/wikis/PostgreSQL/튜토리얼_따라하기/index.md" target="_blank" rel="noreferrer">Blame</a></div></div></header><main class="styles__Main-sc-4114r5-5 ptiBa"><section><h1 id="db-생성" style="position:relative;">DB 생성<a href="#db-%EC%83%9D%EC%84%B1" aria-label="db 생성 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p><code>mydb</code>라는 이름으로 데이터베이스 생성</p>
<deckgo-highlight-code language="bash" terminal="carbon" theme="one-dark"  >
          <code slot="code">createdb mydb</code>
        </deckgo-highlight-code>
<p>DB 접속</p>
<deckgo-highlight-code language="bash" terminal="carbon" theme="one-dark"  >
          <code slot="code">psql mydb</code>
        </deckgo-highlight-code>
<p>다음과 같이 나오면 성공</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">psql (16.1 (Homebrew))
도움말을 보려면 &quot;help&quot;를 입력하십시오.

mydb=#</code>
        </deckgo-highlight-code>
<p>마지막 줄에 <code>#</code> 기호가 있다면 superuser라는 의미다. 아닌 경우에는 <code>#</code> 대신 <code>></code> 기호를 출력한다.</p>
<p>튜토리얼을 따라 아래 명령어를 입력했다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT version();
                                                           version
------------------------------------------------------------------------------------------------------------------------------
 PostgreSQL 16.1 (Homebrew) on x86_64-apple-darwin22.6.0, compiled by Apple clang version 15.0.0 (clang-1500.1.0.2.5), 64-bit
(1개 행)

mydb=# SELECT current_date;
 current_date
--------------
 2024-01-13
(1개 행)

mydb=# SELECT 1 + 4;
 ?column?
----------
        5
(1개 행)</code>
        </deckgo-highlight-code>
<p>psql에는 <code>\</code>로 시작하는 여러 명령어가 있다. <code>\h</code>는 사용 가능한 도움말 목록을 출력한다. 그 중에서 <code>CREATE TABLE</code>는 이런 내용을 보여준다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">명령: CREATE TABLE
설명: 새 테이블 만들기
문법:
CREATE [ [ GLOBAL | LOCAL ] { TEMPORARY | TEMP } | UNLOGGED ] TABLE [ IF NOT EXISTS ] 테이블_이름 ( [
  { 칼럼이름 자료형 [ STORAGE { PLAIN | EXTERNAL | EXTENDED | MAIN | DEFAULT } ] [ COMPRESSION 압축_방법 ] [ COLLATE collation ] [ 칼럼_제약조건 [ ... ] ]
    | 테이블_제약조건
    | LIKE 원본테이블 [ LIKE구문옵션 ... ] }
    [, ... ]
] )
[ INHERITS ( 상위_테이블 [, ... ] ) ]
[ PARTITION BY { RANGE | LIST | HASH } ( { 칼럼이름 | ( 표현식 ) } [ COLLATE collation ] [ 연산자클래스 ] [, ... ] ) ]</code>
        </deckgo-highlight-code>
<p>psql에서 나오고 싶다면 <code>\q</code>을 입력하자. <code>\?</code>를 입력하면 여러 명령어를 확인할 수 있다.</p>
<h1 id="create-table" style="position:relative;">CREATE TABLE<a href="#create-table" aria-label="create table permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p><code>weather</code> 테이블을 생성</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# CREATE TABLE weather (
    city            varchar(80),
    temp_lo         int,           -- low temperature
    temp_hi         int,           -- high temperature
    prcp            real,          -- precipitation
    date            date
);
CREATE TABLE</code>
        </deckgo-highlight-code>
<p>psql에서 공백, 탭, 줄바꿈은 자유롭게 사용할 수 있다. 세미콜론(;)이 오기 전까지 명령은 종료되지 않는 것으로 인식한다. <code>--</code>는 주석을 표현할 때 사용한다. 쌍따옴표로 묶인 경우를 제외하고는 SQL 구문에서 대소문자를 구분하지 않는다.</p>
<p><code>varchar(80)</code>은 최대 80자 길이의 문자열을 저장할 수 있는 데이터 타입을 의미한다. <code>int</code>는 일반적인 정수, <code>real</code>은 4 바이트 부동 소수점 타입이다. <code>date</code>는 단어 그대로 날짜 타입이다.</p>
<p><code>cities</code>라는 테이블을 하나 더 만들었다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# CREATE TABLE cities (
    name            varchar(80),
    location        point
);
CREATE TABLE</code>
        </deckgo-highlight-code>
<p><code>point</code>는 지리적 위치를 표현하는 데이터 타입으로 PostgreSQL에서 제공하는 특별한 타입 중 하나이다.</p>
<p><code>box</code>, <code>line</code>, <code>point</code>, <code>lseg</code>, <code>polygon</code>, <code>inet</code>, <code>macaddr</code></p>
<h1 id="insert-info" style="position:relative;">INSERT INFO<a href="#insert-info" aria-label="insert info permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p><code>INSERT</code> 문으로 테이블에 데이터를 채워보자. 튜토리얼을 보고 아래와 같은 순서로 데이터를 삽입했다.</p>
<p>인풋은 <code>,</code>로 구분하고 타입에 맞는 데이터로 넣어줘야 한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# INSERT INTO weather VALUES (&#39;San Francisco&#39;, 46, 50, 0.25, &#39;1994-11-27&#39;);
INSERT 0 1</code>
        </deckgo-highlight-code>
<p><code>point</code> 타입은 아래와 같이 형태를 요구한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">INSERT INTO cities VALUES (&#39;San Francisco&#39;, &#39;(-194.0, 53.0)&#39;);
INSERT 0 1</code>
        </deckgo-highlight-code>
<p>좀 더 명시적으로 작성하는 방법도 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">INSERT INTO weather (city, temp_lo, temp_hi, prcp, date)
    VALUES (&#39;San Francisco&#39;, 43, 57, 0.0, &#39;1994-11-29&#39;);
INSERT 01</code>
        </deckgo-highlight-code>
<p>모든 컬럼을 채워야 하는 것도 아니고 순서도 바꿀 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">INSERT INTO weather (date, city, temp_hi, temp_lo)
    VALUES (&#39;1994-11-29&#39;, &#39;Hayward&#39;, 54, 37);</code>
        </deckgo-highlight-code>
<p><code>COPY</code> 명령을 통해 파일로부터 로드하는 방법도 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">COPY weather FROM &#39;/home/user/weather.txt&#39;;</code>
        </deckgo-highlight-code>
<h1 id="select" style="position:relative;">SELECT<a href="#select" aria-label="select permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p><code>SELECT</code> 문으로 테이블에서 데이터를 조회할 수 있다.</p>
<p>이전 챕터에서 <code>weather</code> 테이블에 데이터를 채워놨으니 모두 조회해보자.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT * FROM weather;
     city      | temp_lo | temp_hi | prcp |    date
---------------+---------+---------+------+------------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27
 San Francisco |      43 |      57 |    0 | 1994-11-29
 Hayward       |      37 |      54 |      | 1994-11-29
(3개 행)</code>
        </deckgo-highlight-code>
<p><code>*</code>은 모든 컬럼을 의미하므로 아래와 같다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT city, temp_lo, temp_hi, prcp, date FROM weather;
</code>
        </deckgo-highlight-code>
<p>표현식을 사용하여 결과를 바꿀 수도 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT city, (temp_hi+temp_lo)/2 AS temp_avg, date FROM weather;
     city      | temp_avg |    date
---------------+----------+------------
 San Francisco |       48 | 1994-11-27
 San Francisco |       50 | 1994-11-29
 Hayward       |       45 | 1994-11-29
(3개 행)</code>
        </deckgo-highlight-code>
<p><code>AS</code>절은 출력되는 컬럼의 이름을 재정의한다.</p>
<p>한편, <code>WHERE</code>절로 원하는 데이터만 출력할 수 있다. <code>WHERE</code>절은 Boolean 표현식을 포함하는데 표현식을 통해 참으로 평가되는 행만 반환시킨다. <code>AND</code>, <code>OR</code>, <code>NOT</code>과 같은 Boolean 연산자도 함께 사용할 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT * FROM weather
    WHERE city = &#39;San Francisco&#39; AND prcp &gt; 0.0;
     city      | temp_lo | temp_hi | prcp |    date
---------------+---------+---------+------+------------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27
(1개 행)</code>
        </deckgo-highlight-code>
<p><code>ORDER BY</code>로 정렬이 가능하다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT * FROM weather
    ORDER BY city;
     city      | temp_lo | temp_hi | prcp |    date
---------------+---------+---------+------+------------
 Hayward       |      37 |      54 |      | 1994-11-29
 San Francisco |      46 |      50 | 0.25 | 1994-11-27
 San Francisco |      43 |      57 |    0 | 1994-11-29
(3개 행)</code>
        </deckgo-highlight-code>
<p><code>San Francisco</code>도 완전히 정렬시키고 싶다면,</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT * FROM weather
    ORDER BY city, temp_lo;
     city      | temp_lo | temp_hi | prcp |    date
---------------+---------+---------+------+------------
 Hayward       |      37 |      54 |      | 1994-11-29
 San Francisco |      43 |      57 |    0 | 1994-11-29
 San Francisco |      46 |      50 | 0.25 | 1994-11-27
(3개 행)</code>
        </deckgo-highlight-code>
<p><code>DISTINCT</code>로 중복되는 행을 제거할 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT DISTINCT city FROM weather;
     city
---------------
 Hayward
 San Francisco
(2개 행)</code>
        </deckgo-highlight-code>
<h1 id="join" style="position:relative;">JOIN<a href="#join" aria-label="join permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p><code>JOIN</code>을 사용하면 한 번에 여러 테이블에 접근할 수 있다. 만약 날씨 기록을 관련된 도시와 함께 요청하고 싶다면</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT * FROM weather JOIN cities ON city = name;
     city      | temp_lo | temp_hi | prcp |    date    |     name      | location
---------------+---------+---------+------+------------+---------------+-----------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27 | San Francisco | (-194,53)
 San Francisco |      43 |      57 |    0 | 1994-11-29 | San Francisco | (-194,53)
(2개 행)</code>
        </deckgo-highlight-code>
<p>여기서는 <code>*</code>을 사용하여 모든 컬럼을 가져오도록 했지만, 실제 프로덕션 레벨에서는 항상 명시적으로 컬럼을 작성하는 것이 좋다. 만약 테이블에 컬럼이 추가되면 결과도 달라질 것이기 때문이다.</p>
<p>현재 <code>weather</code>의 컬럼과 <code>cities</code>의 컬럼의 이름이 겹치는 경우는 없지만, 만약에 그런 경우가 있다면 아래와 같이 작성해야 한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT weather.city, weather.temp_lo, weather.temp_hi,
       weather.prcp, weather.date, cities.location
    FROM weather JOIN cities ON weather.city = cities.name;</code>
        </deckgo-highlight-code>
<p><code>JOIN/ON</code> 구문을 사용하지 않는 아래와 같은 방식도 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT *
    FROM weather, cities
    WHERE city = name;
     city      | temp_lo | temp_hi | prcp |    date    |     name      | location
---------------+---------+---------+------+------------+---------------+-----------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27 | San Francisco | (-194,53)
 San Francisco |      43 |      57 |    0 | 1994-11-29 | San Francisco | (-194,53)
(2개 행)</code>
        </deckgo-highlight-code>
<p>이 방법은 <code>JOIN/ON</code> 구문보다 앞선 방식으로 좀 더 단순해 보이지만, 쿼리를 읽는 사람 입장에서는 <code>JOIN/ON</code> 구문을 사용하는 것이 더 쉽게 이해하기 좋다. <code>JOIN</code>을 위한 조건이 <code>WHERE</code> 절에 섞여있지 않아도 된다.</p>
<p>앞선 예제에서는 <code>Hayward</code>가 결과에서 제외됐다. <code>ON</code>에 작성된 조건을 만족하지 못했기 때문인데 만약 조건에 만족하지 못한 경우에도 결과에 포함시키고 싶다면 어떻게 해야할까? 이런 경우 <code>OUTER JOIN</code>을 사용할 수 있다. (지금까지 했던 것은 사실 <code>INNER JOIN</code>이다.)</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT *
    FROM weather LEFT OUTER JOIN cities ON weather.city = cities.name;
     city      | temp_lo | temp_hi | prcp |    date    |     name      | location
---------------+---------+---------+------+------------+---------------+-----------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27 | San Francisco | (-194,53)
 San Francisco |      43 |      57 |    0 | 1994-11-29 | San Francisco | (-194,53)
 Hayward       |      37 |      54 |      | 1994-11-29 |</code>
        </deckgo-highlight-code>
<p>위 예제에서 오른쪽 테이블(cities)의 내용은 왼쪽 테이블(weather)와 일치하는 경우에만 포함되고, 왼쪽 테이블은 모두 포함된다. <code>LEFT OUTER JOIN</code>의 동작 방식이 이렇다. 반대 방향인 <code>RIGHT OUTER JOIN</code>과 양쪽 모두를 포함하는 <code>FULL OUTER JOIN</code>도 있다.</p>
<p><code>SELF JOIN</code>은 테이블 자체적으로 조인을 수행한다. 만약 다른 모든 행과 데이터를 비교하여 원하는 결과를 출력해야 한다면 사용해볼 수 있다. 예시는 아래와 같다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT w1.city, w1.temp_lo AS low, w1.temp_hi AS high,
       w2.city, w2.temp_lo AS low, w2.temp_hi AS high
    FROM weather w1 JOIN weather w2
        ON w1.temp_lo &lt; w2.temp_lo AND w1.temp_hi &gt; w2.temp_hi;
     city      | low | high |     city      | low | high
---------------+-----+------+---------------+-----+------
 San Francisco |  43 |   57 | San Francisco |  46 |   50
 Hayward       |  37 |   54 | San Francisco |  46 |   50
(2개 행)</code>
        </deckgo-highlight-code>
<p>테이블을 각각 <code>w1</code>, <code>w2</code>로 별칭한 것처럼 라벨을 통해 타이핑을 줄일 수 있다.</p>
<h1 id="aggregate-function" style="position:relative;">Aggregate Function<a href="#aggregate-function" aria-label="aggregate function permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>Aggregate Function은 여러 행에 대한 단일 결과를 계산한다. 예를 들어, 행 집합에 대한 <code>count</code>, <code>sum</code>, <code>avg</code>, <code>max</code>, <code>min</code>을 계산할 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT max(temp_lo) FROM weather;
 max
-----
  46
(1개 행)</code>
        </deckgo-highlight-code>
<p>단, <code>WHERE</code> 절에서는 사용할 수 없다. <code>WHERE</code>를 통해 어떤 행을 대상으로 집계를 해야할지 결정하기 때문에 <code>WHERE</code> 절의 표현식은 집계 함수가 실행되기 전에 평가되어야 하기 때문이다. 이럴 땐 서브 쿼리를 사용할 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT city FROM weather
    WHERE temp_lo = (SELECT max(temp_lo) FROM weather);
     city
---------------
 San Francisco
(1개 행)</code>
        </deckgo-highlight-code>
<p>Aggregate Function을 <code>GROUP BY</code>와 함께 효과적으로 사용할 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT city, count(*), max(temp_lo)
    FROM weather
    GROUP BY city;
     city      | count | max
---------------+-------+-----
 Hayward       |     1 |  37
 San Francisco |     2 |  46
(2개 행)</code>
        </deckgo-highlight-code>
<p>또한 그룹으로 묶인 행들을 <code>HAVING</code>을 사용하여 걸러낼 수도 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# SELECT city, count(*), max(temp_lo)
    FROM weather
    GROUP BY city
    HAVING max(temp_lo) &lt; 40;
  city   | count | max
---------+-------+-----
 Hayward |     1 |  37
(1개 행)</code>
        </deckgo-highlight-code>
<p><code>LIKE</code> 연산자를 사용한 예시도 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT city, count(*), max(temp_lo)
    FROM weather
    WHERE city LIKE &#39;S%&#39;
    GROUP BY city;</code>
        </deckgo-highlight-code>
<p><code>HAVING</code>과 <code>WHERE</code>의 차이는 순서에 있다. <code>WHERE</code>는 <code>GROUP</code> 및 Aggregate Function이 수행되기 전에 행을 선택하는 반면, <code>HAVING</code>은 <code>GROUP</code> 및 Aggregate Function이 수행된 후에 행을 선택한다. 따라서 <code>HAVING</code>에는 항상 Aggregate Function이 포함된다. 사실 <code>HAVING</code>에서 집계 함수를 사용하지 않을 수도 있지만 그런 경우에는 <code>WHERE</code> 단계에 해당 조건을 적용하는 것이 더 효율적이다.</p>
<p>한편 각 Aggregate Function에 사용할 수 있는 옵션인 <code>FILTER</code>도 있다. 각 함수의 인풋만을 한정한다는 점을 제외하고 <code>WHERE</code>와 유사하다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT city, count(*) FILTER (WHERE temp_lo &lt; 45), max(temp_lo)
    FROM weather
    GROUP BY city;
     city      | count | max
---------------+-------+-----
 Hayward       |     1 |  37
 San Francisco |     1 |  46
(2개 행)</code>
        </deckgo-highlight-code>
<h1 id="update" style="position:relative;">UPDATE<a href="#update" aria-label="update permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p><code>UPDATE</code>를 사용하여 데이터를 수정할 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# UPDATE weather
    SET temp_hi = temp_hi - 2,  temp_lo = temp_lo - 2
    WHERE date &gt; &#39;1994-11-28&#39;;
UPDATE 2

mydb=# SELECT * FROM weather;

     city      | temp_lo | temp_hi | prcp |    date
---------------+---------+---------+------+------------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27
 San Francisco |      41 |      55 |    0 | 1994-11-29
 Hayward       |      35 |      52 |      | 1994-11-29
(3 rows)</code>
        </deckgo-highlight-code>
<h1 id="delete" style="position:relative;">DELETE<a href="#delete" aria-label="delete permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>삭제는 다음과 같다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# DELETE FROM weather WHERE city = &#39;Hayward&#39;;
DELETE 1
mydb=# SELECT * FROM weather;
     city      | temp_lo | temp_hi | prcp |    date
---------------+---------+---------+------+------------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27
 San Francisco |      41 |      55 |    0 | 1994-11-29
(2개 행)</code>
        </deckgo-highlight-code>
<p>아래와 같이 사용하면 모든 행을 삭제하기 때문에 주의하자.</p>
<deckgo-highlight-code language="bash" terminal="carbon" theme="one-dark"  >
          <code slot="code">DELETE FROM tablename;</code>
        </deckgo-highlight-code>
<h1 id="view" style="position:relative;">VIEW<a href="#view" aria-label="view permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p><code>VIEW</code>를 사용하면 매번 필요할 때마다 같은 쿼리를 입력하지 않아도 된다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# CREATE VIEW myview AS
    SELECT name, temp_lo, temp_hi, prcp, date, location
        FROM weather, cities
        WHERE city = name;
CREATE VIEW
mydb=# SELECT * FROM myview;
     name      | temp_lo | temp_hi | prcp |    date    | location
---------------+---------+---------+------+------------+-----------
 San Francisco |      46 |      50 | 0.25 | 1994-11-27 | (-194,53)
 San Francisco |      41 |      55 |    0 | 1994-11-29 | (-194,53)
(2개 행)</code>
        </deckgo-highlight-code>
<h1 id="foreign-keys" style="position:relative;">Foreign Keys<a href="#foreign-keys" aria-label="foreign keys permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>앞서 활용한 테이블 <code>weather</code>와 <code>cities</code>에서 <code>cities</code>에 포함된 도시만 <code>weather</code>에 넣을 수 있도록 해야 한다고 가정해보자. 이런 경우 먼저 <code>cities</code>를 살펴 일치하는 기록이 있는지 확인한 후 새로운 날씨 데이터를 <code>weather</code>에 넣을 수 있도록 하거나 혹은 넣지 못하도록 해야할 것이다. 이처럼 테이블간의 관계를 일관되게 유지시킴으로써 데이터베이스의 신뢰도를 높이는 것을 데이터의 참조 무결성(referential integrity)라 한다. 다만 위와 같은 과정을 매번 거쳐야 하는 것은 매우 귀찮은 일이기 때문에 primary key와 foreign key를 사용하여 테이블의 관계를 선언할 수 있다. 우선 테이블을 다시 생성하기 전에 삭제부터 한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# DROP VIEW myview;
DROP VIEW
mydb=# DROP TABLE cities;
DROP TABLE
mydb=# DROP TABLE weather;
DROP TABLE</code>
        </deckgo-highlight-code>
<p>테이블을 다시 만들자.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">CREATE TABLE cities (
        name     varchar(80) primary key,
        location point
);

CREATE TABLE weather (
        city      varchar(80) references cities(name),
        temp_lo   int,
        temp_hi   int,
        prcp      real,
        date      date
);</code>
        </deckgo-highlight-code>
<p><code>weather</code>에 <code>INSERT</code>를 시도하면 <code>cities</code>에 없는 도시를 저장하려 했기에 실패한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# INSERT INTO weather VALUES (&#39;Berkeley&#39;, 45, 53, 0.0, &#39;1994-11-28&#39;);
ERROR:  insert or update on table &quot;weather&quot; violates foreign key constraint &quot;weather_city_fkey&quot;
상세정보:  Key (city)=(Berkeley) is not present in table &quot;cities&quot;.</code>
        </deckgo-highlight-code>
<p>먼저 <code>cities</code>에 데이터를 저장한 후 재시도하면 <code>INSERT</code> 성공</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">mydb=# INSERT INTO cities VALUES (&#39;Berkeley&#39;, &#39;(-194.0, 53.0)&#39;);
INSERT 0 1
mydb=# INSERT INTO weather VALUES (&#39;Berkeley&#39;, 45, 53, 0.0, &#39;1994-11-28&#39;);
INSERT 0 1
mydb=# SELECT * FROM weather;
   city   | temp_lo | temp_hi | prcp |    date
----------+---------+---------+------+------------
 Berkeley |      45 |      53 |    0 | 1994-11-28
(1개 행)</code>
        </deckgo-highlight-code>
<h1 id="transactions" style="position:relative;">Transactions<a href="#transactions" aria-label="transactions permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>트랜잭션은 데이터베이스 시스템의 기본 개념이다. 그 핵심은 여러 단계를 전부 처리되는 것이 아니면 전부 처리되지 않는 단일 작업으로 묶는 것이다. 각 단계의 중간 상태는 동시에 진행 중인 다른 트랜잭션에서는 볼 수 없고 트랜잭션이 완료되지 않으면 데이터베이스에 아무런 영향도 끼치지 않아야 한다.</p>
<p>은행 시스템이 좋은 예시가 될 수 있다. Alice의 계좌에서 100달러를 인출하여 Bob의 계좌로 송금한다고 가정한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">UPDATE accounts SET balance = balance - 100.00
    WHERE name = &#39;Alice&#39;;
UPDATE branches SET balance = balance - 100.00
    WHERE name = (SELECT branch_name FROM accounts WHERE name = &#39;Alice&#39;);
UPDATE accounts SET balance = balance + 100.00
    WHERE name = &#39;Bob&#39;;
UPDATE branches SET balance = balance + 100.00
    WHERE name = (SELECT branch_name FROM accounts WHERE name = &#39;Bob&#39;);</code>
        </deckgo-highlight-code>
<p>위 예시처럼 여러 단계의 업데이트로 목표를 달성할 수는 있지만 은행의 시스템 장애 때문에 어느 한쪽에서만 인출이 발생하는 등 여러 문제 상황이 발생하는 것을 반드시 막아야 한다. 이를 보장하기 위해 트랜잭션이 필요하다. 여러 업데이트를 트랜잭션으로 묶어 완전히 성공하거나 전혀 발생하지 않도록 할 수 있다. 이를 원자적 트랜잭션(Atomic Transaction)이라 한다.</p>
<p>한편 데이터베이스 시스템은 트랜잭션의 완료가 보고되기 전에 트랜잭션에서 수행한 업데이트를 기록하여 데이터의 안정성을 보장한다. 만약 트랜잭션이 중간에 실패하거나 시스템에 문제가 발생하더라도, 로그에 저장된 정보를 사용하여 이전 상태로 복원할 수 있다.</p>
<p>또한 트랜잭션은 일반적으로 고립된 환경에서 수행된다. 동시에 실행되는 여러 트랜잭션은 서로에게 영향을 미치지 않고 독립적으로 수행되어야 한다. 동시에 실행 중인 트랜잭션은 서로의 작업을 직접적으로 볼 수 없다. 이는 트랜잭션의 일관성을 유지하고, 데이터의 정확성을 보장하기 위한 개념이다.</p>
<p>PostgreSQL에서는 <code>BEGIN</code>과 <code>COMMIT</code> 명령을 통해 트랜잭션을 구현할 수 있다. 둘러쌓인 하나의 그룹을 Transaction Block이라고도 부른다. PostgreSQL은 암묵적으로 위 명령으로 둘러싸지 않은 모든 SQL 문을 트랜잭션으로 간주한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">BEGIN;
UPDATE accounts SET balance = balance - 100.00
    WHERE name = &#39;Alice&#39;;
-- etc etc
COMMIT;</code>
        </deckgo-highlight-code>
<p>만약 <code>COMMIT</code>이 아닌 <code>ROLLBACK</code>을 입력하면 트랜잭션의 모든 업데이트를 취소할 수 있다.</p>
<p><code>SAVEPOINT</code>와 <code>ROLLBACK TO</code>를 사용하면 좀 더 세밀하게 트랜잭션을 제어할 수 있다. Bob이 아닌 Wally의 계좌에 입금해야 한다는 사실을 도중에 알게 되었다면 아래와 같은 방법으로 제어권을 되찾을 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">BEGIN;
UPDATE accounts SET balance = balance - 100.00
    WHERE name = &#39;Alice&#39;;
SAVEPOINT my_savepoint;
UPDATE accounts SET balance = balance + 100.00
    WHERE name = &#39;Bob&#39;;
-- oops ... forget that and use Wally&#39;s account
ROLLBACK TO my_savepoint;
UPDATE accounts SET balance = balance + 100.00
    WHERE name = &#39;Wally&#39;;
COMMIT;</code>
        </deckgo-highlight-code>
<h1 id="window-functions" style="position:relative;">Window Functions<a href="#window-functions" aria-label="window functions permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>Window Function은 행에 대한 계산을 수행한다는 점에 있어서 Aggregate Function과 유사하지만, 실행 결과를 단일 행으로 그룹화시키지 않는다는 점에서 차이가 있다. Window Function은 개별 행을 모두 출력한다.</p>
<p><code>OVER</code> 절을 통해 Window Function을 사용할 수 있다. 아래는 모든 직원들의 연봉 테이블과 함께 각 부서를 기준으로 평균 연봉을 확인하는 예제다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT depname, empno, salary, avg(salary) OVER (PARTITION BY depname) FROM empsalary;
  depname  | empno | salary |          avg
-----------+-------+--------+-----------------------
 develop   |    11 |   5200 | 5020.0000000000000000
 develop   |     7 |   4200 | 5020.0000000000000000
 develop   |     9 |   4500 | 5020.0000000000000000
 develop   |     8 |   6000 | 5020.0000000000000000
 develop   |    10 |   5200 | 5020.0000000000000000
 personnel |     5 |   3500 | 3700.0000000000000000
 personnel |     2 |   3900 | 3700.0000000000000000
 sales     |     3 |   4800 | 4866.6666666666666667
 sales     |     1 |   5000 | 4866.6666666666666667
 sales     |     4 |   4800 | 4866.6666666666666667
(10 rows)</code>
        </deckgo-highlight-code>
<p>일반적인 Aggregate Function에 <code>OVER</code>절을 함께 사용한 형태가 Window Function의 모양이다. <code>PARTITION BY</code> 절은 Window Function이 수행되는 행의 기준을 정렬한다. 아래처럼 <code>ORDER BY</code>를 통해 정렬도 가능하다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT depname, empno, salary,
       rank() OVER (PARTITION BY depname ORDER BY salary DESC)
FROM empsalary;
  depname  | empno | salary | rank
-----------+-------+--------+------
 develop   |     8 |   6000 |    1
 develop   |    10 |   5200 |    2
 develop   |    11 |   5200 |    2
 develop   |     9 |   4500 |    4
 develop   |     7 |   4200 |    5
 personnel |     2 |   3900 |    1
 personnel |     5 |   3500 |    2
 sales     |     1 |   5000 |    1
 sales     |     4 |   4800 |    2
 sales     |     3 |   4800 |    2
(10 rows)</code>
        </deckgo-highlight-code>
<p><code>rank()</code> 함수에 필요한 인자는 <code>OVER</code>를 통해 결정되기 때문에 명시적으로 전달하지 않아도 된다.</p>
<p><code>OVER</code>에 파티션을 작성하지 않으면 전체 테이블 행에 대한 계산을 수행한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT salary, sum(salary) OVER () FROM empsalary;
 salary |  sum
--------+-------
   5200 | 47100
   5000 | 47100
   3500 | 47100
   4800 | 47100
   3900 | 47100
   4200 | 47100
   4500 | 47100
   4800 | 47100
   6000 | 47100
   5200 | 47100
(10 rows)</code>
        </deckgo-highlight-code>
<p>만약 <code>ORDER BY</code>만을 전달하면 전혀 다른 결과를 보여준다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT salary, sum(salary) OVER (ORDER BY salary) FROM empsalary;
 salary |  sum
--------+-------
   3500 |  3500
   3900 |  7400
   4200 | 11600
   4500 | 16100
   4800 | 25700
   4800 | 25700
   5000 | 30700
   5200 | 41100
   5200 | 41100
   6000 | 47100
(10 rows)</code>
        </deckgo-highlight-code>
<p>이런 결과를 보여주는 이유는 window frame이라는 개념이 있기 때문이다. 파티션 안의 모든 행에는 프레임이 존재한다. 어떤 Window Function은 파티션 전체가 아닌 프레임에 대해서만 동작하기도 한다. <code>ORDER BY</code>가 있다면 프레임은 파티션의 시작부터 현재 행까지, 그리고 현재 행과 동일한 다음 행으로 구성된다. 만약 <code>ORDER BY</code>가 생략되면 기본 프레임은 파티션의 모든 행으로 구성된다.</p>
<p>Window Function은 <code>SELECT</code> 목록 내에서 사용할 수 있고 필요에 따라 <code>ORDER BY</code>를 사용할 수 있다. <code>GROUP BY</code>, <code>HAVING</code>, <code>WHERE</code>와는 사용이 불가능한데 언급한 절들이 모두 평가되고 난 후 실행되어야 하기 때문이다. 또한 Window Function은 Aggregate Function이 수행된 후 실행된다.</p>
<p>만약 Window Function이 수행된 후 데이터를 걸러내거나 그룹을 묶어줘야 한다면 서브 셀렉트를 사용할 수 있다. 아래는 연봉 순위가 3 미만인 데이터를 가져오는 예시다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT depname, empno, salary, enroll_date
FROM
  (SELECT depname, empno, salary, enroll_date,
          rank() OVER (PARTITION BY depname ORDER BY salary DESC, empno) AS pos
     FROM empsalary
  ) AS ss
WHERE pos &lt; 3;</code>
        </deckgo-highlight-code>
<p>만약 여러 Window Function을 적용해야 하고 그 내용이 같다면 아래와 같은 방법으로 중복 작성을 피할 수 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT sum(salary) OVER w, avg(salary) OVER w
  FROM empsalary
  WINDOW w AS (PARTITION BY depname ORDER BY salary DESC);</code>
        </deckgo-highlight-code>
<h1 id="inheritance" style="position:relative;">Inheritance<a href="#inheritance" aria-label="inheritance permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h1>
<p>상속은 객체지향 데이터베이스의 컨셉 중 하나이다.</p>
<p>각 나라의 수도가 저장된 <code>capitals</code> 테이블과 수도가 아닌 도시가 저장된 <code>non_cities</code> 테이블이 있다고 하자. 수도 또한 도시이기 때문에 모든 도시를 확인하기 위해서는 두 테이블이 모두 필요하다. 두 테이블을 합친 <code>VIEW</code>를 생각해볼 수도 있다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">CREATE TABLE capitals (
  name       text,
  population real,
  elevation  int,    -- (in ft)
  state      char(2)
);

CREATE TABLE non_capitals (
  name       text,
  population real,
  elevation  int     -- (in ft)
);

CREATE VIEW cities AS
  SELECT name, population, elevation FROM capitals
    UNION
  SELECT name, population, elevation FROM non_capitals;</code>
        </deckgo-highlight-code>
<p>이런 경우 상속을 사용하는 것이 더 낫다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">CREATE TABLE cities (
  name       text,
  population real,
  elevation  int     -- (in ft)
);

CREATE TABLE capitals (
  state      char(2) UNIQUE NOT NULL
) INHERITS (cities);</code>
        </deckgo-highlight-code>
<p>아래는 고도가 500 피트가 넘는 모든 도시를 가져온다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT name, elevation
  FROM cities
  WHERE elevation &gt; 500;</code>
        </deckgo-highlight-code>
<p>만약 수도가 아닌 도시만 가져오고 싶다면, <code>ONLY</code>를 사용한다.</p>
<deckgo-highlight-code  terminal="carbon" theme="one-dark"  >
          <code slot="code">SELECT name, elevation
    FROM ONLY cities
    WHERE elevation &gt; 500;</code>
        </deckgo-highlight-code>
<p><code>ONLY</code>를 통해 아래 계층의 데이터를 제외시킬 수 있다.</p></section></main></article></section><aside class="TOC__Container-sc-1ylks3q-0 kBuzcZ"><h2>ON THIS PAGE</h2><ul><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#db-생성">DB 생성</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#create-table">CREATE TABLE</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#insert-info">INSERT INFO</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#select">SELECT</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#join">JOIN</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#aggregate-function">Aggregate Function</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#update">UPDATE</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#delete">DELETE</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#view">VIEW</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#foreign-keys">Foreign Keys</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#transactions">Transactions</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#window-functions">Window Functions</a></li><li class="TOC__List-sc-1ylks3q-1 iIZXdw"><a href="/PostgreSQL/튜토리얼_따라하기/#inheritance">Inheritance</a></li></ul></aside></div></main><footer class="Footer__Container-sc-13p6nst-0 iETjur"><section><span>© rheech22 2022</span></section></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/PostgreSQL/튜토리얼_따라하기/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-a3726bf9ffa4bc4b35c5.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-88366ab3f81be41d1963.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-901be6ea90881a0f60ea.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-9ff4a2f5029ffdad7b65.js\"],\"component---src-pages-search-tsx\":[\"/component---src-pages-search-tsx-378d8666f6a5c47200e1.js\"],\"component---src-pages-wiki-index-tsx\":[\"/component---src-pages-wiki-index-tsx-1fbf1c84e286713895bd.js\"],\"component---src-templates-wiki-template-tsx\":[\"/component---src-templates-wiki-template-tsx-16cc8d77aed6bca742cb.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="9182980284b462cadce5";</script><script src="/webpack-runtime-d2bbc6e258549befaab7.js" async></script><script src="/framework-66e7f71d482ebd59d1c4.js" async></script><script src="/app-a3726bf9ffa4bc4b35c5.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>