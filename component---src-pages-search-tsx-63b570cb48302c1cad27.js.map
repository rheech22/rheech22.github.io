{"version":3,"file":"component---src-pages-search-tsx-63b570cb48302c1cad27.js","mappings":"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","sources":["webpack://gatsby-starter-blog-github-theme/./src/assets/icons/BigSearch.tsx","webpack://gatsby-starter-blog-github-theme/./src/assets/icons/Series.tsx","webpack://gatsby-starter-blog-github-theme/./src/hooks/useFilteredPosts.ts","webpack://gatsby-starter-blog-github-theme/./src/components/NoContent.tsx","webpack://gatsby-starter-blog-github-theme/./src/containers/SearchResult.tsx","webpack://gatsby-starter-blog-github-theme/./src/pages/search.tsx"],"sourcesContent":["const BigSearch = (props: any) => (\n  <svg\n    width=\"32px\"\n    height=\"32px\"\n    viewBox=\"0 0 32 32\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      fill=\"none\"\n      stroke=\"#000\"\n      strokeWidth={2.6666666666666665}\n      d=\"M20 20L29.333 29.333L20 20ZM12.667 22.667C18.19 22.667 22.667 18.19 22.667 12.667C22.667 7.144 18.19 2.667 12.667 2.667C7.144 2.667 2.667 7.144 2.667 12.667C2.667 18.19 7.144 22.667 12.667 22.667Z\"\n    />\n  </svg>\n);\nexport default BigSearch;\n","const Series = (props: any) => (\n  <svg\n    id=\"Capa_1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n    x=\"0px\"\n    y=\"0px\"\n    viewBox=\"0 0 32 32\"\n    style={{\n      enableBackground: 'new 0 0 226.696 226.696',\n    }}\n    xmlSpace=\"preserve\"\n    width={32}\n    height={32}\n    {...props}\n  >\n    <g>\n      <path d=\"M27.854 3.386h-2.326V1.059c0 -0.311 -0.137 -0.607 -0.374 -0.808c-0.237 -0.201 -0.552 -0.288 -0.858 -0.236L3.972 3.401c-0.511 0.085 -0.885 0.527 -0.885 1.044v26.497c0 0.585 0.474 1.059 1.059 1.059h23.709c0.585 0 1.059 -0.474 1.059 -1.059V4.445C28.913 3.86 28.439 3.386 27.854 3.386zM5.204 5.342l18.207 -3.033v24.352L5.204 29.692V5.342zM26.796 29.883h-9.847l7.695 -1.281c0.511 -0.085 0.885 -0.527 0.885 -1.044V5.503h1.267V29.883z\" />\n      <path d=\"M19.614 7.058l-10.938 1.694c-0.578 0.089 -0.974 0.63 -0.884 1.208c0.081 0.523 0.532 0.897 1.045 0.897c0.054 0 0.109 -0.004 0.163 -0.013l10.937 -1.694c0.578 -0.089 0.974 -0.63 0.884 -1.208C20.733 7.365 20.192 6.969 19.614 7.058z\" />\n    </g>\n  </svg>\n);\n\nexport default Series;\n","import { useLayoutEffect } from 'react';\nimport { useContext, useDispatch } from '../store/context';\nimport { Posts } from '../store/types';\n\ninterface Params {\n  series?: string;\n  searchFilter?: string;\n  searchKeyword?: string;\n  tag?: string;\n}\n\ninterface Filter extends Params {\n  posts: Posts\n}\n\nconst filter = ({ posts, searchKeyword, searchFilter, tag, series }: Filter) => {\n  if (searchKeyword) {\n    return posts\n      .filter(({ node: { frontmatter: { title }, html } }) => {\n        const hasTitle = title.toLowerCase()\n          .includes(searchKeyword.toLowerCase());\n        const hasContent = html?.toLowerCase()\n          .includes(searchKeyword.toLowerCase());\n\n        if (searchFilter === 'title') return hasTitle;\n        if (searchFilter === 'content') return hasContent;\n\n        return (hasTitle || hasContent);\n      });\n  }\n\n  if (tag) {\n    return posts\n      .filter(({ node: { frontmatter: { tags } } }) => {\n        return tags?.some(t => t?.toLowerCase() === tag.toLowerCase());\n      });\n  }\n\n  if (series) {\n    return posts\n      .filter(({ node: { frontmatter } }) => frontmatter.series === series);\n  }\n\n  return posts;\n};\n\n\nconst useFilteredPosts = ({ searchFilter, searchKeyword, tag, series }: Params) => {\n  const dispatch = useDispatch();\n\n  const { posts } = useContext();\n\n  useLayoutEffect(() => {\n    tag && dispatch({ type: 'setCurrentTag', payload: { tag: tag.toLowerCase() } });\n    series && dispatch({ type: 'setCurrentSeries', payload: { series } });\n  }, [ tag, series ]);\n\n  const filteredPosts = filter({ posts, searchFilter, searchKeyword, series, tag });\n\n  return filteredPosts;\n};\n\nexport default useFilteredPosts;\n","const NoContent = ({ prefix } : {prefix: string}) => {\n  return (\n    <p>{prefix} 없습니다.</p>\n  );\n};\n\nexport default NoContent;\n","import styled from 'styled-components';\nimport { previews } from '../styles/modules';\nimport { device } from '../styles/breakpoints';\nimport { flex } from '../styles/mixins';\nimport BigSearch from '../assets/icons/BigSearch';\nimport Series from '../assets/icons/Series';\n\nimport useFilteredPosts from '../hooks/useFilteredPosts';\nimport useLoadMore from '../hooks/useLoadMore';\n\nimport ScrollToTop from '../components/ScrollToTop';\nimport NoContent from '../components/NoContent';\nimport LoadMore from '../components/LoadMore';\nimport Post from '../components/Post';\n\nimport { SearchPageProps } from '../pages/search';\n\nconst ICONS: Record<string, JSX.Element | string> = {\n  'tag': '#',\n  'series': <Series/>,\n  'searchKeyword': <BigSearch/>,\n};\n\nconst SearchResult = ({ locationState }: {locationState: SearchPageProps['location']['state']}) => {\n  const filteredPosts = useFilteredPosts({\n    tag: locationState?.tag,\n    series: locationState?.series,\n    searchFilter: locationState?.searchFilter,\n    searchKeyword: locationState?.searchKeyword,\n  });\n\n  const { offset, loadMore } = useLoadMore(filteredPosts);\n\n  const [ filter, value ] = Object.entries(locationState ?? {})[0] ?? [ '', '' ];\n\n  return (\n    <Container>\n      <div>{ICONS[filter]}<span>{value}</span></div>\n      {filteredPosts.length === 0\n        ? <NoContent prefix=\"검색 결과가\"/>\n        : filteredPosts\n          .slice(0, offset)\n          .map(({ node: {\n            id,\n            excerpt,\n            frontmatter: {\n              path,\n              date,\n              title,\n              tags,\n            },\n          } }) =>\n            <Post\n              key={id}\n              path={path}\n              date={date}\n              title={title}\n              tags={tags ?? []}\n              excerpt={excerpt}\n            />\n          )}\n      <LoadMore load={loadMore}/>\n      <ScrollToTop />\n    </Container>\n  );\n};\n\nexport default SearchResult;\n\nconst Container = styled.ul`\n  & > div {\n    ${flex({ alignItems: 'center' })};\n    margin: 30px 0;\n    font-size: 28.8px;\n\n    span {\n      margin-left: 8px;\n      height: 100%;\n    }\n\n    svg {\n      height: 32px;\n      width: 32px;\n      path {\n        fill: transparent;\n        stroke: ${({ theme })=> theme.mute};\n        transition: all .5s;\n      }\n    }\n\n    @media ${device.widerThanLaptopS} {\n      margin-top: 0;\n    }\n  }\n  \n  ${previews};\n`;\n","import { PageProps } from 'gatsby';\n\nimport SearchResult from '../containers/SearchResult';\n\nimport SidebarProvider from '../components/SidebarProvider';\nimport SEO from '../components/SEO';\n\nexport type SearchPageProps = PageProps<object, object, Record<string, string>>;\n\nexport default ({ location }: SearchPageProps) => (\n  <SidebarProvider>\n    <SearchResult locationState = {location.state}/>\n  </SidebarProvider>\n);\n\nexport const Head = () => (\n  <SEO subTitle=\"검색\" />\n);\n"],"names":["props","_jsx","width","height","viewBox","xmlns","fill","stroke","strokeWidth","d","id","xmlnsXlink","x","y","style","enableBackground","xmlSpace","_jsxs","searchFilter","searchKeyword","tag","series","dispatch","useDispatch","posts","useContext","useLayoutEffect","type","payload","toLowerCase","filteredPosts","filter","node","title","frontmatter","html","hasTitle","includes","hasContent","tags","some","t","prefix","ICONS","Series","BigSearch","locationState","useFilteredPosts","useLoadMore","offset","loadMore","Object","entries","value","Container","length","NoContent","slice","map","excerpt","path","date","Post","LoadMore","load","ScrollToTop","styled","flex","alignItems","theme","mute","device","previews","location","SidebarProvider","SearchResult","state","Head","SEO","subTitle"],"sourceRoot":""}