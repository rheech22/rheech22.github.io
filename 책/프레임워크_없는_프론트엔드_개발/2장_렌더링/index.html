<!DOCTYPE html><html lang="ko-KR"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.11.0"/><meta name="theme-color" content="#161b22"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" data-gatsby-head="true"/><meta name="description" content="문서 객체 모델(DOM) DOM은 웹 어플리케이션의 조작 방법을 제공하는 API다. 웹 페이지는 HTML로 정의된 트리 구조를 갖는다. DOM은 이를 관리하는 방법이다. 컴포넌트 기반 애플리케이션 렌더링 함수 순수 함수로 렌더링한다는 것은 DOM 요…" data-gatsby-head="true"/><meta name="image" data-gatsby-head="true"/><meta name="og:title" content="conerstone" data-gatsby-head="true"/><meta name="og:description" content="문서 객체 모델(DOM) DOM은 웹 어플리케이션의 조작 방법을 제공하는 API다. 웹 페이지는 HTML로 정의된 트리 구조를 갖는다. DOM은 이를 관리하는 방법이다. 컴포넌트 기반 애플리케이션 렌더링 함수 순수 함수로 렌더링한다는 것은 DOM 요…" data-gatsby-head="true"/><meta name="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="2장 렌더링 | conerstone" data-gatsby-head="true"/><meta name="twitter:url" content="https://rheech22.github.io/책/프레임워크_없는_프론트엔드_개발/2장_렌더링" data-gatsby-head="true"/><meta name="twitter:description" content="문서 객체 모델(DOM) DOM은 웹 어플리케이션의 조작 방법을 제공하는 API다. 웹 페이지는 HTML로 정의된 트리 구조를 갖는다. DOM은 이를 관리하는 방법이다. 컴포넌트 기반 애플리케이션 렌더링 함수 순수 함수로 렌더링한다는 것은 DOM 요…" data-gatsby-head="true"/><meta name="twitter:image" content="https://rheech22.github.ioundefined" data-gatsby-head="true"/><meta name="twitter:creator" content="@@rheech22" data-gatsby-head="true"/><meta name="naver-site-verification" content="45d911481aa02bda5a391b5f2474bc61356de3f8" data-gatsby-head="true"/><meta http-equiv="Permissions-Policy" content="interest-cohort=(), user-id=()" data-gatsby-head="true"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0DM3BCWTDS"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0DM3BCWTDS', {"send_page_view":false});
      }
      </script><style data-styled="" data-styled-version="6.0.7">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,menu,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}/*!sc*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;}/*!sc*/
*[hidden]{display:none;}/*!sc*/
body{line-height:1;}/*!sc*/
menu,ol,ul{list-style:none;}/*!sc*/
blockquote,q{quotes:none;}/*!sc*/
blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}/*!sc*/
table{border-collapse:collapse;border-spacing:0;}/*!sc*/
@font-face{font-family:BlinkMacSystemFont;src:local('※');font-weight:400;font-style:normal;unicode-range:U+0041-005A,U+0061-007A,U+0030-0039;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
html,body{scroll-behavior:smooth;margin:0;}/*!sc*/
body{font-family:'Spoqa Han Sans',BlinkMacSystemFont,Arial,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;width:100%;background-color:#000000;color:#C9D1D9;min-height:100vh;line-height:1.5;transition:all .5s;}/*!sc*/
body #gatsby-focus-wrapper{max-width:1440px;padding:0 15px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column;}/*!sc*/
body main{font-size:16px;width:100%;}/*!sc*/
body a{color:unset;}/*!sc*/
data-styled.g2[id="sc-global-hGiQiZ1"]{content:"sc-global-hGiQiZ1,"}/*!sc*/
.dndVdK{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;border-top:1px solid #222222;transition:border-color 0.5s;margin-top:auto;width:100%;font-size:12px;text-align:center;font-weight:400;color:#bac4ce;}/*!sc*/
.dndVdK>section{padding:48px 8px;}/*!sc*/
data-styled.g3[id="Footer__Container-sc-13p6nst-0"]{content:"dndVdK,"}/*!sc*/
.esCaBN:focus{outline:none;}/*!sc*/
data-styled.g5[id="Textbox__Input-sc-vlag4q-0"]{content:"esCaBN,"}/*!sc*/
.hRTaSi{border-radius:8px;width:140px;height:48px;font-weight:400;position:relative;transition:all 0.5s;}/*!sc*/
@media (min-width: 768px){.hRTaSi:focus-within{width:544px;}.hRTaSi:focus-within>ul{display:block;}}/*!sc*/
.hRTaSi>input{border:none;border-radius:8px;padding:0 12px;width:100%;height:100%;background-color:#222222;color:#fff;font-size:14px;transition:background-color 0.5s;}/*!sc*/
.hRTaSi>input::placeholder{color:#a7a7a7;}/*!sc*/
.hRTaSi>input:focus{color:#fff;background-color:#383838;}/*!sc*/
@media (min-width: 768px){.hRTaSi>input:focus{border-bottom-left-radius:6px;border-bottom-right-radius:6px;}}/*!sc*/
.hRTaSi>input:focus::placeholder{color:#757D86;}/*!sc*/
data-styled.g6[id="SearchBar__Container-sc-6n5xnu-0"]{content:"hRTaSi,"}/*!sc*/
.cgshUI{display:flex;flex-direction:row;align-items:center;justify-content:normal;position:sticky;top:0;width:100%;min-height:71px;opacity:0.9;background-color:hsla(0, 0%, 0%, 0.5);backdrop-filter:blur(20px);z-index:1;transition:all 0.5s;}/*!sc*/
data-styled.g8[id="Header__Container-sc-z8t49p-0"]{content:"cgshUI,"}/*!sc*/
.erKfrX{display:flex;flex-direction:row;align-items:center;justify-content:center;min-width:38px;height:38px;transition:all 2s;}/*!sc*/
@media (min-width: 768px){.erKfrX{display:none;}}/*!sc*/
.erKfrX svg{width:20px;height:20px;transform:translateY(1px);}/*!sc*/
.erKfrX svg g>path{stroke:#f0f6fc;}/*!sc*/
data-styled.g9[id="Header__HomeButton-sc-z8t49p-1"]{content:"erKfrX,"}/*!sc*/
.fWSnbl{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;display:none;color:#f0f6fc;text-decoration:none;transition:color 2s;}/*!sc*/
@media (min-width: 768px){.fWSnbl{display:block;}}/*!sc*/
.fWSnbl>h1{font-size:24px;font-weight:600;white-space:nowrap;}/*!sc*/
data-styled.g10[id="Header__Title-sc-z8t49p-2"]{content:"fWSnbl,"}/*!sc*/
.iscvfN{position:relative;z-index:0;margin-right:8px;border:none;border-radius:50%;background:none;min-width:38px;min-height:38px;overflow:hidden;cursor:pointer;transition:box-shadow 2s;}/*!sc*/
@media (min-width: 768px){.iscvfN{margin-left:8px;}}/*!sc*/
@media (hover:hover){.iscvfN:hover{box-shadow:rgb(109,110,129) 1.5px 1.5px 3px 0px inset,rgba(109,110,129,0.5) -1.5px -1.5px 3px 1px inset;background-image:linear-gradient( to right bottom,#000000,#211e1f,#3b353b,#55505a,#6d6c7b,#6d6e81,#6b7187,#69748d,#535c78,#3e4563,#2b304e,#181b3a );}}/*!sc*/
data-styled.g11[id="Header__Button-sc-z8t49p-3"]{content:"iscvfN,"}/*!sc*/
.dkdLLc{position:absolute;top:19px;right:-32px;border:1px dotted transparent;border-radius:50%;width:100px;height:100px;transition:border-color 2s;}/*!sc*/
@media (hover:hover){.dkdLLc:hover{border-color:#C9D1D9;}.dkdLLc:hover svg path{fill:ivory;}}/*!sc*/
.dkdLLc>div{position:absolute;top:40px;right:40px;border-radius:50%;border:none;padding:0;width:20px;height:20px;background:none;outline:none;}/*!sc*/
.dkdLLc>div:first-of-type{animation:ZmWYm 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.dkdLLc>div:last-of-type{animation:dGgAwC 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.dkdLLc>div svg{width:20px;height:20px;transform:rotate(90deg);}/*!sc*/
.dkdLLc>div svg path{fill:#fff;}/*!sc*/
data-styled.g12[id="Header__CircleLayout-sc-z8t49p-4"]{content:"dkdLLc,"}/*!sc*/
.eVMkLI{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-left:auto;font-weight:500;}/*!sc*/
.eVMkLI>a{text-decoration:none;}/*!sc*/
.eVMkLI>a:hover{color:#F8EA18;}/*!sc*/
data-styled.g13[id="Header__Index-sc-z8t49p-5"]{content:"eVMkLI,"}/*!sc*/
@keyframes ZmWYm{from{transform:rotate(90deg) translate(50px) translateZ(10px);}to{transform:rotate(270deg) translate(50px) translateZ(10px);}}/*!sc*/
data-styled.g14[id="sc-keyframes-ZmWYm"]{content:"ZmWYm,"}/*!sc*/
@keyframes dGgAwC{from{transform:rotate(90deg) translate(-50px) translateZ(10px);}to{transform:rotate(270deg) translate(-50px) translateZ(10px);}}/*!sc*/
data-styled.g15[id="sc-keyframes-dGgAwC"]{content:"dGgAwC,"}/*!sc*/
.hmzKTL{position:sticky;top:163px;right:0px;display:none;min-width:fit-content;height:fit-content;overflow-y:scroll;color:#C9D1D9;}/*!sc*/
.hmzKTL::-webkit-scrollbar{display:none;}/*!sc*/
.hmzKTL h2{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-bottom:12px;padding:8px 10px;font-size:14px;font-weight:500;letter-spacing:0.025em;transition:all 0.5s;}/*!sc*/
.hmzKTL ul{padding-left:20px;}/*!sc*/
.hmzKTL li+li{margin-top:8px;}/*!sc*/
data-styled.g17[id="TOC__Container-sc-1ylks3q-0"]{content:"hmzKTL,"}/*!sc*/
.ksAkVR{display:flex;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:16px;padding-right:10px;max-width:215px;min-width:130px;width:100%;background-color:none;color:#8b949e;font-size:12px;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.ksAkVR:hover:hover{background-color:#222222;}}/*!sc*/
.ksAkVR a{padding:6px 0;width:100%;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
.bqfvvc{display:flex;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:24px;padding-right:10px;max-width:215px;min-width:130px;width:100%;background-color:none;color:#8b949e;font-size:11px;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.bqfvvc:hover:hover{background-color:#222222;}}/*!sc*/
.bqfvvc a{padding:5px 0;width:100%;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
data-styled.g18[id="TOC__List-sc-1ylks3q-1"]{content:"ksAkVR,bqfvvc,"}/*!sc*/
.bpQNeS{display:grid;grid-template-columns:auto;grid-template-rows:auto auto;grid-template-areas:'post' 'post' 'comments';}/*!sc*/
@media (min-width: 1080px){.bpQNeS{grid-template-columns:10fr 10fr 1fr;grid-template-rows:auto auto;grid-template-areas:'post post toc' 'post post toc' 'comments comments .';}}/*!sc*/
.bpQNeS>section{grid-area:post;}/*!sc*/
@media (min-width: 768px){.bpQNeS>section{max-width:826px;}}/*!sc*/
.bpQNeS>aside{grid-area:toc;}/*!sc*/
@media (min-width: 1280px){.bpQNeS>aside{display:flex;flex-direction:column;align-items:flex-start;justify-content:normal;}}/*!sc*/
.bpQNeS>div{grid-area:comments;margin:0 auto;}/*!sc*/
@media (min-width: 768px){.bpQNeS>div{max-width:826px;}}/*!sc*/
data-styled.g19[id="styles__Container-sc-4114r5-0"]{content:"bpQNeS,"}/*!sc*/
.cOLaBC{display:flex;flex-direction:row;align-items:normal;justify-content:center;margin:72px auto 72px auto;height:auto;width:100%;}/*!sc*/
data-styled.g20[id="styles__Section-sc-4114r5-1"]{content:"cOLaBC,"}/*!sc*/
.iQVJjY{padding:20px 0;width:100%;display:flex;flex-direction:column;align-items:normal;justify-content:normal;}/*!sc*/
data-styled.g21[id="styles__Article-sc-4114r5-2"]{content:"iQVJjY,"}/*!sc*/
.hLCEhK{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;font-weight:500;padding:10px 0;}/*!sc*/
.hLCEhK>div>a{text-underline-position:under;}/*!sc*/
.hLCEhK>div>a:hover{color:#F8EA18;}/*!sc*/
.hLCEhK>div>svg{margin:0 4px;transform:rotate(90deg);}/*!sc*/
data-styled.g22[id="styles__Nav-sc-4114r5-3"]{content:"hLCEhK,"}/*!sc*/
.dwxKPC{margin-bottom:26px;}/*!sc*/
data-styled.g23[id="styles__Header-sc-4114r5-4"]{content:"dwxKPC,"}/*!sc*/
.iAuiwv>section:nth-child(1){font-size:16px;}/*!sc*/
@media (min-width: 768px){.iAuiwv>section:nth-child(1){font-size:18px;}}/*!sc*/
.iAuiwv>section:nth-child(1) h1,.iAuiwv>section:nth-child(1) h2,.iAuiwv>section:nth-child(1) h3,.iAuiwv>section:nth-child(1) h4,.iAuiwv>section:nth-child(1) h5,.iAuiwv>section:nth-child(1) h6{font-weight:600;}/*!sc*/
.iAuiwv>section:nth-child(1) h1 .header-anchor,.iAuiwv>section:nth-child(1) h2 .header-anchor,.iAuiwv>section:nth-child(1) h3 .header-anchor,.iAuiwv>section:nth-child(1) h4 .header-anchor,.iAuiwv>section:nth-child(1) h5 .header-anchor,.iAuiwv>section:nth-child(1) h6 .header-anchor{fill:#F8EA18;}/*!sc*/
.iAuiwv>section:nth-child(1) h1:not(:first-of-type),.iAuiwv>section:nth-child(1) h2:not(:first-of-type),.iAuiwv>section:nth-child(1) h3:not(:first-of-type),.iAuiwv>section:nth-child(1) h4:not(:first-of-type),.iAuiwv>section:nth-child(1) h5:not(:first-of-type),.iAuiwv>section:nth-child(1) h6:not(:first-of-type){margin-top:1.2em;}/*!sc*/
.iAuiwv>section:nth-child(1) h1{margin-block-start:1em;margin-block-end:1em;font-size:36px;}/*!sc*/
.iAuiwv>section:nth-child(1) h2{margin-block-start:0.83em;margin-block-end:0.83em;font-size:28.8px;}/*!sc*/
.iAuiwv>section:nth-child(1) h3{margin-block-start:1em;margin-block-end:1em;font-size:21.6px;}/*!sc*/
.iAuiwv>section:nth-child(1) h4{margin-block-start:1.22em;margin-block-end:1.22em;font-size:19.8px;}/*!sc*/
.iAuiwv>section:nth-child(1) em{font-style:oblique;}/*!sc*/
.iAuiwv>section:nth-child(1) a{text-underline-position:under;}/*!sc*/
.iAuiwv>section:nth-child(1) a:hover{color:#F8EA18;}/*!sc*/
.iAuiwv>section:nth-child(1) p{display:block;margin-block-start:1em;margin-block-end:1em;word-break:break-word;line-height:32px;}/*!sc*/
.iAuiwv>section:nth-child(1) ol,.iAuiwv>section:nth-child(1) ul{padding-left:40px;}/*!sc*/
.iAuiwv>section:nth-child(1) ul{list-style-type:disc;}/*!sc*/
.iAuiwv>section:nth-child(1) ol{list-style-type:decimal;}/*!sc*/
.iAuiwv>section:nth-child(1) li{display:list-item;text-align:-webkit-match-parent;line-height:32px;}/*!sc*/
.iAuiwv>section:nth-child(1) li p{margin:0;}/*!sc*/
.iAuiwv>section:nth-child(1) table{display:block;border-color:gray;border-spacing:0;border-collapse:collapse;width:max-content;max-width:100%;overflow:auto;font-size:16px;}/*!sc*/
.iAuiwv>section:nth-child(1) table thead{display:table-header-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.iAuiwv>section:nth-child(1) table tbody{display:table-row-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.iAuiwv>section:nth-child(1) table tr{display:table-row;vertical-align:inherit;border:inherit;background-color:#0d1117;border-top-width:1px;border-top-style:solid;border-top-color:#222222;transition:all 0.5s;}/*!sc*/
.iAuiwv>section:nth-child(1) table tr:nth-of-type(2n){background-color:#383838;}/*!sc*/
.iAuiwv>section:nth-child(1) table th,.iAuiwv>section:nth-child(1) table td{display:table-cell;vertical-align:inherit;padding:6px 13px;border-width:1px;border-style:solid;border-color:#30363d;transition:all 0.5s;}/*!sc*/
.iAuiwv>section:nth-child(1) blockquote{padding:12px 20px 12px 28px;margin:30px 0px;border-left:4px solid #C9D1D9;font-family:Georgia,serif;font-style:italic;text-align:justify;font-size:24px;line-height:1.2;transition:all 0.5s;}/*!sc*/
.iAuiwv>section:nth-child(1) blockquote p{margin:0;}/*!sc*/
.iAuiwv>section:nth-child(1) code{margin:0;padding:0.2em 0.4em;background-color:rgba(135,131,120,0.15);color:#BF616A;border-radius:6px;font-size:85%;font-family:SFMono-Regular,Menlo,Consolas,Liberation Mono,monospace;}/*!sc*/
.iAuiwv>section:nth-child(1) strong{font-weight:bold;}/*!sc*/
.iAuiwv>section:nth-child(1) deckgo-highlight-code{--deckgo-highlight-code-carbon-toolbar-display:none;--deckgo-highlight-code-white-space:pre;max-width:90vw;font-size:14px;margin-bottom:32px;}/*!sc*/
.iAuiwv>section:nth-child(1) img{max-width:90vw;}/*!sc*/
@media (min-width: 768px){.iAuiwv>section:nth-child(1) img{max-width:694px;}}/*!sc*/
data-styled.g24[id="styles__Main-sc-4114r5-5"]{content:"iAuiwv,"}/*!sc*/
.ibrFQC{margin-bottom:4px;font-size:36px;font-weight:600;}/*!sc*/
@media (min-width: 425px){.ibrFQC{font-size:42px;}}/*!sc*/
data-styled.g25[id="styles__Title-sc-4114r5-6"]{content:"ibrFQC,"}/*!sc*/
.kJnDSb{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;color:#8b949e;font-size:14px;}/*!sc*/
.kJnDSb>div{display:flex;flex-direction:column;align-items:flex-end;justify-content:normal;}/*!sc*/
.kJnDSb>div a{text-underline-position:under;}/*!sc*/
.kJnDSb>div a:hover{color:#F8EA18;}/*!sc*/
data-styled.g26[id="styles__SubTitle-sc-4114r5-7"]{content:"kJnDSb,"}/*!sc*/
</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .header-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-anchor svg,
    h2 .header-anchor svg,
    h3 .header-anchor svg,
    h4 .header-anchor svg,
    h5 .header-anchor svg,
    h6 .header-anchor svg {
      visibility: hidden;
    }
    h1:hover .header-anchor svg,
    h2:hover .header-anchor svg,
    h3:hover .header-anchor svg,
    h4:hover .header-anchor svg,
    h5:hover .header-anchor svg,
    h6:hover .header-anchor svg,
    h1 .header-anchor:focus svg,
    h2 .header-anchor:focus svg,
    h3 .header-anchor:focus svg,
    h4 .header-anchor:focus svg,
    h5 .header-anchor:focus svg,
    h6 .header-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - -200)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=6d5c0719d6ce39c07b53ce38158aed46" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/favicons/android-chrome-192x192.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="apple-touch-icon" sizes="512x512" href="/favicons/android-chrome-512x512.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-gatsby-head="true">2장 렌더링 | conerstone</title><link as="style" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sora:wght@100;200;300;400;500&amp;display=swap" data-gatsby-head="true"/><link as="style" rel="stylesheet" href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" data-gatsby-head="true"/><script type="application/ld+json" data-gatsby-head="true">
            {
              "@context": "https://schema.org",
              "@type": "HowTo",
              "url": "https://rheech22.github.io/책/프레임워크_없는_프론트엔드_개발/2장_렌더링",
              "headline": "conerstone",
              "datePublished": "2023-02-07",
              "dateModified": "2023-08-22 00:37:43 +0900",
              "image": "[]"
            }
          </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__Container-sc-z8t49p-0 cgshUI"><a tabindex="-1" class="Header__HomeButton-sc-z8t49p-1 erKfrX" href="/"><svg viewBox="0 0 21 21" fill="currentColor" height="1em" width="1em"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M1.5 10.5l9-9 9 9"></path><path d="M3.5 8.5v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path></g></svg></a><a tabindex="-1" class="Header__Title-sc-z8t49p-2 fWSnbl" href="/"><h1>conerstone</h1></a><button tabindex="-1" aria-label="switch display mode" class="Header__Button-sc-z8t49p-3 iscvfN"><div class="Header__CircleLayout-sc-z8t49p-4 dkdLLc"><div><svg width="30px" height="30px" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M26.25 14.936C26.25 21.107 21.097 26.25 14.656 26.25C9.761 26.25 5.509 23.55 3.835 19.436C3.706 19.05 3.706 18.664 3.963 18.407C4.221 18.15 4.608 18.021 4.994 18.15C5.638 18.279 6.282 18.407 6.798 18.407C11.951 18.407 16.073 14.421 16.073 9.407C16.073 7.864 15.815 6.579 15.042 5.036C14.913 4.779 14.913 4.393 15.171 4.136C15.429 3.879 15.686 3.75 16.073 3.75C21.87 4.393 26.25 9.279 26.25 14.936Z" fill="#030D45"></path></svg></div><div><svg width="30px" height="30px" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15 9.375c-3.1 0 -5.625 2.525 -5.625 5.625s2.525 5.625 5.625 5.625 5.625 -2.525 5.625 -5.625 -2.525 -5.625 -5.625 -5.625zm14.438 4.717l-5.549 -2.771 1.963 -5.883c0.264 -0.797 -0.492 -1.553 -1.283 -1.283l-5.883 1.963 -2.777 -5.555c-0.375 -0.75 -1.441 -0.75 -1.816 0l-2.771 5.549L5.432 4.148c-0.797 -0.264 -1.553 0.492 -1.283 1.283l1.963 5.883 -5.549 2.777c-0.75 0.375 -0.75 1.441 0 1.816l5.549 2.771 -1.963 5.889c-0.264 0.797 0.492 1.553 1.283 1.283l5.883 -1.963 2.771 5.549c0.375 0.75 1.441 0.75 1.816 0l2.771 -5.549 5.883 1.963c0.797 0.264 1.553 -0.492 1.283 -1.283l-1.963 -5.883 5.549 -2.771c0.762 -0.381 0.762 -1.447 0.012 -1.822zm-9.135 6.211c-2.924 2.924 -7.682 2.924 -10.605 0 -2.924 -2.924 -2.924 -7.682 0 -10.605 2.924 -2.924 7.682 -2.924 10.605 0 2.924 2.924 2.924 7.682 0 10.605z"></path></svg></div></div></button><form class="SearchBar__Container-sc-6n5xnu-0 hRTaSi"><input type="text" placeholder="Search" maxLength="40" class="Textbox__Input-sc-vlag4q-0 esCaBN" value=""/><button type="submit" hidden="" aria-label="Submit Search"></button></form><div class="Header__Index-sc-z8t49p-5 eVMkLI"><a tabindex="-1" href="/wiki-index/"><h2>Index.</h2></a></div></header><main><div class="styles__Container-sc-4114r5-0 bpQNeS"><section class="styles__Section-sc-4114r5-1 cOLaBC"><article class="styles__Article-sc-4114r5-2 iQVJjY"><nav class="styles__Nav-sc-4114r5-3 hLCEhK"><div><a href="/책/">책</a><svg aria-hidden="true" role="img" class="octicon octicon-chevron-up" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path fill-rule="evenodd" d="M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z"></path></svg></div><div><a href="/책/프레임워크_없는_프론트엔드_개발/">프레임워크 없는 프론트엔드 개발</a></div></nav><header class="styles__Header-sc-4114r5-4 dwxKPC"><h1 class="styles__Title-sc-4114r5-6 ibrFQC">2장 렌더링</h1><div class="styles__SubTitle-sc-4114r5-7 kJnDSb"><div><span>9<!-- --> min read</span><time dateTime="created at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/index.md" target="_blank" rel="noreferrer">CREATED: <!-- -->07/02/2023</a></time><time dateTime="updated at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/index.md" target="_blank" rel="noreferrer">UPDATED: <!-- -->21/08/2023</a></time><a href="https://github.com/rheech22/rheech22.github.io/blame/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/index.md" target="_blank" rel="noreferrer">Blame</a></div></div></header><main class="styles__Main-sc-4114r5-5 iAuiwv"><section><h2 id="문서-객체-모델dom" style="position:relative;">문서 객체 모델(DOM)<a href="#%EB%AC%B8%EC%84%9C-%EA%B0%9D%EC%B2%B4-%EB%AA%A8%EB%8D%B8dom" aria-label="문서 객체 모델dom permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p><a href="https://developer.mozilla.org/ko/docs/Web/API/Document_Object_Model/Introduction">DOM</a>은 웹 어플리케이션의 조작 방법을 제공하는 API다. 웹 페이지는 HTML로 정의된 트리 구조를 갖는다. DOM은 이를 관리하는 방법이다.</p>
<h2 id="컴포넌트-기반-애플리케이션" style="position:relative;">컴포넌트 기반 애플리케이션<a href="#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98" aria-label="컴포넌트 기반 애플리케이션 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<h3 id="렌더링-함수" style="position:relative;">렌더링 함수<a href="#%EB%A0%8C%EB%8D%94%EB%A7%81-%ED%95%A8%EC%88%98" aria-label="렌더링 함수 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>순수 함수로 렌더링한다는 것은 DOM 요소가 애플리케이션의 상태에만 의존한다는 것을 의미한다.</p>
<blockquote>
<p>view = f(state)</p>
</blockquote>
<br >
<p>투두리스트 앱을 만들었다. 책과 같이 <a href="https://todomvc.com/">ToDoMVC</a>를 사용하지는 않고 좀 더 작은 뷰를 만들었다.<br>
접근이 필요한 요소에는 클래스 속성을 부여한다.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  highlight-lines="12 14 16">
          <code slot="code">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;todos&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;section class=&quot;todoapp&quot;&gt;
      &lt;header&gt;
        &lt;h1&gt;todos&lt;/h1&gt;
        &lt;input class=&quot;new-todo&quot; placeholder=&quot;할 일 적기&quot; autofocus&gt;
      &lt;/header&gt;
      &lt;section class=&quot;main&quot;&gt;
        &lt;ul class=&quot;todo-list&quot;&gt;&lt;/ul&gt;
      &lt;/section&gt;
      &lt;footer class=&quot;footer&quot;&gt;
        &lt;span class=&quot;todo-count&quot;&gt;&lt;/span&gt;
        &lt;ul class=&quot;filters&quot;&gt;
          &lt;li&gt;&lt;a href=&quot;#/&quot;&gt;전체&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#/active&quot;&gt;미완료&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#/completed&quot;&gt;완료&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
        &lt;button class=&quot;clear-completed&quot;&gt;완료 삭제&lt;/button&gt;
      &lt;/footer&gt;
    &lt;/section&gt;
    &lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code>
        </deckgo-highlight-code>
<p>저자는 <a href="https://github.com/faker-js/faker">faker-js</a>를 사용하지만 간단한 예제를 위해 서버에서 받는 데이터를 단순 가정했다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const mockTodos = [
  {
    id: &#39;1&#39;,
    text: &#39;빨래 널기&#39;,
    completed: false,
  },
  {
    id: &#39;2&#39;,
    text: &#39;분리수거 하기&#39;,
    completed: false,
  },
  {
    id: &#39;3&#39;,
    text: &#39;헬스장 가기&#39;,
    completed: true,
  }
]</code>
        </deckgo-highlight-code>
<p><code>fetchTodos()</code>는 할 일 목록을 받아오는 API 호출 함수라고 하자.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const fetchTodos = () =&gt; mockTodos;

const state = {
  todos: fetchTodos(),
  filter: &#39;All&#39;
}</code>
        </deckgo-highlight-code>
<p>렌더링 함수는 <code>requestAnimationFrame()</code>를 사용한다. 후술할 <code>appView()</code>를 통해 기존 뷰를 새로운 뷰로 대체한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const app = document.querySelector(&#39;.todoapp&#39;);

window.requestAnimationFrame(() =&gt; {
  const newApp = appView(app, state)
  app.replaceWith(newApp)
})</code>
        </deckgo-highlight-code>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/replaceWith">replaceWith()</a>: 이 메서드는 특정 요소를 새로운 요소로 대체한다.</li>
<li><a href="https://developer.mozilla.org/ko/docs/Web/API/Window/requestAnimationFrame">requestAnimationFrame()</a>: <code>requestAnimationFrame()</code>는 다음 리페인트가 이벤트 루프에 스케쥴링되기 직전에 실행될 콜백을 브라우저에게 알린다. 이 메서드를 사용하면 메인 스레드를 차단하지 않고 브라우저 렌더링 성능에 최적화된 함수 호출이 가능하다.</li>
</ul>
<p><code>appView()</code>는 갱신된 요소를 반환한다. <code>targetElement</code>의 <code>list</code>, <code>counter</code>, <code>filters</code>를 갱신하고 모든 내용을 대체한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const appView = (targetElement, { todos, filter: currentFilter }) =&gt; {
  const element = targetElement.cloneNode(true)

  // get elements
  const list = element.querySelector(&#39;.todo-list&#39;)
  const counter = element.querySelector(&#39;.todo-count&#39;)
  const filters = element.querySelector(&#39;.filters&#39;)

  // new list
  const newList = list.cloneNode(true);

  newList.innerHTML = todos.map(({ text, completed }) =&gt; {
    return `
      &lt;li ${completed ? &#39;class=&quot;completed&quot;&#39; : &#39;&#39;}&gt;
        &lt;div class=&quot;view&quot;&gt;
          &lt;input 
            ${completed ? &#39;checked&#39; : &#39;&#39;}
            class=&quot;toggle&quot; 
            type=&quot;checkbox&quot;&gt;
          &lt;label&gt;${text}&lt;/label&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    `
  }).join(&#39;&#39;);

  // new counter
  const newCounter = counter.cloneNode(true);

  const howManyLeft = todos.filter(todo =&gt; !todo.completed).length;

  newCounter.textContent = `${howManyLeft}개 남음`;

  // new filters
  const newfilters = filters.cloneNode(true);
  const filterList = newfilters.querySelectorAll(&#39;li a&#39;);

  [...filterList].forEach(filter =&gt; {
    if (filter.textContent === currentFilter) {
      filter.classList.add(&#39;selected&#39;);
    } else {
      filter.classList.remove(&#39;selected&#39;);
    }
  });

  // replace elements
  list.replaceWith(newList);
  counter.replaceWith(newCounter);
  filters.replaceWith(newfilters);

  return element
}</code>
        </deckgo-highlight-code>
<p>브라우저에서 상태에 맞게 그려진 할 일 목록을 볼 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/cead9e3623d6cc5736da98f421fab587/f32b7/todos-1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 55.172413793103445%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAyUlEQVR42q3QzQ6CMBAEYN7/pUw4ysULkaCVIgVsoQUElJ/QUYgxMZ4sbrI9fp1Zy/d92LYNIQSmaULf9xiGwXgtpRQYY2jbFvNorZc1nQXM8xx1Xb9/6brOHJxrzojgGTzPA6UUTdMYp7T0pFG1JTyyh7N14LouCCEfJ/gJHIcRXF1A2AE85ciyDFVVmVeWUiIMQ8hcGiX6Ap8ERFLguEvR38fVqDU/PCqw21Bc1e0FrkhYlAVCGuF8SlbXXcA4jhEEAeKE/QV8ADOyX7Wx+iBZAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="todos-1"
        title=""
        src="/static/cead9e3623d6cc5736da98f421fab587/31198/todos-1.png"
        srcset="/static/cead9e3623d6cc5736da98f421fab587/fe9c7/todos-1.png 174w,
/static/cead9e3623d6cc5736da98f421fab587/39e45/todos-1.png 347w,
/static/cead9e3623d6cc5736da98f421fab587/31198/todos-1.png 694w,
/static/cead9e3623d6cc5736da98f421fab587/ee9b6/todos-1.png 1041w,
/static/cead9e3623d6cc5736da98f421fab587/f32b7/todos-1.png 1136w"
        sizes="(max-width: 694px) 100vw, 694px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h3 id="중간-리팩토링" style="position:relative;">중간 리팩토링<a href="#%EC%A4%91%EA%B0%84-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81" aria-label="중간 리팩토링 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>기능은 아직이지만 기본적인 모양은 완성했다. 하지만 코드에서 리팩토링 신호를 포착할 수 있다. 일단 뷰 함수가 너무 거대하기 때문에 읽기 어렵다. 갱신할 뷰가 추가되면 코드가 더 복잡해지는 건 분명해 보인다. 게다가 개별 요소(<code>todos</code>, <code>counter</code>, <code>filters</code>)를 새로운 것으로 대체하는 작업, 즉 내부 로직은 다르지만 같은 유형의 작업을 수행하고 있다. 하나의 책임을 갖는 함수들로 분리하면 좋을 것 같다.</p>
<p>예를 들어 뷰 함수는 <code>targetElement</code>와 <code>state</code>를 받아 새로운 요소를 반환한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const viewFunction = (targetElement, state) =&gt; newElement;</code>
        </deckgo-highlight-code>
<p>아래 모양의 뷰 함수들로 분리했다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const counterView = (targetElement, { todos }) =&gt; {
  const newCounter = targetElement.cloneNode(true);

  const howManyLeft = todos.filter(todo =&gt; !todo.completed).length;

  newCounter.textContent = `${howManyLeft}개 남음`;

  return newCounter;
}

const filterView = (targetElement, { filter: currentFilter }) =&gt; {
  const newFilters = targetElement.cloneNode(true);
  const filterList = newCounter.querySelectorAll(&#39;li a&#39;);

  [...filterList].forEach(filter =&gt; {
    if (filter.textContent === currentFilter) {
      filter.classList.add(&#39;selected&#39;);
    } else {
      filter.classList.remove(&#39;selected&#39;);
    }
  })

  return newFilters;
}

const todosView = (targetElement, { todos }) =&gt; {
  const newTodoList = targetElement.cloneNode(true);

  newTodoList.innerHTML = todos.map(({ text, completed }) =&gt; {
    return `
      &lt;li ${completed ? &#39;class=&quot;completed&quot;&#39; : &#39;&#39;}&gt;
        &lt;div class=&quot;view&quot;&gt;
          &lt;input 
            ${completed ? &#39;checked&#39; : &#39;&#39;}
            class=&quot;toggle&quot; 
            type=&quot;checkbox&quot;&gt;
          &lt;label&gt;${text}&lt;/label&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    `
  }).join(&#39;&#39;);

  return newTodoList
}

const appView = (targetElement, state) =&gt; {
  const element = targetElement.cloneNode(true)

  const list = element.querySelector(&#39;.todo-list&#39;)
  const counter = element.querySelector(&#39;.todo-count&#39;)
  const filters = element.querySelector(&#39;.filters&#39;)

  list.replaceWith(todosView(list, state))
  counter.replaceWith(counterView(counter, state))
  filters.replaceWith(filterView(filters, state))

  return element
}</code>
        </deckgo-highlight-code>
<p>소스 코드의 디렉토리, 파일만 잘 구분해도 설계는 확연하게 좋아질 수 있다. 관심사에 따라 디렉토리도 나눈다면 더 이해하기 쉬운 구조가 된다. 지금까지 작성한 코드가 컴포넌트 라이브러리의 초안이다.</p>
<deckgo-highlight-code language="bash" terminal="carbon" theme="one-dark"  >
          <code slot="code">root
├── views
│   ├── counterView.js
│   ├── FilterView.js
│   └── TodosView.js
│   └── Appview.js
├── index.html
└── index.js</code>
        </deckgo-highlight-code>
<h3 id="컴포넌트-함수" style="position:relative;">컴포넌트 함수<a href="#%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%ED%95%A8%EC%88%98" aria-label="컴포넌트 함수 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<blockquote>
<p>컴포넌트 기반의 애플리케이션을 작성하려면 컴포넌트 간에 선언적인 방식으로 상호작용 해야 한다.</p>
</blockquote>
<br />
<p>기존 <code>appView()</code>는 함수는 갱신이 필요한 뷰 함수를 직접 호출하고 있다. 이는 선언적 방식이라 할 수 없다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const appView = (targetElement, state) =&gt; {
  const element = targetElement.cloneNode(true)

  const list = element.querySelector(&#39;.todo-list&#39;)
  const counter = element.querySelector(&#39;.todo-count&#39;)
  const filters = element.querySelector(&#39;.filters&#39;)

  list.replaceWith(todosView(list, state))
  counter.replaceWith(counterView(counter, state))
  filters.replaceWith(filterView(filters, state))

  return element
}</code>
        </deckgo-highlight-code>
<p>선언적 방식이라면 뭔가 '해 줘' 느낌이 나야 한다.
<span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d1eca93795fdfb19256e0f0c431c9cec/edd00/do.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 91.37931034482759%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEF/8QAFwEBAAMAAAAAAAAAAAAAAAAAAQACA//aAAwDAQACEAMQAAAB97sc4alaMRQuGj//xAAaEAACAgMAAAAAAAAAAAAAAAABAgASEBEy/9oACAEBAAEFAss1Q5NU5eADc//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABcRAQEBAQAAAAAAAAAAAAAAAAEQETH/2gAIAQIBAT8BXI9n/8QAFxABAQEBAAAAAAAAAAAAAAAAAQAQIP/aAAgBAQAGPwLkiM//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQITFR/9oACAEBAAE/IWDgLGKoaL9i7TuOQMf/2gAMAwEAAgADAAAAEIfovP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAwEBPxBZs//EABcRAQADAAAAAAAAAAAAAAAAAAEAEBH/2gAIAQIBAT8QGB0t/8QAHBABAAIDAQEBAAAAAAAAAAAAAQARITFBEHHh/9oACAEBAAE/EG3upcfGvNwnhe5hgqpyX8iZFtbWEbQc9gmCTtef/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="do"
        title=""
        src="/static/d1eca93795fdfb19256e0f0c431c9cec/9c477/do.jpg"
        srcset="/static/d1eca93795fdfb19256e0f0c431c9cec/583d1/do.jpg 174w,
/static/d1eca93795fdfb19256e0f0c431c9cec/4d0aa/do.jpg 347w,
/static/d1eca93795fdfb19256e0f0c431c9cec/9c477/do.jpg 694w,
/static/d1eca93795fdfb19256e0f0c431c9cec/909c7/do.jpg 1041w,
/static/d1eca93795fdfb19256e0f0c431c9cec/edd00/do.jpg 1074w"
        sizes="(max-width: 694px) 100vw, 694px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<br />
<p><code>class</code> 대신 <code>data-component</code> 속성에 컴포넌트의 이름을 넣는다. 이제부터 뷰에서 <a href="https://developer.mozilla.org/ko/docs/Learn/HTML/Howto/Use_data_attributes">데이터 속성</a>을 사용한다.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  highlight-lines="12 15 16">
          <code slot="code">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;todos&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;section class=&quot;todoapp&quot;&gt;
      &lt;header&gt;
        &lt;h1&gt;todos&lt;/h1&gt;
        &lt;input class=&quot;new-todo&quot; placeholder=&quot;할 일 적기&quot; autofocus&gt;
      &lt;/header&gt;
      &lt;section class=&quot;main&quot;&gt;
        &lt;ul data-component=&quot;todos&quot;&gt;&lt;/ul&gt;
      &lt;/section&gt;
      &lt;footer class=&quot;footer&quot;&gt;
        &lt;span data-component=&quot;counter&quot;&gt;&lt;/span&gt;
        &lt;ul data-component=&quot;filters&quot;&gt;
          &lt;li&gt;&lt;a href=&quot;#/&quot;&gt;전체&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#/active&quot;&gt;미완료&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#/completed&quot;&gt;완료&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
        &lt;button class=&quot;clear-completed&quot;&gt;완료 삭제&lt;/button&gt;
      &lt;/footer&gt;
    &lt;/section&gt;
    &lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code>
        </deckgo-highlight-code>
<br />
<blockquote>
<p>컴포넌트 라이브러리를 위한 또 다른 필수 조건은 레지스트리로, 레지스트리는 앱에서 사용할 수 있는 모든 컴포넌트의 인덱스이다.</p>
</blockquote>
<br />
<p>레지스트리 키는 <code>data-component</code>속성과 일치한다. 레지스트리를 사용하면 컴포넌트 안에서 다른 컴포넌트를 사용할 수 있다. 재사용성은 컴포넌트 기반 애플리케이션의 필수 요소다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// 레지스트리 예시

const registry = {
  todos: Todos,
  counter: Counter,
  filters: Filters,
}</code>
        </deckgo-highlight-code>
<p>컴포넌트의 느낌을 내고 싶어 기존 뷰 함수의 이름을 <code>PascalCase</code>로 변경했다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="1,2 12,13 28,29">
          <code slot="code">// components/Counter.js
const Counter = (targetElement, { todos }) =&gt; {
  const newCounter = targetElement.cloneNode(true);

  const howManyLeft = todos.filter(todo =&gt; !todo.completed).length;

  newCounter.textContent = `${howManyLeft}개 남음`;

  return newCounter;
}

// components/Filters.js
const Filters = (targetElement, { filter: currentFilter }) =&gt; {
  const newFilters = targetElement.cloneNode(true);
  const filterList = newCounter.querySelectorAll(&#39;li a&#39;);

  [...filterList].forEach(filter =&gt; {
    if (filter.textContent === currentFilter) {
      filter.classList.add(&#39;selected&#39;);
    } else {
      filter.classList.remove(&#39;selected&#39;);
    }
  })

  return newFilters;
}

// components/Todos
const Todos = (targetElement, { todos }) =&gt; {
  const newTodoList = targetElement.cloneNode(true);

  newTodoList.innerHTML = todos.map(({ text, completed }) =&gt; {
    return `
      &lt;li ${completed ? &#39;class=&quot;completed&quot;&#39; : &#39;&#39;}&gt;
        &lt;div class=&quot;view&quot;&gt;
          &lt;input 
            ${completed ? &#39;checked&#39; : &#39;&#39;}
            class=&quot;toggle&quot; 
            type=&quot;checkbox&quot;&gt;
          &lt;label&gt;${text}&lt;/label&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    `
  }).join(&#39;&#39;);

  return newTodoList
}</code>
        </deckgo-highlight-code>
<p><code>appView()</code>의 구성은 더 이상 필요하지 않아 삭제하고, <code>fetchTodos()</code>는 <code>apis.js</code>로 분리했다. 그리고 레지스트리를 위한 공간인 <code>registry.js</code>를 추가한다.</p>
<deckgo-highlight-code language="bash" terminal="carbon" theme="one-dark"  >
          <code slot="code">root
├── apis.js
├── components
│   ├── Counter.js
│   ├── Filters.js
│   └── Todos.js
├── index.html
├── index.js
└── registry.js</code>
        </deckgo-highlight-code>
<p>먼저 레지스트리 등록을 위한 빈 객체를 만들어 두었다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// registry.js

const registry = {};</code>
        </deckgo-highlight-code>
<p><code>addComponent()</code>는 레지스트리에 컴포넌트를 등록한다. <code>render()</code>는 고차 함수로서 컴포넌트를 미리 받아 놓고 새로운 상태로 갱신된 엘리먼트를 반환한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// registry.js

export const addComponent = (name, component) =&gt; {
  registry[name] = render(component);
}</code>
        </deckgo-highlight-code>
<p><code>render()</code>를 좀 더 살펴보면,</p>
<p>컴포넌트(기존 뷰 함수)를 실행시켜 새롭게 갱신된 엘리먼트를 리턴한다. 또한 <code>data-component</code> 속성을 갖는 모든 자식 요소를 찾는다. 만약 레지스트리에 등록된 요소라면 이를 갱신한다. 레지스트리에 등록된 컴포넌트는 <code>render()</code>로 래핑되어 <code>targetElement</code>과 <code>state</code>만 전달되면 lazy하게 실행될 준비가 되어있다. 재귀적 구성으로 루트만 렌더링하면 마지막 컴포넌트까지 모두 그린다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// registry.js

const render = (component) =&gt; {
  return (targetElement, state) =&gt; {
    const element = component(targetElement, state);

    const children = element.querySelectorAll(&#39;[data-component]&#39;);

    [...children].forEach((target) =&gt; {
      const name = target.dataset.component;

      const component = registry[name];

      if (!component) return;

      target.replaceWith(component(target, state))
    })

    return element;
  }
}</code>
        </deckgo-highlight-code>
<p><code>renderRoot()</code>는 최초 DOM 요소인 루트를 렌더링한다. <code>render()</code>는 <code>data-component</code> 속성을 가진 모든 자식 요소를 재귀적으로 갱신한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// registry.js

export const renderRoot = (root, state) =&gt; {
  const clone = (root) =&gt; {
    return root.cloneNode(true);
  }

  return render(clone)(root, state);
}</code>
        </deckgo-highlight-code>
<p><code>registry.js</code>의 최종 모습은 아래와 같다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// registry.js

const registry = {};

const render = (component) =&gt; {
  return (targetElement, state) =&gt; {
    const element = component(targetElement, state);

    const children = element.querySelectorAll(&#39;[data-component]&#39;);

    [...children].forEach((target) =&gt; {
      const name = target.dataset.component;

      const component = registry[name];

      if (!component) return;

      target.replaceWith(component(target, state))
    })

    return element;
  }
}

export const addComponent = (name, component) =&gt; {
  registry[name] = render(component);
}

export const renderRoot = (root, state) =&gt; {
  const clone = (root) =&gt; {
    return root.cloneNode(true);
  }

  return render(clone)(root, state);
}</code>
        </deckgo-highlight-code>
<p>메인 컨트롤러에서 레지스트리에 컴포넌트를 등록하는 과정이 있다. 동적 렌더링을 가정하려고 5초마다 새로운 할 일이 추가된 목록을 그리도록 했다. (이처럼 특정 주기마다 가상 루트 요소를 만든 다음 실제 요소로 바꾸는 방법은 대규모 프로젝트에서 성능을 저하시킬 수 있다.)</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="17,20 22,29 31,45">
          <code slot="code">// index.js

import { fetchTodos } from &quot;./apis.js&quot;;

import Todos from &#39;./components/Todos.js&#39;;
import Filters from &#39;./components/Filters.js&#39;;
import Counter from &#39;./components/Counter.js&#39;;

import { addComponent, renderRoot } from &#39;./registry.js&#39;

// set state
const state = {
  todos: fetchTodos(),
  filter: &#39;All&#39;
}

// 레지스트리에 컴포넌트 등록
addComponent(&#39;todos&#39;, Todos);
addComponent(&#39;counter&#39;, Counter);
addComponent(&#39;filters&#39;, Filters);

// 동적 렌더링
const init = () =&gt; {
  window.requestAnimationFrame(() =&gt; {
    const app = document.querySelector(&#39;.todoapp&#39;);

    app.replaceWith(renderRoot(app, state))
  })
}

// 5초마다 새로운 할 일이 추가된다고 가정
window.setInterval(() =&gt; {
  const index = state.todos.length + 1;

  state.todos = [
    {
      id: `${index}`,
      text: `새로운 할 일 ${index}`,
      completed: false
    },
    ...state.todos,
  ]

  init();
}, 5000)

init();</code>
        </deckgo-highlight-code>
<p>5초마다 새로운 할 일이 추가된다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/336d7d584ca38749169c0d4ee512efa1/7960f/todos-2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 61.49425287356321%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvklEQVR42q2Syw6DIBBF/f8/87ExxoWGRW3EmmgFjKQowi3QfoE4C0hmcXIfkzRNgzRNIaWEH2stYiZhjGGaJiiloLXGcRxxQK9sXVcIIcA5D/95nteBxphgt67rYL2qqij7P+Am4bMsyxJd12Hf9ziFC1+QFzmyLEPf9/C7y0D/vDgFeRAMdIAvKaqUcRydqqfLy4TMos8G0CBkA6X2XwRigcaVoVAU5h6gEAxtS1126h7gPL+d3ac7lQ/umC9yyrAb4xZSaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="todos-2"
        title=""
        src="/static/336d7d584ca38749169c0d4ee512efa1/31198/todos-2.png"
        srcset="/static/336d7d584ca38749169c0d4ee512efa1/fe9c7/todos-2.png 174w,
/static/336d7d584ca38749169c0d4ee512efa1/39e45/todos-2.png 347w,
/static/336d7d584ca38749169c0d4ee512efa1/31198/todos-2.png 694w,
/static/336d7d584ca38749169c0d4ee512efa1/ee9b6/todos-2.png 1041w,
/static/336d7d584ca38749169c0d4ee512efa1/7960f/todos-2.png 1274w"
        sizes="(max-width: 694px) 100vw, 694px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h3 id="가상-dom" style="position:relative;">가상 DOM<a href="#%EA%B0%80%EC%83%81-dom" aria-label="가상 dom permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>가상 DOM의 핵심은 비교 알고리즘이다. 더 이상 전체 목록을 교체하지 않고 변경된 요소가 실제 DOM에 필요한 유일한 작업이라는 사실을 시스템이 이해하도록 하는 것이 가상 DOM의 목적이다.</p>
<p>메인 컨트롤러에서 <code>replaceWith</code> 대신 <code>diff</code> 알고리즘을 사용한다.</p>
<deckgo-highlight-code language="jsx" terminal="carbon" theme="one-dark"  >
          <code slot="code">// index.js

// ...

const init = () =&gt; {
  window.requestAnimationFrame(() =&gt; {
    const app = document.querySelector(&#39;.todoapp&#39;)
    const newApp = registry.createRoot(app, state)
    renderDiff(document.body, app, newApp)
  })
}

// ...</code>
        </deckgo-highlight-code>
<p><code>renderDiff</code>는 부모 노드, 실제 노드, 가상 노드를 인자로 받아 재귀적으로 실행되는 함수다.</p>
<p>실제 노드는 존재하지만 가상 노드가 없다면 그 실제 노드는 삭제 대상이다.</p>
<deckgo-highlight-code language="jsx" terminal="carbon" theme="one-dark"  >
          <code slot="code">// renderDiff.js

if (realNode &amp;&amp; !virtualNode) {
    realNode.remove();
    return;
}</code>
        </deckgo-highlight-code>
<p>반대로 실제 노드는 없지만 가상 노드가 있다면 그 가상 노드는 추가 대상이다.</p>
<deckgo-highlight-code language="jsx" terminal="carbon" theme="one-dark"  >
          <code slot="code">// renderDiff function

if (!realNode &amp;&amp; virtualNode) {
    parentNode.appendChild(virtualNode);
    return;
}</code>
        </deckgo-highlight-code>
<p>두 노드가 모두 존재하는 경우 변경 사항이 있을 때만 실제 노드를 대체한다.</p>
<deckgo-highlight-code language="jsx" terminal="carbon" theme="one-dark"  >
          <code slot="code">// renderDiff function

if (isNodeChanged(virtualNode, realNode)) {
    realNode.replaceWith(virtualNode);
    return;
}</code>
        </deckgo-highlight-code>
<p><code>isNodeChanged()</code>는 아래 사항들을 확인한다.</p>
<ul>
<li><code>attribute</code> 갯수가 다른가?</li>
<li>하나 이상의 <code>attribute</code>가 변경되었는가?</li>
<li>노드에 자식이 없다면 노드의 <code>textContent</code>가 다른가?</li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const isNodeChanged = (n1, n2) =&gt; {
  const { attributes: n1Attributes } = n1;
  const { attributes: n2Attributes } = n2;

  if (n1Attributes.length !== n2Attributes.length) {
    return true;
  }

  const hasDifferentAttribute = [...n1Attributes]
    .some(({ name }) =&gt; {
      const n1Attribute = n1.getAttribute(name);
      const n2Attribute = n2.getAttribute(name);

      return n1Attribute !== n2Attribute;
    })

  if (hasDifferentAttribute) {
    return true;
  }

  const hasChildren = n1.children.length !== 0 || n2.children.length !== 0;
  const isTextContentDifferent = !hasChildren &amp;&amp; (n1.textContent !== n2.textContent);

  if (isTextContentDifferent) {
    return true
  }

  return false
}</code>
        </deckgo-highlight-code>
<p>전체 <code>renderDiff()</code>는 이런 모습이다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const renderDiff = (
  parentNode,
  realNode,
  virtualNode
) =&gt; {
  if (realNode &amp;&amp; !virtualNode) {
    realNode.remove();
    return;
  }

  if (!realNode &amp;&amp; virtualNode) {
    parentNode.appendChild(virtualNode);
    return;
  }

  if (isNodeChanged(virtualNode, realNode)) {
    realNode.replaceWith(virtualNode);
    return;
  }

  const realChildren = [...realNode.children];
  const virtualChildren = [...virtualNode.children];

  const max = Math.max(realChildren.length, virtualChildren.length);

  for (let i = 0; i &lt; max; i++) {
    renderDiff(
      realNode,
      realChildren[i],
      virtualChildren[i]
    )
  }
}</code>
        </deckgo-highlight-code>
<p>최종 디렉토리 구조는 이렇다.</p>
<deckgo-highlight-code language="bash" terminal="carbon" theme="one-dark"  >
          <code slot="code">root
├── apis.js
├── components
│   ├── Counter.js
│   ├── Filters.js
│   └── Todos.js
├── index.html
├── index.js
├── registry.js
└── renderDiff.js</code>
        </deckgo-highlight-code>
<h2 id="렌더링-성능-모니터링" style="position:relative;">렌더링 성능 모니터링<a href="#%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%84%B1%EB%8A%A5-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81" aria-label="렌더링 성능 모니터링 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>렌더링 엔진에서 중요한 요소 중 하나는 성능이다. 저자는 성능 모니터링을 위한 여러 도구를 소개한다.</p>
<ul>
<li>크롬 개발자 도구 - Show frame per seconds meter 메뉴 선택</li>
<li><a href="https://github.com/Kevnz/stats.js">stat.js</a> 라이브러리 활용하기</li>
<li>커스텀 성능 위젯</li>
</ul>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="13,35">
          <code slot="code">let panel;
let start;
let frames;

const create = () =&gt; {
  const div = document.createElement(&#39;div&#39;);

  // create panel wrapper

  return div;
}

const tick = () =&gt; {
  frames++;

  const now = window.performance.now();

  if (now &gt;= start + 1000) {
    panel.innerText = frames;
    frames = 0;
    start = now;
  }

  window.requestAnimationFrame(tick);
}

const init = (parent = document.body) =&gt; {
  panel = create();

  window.requestAnimationFrame(() =&gt; {
    start = window.performance.now();
    parent.appendChild(panel);
    tick();
  })
}

init();</code>
        </deckgo-highlight-code>
<h2 id="출처" style="position:relative;">출처<a href="#%EC%B6%9C%EC%B2%98" aria-label="출처 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p><em>프란세스코 스트라츨로, <a href="https://search.shopping.naver.com/book/search?bookTabType=ALL&#x26;pageIndex=1&#x26;pageSize=40&#x26;query=%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%20%EC%97%86%EB%8A%94%20%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C%20%EA%B0%9C%EB%B0%9C&#x26;sort=REL">『프레임워크 없는 프론트엔드 개발』</a>, 에이콘 출판(2021.01.21.)</em></p></section></main></article></section><aside class="TOC__Container-sc-1ylks3q-0 hmzKTL"><h2>ON THIS PAGE</h2><ul><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#문서-객체-모델dom">문서 객체 모델(DOM)</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#컴포넌트-기반-애플리케이션">컴포넌트 기반 애플리케이션</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#렌더링-함수">렌더링 함수</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#중간-리팩토링">중간 리팩토링</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#컴포넌트-함수">컴포넌트 함수</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#가상-dom">가상 DOM</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#렌더링-성능-모니터링">렌더링 성능 모니터링</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/#출처">출처</a></li></ul></aside></div></main><footer class="Footer__Container-sc-13p6nst-0 dndVdK"><section><span>© rheech22 2022</span></section></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/책/프레임워크_없는_프론트엔드_개발/2장_렌더링/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-51d0ae912e3cadbbca49.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-5bef5c84fb8d1a3b27f0.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-d0095af23451b1cf0507.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-9e4cd90f25155ddd88c8.js\"],\"component---src-pages-search-tsx\":[\"/component---src-pages-search-tsx-179c6abce8f40ff0aa91.js\"],\"component---src-pages-wiki-index-tsx\":[\"/component---src-pages-wiki-index-tsx-6d7ef39e98279b545d70.js\"],\"component---src-templates-wiki-template-tsx\":[\"/component---src-templates-wiki-template-tsx-fc30ad6251d9ed711f88.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="784cc576e475efdeb740";</script><script src="/webpack-runtime-408411caf65b1ce14bf3.js" async></script><script src="/framework-31fd9fa701293a5c6789.js" async></script><script src="/app-51d0ae912e3cadbbca49.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>