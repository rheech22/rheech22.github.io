<!DOCTYPE html><html lang="ko-KR"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.11.0"/><meta name="theme-color" content="#161b22"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" data-gatsby-head="true"/><meta name="description" content="싱글 페이지 애플리케이션 SPA는 하나의 HTML 페이지로 실행되는 애플리케이션이다. 사용자가 다른 화면으로 이동할 때 뷰를 동적으로 재구성하여 보여주기 때문에 사용자가 경험할 수 있는 지연을 감소시키고 일반적으로 더 나은 UX를 제공할 수 있다. …" data-gatsby-head="true"/><meta name="image" data-gatsby-head="true"/><meta name="og:title" content="conerstone" data-gatsby-head="true"/><meta name="og:description" content="싱글 페이지 애플리케이션 SPA는 하나의 HTML 페이지로 실행되는 애플리케이션이다. 사용자가 다른 화면으로 이동할 때 뷰를 동적으로 재구성하여 보여주기 때문에 사용자가 경험할 수 있는 지연을 감소시키고 일반적으로 더 나은 UX를 제공할 수 있다. …" data-gatsby-head="true"/><meta name="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="6장 라우터 | conerstone" data-gatsby-head="true"/><meta name="twitter:url" content="https://rheech22.github.io/책/프레임워크_없는_프론트엔드_개발/6장_라우터" data-gatsby-head="true"/><meta name="twitter:description" content="싱글 페이지 애플리케이션 SPA는 하나의 HTML 페이지로 실행되는 애플리케이션이다. 사용자가 다른 화면으로 이동할 때 뷰를 동적으로 재구성하여 보여주기 때문에 사용자가 경험할 수 있는 지연을 감소시키고 일반적으로 더 나은 UX를 제공할 수 있다. …" data-gatsby-head="true"/><meta name="twitter:image" content="https://rheech22.github.ioundefined" data-gatsby-head="true"/><meta name="twitter:creator" content="@@rheech22" data-gatsby-head="true"/><meta name="naver-site-verification" content="45d911481aa02bda5a391b5f2474bc61356de3f8" data-gatsby-head="true"/><meta http-equiv="Permissions-Policy" content="interest-cohort=(), user-id=()" data-gatsby-head="true"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0DM3BCWTDS"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0DM3BCWTDS', {"send_page_view":false});
      }
      </script><style data-styled="" data-styled-version="6.0.7">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,menu,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}/*!sc*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;}/*!sc*/
*[hidden]{display:none;}/*!sc*/
body{line-height:1;}/*!sc*/
menu,ol,ul{list-style:none;}/*!sc*/
blockquote,q{quotes:none;}/*!sc*/
blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}/*!sc*/
table{border-collapse:collapse;border-spacing:0;}/*!sc*/
@font-face{font-family:BlinkMacSystemFont;src:local('※');font-weight:400;font-style:normal;unicode-range:U+0041-005A,U+0061-007A,U+0030-0039;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
html,body{scroll-behavior:smooth;margin:0;}/*!sc*/
body{font-family:'Spoqa Han Sans',BlinkMacSystemFont,Arial,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;width:100%;background-color:#000000;color:#C9D1D9;min-height:100vh;line-height:1.5;transition:all .5s;}/*!sc*/
body #gatsby-focus-wrapper{max-width:1440px;padding:0 15px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column;}/*!sc*/
body main{font-size:16px;width:100%;}/*!sc*/
body a{color:unset;}/*!sc*/
data-styled.g2[id="sc-global-hGiQiZ1"]{content:"sc-global-hGiQiZ1,"}/*!sc*/
.dndVdK{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;border-top:1px solid #222222;transition:border-color 0.5s;margin-top:auto;width:100%;font-size:12px;text-align:center;font-weight:400;color:#bac4ce;}/*!sc*/
.dndVdK>section{padding:48px 8px;}/*!sc*/
data-styled.g3[id="Footer__Container-sc-13p6nst-0"]{content:"dndVdK,"}/*!sc*/
.esCaBN:focus{outline:none;}/*!sc*/
data-styled.g5[id="Textbox__Input-sc-vlag4q-0"]{content:"esCaBN,"}/*!sc*/
.hRTaSi{border-radius:8px;width:140px;height:48px;font-weight:400;position:relative;transition:all 0.5s;}/*!sc*/
@media (min-width: 768px){.hRTaSi:focus-within{width:544px;}.hRTaSi:focus-within>ul{display:block;}}/*!sc*/
.hRTaSi>input{border:none;border-radius:8px;padding:0 12px;width:100%;height:100%;background-color:#222222;color:#fff;font-size:14px;transition:background-color 0.5s;}/*!sc*/
.hRTaSi>input::placeholder{color:#a7a7a7;}/*!sc*/
.hRTaSi>input:focus{color:#fff;background-color:#383838;}/*!sc*/
@media (min-width: 768px){.hRTaSi>input:focus{border-bottom-left-radius:6px;border-bottom-right-radius:6px;}}/*!sc*/
.hRTaSi>input:focus::placeholder{color:#757D86;}/*!sc*/
data-styled.g6[id="SearchBar__Container-sc-6n5xnu-0"]{content:"hRTaSi,"}/*!sc*/
.cgshUI{display:flex;flex-direction:row;align-items:center;justify-content:normal;position:sticky;top:0;width:100%;min-height:71px;opacity:0.9;background-color:hsla(0, 0%, 0%, 0.5);backdrop-filter:blur(20px);z-index:1;transition:all 0.5s;}/*!sc*/
data-styled.g8[id="Header__Container-sc-z8t49p-0"]{content:"cgshUI,"}/*!sc*/
.erKfrX{display:flex;flex-direction:row;align-items:center;justify-content:center;min-width:38px;height:38px;transition:all 2s;}/*!sc*/
@media (min-width: 768px){.erKfrX{display:none;}}/*!sc*/
.erKfrX svg{width:20px;height:20px;transform:translateY(1px);}/*!sc*/
.erKfrX svg g>path{stroke:#f0f6fc;}/*!sc*/
data-styled.g9[id="Header__HomeButton-sc-z8t49p-1"]{content:"erKfrX,"}/*!sc*/
.fWSnbl{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;display:none;color:#f0f6fc;text-decoration:none;transition:color 2s;}/*!sc*/
@media (min-width: 768px){.fWSnbl{display:block;}}/*!sc*/
.fWSnbl>h1{font-size:24px;font-weight:600;white-space:nowrap;}/*!sc*/
data-styled.g10[id="Header__Title-sc-z8t49p-2"]{content:"fWSnbl,"}/*!sc*/
.iscvfN{position:relative;z-index:0;margin-right:8px;border:none;border-radius:50%;background:none;min-width:38px;min-height:38px;overflow:hidden;cursor:pointer;transition:box-shadow 2s;}/*!sc*/
@media (min-width: 768px){.iscvfN{margin-left:8px;}}/*!sc*/
@media (hover:hover){.iscvfN:hover{box-shadow:rgb(109,110,129) 1.5px 1.5px 3px 0px inset,rgba(109,110,129,0.5) -1.5px -1.5px 3px 1px inset;background-image:linear-gradient( to right bottom,#000000,#211e1f,#3b353b,#55505a,#6d6c7b,#6d6e81,#6b7187,#69748d,#535c78,#3e4563,#2b304e,#181b3a );}}/*!sc*/
data-styled.g11[id="Header__Button-sc-z8t49p-3"]{content:"iscvfN,"}/*!sc*/
.dkdLLc{position:absolute;top:19px;right:-32px;border:1px dotted transparent;border-radius:50%;width:100px;height:100px;transition:border-color 2s;}/*!sc*/
@media (hover:hover){.dkdLLc:hover{border-color:#C9D1D9;}.dkdLLc:hover svg path{fill:ivory;}}/*!sc*/
.dkdLLc>div{position:absolute;top:40px;right:40px;border-radius:50%;border:none;padding:0;width:20px;height:20px;background:none;outline:none;}/*!sc*/
.dkdLLc>div:first-of-type{animation:ZmWYm 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.dkdLLc>div:last-of-type{animation:dGgAwC 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.dkdLLc>div svg{width:20px;height:20px;transform:rotate(90deg);}/*!sc*/
.dkdLLc>div svg path{fill:#fff;}/*!sc*/
data-styled.g12[id="Header__CircleLayout-sc-z8t49p-4"]{content:"dkdLLc,"}/*!sc*/
.eVMkLI{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-left:auto;font-weight:500;}/*!sc*/
.eVMkLI>a{text-decoration:none;}/*!sc*/
.eVMkLI>a:hover{color:#F8EA18;}/*!sc*/
data-styled.g13[id="Header__Index-sc-z8t49p-5"]{content:"eVMkLI,"}/*!sc*/
.hmzKTL{position:sticky;top:163px;right:0px;display:none;min-width:fit-content;height:fit-content;overflow-y:scroll;color:#C9D1D9;}/*!sc*/
.hmzKTL::-webkit-scrollbar{display:none;}/*!sc*/
.hmzKTL h2{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-bottom:12px;padding:8px 10px;font-size:14px;font-weight:500;letter-spacing:0.025em;transition:all 0.5s;}/*!sc*/
.hmzKTL ul{padding-left:20px;}/*!sc*/
.hmzKTL li+li{margin-top:8px;}/*!sc*/
data-styled.g15[id="TOC__Container-sc-1ylks3q-0"]{content:"hmzKTL,"}/*!sc*/
.ksAkVR{display:flex;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:16px;padding-right:10px;max-width:215px;min-width:130px;width:100%;background-color:none;color:#8b949e;font-size:12px;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.ksAkVR:hover:hover{background-color:#222222;}}/*!sc*/
.ksAkVR a{padding:6px 0;width:100%;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
data-styled.g16[id="TOC__List-sc-1ylks3q-1"]{content:"ksAkVR,"}/*!sc*/
.bpQNeS{display:grid;grid-template-columns:auto;grid-template-rows:auto auto;grid-template-areas:'post' 'post' 'comments';}/*!sc*/
@media (min-width: 1080px){.bpQNeS{grid-template-columns:10fr 10fr 1fr;grid-template-rows:auto auto;grid-template-areas:'post post toc' 'post post toc' 'comments comments .';}}/*!sc*/
.bpQNeS>section{grid-area:post;}/*!sc*/
@media (min-width: 768px){.bpQNeS>section{max-width:826px;}}/*!sc*/
.bpQNeS>aside{grid-area:toc;}/*!sc*/
@media (min-width: 1280px){.bpQNeS>aside{display:flex;flex-direction:column;align-items:flex-start;justify-content:normal;}}/*!sc*/
.bpQNeS>div{grid-area:comments;margin:0 auto;}/*!sc*/
@media (min-width: 768px){.bpQNeS>div{max-width:826px;}}/*!sc*/
data-styled.g17[id="styles__Container-sc-4114r5-0"]{content:"bpQNeS,"}/*!sc*/
.cOLaBC{display:flex;flex-direction:row;align-items:normal;justify-content:center;margin:72px auto 72px auto;height:auto;width:100%;}/*!sc*/
data-styled.g18[id="styles__Section-sc-4114r5-1"]{content:"cOLaBC,"}/*!sc*/
.iQVJjY{padding:20px 0;width:100%;display:flex;flex-direction:column;align-items:normal;justify-content:normal;}/*!sc*/
data-styled.g19[id="styles__Article-sc-4114r5-2"]{content:"iQVJjY,"}/*!sc*/
.hLCEhK{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;font-weight:500;padding:10px 0;}/*!sc*/
.hLCEhK>div>a{text-underline-position:under;}/*!sc*/
.hLCEhK>div>a:hover{color:#F8EA18;}/*!sc*/
.hLCEhK>div>svg{margin:0 4px;transform:rotate(90deg);}/*!sc*/
data-styled.g20[id="styles__Nav-sc-4114r5-3"]{content:"hLCEhK,"}/*!sc*/
.dwxKPC{margin-bottom:26px;}/*!sc*/
data-styled.g21[id="styles__Header-sc-4114r5-4"]{content:"dwxKPC,"}/*!sc*/
.iAuiwv>section:nth-child(1){font-size:16px;}/*!sc*/
@media (min-width: 768px){.iAuiwv>section:nth-child(1){font-size:18px;}}/*!sc*/
.iAuiwv>section:nth-child(1) h1,.iAuiwv>section:nth-child(1) h2,.iAuiwv>section:nth-child(1) h3,.iAuiwv>section:nth-child(1) h4,.iAuiwv>section:nth-child(1) h5,.iAuiwv>section:nth-child(1) h6{font-weight:600;}/*!sc*/
.iAuiwv>section:nth-child(1) h1 .header-anchor,.iAuiwv>section:nth-child(1) h2 .header-anchor,.iAuiwv>section:nth-child(1) h3 .header-anchor,.iAuiwv>section:nth-child(1) h4 .header-anchor,.iAuiwv>section:nth-child(1) h5 .header-anchor,.iAuiwv>section:nth-child(1) h6 .header-anchor{fill:#F8EA18;}/*!sc*/
.iAuiwv>section:nth-child(1) h1:not(:first-of-type),.iAuiwv>section:nth-child(1) h2:not(:first-of-type),.iAuiwv>section:nth-child(1) h3:not(:first-of-type),.iAuiwv>section:nth-child(1) h4:not(:first-of-type),.iAuiwv>section:nth-child(1) h5:not(:first-of-type),.iAuiwv>section:nth-child(1) h6:not(:first-of-type){margin-top:1.2em;}/*!sc*/
.iAuiwv>section:nth-child(1) h1{margin-block-start:1em;margin-block-end:1em;font-size:36px;}/*!sc*/
.iAuiwv>section:nth-child(1) h2{margin-block-start:0.83em;margin-block-end:0.83em;font-size:28.8px;}/*!sc*/
.iAuiwv>section:nth-child(1) h3{margin-block-start:1em;margin-block-end:1em;font-size:21.6px;}/*!sc*/
.iAuiwv>section:nth-child(1) h4{margin-block-start:1.22em;margin-block-end:1.22em;font-size:19.8px;}/*!sc*/
.iAuiwv>section:nth-child(1) em{font-style:oblique;}/*!sc*/
.iAuiwv>section:nth-child(1) a{text-underline-position:under;}/*!sc*/
.iAuiwv>section:nth-child(1) a:hover{color:#F8EA18;}/*!sc*/
.iAuiwv>section:nth-child(1) p{display:block;margin-block-start:1em;margin-block-end:1em;word-break:break-word;line-height:32px;}/*!sc*/
.iAuiwv>section:nth-child(1) ol,.iAuiwv>section:nth-child(1) ul{padding-left:40px;}/*!sc*/
.iAuiwv>section:nth-child(1) ul{list-style-type:disc;}/*!sc*/
.iAuiwv>section:nth-child(1) ol{list-style-type:decimal;}/*!sc*/
.iAuiwv>section:nth-child(1) li{display:list-item;text-align:-webkit-match-parent;line-height:32px;}/*!sc*/
.iAuiwv>section:nth-child(1) li p{margin:0;}/*!sc*/
.iAuiwv>section:nth-child(1) table{display:block;border-color:gray;border-spacing:0;border-collapse:collapse;width:max-content;max-width:100%;overflow:auto;font-size:16px;}/*!sc*/
.iAuiwv>section:nth-child(1) table thead{display:table-header-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.iAuiwv>section:nth-child(1) table tbody{display:table-row-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.iAuiwv>section:nth-child(1) table tr{display:table-row;vertical-align:inherit;border:inherit;background-color:#0d1117;border-top-width:1px;border-top-style:solid;border-top-color:#222222;transition:all 0.5s;}/*!sc*/
.iAuiwv>section:nth-child(1) table tr:nth-of-type(2n){background-color:#383838;}/*!sc*/
.iAuiwv>section:nth-child(1) table th,.iAuiwv>section:nth-child(1) table td{display:table-cell;vertical-align:inherit;padding:6px 13px;border-width:1px;border-style:solid;border-color:#30363d;transition:all 0.5s;}/*!sc*/
.iAuiwv>section:nth-child(1) blockquote{padding:12px 20px 12px 28px;margin:30px 0px;border-left:4px solid #C9D1D9;font-family:Georgia,serif;font-style:italic;text-align:justify;font-size:24px;line-height:1.2;transition:all 0.5s;}/*!sc*/
.iAuiwv>section:nth-child(1) blockquote p{margin:0;}/*!sc*/
.iAuiwv>section:nth-child(1) code{margin:0;padding:0.2em 0.4em;background-color:rgba(135,131,120,0.15);color:#BF616A;border-radius:6px;font-size:85%;font-family:SFMono-Regular,Menlo,Consolas,Liberation Mono,monospace;}/*!sc*/
.iAuiwv>section:nth-child(1) strong{font-weight:bold;}/*!sc*/
.iAuiwv>section:nth-child(1) deckgo-highlight-code{--deckgo-highlight-code-carbon-toolbar-display:none;--deckgo-highlight-code-white-space:pre;max-width:90vw;font-size:14px;margin-bottom:32px;}/*!sc*/
.iAuiwv>section:nth-child(1) img{max-width:90vw;}/*!sc*/
@media (min-width: 768px){.iAuiwv>section:nth-child(1) img{max-width:694px;}}/*!sc*/
data-styled.g22[id="styles__Main-sc-4114r5-5"]{content:"iAuiwv,"}/*!sc*/
.ibrFQC{margin-bottom:4px;font-size:36px;font-weight:600;}/*!sc*/
@media (min-width: 425px){.ibrFQC{font-size:42px;}}/*!sc*/
data-styled.g23[id="styles__Title-sc-4114r5-6"]{content:"ibrFQC,"}/*!sc*/
.kJnDSb{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;color:#8b949e;font-size:14px;}/*!sc*/
.kJnDSb>div{display:flex;flex-direction:column;align-items:flex-end;justify-content:normal;}/*!sc*/
.kJnDSb>div a{text-underline-position:under;}/*!sc*/
.kJnDSb>div a:hover{color:#F8EA18;}/*!sc*/
data-styled.g24[id="styles__SubTitle-sc-4114r5-7"]{content:"kJnDSb,"}/*!sc*/
@keyframes ZmWYm{from{transform:rotate(90deg) translate(50px) translateZ(10px);}to{transform:rotate(270deg) translate(50px) translateZ(10px);}}/*!sc*/
data-styled.g26[id="sc-keyframes-ZmWYm"]{content:"ZmWYm,"}/*!sc*/
@keyframes dGgAwC{from{transform:rotate(90deg) translate(-50px) translateZ(10px);}to{transform:rotate(270deg) translate(-50px) translateZ(10px);}}/*!sc*/
data-styled.g27[id="sc-keyframes-dGgAwC"]{content:"dGgAwC,"}/*!sc*/
</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .header-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-anchor svg,
    h2 .header-anchor svg,
    h3 .header-anchor svg,
    h4 .header-anchor svg,
    h5 .header-anchor svg,
    h6 .header-anchor svg {
      visibility: hidden;
    }
    h1:hover .header-anchor svg,
    h2:hover .header-anchor svg,
    h3:hover .header-anchor svg,
    h4:hover .header-anchor svg,
    h5:hover .header-anchor svg,
    h6:hover .header-anchor svg,
    h1 .header-anchor:focus svg,
    h2 .header-anchor:focus svg,
    h3 .header-anchor:focus svg,
    h4 .header-anchor:focus svg,
    h5 .header-anchor:focus svg,
    h6 .header-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - -200)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=6d5c0719d6ce39c07b53ce38158aed46" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/favicons/android-chrome-192x192.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="apple-touch-icon" sizes="512x512" href="/favicons/android-chrome-512x512.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-gatsby-head="true">6장 라우터 | conerstone</title><link as="style" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sora:wght@100;200;300;400;500&amp;display=swap" data-gatsby-head="true"/><link as="style" rel="stylesheet" href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" data-gatsby-head="true"/><script type="application/ld+json" data-gatsby-head="true">
            {
              "@context": "https://schema.org",
              "@type": "HowTo",
              "url": "https://rheech22.github.io/책/프레임워크_없는_프론트엔드_개발/6장_라우터",
              "headline": "conerstone",
              "datePublished": "2023-03-04",
              "dateModified": "2023-08-22 00:39:19 +0900",
              "image": "[]"
            }
          </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__Container-sc-z8t49p-0 cgshUI"><a tabindex="-1" class="Header__HomeButton-sc-z8t49p-1 erKfrX" href="/"><svg viewBox="0 0 21 21" fill="currentColor" height="1em" width="1em"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M1.5 10.5l9-9 9 9"></path><path d="M3.5 8.5v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path></g></svg></a><a tabindex="-1" class="Header__Title-sc-z8t49p-2 fWSnbl" href="/"><h1>conerstone</h1></a><button tabindex="-1" aria-label="switch display mode" class="Header__Button-sc-z8t49p-3 iscvfN"><div class="Header__CircleLayout-sc-z8t49p-4 dkdLLc"><div><svg width="30px" height="30px" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M26.25 14.936C26.25 21.107 21.097 26.25 14.656 26.25C9.761 26.25 5.509 23.55 3.835 19.436C3.706 19.05 3.706 18.664 3.963 18.407C4.221 18.15 4.608 18.021 4.994 18.15C5.638 18.279 6.282 18.407 6.798 18.407C11.951 18.407 16.073 14.421 16.073 9.407C16.073 7.864 15.815 6.579 15.042 5.036C14.913 4.779 14.913 4.393 15.171 4.136C15.429 3.879 15.686 3.75 16.073 3.75C21.87 4.393 26.25 9.279 26.25 14.936Z" fill="#030D45"></path></svg></div><div><svg width="30px" height="30px" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15 9.375c-3.1 0 -5.625 2.525 -5.625 5.625s2.525 5.625 5.625 5.625 5.625 -2.525 5.625 -5.625 -2.525 -5.625 -5.625 -5.625zm14.438 4.717l-5.549 -2.771 1.963 -5.883c0.264 -0.797 -0.492 -1.553 -1.283 -1.283l-5.883 1.963 -2.777 -5.555c-0.375 -0.75 -1.441 -0.75 -1.816 0l-2.771 5.549L5.432 4.148c-0.797 -0.264 -1.553 0.492 -1.283 1.283l1.963 5.883 -5.549 2.777c-0.75 0.375 -0.75 1.441 0 1.816l5.549 2.771 -1.963 5.889c-0.264 0.797 0.492 1.553 1.283 1.283l5.883 -1.963 2.771 5.549c0.375 0.75 1.441 0.75 1.816 0l2.771 -5.549 5.883 1.963c0.797 0.264 1.553 -0.492 1.283 -1.283l-1.963 -5.883 5.549 -2.771c0.762 -0.381 0.762 -1.447 0.012 -1.822zm-9.135 6.211c-2.924 2.924 -7.682 2.924 -10.605 0 -2.924 -2.924 -2.924 -7.682 0 -10.605 2.924 -2.924 7.682 -2.924 10.605 0 2.924 2.924 2.924 7.682 0 10.605z"></path></svg></div></div></button><form class="SearchBar__Container-sc-6n5xnu-0 hRTaSi"><input type="text" placeholder="Search" maxLength="40" class="Textbox__Input-sc-vlag4q-0 esCaBN" value=""/><button type="submit" hidden="" aria-label="Submit Search"></button></form><div class="Header__Index-sc-z8t49p-5 eVMkLI"><a tabindex="-1" href="/wiki-index/"><h2>Index.</h2></a></div></header><main><div class="styles__Container-sc-4114r5-0 bpQNeS"><section class="styles__Section-sc-4114r5-1 cOLaBC"><article class="styles__Article-sc-4114r5-2 iQVJjY"><nav class="styles__Nav-sc-4114r5-3 hLCEhK"><div><a href="/책/">책</a><svg aria-hidden="true" role="img" class="octicon octicon-chevron-up" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path fill-rule="evenodd" d="M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z"></path></svg></div><div><a href="/책/프레임워크_없는_프론트엔드_개발/">프레임워크 없는 프론트엔드 개발</a></div></nav><header class="styles__Header-sc-4114r5-4 dwxKPC"><h1 class="styles__Title-sc-4114r5-6 ibrFQC">6장 라우터</h1><div class="styles__SubTitle-sc-4114r5-7 kJnDSb"><div><span>6<!-- --> min read</span><time dateTime="created at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/6장_라우터/index.md" target="_blank" rel="noreferrer">CREATED: <!-- -->04/03/2023</a></time><time dateTime="updated at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/6장_라우터/index.md" target="_blank" rel="noreferrer">UPDATED: <!-- -->21/08/2023</a></time><a href="https://github.com/rheech22/rheech22.github.io/blame/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/6장_라우터/index.md" target="_blank" rel="noreferrer">Blame</a></div></div></header><main class="styles__Main-sc-4114r5-5 iAuiwv"><section><h2 id="싱글-페이지-애플리케이션" style="position:relative;">싱글 페이지 애플리케이션<a href="#%EC%8B%B1%EA%B8%80-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98" aria-label="싱글 페이지 애플리케이션 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>SPA는 하나의 HTML 페이지로 실행되는 애플리케이션이다. 사용자가 다른 화면으로 이동할 때 뷰를 동적으로 재구성하여 보여주기 때문에 사용자가 경험할 수 있는 지연을 감소시키고 일반적으로 더 나은 UX를 제공할 수 있다.</p>
<br />
<h2 id="라우팅-시스템" style="position:relative;">라우팅 시스템<a href="#%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%8B%9C%EC%8A%A4%ED%85%9C" aria-label="라우팅 시스템 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>라우팅 시스템은 SPA를 구축하는데 크게 기여한다. 라우팅 시스템은 최소 두 가지 요소를 갖는다.</p>
<ul>
<li>경로 목록을 수집하는 레지스트리</li>
<li>현재 URL의 리스너</li>
</ul>
<p>라우터는 URL이 변경될 때마다 해당 경로에 바인딩된 컴포넌트로 기존의 것을 대체한다.</p>
<br />
<h2 id="프래그먼트-식별자를-이용한-라우터-구현" style="position:relative;">프래그먼트 식별자를 이용한 라우터 구현<a href="#%ED%94%84%EB%9E%98%EA%B7%B8%EB%A8%BC%ED%8A%B8-%EC%8B%9D%EB%B3%84%EC%9E%90%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%9D%BC%EC%9A%B0%ED%84%B0-%EA%B5%AC%ED%98%84" aria-label="프래그먼트 식별자를 이용한 라우터 구현 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>프래그먼트 식별자를 알기 위해선 URI(Uniform Resource Identifier)를 먼저 알아야 한다. URI란 인터넷 자원 식별자다. 여기서 인터넷 자원은 리소스, 즉 HTTP 요청 대상이다. URL은 우리가 가장 자주 접할 수 있는 URI 형식으로 포트, 도메인 네임, 경로, 쿼리 등과 같은 정보를 포함한다. 프래그먼트 식별자도 그 중 하나로 <code>#</code>으로 시작하는 부분이다. 프래그먼트는 웹 문서의 특정 섹션을 식별하는 목적으로 사용한다. 브라우저는 프래그먼트로 식별된 요소를 브라우저 뷰포트의 가장 상단으로 스크롤한다.</p>
<p>프래그먼트를 포함한 링크를 <code>&#x3C;nav /></code>에 포함시킨다. 본문이 담길 컨테이너는 <code>&#x3C;main/></code>이 된다.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  highlight-lines="8 9 11">
          <code slot="code">&lt;html&gt;
  &lt;head&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;../favicon.ico&quot; /&gt;
    &lt;title&gt;router&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;nav&gt;
      &lt;a href=&quot;#/&quot;&gt;home&lt;/a&gt;
      &lt;a href=&quot;#/about&quot;&gt;about&lt;/a&gt;
    &lt;/nav&gt;
    &lt;main&gt;&lt;/main&gt;
    &lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code>
        </deckgo-highlight-code>
<p>각 페이지에 들어갈 내용이다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="4,14">
          <code slot="code">// pages.js

export default container =&gt; {
  const home = () =&gt; {
    container.textContent = &#39;This is Home page&#39;
  }

  const about = () =&gt; {
    container.textContent = &#39;This is About page&#39;
  }

  const notFound = () =&gt; {
    container.textContent = &#39;Page Not Found !&#39;
  }

  return {
    home,
    about,
    notFound
  }
}</code>
        </deckgo-highlight-code>
<p>중요한 것은 라우터다. 처음 언급했듯이 URL 변경을 감지하는 리스너와 경로 목록이 담긴 레지스트리가 필요하다. <code>start()</code>는 <code>checkRoutes()</code>를 실행, 또한 <code>hashchange</code>이벤트에 대한 핸들러로 <code>checkRoutes()</code>를 할당한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="7,13">
          <code slot="code">// router.js

export default () =&gt; {
  const router = {};

  router.start = () =&gt; {
    window.addEventListener(&#39;hashchange&#39;, checkRoutes);

    if (!window.location.hash) {
      window.location.hash = &#39;#/&#39;
    }

    checkRoutes();
  }

  return router;
}</code>
        </deckgo-highlight-code>
<p><code>checkRoute()</code>는 현재 주소가 레지스트리에 등록되었는지 검사한다. 만약 등록된 주소라면 해당 루트의 컴포넌트를 바인딩하고 그렇지 않다면 <code>notFound()</code>를 실행한다. <code>setNotFound()</code>로 <code>notFound()</code>를 위한 컴포넌트를 연결하지 않았다면 빈 객체를 리턴하기 때문에 화면에는 아무 일도 일어나지 않는다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="9,27">
          <code slot="code">// router.js

export default () =&gt; {
   
  // ... 생략

  const routes = [];

  const checkRoutes = () =&gt; {
    const currentRoute = routes.find(route =&gt; {
      return route.fragment === window.location.hash;
    })

    if (!currentRoute) {
      notFound();
      return;
    }

    currentRoute.component();
  }

  let notFound = () =&gt; {};

  router.setNotFound = cb =&gt; {
    notFound = cb;
    return router;
  }

  return router;
}</code>
        </deckgo-highlight-code>
<p>router의 마지막 메서드로 레지스트리 등록을 위한 <code>addRoutes()</code>를 추가한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="29,35">
          <code slot="code">export default () =&gt; {
  const router = {};

  router.start = () =&gt; {
    window.addEventListener(&#39;hashchange&#39;, checkRoutes);

    if (!window.location.hash) {
      window.location.hash = &#39;#/&#39;
    }

    checkRoutes();
  }

  const routes = [];

  const checkRoutes = () =&gt; {
    const currentRoute = routes.find(route =&gt; {
      return route.fragment === window.location.hash;
    })

    if (!currentRoute) {
      notFound();
      return;
    }

    currentRoute.component();
  }

  router.addRoutes = routeList =&gt; {
    Object.entries(routeList).map(([fragment, component]) =&gt; {
      routes.push({ fragment, component });
    })

    return router;
  }

  let notFound = () =&gt; { };

  router.setNotFound = cb =&gt; {
    notFound = cb;
    return router;
  }

  return router;
}</code>
        </deckgo-highlight-code>
<p>컨트롤러에서 경로 레지스트리를 구성한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="10,18">
          <code slot="code">import createPage from &#39;./pages.js&#39;;
import createRouter from &#39;./router.js&#39;;

const container = document.querySelector(&#39;main&#39;);

const pages = createPage(container);

const router = createRouter();

const routes = {
  &#39;#/&#39;: pages.home,
  &#39;#/about&#39;: pages.about,
}

router
  .addRoutes(routes)
  .setNotFound(pages.notFound)
  .start();</code>
        </deckgo-highlight-code>
<p>동작하는 해시 라우터</p>
<p><img src="/ee7ee8deedc18415f660c30b020491ac/router.gif" alt="router"></p>
<p>라우터 흐름은 이렇다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 694px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/f11febe4aac370873e4920a8d2f470b1/302a4/flow.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 98.27586206896551%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADL0lEQVR42pWUTU8TURSG+SMuXLjzL5iYoImRKEaNK9cudKGJO5VEIyggokbFKCooH8W20EKNprSF1pZ+z0w7/ZiZTqcfoIKIv+H1nNtSRQjg4uTembnz3nOe897bZpSL+Dt0s4BqvYS1H3V8X61ida0molzV6dvWtTtF279ilZoBXziI+0OvMPh6FAPDI3j05h2SmTTKFV2s2bdgsZTHt+8VPHr7DgeOnMHhkxdxqP0CDh49C49vHrVlE9r/CHJJZkVDUklhyuPBq8kpjDqcmHTPQi1mUbK0/ZVcojBpMUeZokYM19frKOgqVr6WxbxKKPYSawkW9ByyhYwQiEopXHvmxJUnDlwamMLVZ9Nifmdkbn9N4ayi6QRBTyGTl/ElGcfNYTeuD83g8iAJPmVBO7rfe7a5QRNRbI4Ntm3MhZnxyF20qgbqdYNKNaHSBqVyAcsrJmEwtrAuE+uvy7xWxwqNPDetpmCCBHkHnRdTaNRttSgjpcQgZRLIa9k/dmGfkicDKQm3xufR51xEj30Bd2w+xNVsU1BOkkjjB81Q8SnwGcOTY7B7ZjBin8So3YZQLAi1oCCcjEHJpvByLoD2u06c7nejo9eF490O2kTeLsiZqJSRpKYQS0UQl5Yg0zxPDdN4QyrXqmpYTMu4bfOja9yLG2Pz6JrwIZnLbi2ZBZlNhUpiZlliqBk51Mgy/I4Z/d2YSk0Xa9gdFn1vNUUIUoYsxhy88TQWJQXOQAjeWEJk409KIoOS1eQsEmg0NEOW4zlX1yq5YORFp3rsAZzqc+HcgBud/Y3x/EMXTtybRo/NiwyjkJLiHxaLJKICx+YpagnyObYow6Akw7YQhSMUx5tPQUz4l+AIJjDmj4pvFVpjmI3TJeIfDC0fsh14IXtqY9XErx8WTF3B6oqOn/S8sVYW/tzztmHBOGWYp+Nn0osg8RrxRjDuj+G520/jEj4sxjHmiyKiKILzbkdQCMqqRFwSUHNpPJ4JCF4dvdPkMRc6H7hwfnAWx+468OLjF8F502K7Xl8szFeXqudFJhElg7CsIEQRpucQdT2j5bYx21FwkwvbwbAaXtwpSvu4vn4DrwRH3FFxjbcAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="flow"
        title=""
        src="/static/f11febe4aac370873e4920a8d2f470b1/31198/flow.png"
        srcset="/static/f11febe4aac370873e4920a8d2f470b1/fe9c7/flow.png 174w,
/static/f11febe4aac370873e4920a8d2f470b1/39e45/flow.png 347w,
/static/f11febe4aac370873e4920a8d2f470b1/31198/flow.png 694w,
/static/f11febe4aac370873e4920a8d2f470b1/ee9b6/flow.png 1041w,
/static/f11febe4aac370873e4920a8d2f470b1/302a4/flow.png 1080w"
        sizes="(max-width: 694px) 100vw, 694px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<br />
<h2 id="정규식을-통한-경로-매개변수-추출" style="position:relative;">정규식을 통한 경로 매개변수 추출<a href="#%EC%A0%95%EA%B7%9C%EC%8B%9D%EC%9D%84-%ED%86%B5%ED%95%9C-%EA%B2%BD%EB%A1%9C-%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98-%EC%B6%94%EC%B6%9C" aria-label="정규식을 통한 경로 매개변수 추출 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>경로 매개변수(path parameter)는 URL에서 리소스를 식별해야 할 때 사용한다.</p>
<p>다음 경로에서 123은 유저의 식별자다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">https://example.com/users/123</code>
        </deckgo-highlight-code>
<p>이를 <code>id</code>라는 매개변수로 표현한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">https://example.com/users/:id</code>
        </deckgo-highlight-code>
<p>매개변수를 갖는 경로를 레지스트리에 등록한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="6,7">
          <code slot="code">const routes = {
  &#39;#/&#39;: pages.home,
  &#39;#/about&#39;: pages.about,
  &#39;#/users&#39;: pages.users,
  &#39;#/users/:id&#39;: pages.userDetail,
  &#39;#/users/:id/:anotherId&#39;: pages.userAnotherDetail,
  &#39;#/users/:id/:anotherId/:theOtherId&#39;: pages.userTheOtherDetail,
}</code>
        </deckgo-highlight-code>
<p>매개변수를 포함한 경로에 매핑하는 컴포넌트는 인자를 받는다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="12,18">
          <code slot="code">export default container =&gt; {
  // ...

  const users = () =&gt; {
    container.textContent = &#39;This is Users page&#39;
  }

  const userDetail = ({ id }) =&gt; {
    container.textContent = `This is User Detail Page with ID: ${id}`
  }

  const userAnotherDetail = ({ id, anotherId }) =&gt; {
    container.textContent = `This is User Another Detail Page with ID: ${id}, another ID: ${anotherId}`
  }

  const userTheOtherDetail = ({ id, anotherId, theOtherId }) =&gt; {
    container.textContent = `This is User Another Detail Page with ID: ${id}, another ID: ${anotherId}, theOtherId: ${theOtherId}`
  }

  // ...
}</code>
        </deckgo-highlight-code>
<p><code>addRoutes()</code>는 이제 경로를 그대로 푸시하는 대신 경로 매개변수를 담는 리스트인 <code>params</code>와 경로 탐색을 위한 정규표현식인 <code>testRegExp</code>을 반환한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="3 7">
          <code slot="code">router.addRoutes = routeList =&gt; {
  Object.entries(routeList).map(([fragment, component]) =&gt; {
    const params = [];

    // ... 중략

    routes.push({ component, params, testRegExp });
  })

  return router;
}</code>
        </deckgo-highlight-code>
<p><code>replace()</code>는 어떤 패턴에 일치하는 일부, 또는 모든 부분이 교체된 새로운 문자열을 반환한다. 어떤 경우에 일부를 교체하고, 또는 모두를 교체할까? 만약 첫 번째 인자가 문자열이라면 첫 번째로 일치하는 문자열만을 교체한다. 만약 일치하는 모두를 교체하고 싶다면 <code>replaceAll()</code>을 사용해야 한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const newStr = str.replace(regexp|substr, newSubstr|function)</code>
        </deckgo-highlight-code>
<p>한편, 첫 번째 인자가 정규식이라면 정규식의 플래그에 따라 일치하는 부분을 일부 또는 모두 교체한다. 두 번째 인자로는 대체 문자열 또는 함수를 받는다. 만약 함수라면 함수의 첫 번째 인자로 매치된 문자열, 두 번째 인자부터는 정규 표현식의 캡쳐 그룹에 속한 문자열이 주어진다. 이외에도 매치된 문자열의 index, 조사된 전체 문자열을 매개변수로 갖는다. 자세한 내용은 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/String/replace">MDN</a>을 참고하자. 이 함수의 매개변수 갯수는 정규식에 따라 달라진다는 점에 유의하자.</p>
<p><code>parsedFragment</code>는</p>
<ul>
<li><code>fragment</code>에서 <code>/:(\w+)/</code>정규 표현식을 활용하여 각 경로의 매개변수를 찾는다.</li>
<li>각 경로 매개변수를 <code>params</code>에 담는다.</li>
<li>각 경로 매개변수를 또 다른 정규 표현식을 문자열로 나타낸 <code>'([^\\/]+)'</code>로 대체한다.</li>
<li><code>/</code>를 <code>\/</code>로 대체한다.</li>
</ul>
<p>최종 문자열에 행의 시작과 끝을 나타내는 앵커를 붙인 후 새로운 정규표현식 <code>testRegExp</code>을 생성한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="2,16">
          <code slot="code">router.addRoutes = routeList =&gt; {
  const ROUTE_PARAMETER_REGEXP = /:(\w+)/g;
  const URL_FRAGMENT_REGEXP = &#39;([^\\/]+)&#39;;
  
  Object.entries(routeList).map(([fragment, component]) =&gt; {
    const params = [];

    const parsedFragment = fragment
      .replace(ROUTE_PARAMETER_REGEXP, (_, param) =&gt; {
        params.push(param);

        return URL_FRAGMENT_REGEXP;
      })
      .replace(/\//g, &#39;\\/&#39;);

    const testRegExp = new RegExp(`^${parsedFragment}$`);

    routes.push({ component, params, testRegExp });
  })

  return router;
}</code>
        </deckgo-highlight-code>
<p>만약 <code>fragment</code>가 <code>#/users/:id/:anotherId</code>라면</p>
<ul>
<li><code>id</code>와 <code>anotherId</code>를 <code>params</code>에 담는다.</li>
<li>매개변수는 <code>'([^\\/]+)'</code>가 대체하여 <code>#/users/([^\\/]+)/([^\\/]+)</code>와 같은 모양이 된다.</li>
<li><code>/</code>를 대체하면 <code>#\/users\/([^\\/]+)\/([^\\/]+)</code>이 된다.</li>
<li>최종적으로 <code>testRegExp</code>는 <code>^#\/users\/([^\\/]+)\/([^\\/]+)$</code>와 같은 정규 표현식이 된다.</li>
</ul>
<p>이제 <code>hashChange</code>이벤트가 발생하면, <code>routes</code>를 순회하며 각 <code>route</code>의 유효성을 검증하고  <code>extractUrlParams()</code>를 통해 해당 루트에 필요한 파라미터를 추출한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="7 15">
          <code slot="code">const checkRoutes = () =&gt; {
  const { hash } = window.location;

  const currentRoute = routes.find(route =&gt; {
    const { testRegExp } = route;

    return testRegExp.test(hash);
  })

  if (!currentRoute) {
    notFound();
    return;
  }

  const urlParams = extractUrlParams(currentRoute, hash);

  // ...
}</code>
        </deckgo-highlight-code>
<p><code>extractUrlParams()</code>는 정규 표현식으로 실제 주소에서 파라미터에 대응하는 값을 추출한다. 만약, <code>users/:id/:anotherId</code>의 형식에 <code>users/1/2</code>와 같은 실제 주소라면 <code>{ id: 1, anotherId: 2}</code>를 반환한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="8,16">
          <code slot="code">const extractUrlParams = (route, hash) =&gt; {
  if (route.param?.length === 0) {
    return {}
  }

  const params = {};

  const matches = hash.match(route.testRegExp);

  matches.shift();

  matches.forEach((paramValue, index) =&gt; {
    const paramName = route.params[index];

    params[paramName] = paramValue;
  })

  return params;
}</code>
        </deckgo-highlight-code>
<p>컴포넌트에 추출한 파라미터를 넣고 실행한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="17">
          <code slot="code">const checkRoutes = () =&gt; {
  const { hash } = window.location;

  const currentRoute = routes.find(route =&gt; {
    const { testRegExp } = route;

    return testRegExp.test(hash);
  })

  if (!currentRoute) {
    notFound();
    return;
  }

  const urlParams = extractUrlParams(currentRoute, hash);

  currentRoute.component(urlParams);
}</code>
        </deckgo-highlight-code>
<p>동작하는 매개변수 탐색<br>
<img src="/feb01d5e27ce4f5c92bf217a8b95b264/params.gif" alt="params"></p>
<br />
<h2 id="히스토리-api를-이용한-라우터" style="position:relative;">히스토리 API를 이용한 라우터<a href="#%ED%9E%88%EC%8A%A4%ED%86%A0%EB%A6%AC-api%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%9D%BC%EC%9A%B0%ED%84%B0" aria-label="히스토리 api를 이용한 라우터 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>히스토리 라우터는 프래그먼트 식별자를 사용하지 않는다.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  highlight-lines="8,13">
          <code slot="code">&lt;html&gt;
  &lt;head&gt;
    &lt;link rel=&quot;shortcut icon&quot; href=&quot;../favicon.ico&quot; /&gt;
    &lt;title&gt;router&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;nav&gt;
      &lt;a data-navigation href=&quot;/&quot;&gt;home&lt;/a&gt;
      &lt;a data-navigation href=&quot;/about&quot;&gt;about&lt;/a&gt;
      &lt;a data-navigation href=&quot;/users&quot;&gt;users&lt;/a&gt;
      &lt;a data-navigation href=&quot;/users/1&quot;&gt;user(1)&lt;/a&gt;
      &lt;a data-navigation href=&quot;/users/1/2&quot;&gt;user(1)-2&lt;/a&gt;
      &lt;a data-navigation href=&quot;/users/3/4/5&quot;&gt;user(3)-4-5&lt;/a&gt;
    &lt;/nav&gt;
    &lt;main&gt;&lt;/main&gt;
    &lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code>
        </deckgo-highlight-code>
<p>링크를 클릭할 때 기대하는 동작은 해당 경로에 매핑된 구성을 보여주는 것이다. 하지만 링크 요소를 클릭하는 경우 실제 주소에 요청을 날리기 때문에 404 에러가 발생한다. 이런 이유로 <code>data</code> 속성으로  네비게이션 속성을 갖는 <code>a</code>태그를 식별하고 클릭 이벤트의 기본 동작을 방지하는 방식을 사용한다. 그리고 URL의 변경되는 것을 감지할 수 있는 DOM 이벤트가 없기 때문에 <code>setInterval()</code>을 사용하여 변경을 주기적으로 확인한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="7 12,15">
          <code slot="code">const TICKTIME = 250;
const NAVIGATION = &#39;a[data-navigation]&#39;;

router.start = () =&gt; {
  checkRoutes();

  window.setInterval(checkRoutes, TICKTIME)

  document.body.addEventListener(&#39;click&#39;, (e) =&gt; {
    const { target } = e;

    if (target.matches(NAVIGATION)) {
      e.preventDefault();
      router.navigate(target.href);
    }
  })
}</code>
        </deckgo-highlight-code>
<p>경로도 프래그먼트 식별자 없이 정의한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">const routes = {
  &#39;/&#39;: pages.home,
  &#39;/about&#39;: pages.about,
  &#39;/users&#39;: pages.users,
  &#39;/users/:id&#39;: pages.userDetail,
  &#39;/users/:id/:anotherId&#39;: pages.userAnotherDetail,
  &#39;/users/:id/:anotherId/:theOtherId&#39;: pages.userTheOtherDetail,
}</code>
        </deckgo-highlight-code>
<p>동작하는 히스토리 라우터<br>
<img src="/26ef032f0978ef7a6028114a4083b36c/history.gif" alt="history"></p>
<br/>
<h2 id="출처" style="position:relative;">출처<a href="#%EC%B6%9C%EC%B2%98" aria-label="출처 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p><em>프란세스코 스트라츨로, <a href="https://search.shopping.naver.com/book/search?bookTabType=ALL&#x26;pageIndex=1&#x26;pageSize=40&#x26;query=%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%20%EC%97%86%EB%8A%94%20%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C%20%EA%B0%9C%EB%B0%9C&#x26;sort=REL">『프레임워크 없는 프론트엔드 개발』</a>, 에이콘 출판(2021.01.21.)</em></p></section></main></article></section><aside class="TOC__Container-sc-1ylks3q-0 hmzKTL"><h2>ON THIS PAGE</h2><ul><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/6장_라우터/#싱글-페이지-애플리케이션">싱글 페이지 애플리케이션</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/6장_라우터/#라우팅-시스템">라우팅 시스템</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/6장_라우터/#프래그먼트-식별자를-이용한-라우터-구현">프래그먼트 식별자를 이용한 라우터 구현</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/6장_라우터/#정규식을-통한-경로-매개변수-추출">정규식을 통한 경로 매개변수 추출</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/6장_라우터/#히스토리-api를-이용한-라우터">히스토리 API를 이용한 라우터</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/6장_라우터/#출처">출처</a></li></ul></aside></div></main><footer class="Footer__Container-sc-13p6nst-0 dndVdK"><section><span>© rheech22 2022</span></section></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/책/프레임워크_없는_프론트엔드_개발/6장_라우터/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-a177ee0a1f3fb6ba3cfa.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-5bef5c84fb8d1a3b27f0.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-d0095af23451b1cf0507.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-9e4cd90f25155ddd88c8.js\"],\"component---src-pages-search-tsx\":[\"/component---src-pages-search-tsx-179c6abce8f40ff0aa91.js\"],\"component---src-pages-wiki-index-tsx\":[\"/component---src-pages-wiki-index-tsx-6d7ef39e98279b545d70.js\"],\"component---src-templates-wiki-template-tsx\":[\"/component---src-templates-wiki-template-tsx-b214d59aa8aad9f1445d.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="a3f8a9cf834bcf901046";</script><script src="/webpack-runtime-7214f76927fe88a28fd6.js" async></script><script src="/framework-31fd9fa701293a5c6789.js" async></script><script src="/app-a177ee0a1f3fb6ba3cfa.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>