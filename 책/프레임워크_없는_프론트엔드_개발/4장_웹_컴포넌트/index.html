<!DOCTYPE html><html lang="ko-KR"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.11.0"/><meta name="theme-color" content="#161b22"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" data-gatsby-head="true"/><meta name="description" content="웹 컴포넌트 웹 컴포넌트는 세 가지 주요 내용을 포함한다. HTML 템플릿: 마크업에 포함된 템플릿 요소를 화면에 그리진 않는다. 대신 자바스크립트가 템플릿을 사용해서 DOM을 동적으로 생성할 수 있다. Shadow DOM: Shadow DOM의 핵…" data-gatsby-head="true"/><meta name="image" data-gatsby-head="true"/><meta name="og:title" content="conerstone" data-gatsby-head="true"/><meta name="og:description" content="웹 컴포넌트 웹 컴포넌트는 세 가지 주요 내용을 포함한다. HTML 템플릿: 마크업에 포함된 템플릿 요소를 화면에 그리진 않는다. 대신 자바스크립트가 템플릿을 사용해서 DOM을 동적으로 생성할 수 있다. Shadow DOM: Shadow DOM의 핵…" data-gatsby-head="true"/><meta name="og:type" content="website" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="4장 웹 컴포넌트 | conerstone" data-gatsby-head="true"/><meta name="twitter:url" content="https://rheech22.github.io/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트" data-gatsby-head="true"/><meta name="twitter:description" content="웹 컴포넌트 웹 컴포넌트는 세 가지 주요 내용을 포함한다. HTML 템플릿: 마크업에 포함된 템플릿 요소를 화면에 그리진 않는다. 대신 자바스크립트가 템플릿을 사용해서 DOM을 동적으로 생성할 수 있다. Shadow DOM: Shadow DOM의 핵…" data-gatsby-head="true"/><meta name="twitter:image" content="https://rheech22.github.ioundefined" data-gatsby-head="true"/><meta name="twitter:creator" content="@@rheech22" data-gatsby-head="true"/><meta name="naver-site-verification" content="45d911481aa02bda5a391b5f2474bc61356de3f8" data-gatsby-head="true"/><meta http-equiv="Permissions-Policy" content="interest-cohort=(), user-id=()" data-gatsby-head="true"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0DM3BCWTDS"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-0DM3BCWTDS', {"send_page_view":false});
      }
      </script><style data-styled="" data-styled-version="6.0.7">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,menu,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;}/*!sc*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block;}/*!sc*/
*[hidden]{display:none;}/*!sc*/
body{line-height:1;}/*!sc*/
menu,ol,ul{list-style:none;}/*!sc*/
blockquote,q{quotes:none;}/*!sc*/
blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}/*!sc*/
table{border-collapse:collapse;border-spacing:0;}/*!sc*/
@font-face{font-family:BlinkMacSystemFont;src:local('※');font-weight:400;font-style:normal;unicode-range:U+0041-005A,U+0061-007A,U+0030-0039;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
html,body{scroll-behavior:smooth;margin:0;}/*!sc*/
body{font-family:'Spoqa Han Sans',BlinkMacSystemFont,Arial,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;width:100%;background-color:#000000;color:#C9D1D9;min-height:100vh;line-height:1.5;transition:all .5s;}/*!sc*/
body #gatsby-focus-wrapper{max-width:1440px;padding:0 15px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column;}/*!sc*/
body main{font-size:16px;width:100%;}/*!sc*/
body a{color:unset;}/*!sc*/
data-styled.g2[id="sc-global-hGiQiZ1"]{content:"sc-global-hGiQiZ1,"}/*!sc*/
.dndVdK{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;border-top:1px solid #222222;transition:border-color 0.5s;margin-top:auto;width:100%;font-size:12px;text-align:center;font-weight:400;color:#bac4ce;}/*!sc*/
.dndVdK>section{padding:48px 8px;}/*!sc*/
data-styled.g3[id="Footer__Container-sc-13p6nst-0"]{content:"dndVdK,"}/*!sc*/
.esCaBN:focus{outline:none;}/*!sc*/
data-styled.g5[id="Textbox__Input-sc-vlag4q-0"]{content:"esCaBN,"}/*!sc*/
.hRTaSi{border-radius:8px;width:140px;height:48px;font-weight:400;position:relative;transition:all 0.5s;}/*!sc*/
@media (min-width: 768px){.hRTaSi:focus-within{width:544px;}.hRTaSi:focus-within>ul{display:block;}}/*!sc*/
.hRTaSi>input{border:none;border-radius:8px;padding:0 12px;width:100%;height:100%;background-color:#222222;color:#fff;font-size:14px;transition:background-color 0.5s;}/*!sc*/
.hRTaSi>input::placeholder{color:#a7a7a7;}/*!sc*/
.hRTaSi>input:focus{color:#fff;background-color:#383838;}/*!sc*/
@media (min-width: 768px){.hRTaSi>input:focus{border-bottom-left-radius:6px;border-bottom-right-radius:6px;}}/*!sc*/
.hRTaSi>input:focus::placeholder{color:#757D86;}/*!sc*/
data-styled.g6[id="SearchBar__Container-sc-6n5xnu-0"]{content:"hRTaSi,"}/*!sc*/
.cgshUI{display:flex;flex-direction:row;align-items:center;justify-content:normal;position:sticky;top:0;width:100%;min-height:71px;opacity:0.9;background-color:hsla(0, 0%, 0%, 0.5);backdrop-filter:blur(20px);z-index:1;transition:all 0.5s;}/*!sc*/
data-styled.g8[id="Header__Container-sc-z8t49p-0"]{content:"cgshUI,"}/*!sc*/
.erKfrX{display:flex;flex-direction:row;align-items:center;justify-content:center;min-width:38px;height:38px;transition:all 2s;}/*!sc*/
@media (min-width: 768px){.erKfrX{display:none;}}/*!sc*/
.erKfrX svg{width:20px;height:20px;transform:translateY(1px);}/*!sc*/
.erKfrX svg g>path{stroke:#f0f6fc;}/*!sc*/
data-styled.g9[id="Header__HomeButton-sc-z8t49p-1"]{content:"erKfrX,"}/*!sc*/
.fWSnbl{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;display:none;color:#f0f6fc;text-decoration:none;transition:color 2s;}/*!sc*/
@media (min-width: 768px){.fWSnbl{display:block;}}/*!sc*/
.fWSnbl>h1{font-size:24px;font-weight:600;white-space:nowrap;}/*!sc*/
data-styled.g10[id="Header__Title-sc-z8t49p-2"]{content:"fWSnbl,"}/*!sc*/
.iscvfN{position:relative;z-index:0;margin-right:8px;border:none;border-radius:50%;background:none;min-width:38px;min-height:38px;overflow:hidden;cursor:pointer;transition:box-shadow 2s;}/*!sc*/
@media (min-width: 768px){.iscvfN{margin-left:8px;}}/*!sc*/
@media (hover:hover){.iscvfN:hover{box-shadow:rgb(109,110,129) 1.5px 1.5px 3px 0px inset,rgba(109,110,129,0.5) -1.5px -1.5px 3px 1px inset;background-image:linear-gradient( to right bottom,#000000,#211e1f,#3b353b,#55505a,#6d6c7b,#6d6e81,#6b7187,#69748d,#535c78,#3e4563,#2b304e,#181b3a );}}/*!sc*/
data-styled.g11[id="Header__Button-sc-z8t49p-3"]{content:"iscvfN,"}/*!sc*/
.dkdLLc{position:absolute;top:19px;right:-32px;border:1px dotted transparent;border-radius:50%;width:100px;height:100px;transition:border-color 2s;}/*!sc*/
@media (hover:hover){.dkdLLc:hover{border-color:#C9D1D9;}.dkdLLc:hover svg path{fill:ivory;}}/*!sc*/
.dkdLLc>div{position:absolute;top:40px;right:40px;border-radius:50%;border:none;padding:0;width:20px;height:20px;background:none;outline:none;}/*!sc*/
.dkdLLc>div:first-of-type{animation:ZmWYm 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.dkdLLc>div:last-of-type{animation:dGgAwC 1.5s cubic-bezier(0.645, 0.045, 0.355, 1.000) forwards;}/*!sc*/
.dkdLLc>div svg{width:20px;height:20px;transform:rotate(90deg);}/*!sc*/
.dkdLLc>div svg path{fill:#fff;}/*!sc*/
data-styled.g12[id="Header__CircleLayout-sc-z8t49p-4"]{content:"dkdLLc,"}/*!sc*/
.eVMkLI{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-left:auto;font-weight:500;}/*!sc*/
.eVMkLI>a{text-decoration:none;}/*!sc*/
.eVMkLI>a:hover{color:#F8EA18;}/*!sc*/
data-styled.g13[id="Header__Index-sc-z8t49p-5"]{content:"eVMkLI,"}/*!sc*/
.hmzKTL{position:sticky;top:163px;right:0px;display:none;min-width:fit-content;height:fit-content;overflow-y:scroll;color:#C9D1D9;}/*!sc*/
.hmzKTL::-webkit-scrollbar{display:none;}/*!sc*/
.hmzKTL h2{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;margin-bottom:12px;padding:8px 10px;font-size:14px;font-weight:500;letter-spacing:0.025em;transition:all 0.5s;}/*!sc*/
.hmzKTL ul{padding-left:20px;}/*!sc*/
.hmzKTL li+li{margin-top:8px;}/*!sc*/
data-styled.g15[id="TOC__Container-sc-1ylks3q-0"]{content:"hmzKTL,"}/*!sc*/
.ksAkVR{display:flex;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:16px;padding-right:10px;max-width:215px;min-width:130px;width:100%;background-color:none;color:#8b949e;font-size:12px;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.ksAkVR:hover:hover{background-color:#222222;}}/*!sc*/
.ksAkVR a{padding:6px 0;width:100%;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
.bqfvvc{display:flex;align-items:center;margin-left:auto;border-top-left-radius:0.5em;border-bottom-left-radius:0.5em;padding-left:24px;padding-right:10px;max-width:215px;min-width:130px;width:100%;background-color:none;color:#8b949e;font-size:11px;transition:all 50ms ease-in-out;}/*!sc*/
@media (hover:hover){.bqfvvc:hover:hover{background-color:#222222;}}/*!sc*/
.bqfvvc a{padding:5px 0;width:100%;text-decoration:unset;white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis;}/*!sc*/
data-styled.g16[id="TOC__List-sc-1ylks3q-1"]{content:"ksAkVR,bqfvvc,"}/*!sc*/
.bpQNeS{display:grid;grid-template-columns:auto;grid-template-rows:auto auto;grid-template-areas:'post' 'post' 'comments';}/*!sc*/
@media (min-width: 1080px){.bpQNeS{grid-template-columns:10fr 10fr 1fr;grid-template-rows:auto auto;grid-template-areas:'post post toc' 'post post toc' 'comments comments .';}}/*!sc*/
.bpQNeS>section{grid-area:post;}/*!sc*/
@media (min-width: 768px){.bpQNeS>section{max-width:826px;}}/*!sc*/
.bpQNeS>aside{grid-area:toc;}/*!sc*/
@media (min-width: 1280px){.bpQNeS>aside{display:flex;flex-direction:column;align-items:flex-start;justify-content:normal;}}/*!sc*/
.bpQNeS>div{grid-area:comments;margin:0 auto;}/*!sc*/
@media (min-width: 768px){.bpQNeS>div{max-width:826px;}}/*!sc*/
data-styled.g17[id="styles__Container-sc-4114r5-0"]{content:"bpQNeS,"}/*!sc*/
.cOLaBC{display:flex;flex-direction:row;align-items:normal;justify-content:center;margin:72px auto 72px auto;height:auto;width:100%;}/*!sc*/
data-styled.g18[id="styles__Section-sc-4114r5-1"]{content:"cOLaBC,"}/*!sc*/
.iQVJjY{padding:20px 0;width:100%;display:flex;flex-direction:column;align-items:normal;justify-content:normal;}/*!sc*/
data-styled.g19[id="styles__Article-sc-4114r5-2"]{content:"iQVJjY,"}/*!sc*/
.hLCEhK{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;font-weight:500;padding:10px 0;}/*!sc*/
.hLCEhK>div>a{text-underline-position:under;}/*!sc*/
.hLCEhK>div>a:hover{color:#F8EA18;}/*!sc*/
.hLCEhK>div>svg{margin:0 4px;transform:rotate(90deg);}/*!sc*/
data-styled.g20[id="styles__Nav-sc-4114r5-3"]{content:"hLCEhK,"}/*!sc*/
.dwxKPC{margin-bottom:26px;}/*!sc*/
data-styled.g21[id="styles__Header-sc-4114r5-4"]{content:"dwxKPC,"}/*!sc*/
.KuGeo>section:nth-child(1){font-size:16px;}/*!sc*/
@media (min-width: 768px){.KuGeo>section:nth-child(1){font-size:18px;}}/*!sc*/
.KuGeo>section:nth-child(1) h1,.KuGeo>section:nth-child(1) h2,.KuGeo>section:nth-child(1) h3,.KuGeo>section:nth-child(1) h4,.KuGeo>section:nth-child(1) h5,.KuGeo>section:nth-child(1) h6{font-weight:600;}/*!sc*/
.KuGeo>section:nth-child(1) h1 .header-anchor,.KuGeo>section:nth-child(1) h2 .header-anchor,.KuGeo>section:nth-child(1) h3 .header-anchor,.KuGeo>section:nth-child(1) h4 .header-anchor,.KuGeo>section:nth-child(1) h5 .header-anchor,.KuGeo>section:nth-child(1) h6 .header-anchor{fill:#F8EA18;}/*!sc*/
.KuGeo>section:nth-child(1) h1:not(:first-of-type),.KuGeo>section:nth-child(1) h2:not(:first-of-type),.KuGeo>section:nth-child(1) h3:not(:first-of-type),.KuGeo>section:nth-child(1) h4:not(:first-of-type),.KuGeo>section:nth-child(1) h5:not(:first-of-type),.KuGeo>section:nth-child(1) h6:not(:first-of-type){margin-top:1.2em;}/*!sc*/
.KuGeo>section:nth-child(1) h1,.KuGeo>section:nth-child(1) h2{padding-bottom:0.2em;border-bottom:1px solid #222222;transition:border-color 0.5s;}/*!sc*/
.KuGeo>section:nth-child(1) h1{margin-block-start:1em;margin-block-end:1em;font-size:36px;}/*!sc*/
.KuGeo>section:nth-child(1) h2{margin-block-start:0.83em;margin-block-end:0.83em;font-size:28.8px;}/*!sc*/
.KuGeo>section:nth-child(1) h3{margin-block-start:1em;margin-block-end:1em;font-size:21.6px;}/*!sc*/
.KuGeo>section:nth-child(1) h4{margin-block-start:1.22em;margin-block-end:1.22em;font-size:19.8px;}/*!sc*/
.KuGeo>section:nth-child(1) em{font-style:oblique;}/*!sc*/
.KuGeo>section:nth-child(1) a{text-underline-position:under;}/*!sc*/
.KuGeo>section:nth-child(1) a:hover{color:#F8EA18;}/*!sc*/
.KuGeo>section:nth-child(1) p{display:block;margin-block-start:1em;margin-block-end:1em;word-break:break-word;line-height:32px;}/*!sc*/
.KuGeo>section:nth-child(1) ol,.KuGeo>section:nth-child(1) ul{padding-left:40px;}/*!sc*/
.KuGeo>section:nth-child(1) ul{list-style-type:disc;}/*!sc*/
.KuGeo>section:nth-child(1) ol{list-style-type:decimal;}/*!sc*/
.KuGeo>section:nth-child(1) li{display:list-item;text-align:-webkit-match-parent;line-height:32px;}/*!sc*/
.KuGeo>section:nth-child(1) li p{margin:0;}/*!sc*/
.KuGeo>section:nth-child(1) table{display:block;border-color:gray;border-spacing:0;border-collapse:collapse;max-width:100%;overflow:auto;font-size:16px;transition:all 0.5s;}/*!sc*/
.KuGeo>section:nth-child(1) table thead{display:table-header-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.KuGeo>section:nth-child(1) table tbody{display:table-row-group;vertical-align:middle;border-color:inherit;}/*!sc*/
.KuGeo>section:nth-child(1) table tr{display:table-row;vertical-align:inherit;border:inherit;background-color:#0d1117;border-top-width:1px;border-top-style:solid;border-top-color:#222222;}/*!sc*/
.KuGeo>section:nth-child(1) table tr:nth-of-type(2n){background-color:#25282E;}/*!sc*/
.KuGeo>section:nth-child(1) table th,.KuGeo>section:nth-child(1) table td{display:table-cell;vertical-align:inherit;padding:6px 13px;border-width:1px;border-style:solid;border-color:#30363d;}/*!sc*/
.KuGeo>section:nth-child(1) blockquote{padding:12px 20px 12px 28px;margin:30px 0px;border-left:4px solid #C9D1D9;font-family:Georgia,serif;font-style:italic;text-align:justify;font-size:20px;line-height:1.2;transition:all 0.5s;}/*!sc*/
.KuGeo>section:nth-child(1) blockquote p{margin:0;}/*!sc*/
.KuGeo>section:nth-child(1) code{margin:0;padding:0.2em 0.4em;background-color:rgba(135,131,120,0.15);color:#BF616A;border-radius:6px;font-size:85%;font-family:SFMono-Regular,Menlo,Consolas,Liberation Mono,monospace;}/*!sc*/
.KuGeo>section:nth-child(1) strong{font-weight:bold;}/*!sc*/
.KuGeo>section:nth-child(1) deckgo-highlight-code{--deckgo-highlight-code-carbon-toolbar-display:none;--deckgo-highlight-code-white-space:pre-wrap;max-width:90vw;font-size:3vw;margin-bottom:32px;}/*!sc*/
@media (min-width: 425px){.KuGeo>section:nth-child(1) deckgo-highlight-code{font-size:14px;}}/*!sc*/
.KuGeo>section:nth-child(1) img{max-width:90vw;}/*!sc*/
@media (min-width: 768px){.KuGeo>section:nth-child(1) img{max-width:694px;}}/*!sc*/
data-styled.g22[id="styles__Main-sc-4114r5-5"]{content:"KuGeo,"}/*!sc*/
.ibrFQC{margin-bottom:4px;font-size:36px;font-weight:600;}/*!sc*/
@media (min-width: 425px){.ibrFQC{font-size:42px;}}/*!sc*/
data-styled.g23[id="styles__Title-sc-4114r5-6"]{content:"ibrFQC,"}/*!sc*/
.kJnDSb{font-family:'Sora','Open Sans','Helvetica Neue',sans-serif;color:#8b949e;font-size:14px;}/*!sc*/
.kJnDSb>div{display:flex;flex-direction:column;align-items:flex-end;justify-content:normal;}/*!sc*/
.kJnDSb>div a{text-underline-position:under;}/*!sc*/
.kJnDSb>div a:hover{color:#F8EA18;}/*!sc*/
data-styled.g24[id="styles__SubTitle-sc-4114r5-7"]{content:"kJnDSb,"}/*!sc*/
@keyframes ZmWYm{from{transform:rotate(90deg) translate(50px) translateZ(10px);}to{transform:rotate(270deg) translate(50px) translateZ(10px);}}/*!sc*/
data-styled.g26[id="sc-keyframes-ZmWYm"]{content:"ZmWYm,"}/*!sc*/
@keyframes dGgAwC{from{transform:rotate(90deg) translate(-50px) translateZ(10px);}to{transform:rotate(270deg) translate(-50px) translateZ(10px);}}/*!sc*/
data-styled.g27[id="sc-keyframes-dGgAwC"]{content:"dGgAwC,"}/*!sc*/
</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .header-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .header-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .header-anchor svg,
    h2 .header-anchor svg,
    h3 .header-anchor svg,
    h4 .header-anchor svg,
    h5 .header-anchor svg,
    h6 .header-anchor svg {
      visibility: hidden;
    }
    h1:hover .header-anchor svg,
    h2:hover .header-anchor svg,
    h3:hover .header-anchor svg,
    h4:hover .header-anchor svg,
    h5:hover .header-anchor svg,
    h6:hover .header-anchor svg,
    h1 .header-anchor:focus svg,
    h2 .header-anchor:focus svg,
    h3 .header-anchor:focus svg,
    h4 .header-anchor:focus svg,
    h5 .header-anchor:focus svg,
    h6 .header-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - -200)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=6d5c0719d6ce39c07b53ce38158aed46" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/favicons/android-chrome-192x192.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="apple-touch-icon" sizes="512x512" href="/favicons/android-chrome-512x512.png?v=6d5c0719d6ce39c07b53ce38158aed46"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-gatsby-head="true">4장 웹 컴포넌트 | conerstone</title><link as="style" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Sora:wght@100;200;300;400;500&amp;display=swap" data-gatsby-head="true"/><link as="style" rel="stylesheet" href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" data-gatsby-head="true"/><script type="application/ld+json" data-gatsby-head="true">
            {
              "@context": "https://schema.org",
              "@type": "HowTo",
              "url": "https://rheech22.github.io/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트",
              "headline": "conerstone",
              "datePublished": "2023-02-19",
              "dateModified": "2023-08-22 00:38:57 +0900",
              "image": "[]"
            }
          </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__Container-sc-z8t49p-0 cgshUI"><a tabindex="-1" class="Header__HomeButton-sc-z8t49p-1 erKfrX" href="/"><svg viewBox="0 0 21 21" fill="currentColor" height="1em" width="1em"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M1.5 10.5l9-9 9 9"></path><path d="M3.5 8.5v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path></g></svg></a><a tabindex="-1" class="Header__Title-sc-z8t49p-2 fWSnbl" href="/"><h1>conerstone</h1></a><button tabindex="-1" aria-label="switch display mode" class="Header__Button-sc-z8t49p-3 iscvfN"><div class="Header__CircleLayout-sc-z8t49p-4 dkdLLc"><div><svg width="30px" height="30px" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M26.25 14.936C26.25 21.107 21.097 26.25 14.656 26.25C9.761 26.25 5.509 23.55 3.835 19.436C3.706 19.05 3.706 18.664 3.963 18.407C4.221 18.15 4.608 18.021 4.994 18.15C5.638 18.279 6.282 18.407 6.798 18.407C11.951 18.407 16.073 14.421 16.073 9.407C16.073 7.864 15.815 6.579 15.042 5.036C14.913 4.779 14.913 4.393 15.171 4.136C15.429 3.879 15.686 3.75 16.073 3.75C21.87 4.393 26.25 9.279 26.25 14.936Z" fill="#030D45"></path></svg></div><div><svg width="30px" height="30px" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15 9.375c-3.1 0 -5.625 2.525 -5.625 5.625s2.525 5.625 5.625 5.625 5.625 -2.525 5.625 -5.625 -2.525 -5.625 -5.625 -5.625zm14.438 4.717l-5.549 -2.771 1.963 -5.883c0.264 -0.797 -0.492 -1.553 -1.283 -1.283l-5.883 1.963 -2.777 -5.555c-0.375 -0.75 -1.441 -0.75 -1.816 0l-2.771 5.549L5.432 4.148c-0.797 -0.264 -1.553 0.492 -1.283 1.283l1.963 5.883 -5.549 2.777c-0.75 0.375 -0.75 1.441 0 1.816l5.549 2.771 -1.963 5.889c-0.264 0.797 0.492 1.553 1.283 1.283l5.883 -1.963 2.771 5.549c0.375 0.75 1.441 0.75 1.816 0l2.771 -5.549 5.883 1.963c0.797 0.264 1.553 -0.492 1.283 -1.283l-1.963 -5.883 5.549 -2.771c0.762 -0.381 0.762 -1.447 0.012 -1.822zm-9.135 6.211c-2.924 2.924 -7.682 2.924 -10.605 0 -2.924 -2.924 -2.924 -7.682 0 -10.605 2.924 -2.924 7.682 -2.924 10.605 0 2.924 2.924 2.924 7.682 0 10.605z"></path></svg></div></div></button><form class="SearchBar__Container-sc-6n5xnu-0 hRTaSi"><input type="text" placeholder="Search" maxLength="40" class="Textbox__Input-sc-vlag4q-0 esCaBN" value=""/><button type="submit" hidden="" aria-label="Submit Search"></button></form><div class="Header__Index-sc-z8t49p-5 eVMkLI"><a tabindex="-1" href="/wiki-index/"><h2>Index.</h2></a></div></header><main><div class="styles__Container-sc-4114r5-0 bpQNeS"><section class="styles__Section-sc-4114r5-1 cOLaBC"><article class="styles__Article-sc-4114r5-2 iQVJjY"><nav class="styles__Nav-sc-4114r5-3 hLCEhK"><div><a href="/책/">책</a><svg aria-hidden="true" role="img" class="octicon octicon-chevron-up" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path fill-rule="evenodd" d="M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z"></path></svg></div><div><a href="/책/프레임워크_없는_프론트엔드_개발/">프레임워크 없는 프론트엔드 개발</a></div></nav><header class="styles__Header-sc-4114r5-4 dwxKPC"><h1 class="styles__Title-sc-4114r5-6 ibrFQC">4장 웹 컴포넌트</h1><div class="styles__SubTitle-sc-4114r5-7 kJnDSb"><div><span>7<!-- --> min read</span><time dateTime="created at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/index.md" target="_blank" rel="noreferrer">CREATED: <!-- -->19/02/2023</a></time><time dateTime="updated at"><a href="https://github.com/rheech22/rheech22.github.io/commits/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/index.md" target="_blank" rel="noreferrer">UPDATED: <!-- -->21/08/2023</a></time><a href="https://github.com/rheech22/rheech22.github.io/blame/develop/src/wikis/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/index.md" target="_blank" rel="noreferrer">Blame</a></div></div></header><main class="styles__Main-sc-4114r5-5 KuGeo"><section><h2 id="웹-컴포넌트" style="position:relative;">웹 컴포넌트<a href="#%EC%9B%B9-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8" aria-label="웹 컴포넌트 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>웹 컴포넌트는 세 가지 주요 내용을 포함한다.</p>
<ul>
<li>HTML 템플릿: 마크업에 포함된 템플릿 요소를 화면에 그리진 않는다. 대신 자바스크립트가 템플릿을 사용해서 DOM을 동적으로 생성할 수 있다.</li>
<li>Shadow DOM: Shadow DOM의 핵심은 캡슐화로 메인 DOM 트리로부터 독립적인 DOM을 생성할 수 있다. <code>&#x3C;input /></code>, <code>&#x3C;video /></code>와 같은 기본 요소에도 Shadow DOM이 숨겨져 있다.</li>
<li>Custom Elelment: 사용자 정의 요소를 만들고 제어할 수 있는 API로 이 챕터에서 주로 다룰 주제이다.</li>
</ul>
<h2 id="사용자-정의-요소custom-element" style="position:relative;">사용자 정의 요소(Custom Element)<a href="#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%EC%9A%94%EC%86%8Ccustom-element" aria-label="사용자 정의 요소custom element permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>먼저 간단한 사용자 정의 요소를 만들어 보자.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  >
          <code slot="code">&lt;color-box&gt;&lt;/color-box&gt;</code>
        </deckgo-highlight-code>
<p>주의 사항</p>
<ul>
<li>이름에는 반드시 하이픈(-)이 들어가야 한다.</li>
<li>태그를 잘 닫아주어야 한다.</li>
</ul>
<p>어떻게 사용할까? HTML에 사용자 정의 요소를 추가한다.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  highlight-lines="8,11">
          <code slot="code">&lt;html&gt;
    &lt;head&gt;
        &lt;link rel=&quot;shortcut icon&quot; href=&quot;../favicon.ico&quot; /&gt;
        &lt;title&gt;Frameworkless Frontend Development&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
       &lt;button&gt;change everything to tamato !!&lt;/button&gt;
       &lt;color-box&gt;&lt;/color-box&gt;
       &lt;color-box color=&quot;navy&quot;&gt;&lt;/color-box&gt;
       &lt;color-box color=&quot;green&quot;&gt;&lt;/color-box&gt;
       &lt;color-box color=&quot;skyblue&quot;&gt;&lt;/color-box&gt;
       &lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code>
        </deckgo-highlight-code>
<p>사용자 정의 요소도 DOM 요소이기 때문에 <code>HTMLElement</code>를 상속한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// Color.js
export default class Color extends HTMLElement {
  // ... 
}</code>
        </deckgo-highlight-code>
<p><code>customElements.define()</code>는 <a href="https://developer.mozilla.org/ko/docs/Web/API/CustomElementRegistry">CustomElementRegistry</a>에 새로운 사용자 정의 요소를 등록한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// index.js
import Color from &#39;./components/Color.js&#39;;

customElements.define(&#39;color-box&#39;, Color);</code>
        </deckgo-highlight-code>
<p>사용자 정의 요소는 여러 생명주기 함수를 갖는다.</p>
<ul>
<li><code>connectedCallback</code>: 처음으로 DOM에 연결됐을 때 호출</li>
<li><code>disconnectedCallback</code>: DOM으로부터 연결이 해제될 때 호출</li>
<li><code>adoptedCallback</code>: 새로운 다큐먼트로 이동될 때 호출</li>
<li><code>attributeChangedCallback</code>: 특정 속성이 변경될 때 호출</li>
</ul>
<p><code>attributeChangedCallback()</code>로 사용자 정의 요소의 <code>color</code> 속성이 변경될 때 자식 요소의 속성을 변경할 계획이다. 이 메서드는 <code>observedAttributes()</code>가 관찰하는 속성이 변경될 때만 호출된다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">// Color.js

const DEFAULT_COLOR = &#39;black&#39;;

export default class Color extends HTMLElement {
  static get observedAttributes() {
    return [&#39;color&#39;]
  }

  get color() {
    return this.getAttribute(&#39;color&#39;) || DEFAULT_COLOR
  }

  set color(value) {
    this.setAttribute(&#39;color&#39;, value)
  }

  attributeChangedCallback(name, prevState, state) {
    if (!this.div) return;

    if (name === &#39;color&#39;) {
      this.div.style.color = state
      this.div.textContent = state
    }
  }

  connectedCallback() {
    window.requestAnimationFrame(() =&gt; {
      this.div = document.createElement(&#39;div&#39;);

      this.div.textContent = this.color;
      this.div.style.color = this.color;

      this.appendChild(this.div);
    })
  }
}</code>
        </deckgo-highlight-code>
<p>버튼 요소에 모든 요소를 <code>tomato</code> 색으로 바꿔주는 이벤트 핸들러를 연결한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="7,9">
          <code slot="code">// index.js

import Color from &#39;./components/color.js&#39;;

customElements.define(&#39;color-box&#39;, Color);

const changeToTomato = () =&gt; document.querySelectorAll(&#39;color-box&#39;).forEach(div =&gt; div.color = &#39;tomato&#39;);

document.querySelector(&#39;button&#39;).addEventListener(&#39;click&#39;, changeToTomato);</code>
        </deckgo-highlight-code>
<p>순서는 아래와 같다.</p>
<ol>
<li>버튼 클릭 이벤트 발생</li>
<li>핸들러는 해당 요소의 <code>color</code> 속성 변경</li>
<li><code>observedAttributes()</code>는 속성 변경 감지</li>
<li><code>attributeChangedCallback()</code> 호출</li>
<li><code>color</code> 속성에 따라 자식 요소의 스타일, 텍스트 변경</li>
</ol>
<br />
<p>음.. 잘 된다.</p>
<p><img src="/d9015deff7eba1f0b30e2727b3e5a8c6/color.gif" alt="color"></p>
<h2 id="사용자-정의-요소로-구현한-투두-앱" style="position:relative;">사용자 정의 요소로 구현한 투두 앱<a href="#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%EC%9A%94%EC%86%8C%EB%A1%9C-%EA%B5%AC%ED%98%84%ED%95%9C-%ED%88%AC%EB%91%90-%EC%95%B1" aria-label="사용자 정의 요소로 구현한 투두 앱 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p>지난 챕터에서 만들었던 투두 앱을 사용자 정의 요소를 사용한 앱으로 변경한다.</p>
<h3 id="사용자-정의-요소-등록" style="position:relative;">사용자 정의 요소 등록<a href="#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%A0%95%EC%9D%98-%EC%9A%94%EC%86%8C-%EB%93%B1%EB%A1%9D" aria-label="사용자 정의 요소 등록 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>HTML에 아래 사용자 정의 요소를 추가한다.</p>
<ul>
<li><code>&#x3C;custom-app /></code></li>
<li><code>&#x3C;custom-todos /></code></li>
</ul>
<p>기존 루트 요소는 <code>&#x3C;custom-app /></code>요소가 대체한다.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  highlight-lines="35 39">
          <code slot="code">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;todos&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;template id=&quot;todo-footer&quot;&gt;
      &lt;footer class=&quot;footer&quot;&gt;
        &lt;span class=&quot;counter&quot;&gt;&lt;/span&gt;
        &lt;ul class=&quot;filters&quot;&gt;
          &lt;li&gt;&lt;a href=&quot;#/&quot;&gt;전체&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#/active&quot;&gt;진행&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#/completed&quot;&gt;완료&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
        &lt;button class=&quot;clear-completed&quot;&gt;완료 삭제&lt;/button&gt;
      &lt;/footer&gt;
    &lt;/template&gt;
    &lt;template id=&quot;todo-item&quot;&gt;
      &lt;li&gt;
        &lt;div class=&quot;view&quot;&gt;
          &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
          &lt;label&gt;&lt;/label&gt;
          &lt;button class=&quot;destroy&quot;&gt;삭제&lt;/button&gt;
        &lt;/div&gt;
      &lt;/li&gt; 
    &lt;/template&gt;
    &lt;template id=&quot;todo-app&quot;&gt;
      &lt;section class=&quot;todoapp&quot;&gt;
        &lt;header&gt;
          &lt;h1&gt;todos&lt;/h1&gt;
          &lt;input class=&quot;new-todo&quot; placeholder=&quot;할 일 적기&quot; autofocus&gt;
        &lt;/header&gt;
        &lt;section class=&quot;main&quot;&gt;
          &lt;input id=&quot;toggle-all&quot; class=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
          &lt;label for=&quot;toggle-all&quot;&gt;전체 완료&lt;/label&gt;
          &lt;custom-todos&gt;&lt;/custom-todos&gt;
        &lt;/section&gt;
      &lt;/section&gt;
    &lt;/template&gt;
    &lt;custom-app&gt;&lt;/custom-app&gt;
    &lt;script type=&quot;module&quot; src=&quot;index.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;</code>
        </deckgo-highlight-code>
<p>컨트롤러는 레지스트리에 사용자 정의 요소를 등록한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="6,7">
          <code slot="code">// index.js

import App from &#39;./components/App.js&#39;
import Todos from &#39;./components/Todos.js&#39;

window.customElements.define(&#39;custom-app&#39;, App);
window.customElements.define(&#39;custom-todos&#39;, Todos);</code>
        </deckgo-highlight-code>
<h3 id="dom에-연결될-때-하는-일" style="position:relative;">DOM에 연결될 때 하는 일<a href="#dom%EC%97%90-%EC%97%B0%EA%B2%B0%EB%90%A0-%EB%95%8C-%ED%95%98%EB%8A%94-%EC%9D%BC" aria-label="dom에 연결될 때 하는 일 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>돔에 연결될 때 필요한 것들을 <code>connectedCallback()</code>에 적어보자. <code>&#x3C;custom-todos /></code>는 어떤 모양일까?<br>
우선 각 할 일을 담을 목록이 필요하다. <code>&#x3C;ul /></code>을 간단한 템플릿으로 사용한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">export default class Todos extends HTMLElement {
  connectedCallback() {
    this.innerHTML = &#39;&lt;ul class=&quot;todo-list&quot;&gt;&lt;/ul&gt;&#39;;
  }
}</code>
        </deckgo-highlight-code>
<p>각 할 일 요소를 위한 구성은 이미 HMTL의 템플릿 요소로 있기 때문에 가져오기만 하면 된다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="4">
          <code slot="code">export default class Todos extends HTMLElement {
  connectedCallback() {
    this.innerHTML = &#39;&lt;ul class=&quot;todo-list&quot;&gt;&lt;/ul&gt;&#39;;
    this.item = document.getElementById(&#39;todo-item&#39;);
  }
}</code>
        </deckgo-highlight-code>
<p>이벤트 핸들러도 연결한다. 이벤트 위임 방식으로 목록에 이벤트 핸들러를 할당한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="6,18">
          <code slot="code">export default class Todos extends HTMLElement {
  connectedCallback() {
    this.innerHTML = &#39;&lt;ul class=&quot;todo-list&quot;&gt;&lt;/ul&gt;&#39;;
    this.item = document.getElementById(&#39;todo-item&#39;);
  
    this.list = this.querySelector(&#39;ul&#39;);
  
    this.list.addEventListener(&#39;click&#39;, (e) =&gt; {
        if (e.target.matches(&#39;button.destroy&#39;)) {
          this.onDeleteButtonClick(e.target.dataset.index);
        }
    });
  
    this.list.addEventListener(&#39;change&#39;, (e) =&gt; {
        if (e.target.matches(&#39;input.toggle&#39;)) {
          this.onCheckboxClick(e.target.dataset.index);
        }
    })
  }
}</code>
        </deckgo-highlight-code>
<p>마지막으로 상태에 따라 목록을 생성하고 갱신하는 <code>update()</code>를 호출한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="5">
          <code slot="code">export default class Todos extends HTMLElement {
  connectedCallback() {
    // ...상동

    this.update();
  }
}</code>
        </deckgo-highlight-code>
<p><code>update()</code>는 새로운 목록을 채워주는 지난 챕터의 Todos 컴포넌트가 하던 역할을 그대로 하고 있다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">export default class Todos extends HTMLElement {
  connectedCallback() {
    // ...
  }

  update() {
    this.list.innerHTML = &#39;&#39;;

    this.todos.map((todo, index) =&gt; {
      const { text, completed } = todo;

      const element = this.item.content.firstElementChild.cloneNode(true);

      element.querySelector(&#39;label&#39;).textContent = text;

      if (completed) {
        element.classList.add(&#39;completed&#39;);
        element.querySelector(&#39;input.toggle&#39;).checked = true;
      }

      element.querySelector(&#39;input.toggle&#39;).dataset.index = index;
      element.querySelector(&#39;button.destroy&#39;).dataset.index = index;

      return element
    }).forEach((element) =&gt; {
      this.list.appendChild(element)
    })
  }
}</code>
        </deckgo-highlight-code>
<p><code>update()</code>는 <code>this.todos</code>에 접근한다. 이 속성(property)은 사용자 정의 요소의 속성(attribute)으로도 할당되는 특징이 있다. 이 곳에 할 일 목록을 저장한다.</p>
<deckgo-highlight-code language="html" terminal="carbon" theme="one-dark"  >
          <code slot="code">&lt;custom-todos todos=&quot;[]&quot;&gt; ... &lt;custom-todos /&gt;</code>
        </deckgo-highlight-code>
<p><code>todos</code>접근을 위한 게터와 세터를 생성한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="10,20">
          <code slot="code">export default class Todos extends HTMLElement {
  connectedCallback() {
    // ...
  }

  update() {
    // ...
  }

  get todos() {
    if (!this.hasAttribute(&#39;todos&#39;)) {
      return [];
    }

    return JSON.parse(this.getAttribute(&#39;todos&#39;));
  }

  set todos(value) {
    this.setAttribute(&#39;todos&#39;, JSON.stringify(value));
  }
}</code>
        </deckgo-highlight-code>
<h3 id="관찰-대상이-갱신되면-하는-일" style="position:relative;">관찰 대상이 갱신되면 하는 일<a href="#%EA%B4%80%EC%B0%B0-%EB%8C%80%EC%83%81%EC%9D%B4-%EA%B0%B1%EC%8B%A0%EB%90%98%EB%A9%B4-%ED%95%98%EB%8A%94-%EC%9D%BC" aria-label="관찰 대상이 갱신되면 하는 일 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>속성이 바뀔 때마다 새로운 할 일 요소를 동적으로 생성하기 위해  <code>attributeChangedCallback()</code>을 사용한다. <code>update()</code>를 실행하는 이 함수는 <code>observedAttributes()</code>가 관찰하는 <code>todos</code>속성이 바뀔 때만 호출된다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">export default class Todos extends HTMLElement {
  static get observedAttributes() {
    return [&#39;todos&#39;];
  }

  attributeChangedCallback() {
    if (!this.hasChildNodes()) return;

    this.update();
  }

  // 생략
}</code>
        </deckgo-highlight-code>
<h3 id="커스텀-이벤트는-옵저버-패턴의-구현" style="position:relative;">커스텀 이벤트는 옵저버 패턴의 구현?!<a href="#%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%9D%B4%EB%B2%A4%ED%8A%B8%EB%8A%94-%EC%98%B5%EC%A0%80%EB%B2%84-%ED%8C%A8%ED%84%B4%EC%9D%98-%EA%B5%AC%ED%98%84" aria-label="커스텀 이벤트는 옵저버 패턴의 구현 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>마지막으로 이벤트 핸들러를 선언한다. 이 곳에서는 이벤트가 발생하는 사실만을 알려주고 그 때 처리해야 하는 일은 다른 곳에서 결정하도록 하고 싶다면 어떻게 해야 할까? 커스텀 이벤트를 활용한 방법이 있다. 그 전에 먼저 이벤트 레지스트리를 등록한다. 구독하는 곳에서도 쉽게 접근할 수 있도록 컨트롤러에 선언한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="6,9">
          <code slot="code">// index.js

import App from &#39;./components/App.js&#39;
import Todos from &#39;./components/Todos.js&#39;

export const events = {
  deleteItem: &#39;deleteItem&#39;,
  toggleCompleted: &#39;toggleCompleted&#39;,
}

window.customElements.define(&#39;custom-app&#39;, App);
window.customElements.define(&#39;custom-todos&#39;, Todos);</code>
        </deckgo-highlight-code>
<p>이벤트 핸들러는 아래와 같다. 단순히 인덱스를 포함하는 커스텀 이벤트 객체를 생성하고 이벤트를 디스패치한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="20,41">
          <code slot="code">import { events } from &quot;../index.js&quot;;

export default class Todos extends HTMLElement {
  connectedCallback() {
    // ...
  }

  update() {
    // ...
  }

  get todos() { 
    // ... 
  }

  set todos(value) { 
    // ...
  }

  onDeleteButtonClick(index) {
    const event = new CustomEvent(
      events.deleteItem,
      {
        detail: {
          index
        }
      }
    )

    this.dispatchEvent(event)
  }

  onCheckboxClick(index) {
    const event = new CustomEvent(
      events.toggleCompleted,
      {
        detail: {
          index
        }
      }
    )

    this.dispatchEvent(event)
  }
}</code>
        </deckgo-highlight-code>
<p>이 곳에서는 이벤트 발생에 따라 ‘어떤 일을 해야 할지’에 관해 관심을 두지 않아도 된다. 한편 외부에서는 ‘이벤트가 발생하는 경로’에 관한 사실을 몰라도 된다. 자연스럽게 관심사를 분리하고 각자의 역할을 수행한다. 경우에 따라서 중복 코드도 줄일 수 있다. 사실 커스텀 이벤트를 처음 접할 때 그 효용에 관해서 의심을 가졌는데, 챕터의 예제를 보고 괜히 나온 API가 아니라는 느낌을 받았다. 커스텀 이벤트가 옵저버 패턴의 구현체라고 소개하는 글을 보기도 했다. 관심있으면 아래 링크를 참고하자.</p>
<p><a href="https://stackoverflow.com/questions/57036994/how-are-custom-events-in-javascript-different-from-simply-calling-regular-functi">How are custom events in JavaScript different from simply calling regular functions?</a></p>
<p>앱 전체를 구성하는 <code>&#x3C;custom-app /></code>은 상태를 선언하고 todo-app 템플릿을 사용한다. 책에서는 <code>constructor()</code>에서 미리 상태와 템플릿을 선언하고 있지만, DOM에 처음 연결될 때 초기화해도 무리가 없을 것 같아 <code>connectedCallback()</code>이 그 책임을 갖도록 했다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  >
          <code slot="code">export default class App extends HTMLElement {
  connectedCallback() {
    this.state = {
      todos: [],
      filter: &#39;All&#39;
    }

    this.template = document.getElementById(&#39;todo-app&#39;);
  }
}</code>
        </deckgo-highlight-code>
<p>렌더링도 해야 한다. 특별한 내용이 있다면 세 개의 이벤트 중 두 개는 레지스트리에 등록된 커스텀 이벤트라는 사실이다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="10,28">
          <code slot="code">export default class App extends HTMLElement {
  connectedCallback() {
    this.state = {
      todos: [],
      filter: &#39;All&#39;
    }

    this.template = document.getElementById(&#39;todo-app&#39;);

    window.requestAnimationFrame(() =&gt; {
      const content = this.template.content.firstElementChild.cloneNode(true);

      this.appendChild(content);

      this.querySelector(&#39;.new-todo&#39;).addEventListener(&#39;keypress&#39;, (e) =&gt; {
        if (e.key === &#39;Enter&#39;) {
          this.addItem(e.target.value);

          e.target.value = &#39;&#39;;
        }
      })

      this.list = this.querySelector(&#39;custom-todos&#39;);
      this.list.addEventListener(events.deleteItem, (e) =&gt; this.deleteItem(e.detail.index));
      this.list.addEventListener(events.toggleCompleted, (e) =&gt; this.toggleCompleted(e.detail.index));

      this.sync();
    })
  }
}</code>
        </deckgo-highlight-code>
<p>이벤트가 발생하면 어떤 일을 할지 이곳에서 정한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="6,30">
          <code slot="code">export default class App extends HTMLElement {
  connectedCallback() {
    // ...
  }

  addItem(text) {
    const item = { text, completed: false };

    this.state.todos.push(item);

    this.sync();
  }

  deleteItem(index) {
    this.state.todos.splice(index, 1);

    this.sync();
  }

  toggleCompleted(index) {
    const { todos } = this.state;

    todos.splice(index, 1, {
      text: todos[index].text,
      completed: !todos[index].completed
    });

    this.state.todos = todos;
    this.sync();
  }
}</code>
        </deckgo-highlight-code>
<p>모든 메서드에서 호출하고 있는 <code>sync()</code>는 상태에 따라 <code>&#x3C;custom-todos /></code>의 속성을 갱신한다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="6,10">
          <code slot="code">export default class App extends HTMLElement {
  connectedCallback() {
    // ...
  }

  sync() {
    const { todos } = this.state;

    this.list.todos = todos;
  }

  addItem(text) {
    // ...
  }

  deleteItem(index) {
    // ...
  }

  toggleCompleted(index) {
    // ...
  }
}</code>
        </deckgo-highlight-code>
<h3 id="검증하기" style="position:relative;">검증하기<a href="#%EA%B2%80%EC%A6%9D%ED%95%98%EA%B8%B0" aria-label="검증하기 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h3>
<p>이제 할 일 추가, 삭제, 체크 그리고 체크의 해제 모두 잘 동작한다.</p>
<p><img src="/845b1ca2a307ff1a3d48d7f70d092358/todos.gif" alt="todos"></p>
<p>유사한 내용이라 자세히 다루진 않겠지만 todo-footer 템플릿을 사용하는 <code>&#x3C;custom-footer /></code>도 추가했다.</p>
<deckgo-highlight-code language="js" terminal="carbon" theme="one-dark"  highlight-lines="8,9 14">
          <code slot="code">import App from &#39;./components/App.js&#39;
import Footer from &#39;./components/Footer.js&#39;;
import Todos from &#39;./components/Todos.js&#39;

export const events = {
  deleteItem: &#39;deleteItem&#39;,
  toggleCompleted: &#39;toggleCompleted&#39;,
  filterItem: &#39;filterItem&#39;,
  clearCompleted: &#39;clearCompleted&#39;
}

window.customElements.define(&#39;custom-app&#39;, App);
window.customElements.define(&#39;custom-todos&#39;, Todos);
window.customElements.define(&#39;custom-footer&#39;, Footer);</code>
        </deckgo-highlight-code>
<p>이제 필터도 동작한다.</p>
<p><img src="/d6de660de968d5500894ab1285f8700d/with_filter.gif" alt="withFilter"></p>
<h2 id="관련-라이브러리" style="position:relative;">관련 라이브러리<a href="#%EA%B4%80%EB%A0%A8-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%AC" aria-label="관련 라이브러리 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements">MDN</a>에서 웹 컴포넌트의 추상화 레벨을 높인 여러 라이브러리를 소개하고 있는데 관심있다면 한 번 둘러보는 것을 추천한다. 나는 <a href="https://github.com/devpunks/snuggsi">snuggsi</a>의 맛만 살짝 봤는데 괜찮은 경험이었다.</p>
<ul>
<li><a href="https://www.fast.design/docs/fast-element/getting-started/">FASTElement</a></li>
<li><a href="https://github.com/devpunks/snuggsi">snuggsi</a></li>
<li><a href="https://x-tag.github.io/">X-Tag</a></li>
<li><a href="https://slimjs.com/">Slim.js</a></li>
<li><a href="https://lit.dev/">Lit</a></li>
<li><a href="https://www.htmlelements.com/">Smart</a></li>
<li><a href="https://stenciljs.com/">Stencil</a></li>
<li><a href="https://github.com/WebReflection/hyperHTML-Element">hyperHTML-Element</a></li>
<li><a href="https://www.dataformsjs.com/">DataFormsJS</a></li>
<li><a href="https://tmorin.github.io/ceb/">Custom-Element-Builder</a>.</li>
</ul>
<h2 id="출처" style="position:relative;">출처<a href="#%EC%B6%9C%EC%B2%98" aria-label="출처 permalink" class="header-anchor after"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2>
<p><em>프란세스코 스트라츨로, <a href="https://search.shopping.naver.com/book/search?bookTabType=ALL&#x26;pageIndex=1&#x26;pageSize=40&#x26;query=%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%20%EC%97%86%EB%8A%94%20%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C%20%EA%B0%9C%EB%B0%9C&#x26;sort=REL">『프레임워크 없는 프론트엔드 개발』</a>, 에이콘 출판(2021.01.21.)</em></p></section></main></article></section><aside class="TOC__Container-sc-1ylks3q-0 hmzKTL"><h2>ON THIS PAGE</h2><ul><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#웹-컴포넌트">웹 컴포넌트</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#사용자-정의-요소custom-element">사용자 정의 요소(Custom Element)</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#사용자-정의-요소로-구현한-투두-앱">사용자 정의 요소로 구현한 투두 앱</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#사용자-정의-요소-등록">사용자 정의 요소 등록</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#dom에-연결될-때-하는-일">DOM에 연결될 때 하는 일</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#관찰-대상이-갱신되면-하는-일">관찰 대상이 갱신되면 하는 일</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#커스텀-이벤트는-옵저버-패턴의-구현">커스텀 이벤트는 옵저버 패턴의 구현?!</a></li><li class="TOC__List-sc-1ylks3q-1 bqfvvc"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#검증하기">검증하기</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#관련-라이브러리">관련 라이브러리</a></li><li class="TOC__List-sc-1ylks3q-1 ksAkVR"><a href="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/#출처">출처</a></li></ul></aside></div></main><footer class="Footer__Container-sc-13p6nst-0 dndVdK"><section><span>© rheech22 2022</span></section></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/책/프레임워크_없는_프론트엔드_개발/4장_웹_컴포넌트/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-800d4df7d2673a7e516e.js\"],\"component---cache-caches-gatsby-plugin-offline-app-shell-js\":[\"/component---cache-caches-gatsby-plugin-offline-app-shell-js-5bef5c84fb8d1a3b27f0.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-d0095af23451b1cf0507.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-2cd1417e3cd8bdead616.js\"],\"component---src-pages-search-tsx\":[\"/component---src-pages-search-tsx-46c45f257736c8342d78.js\"],\"component---src-pages-wiki-index-tsx\":[\"/component---src-pages-wiki-index-tsx-1eb7c72c1f5358d70c36.js\"],\"component---src-templates-wiki-template-tsx\":[\"/component---src-templates-wiki-template-tsx-ee1a2e08cc3d7afdb130.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="6bf128993759fc2b15aa";</script><script src="/webpack-runtime-c884d3580bc76665c799.js" async></script><script src="/framework-31fd9fa701293a5c6789.js" async></script><script src="/app-800d4df7d2673a7e516e.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>